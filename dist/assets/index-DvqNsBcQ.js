var Cx=Object.defineProperty;var ag=t=>{throw TypeError(t)};var Nx=(t,e,n)=>e in t?Cx(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var $e=(t,e,n)=>Nx(t,typeof e!="symbol"?e+"":e,n),Rx=(t,e,n)=>e.has(t)||ag("Cannot "+n);var lg=(t,e,n)=>e.has(t)?ag("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n);var Ba=(t,e,n)=>(Rx(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function n(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(r){if(r.ep)return;r.ep=!0;const l=n(r);fetch(r.href,l)}})();function Od(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function kx(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var r=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(n,s,r.get?r:{enumerable:!0,get:function(){return t[s]}})}),n}var jc={exports:{}},Xo={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ug;function Ix(){if(ug)return Xo;ug=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,r,l){var u=null;if(l!==void 0&&(u=""+l),r.key!==void 0&&(u=""+r.key),"key"in r){l={};for(var f in r)f!=="key"&&(l[f]=r[f])}else l=r;return r=l.ref,{$$typeof:t,type:s,key:u,ref:r!==void 0?r:null,props:l}}return Xo.Fragment=e,Xo.jsx=n,Xo.jsxs=n,Xo}var cg;function Mx(){return cg||(cg=1,jc.exports=Ix()),jc.exports}var _=Mx(),$c={exports:{}},me={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dg;function Dx(){if(dg)return me;dg=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),x=Symbol.iterator;function w(M){return M===null||typeof M!="object"?null:(M=x&&M[x]||M["@@iterator"],typeof M=="function"?M:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,C={};function I(M,J,X){this.props=M,this.context=J,this.refs=C,this.updater=X||E}I.prototype.isReactComponent={},I.prototype.setState=function(M,J){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,J,"setState")},I.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function O(){}O.prototype=I.prototype;function D(M,J,X){this.props=M,this.context=J,this.refs=C,this.updater=X||E}var P=D.prototype=new O;P.constructor=D,A(P,I.prototype),P.isPureReactComponent=!0;var N=Array.isArray;function H(){}var V={H:null,A:null,T:null,S:null},Z=Object.prototype.hasOwnProperty;function Y(M,J,X){var ie=X.ref;return{$$typeof:t,type:M,key:J,ref:ie!==void 0?ie:null,props:X}}function ee(M,J){return Y(M.type,J,M.props)}function fe(M){return typeof M=="object"&&M!==null&&M.$$typeof===t}function he(M){var J={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(X){return J[X]})}var ae=/\/+/g;function ce(M,J){return typeof M=="object"&&M!==null&&M.key!=null?he(""+M.key):J.toString(36)}function Ae(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(H,H):(M.status="pending",M.then(function(J){M.status==="pending"&&(M.status="fulfilled",M.value=J)},function(J){M.status==="pending"&&(M.status="rejected",M.reason=J)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function z(M,J,X,ie,ge){var be=typeof M;(be==="undefined"||be==="boolean")&&(M=null);var Me=!1;if(M===null)Me=!0;else switch(be){case"bigint":case"string":case"number":Me=!0;break;case"object":switch(M.$$typeof){case t:case e:Me=!0;break;case y:return Me=M._init,z(Me(M._payload),J,X,ie,ge)}}if(Me)return ge=ge(M),Me=ie===""?"."+ce(M,0):ie,N(ge)?(X="",Me!=null&&(X=Me.replace(ae,"$&/")+"/"),z(ge,J,X,"",function(io){return io})):ge!=null&&(fe(ge)&&(ge=ee(ge,X+(ge.key==null||M&&M.key===ge.key?"":(""+ge.key).replace(ae,"$&/")+"/")+Me)),J.push(ge)),1;Me=0;var _t=ie===""?".":ie+":";if(N(M))for(var Qe=0;Qe<M.length;Qe++)ie=M[Qe],be=_t+ce(ie,Qe),Me+=z(ie,J,X,be,ge);else if(Qe=w(M),typeof Qe=="function")for(M=Qe.call(M),Qe=0;!(ie=M.next()).done;)ie=ie.value,be=_t+ce(ie,Qe++),Me+=z(ie,J,X,be,ge);else if(be==="object"){if(typeof M.then=="function")return z(Ae(M),J,X,ie,ge);throw J=String(M),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return Me}function K(M,J,X){if(M==null)return M;var ie=[],ge=0;return z(M,ie,"","",function(be){return J.call(X,be,ge++)}),ie}function ne(M){if(M._status===-1){var J=M._result;J=J(),J.then(function(X){(M._status===0||M._status===-1)&&(M._status=1,M._result=X)},function(X){(M._status===0||M._status===-1)&&(M._status=2,M._result=X)}),M._status===-1&&(M._status=0,M._result=J)}if(M._status===1)return M._result.default;throw M._result}var _e=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},Ge={map:K,forEach:function(M,J,X){K(M,function(){J.apply(this,arguments)},X)},count:function(M){var J=0;return K(M,function(){J++}),J},toArray:function(M){return K(M,function(J){return J})||[]},only:function(M){if(!fe(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return me.Activity=b,me.Children=Ge,me.Component=I,me.Fragment=n,me.Profiler=r,me.PureComponent=D,me.StrictMode=s,me.Suspense=m,me.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=V,me.__COMPILER_RUNTIME={__proto__:null,c:function(M){return V.H.useMemoCache(M)}},me.cache=function(M){return function(){return M.apply(null,arguments)}},me.cacheSignal=function(){return null},me.cloneElement=function(M,J,X){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var ie=A({},M.props),ge=M.key;if(J!=null)for(be in J.key!==void 0&&(ge=""+J.key),J)!Z.call(J,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&J.ref===void 0||(ie[be]=J[be]);var be=arguments.length-2;if(be===1)ie.children=X;else if(1<be){for(var Me=Array(be),_t=0;_t<be;_t++)Me[_t]=arguments[_t+2];ie.children=Me}return Y(M.type,ge,ie)},me.createContext=function(M){return M={$$typeof:u,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:l,_context:M},M},me.createElement=function(M,J,X){var ie,ge={},be=null;if(J!=null)for(ie in J.key!==void 0&&(be=""+J.key),J)Z.call(J,ie)&&ie!=="key"&&ie!=="__self"&&ie!=="__source"&&(ge[ie]=J[ie]);var Me=arguments.length-2;if(Me===1)ge.children=X;else if(1<Me){for(var _t=Array(Me),Qe=0;Qe<Me;Qe++)_t[Qe]=arguments[Qe+2];ge.children=_t}if(M&&M.defaultProps)for(ie in Me=M.defaultProps,Me)ge[ie]===void 0&&(ge[ie]=Me[ie]);return Y(M,be,ge)},me.createRef=function(){return{current:null}},me.forwardRef=function(M){return{$$typeof:f,render:M}},me.isValidElement=fe,me.lazy=function(M){return{$$typeof:y,_payload:{_status:-1,_result:M},_init:ne}},me.memo=function(M,J){return{$$typeof:p,type:M,compare:J===void 0?null:J}},me.startTransition=function(M){var J=V.T,X={};V.T=X;try{var ie=M(),ge=V.S;ge!==null&&ge(X,ie),typeof ie=="object"&&ie!==null&&typeof ie.then=="function"&&ie.then(H,_e)}catch(be){_e(be)}finally{J!==null&&X.types!==null&&(J.types=X.types),V.T=J}},me.unstable_useCacheRefresh=function(){return V.H.useCacheRefresh()},me.use=function(M){return V.H.use(M)},me.useActionState=function(M,J,X){return V.H.useActionState(M,J,X)},me.useCallback=function(M,J){return V.H.useCallback(M,J)},me.useContext=function(M){return V.H.useContext(M)},me.useDebugValue=function(){},me.useDeferredValue=function(M,J){return V.H.useDeferredValue(M,J)},me.useEffect=function(M,J){return V.H.useEffect(M,J)},me.useEffectEvent=function(M){return V.H.useEffectEvent(M)},me.useId=function(){return V.H.useId()},me.useImperativeHandle=function(M,J,X){return V.H.useImperativeHandle(M,J,X)},me.useInsertionEffect=function(M,J){return V.H.useInsertionEffect(M,J)},me.useLayoutEffect=function(M,J){return V.H.useLayoutEffect(M,J)},me.useMemo=function(M,J){return V.H.useMemo(M,J)},me.useOptimistic=function(M,J){return V.H.useOptimistic(M,J)},me.useReducer=function(M,J,X){return V.H.useReducer(M,J,X)},me.useRef=function(M){return V.H.useRef(M)},me.useState=function(M){return V.H.useState(M)},me.useSyncExternalStore=function(M,J,X){return V.H.useSyncExternalStore(M,J,X)},me.useTransition=function(){return V.H.useTransition()},me.version="19.2.4",me}var fg;function Ld(){return fg||(fg=1,$c.exports=Dx()),$c.exports}var W=Ld();const M0=Od(W);var Fc={exports:{}},Wo={},Jc={exports:{}},Yc={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hg;function Ux(){return hg||(hg=1,(function(t){function e(z,K){var ne=z.length;z.push(K);e:for(;0<ne;){var _e=ne-1>>>1,Ge=z[_e];if(0<r(Ge,K))z[_e]=K,z[ne]=Ge,ne=_e;else break e}}function n(z){return z.length===0?null:z[0]}function s(z){if(z.length===0)return null;var K=z[0],ne=z.pop();if(ne!==K){z[0]=ne;e:for(var _e=0,Ge=z.length,M=Ge>>>1;_e<M;){var J=2*(_e+1)-1,X=z[J],ie=J+1,ge=z[ie];if(0>r(X,ne))ie<Ge&&0>r(ge,X)?(z[_e]=ge,z[ie]=ne,_e=ie):(z[_e]=X,z[J]=ne,_e=J);else if(ie<Ge&&0>r(ge,ne))z[_e]=ge,z[ie]=ne,_e=ie;else break e}}return K}function r(z,K){var ne=z.sortIndex-K.sortIndex;return ne!==0?ne:z.id-K.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var u=Date,f=u.now();t.unstable_now=function(){return u.now()-f}}var m=[],p=[],y=1,b=null,x=3,w=!1,E=!1,A=!1,C=!1,I=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function P(z){for(var K=n(p);K!==null;){if(K.callback===null)s(p);else if(K.startTime<=z)s(p),K.sortIndex=K.expirationTime,e(m,K);else break;K=n(p)}}function N(z){if(A=!1,P(z),!E)if(n(m)!==null)E=!0,H||(H=!0,he());else{var K=n(p);K!==null&&Ae(N,K.startTime-z)}}var H=!1,V=-1,Z=5,Y=-1;function ee(){return C?!0:!(t.unstable_now()-Y<Z)}function fe(){if(C=!1,H){var z=t.unstable_now();Y=z;var K=!0;try{e:{E=!1,A&&(A=!1,O(V),V=-1),w=!0;var ne=x;try{t:{for(P(z),b=n(m);b!==null&&!(b.expirationTime>z&&ee());){var _e=b.callback;if(typeof _e=="function"){b.callback=null,x=b.priorityLevel;var Ge=_e(b.expirationTime<=z);if(z=t.unstable_now(),typeof Ge=="function"){b.callback=Ge,P(z),K=!0;break t}b===n(m)&&s(m),P(z)}else s(m);b=n(m)}if(b!==null)K=!0;else{var M=n(p);M!==null&&Ae(N,M.startTime-z),K=!1}}break e}finally{b=null,x=ne,w=!1}K=void 0}}finally{K?he():H=!1}}}var he;if(typeof D=="function")he=function(){D(fe)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,ce=ae.port2;ae.port1.onmessage=fe,he=function(){ce.postMessage(null)}}else he=function(){I(fe,0)};function Ae(z,K){V=I(function(){z(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Z=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_next=function(z){switch(x){case 1:case 2:case 3:var K=3;break;default:K=x}var ne=x;x=K;try{return z()}finally{x=ne}},t.unstable_requestPaint=function(){C=!0},t.unstable_runWithPriority=function(z,K){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var ne=x;x=z;try{return K()}finally{x=ne}},t.unstable_scheduleCallback=function(z,K,ne){var _e=t.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?_e+ne:_e):ne=_e,z){case 1:var Ge=-1;break;case 2:Ge=250;break;case 5:Ge=1073741823;break;case 4:Ge=1e4;break;default:Ge=5e3}return Ge=ne+Ge,z={id:y++,callback:K,priorityLevel:z,startTime:ne,expirationTime:Ge,sortIndex:-1},ne>_e?(z.sortIndex=ne,e(p,z),n(m)===null&&z===n(p)&&(A?(O(V),V=-1):A=!0,Ae(N,ne-_e))):(z.sortIndex=Ge,e(m,z),E||w||(E=!0,H||(H=!0,he()))),z},t.unstable_shouldYield=ee,t.unstable_wrapCallback=function(z){var K=x;return function(){var ne=x;x=K;try{return z.apply(this,arguments)}finally{x=ne}}}})(Yc)),Yc}var pg;function Px(){return pg||(pg=1,Jc.exports=Ux()),Jc.exports}var Kc={exports:{}},yt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mg;function Ox(){if(mg)return yt;mg=1;var t=Ld();function e(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(m,p,y){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:b==null?null:""+b,children:m,containerInfo:p,implementation:y}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return yt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,yt.createPortal=function(m,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(m,p,null,y)},yt.flushSync=function(m){var p=u.T,y=s.p;try{if(u.T=null,s.p=2,m)return m()}finally{u.T=p,s.p=y,s.d.f()}},yt.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(m,p))},yt.prefetchDNS=function(m){typeof m=="string"&&s.d.D(m)},yt.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var y=p.as,b=f(y,p.crossOrigin),x=typeof p.integrity=="string"?p.integrity:void 0,w=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?s.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:b,integrity:x,fetchPriority:w}):y==="script"&&s.d.X(m,{crossOrigin:b,integrity:x,fetchPriority:w,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},yt.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=f(p.as,p.crossOrigin);s.d.M(m,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(m)},yt.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,b=f(y,p.crossOrigin);s.d.L(m,y,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},yt.preloadModule=function(m,p){if(typeof m=="string")if(p){var y=f(p.as,p.crossOrigin);s.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(m)},yt.requestFormReset=function(m){s.d.r(m)},yt.unstable_batchedUpdates=function(m,p){return m(p)},yt.useFormState=function(m,p,y){return u.H.useFormState(m,p,y)},yt.useFormStatus=function(){return u.H.useHostTransitionStatus()},yt.version="19.2.4",yt}var gg;function Lx(){if(gg)return Kc.exports;gg=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Kc.exports=Ox(),Kc.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yg;function qx(){if(yg)return Wo;yg=1;var t=Px(),e=Ld(),n=Lx();function s(i){var o="https://react.dev/errors/"+i;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)o+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var o=i,a=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(a=o.return),i=o.return;while(i)}return o.tag===3?a:null}function u(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function f(i){if(i.tag===31){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function m(i){if(l(i)!==i)throw Error(s(188))}function p(i){var o=i.alternate;if(!o){if(o=l(i),o===null)throw Error(s(188));return o!==i?null:i}for(var a=i,c=o;;){var g=a.return;if(g===null)break;var v=g.alternate;if(v===null){if(c=g.return,c!==null){a=c;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===a)return m(g),i;if(v===c)return m(g),o;v=v.sibling}throw Error(s(188))}if(a.return!==c.return)a=g,c=v;else{for(var S=!1,T=g.child;T;){if(T===a){S=!0,a=g,c=v;break}if(T===c){S=!0,c=g,a=v;break}T=T.sibling}if(!S){for(T=v.child;T;){if(T===a){S=!0,a=v,c=g;break}if(T===c){S=!0,c=v,a=g;break}T=T.sibling}if(!S)throw Error(s(189))}}if(a.alternate!==c)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?i:o}function y(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i;for(i=i.child;i!==null;){if(o=y(i),o!==null)return o;i=i.sibling}return null}var b=Object.assign,x=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),O=Symbol.for("react.consumer"),D=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),Z=Symbol.for("react.lazy"),Y=Symbol.for("react.activity"),ee=Symbol.for("react.memo_cache_sentinel"),fe=Symbol.iterator;function he(i){return i===null||typeof i!="object"?null:(i=fe&&i[fe]||i["@@iterator"],typeof i=="function"?i:null)}var ae=Symbol.for("react.client.reference");function ce(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===ae?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case A:return"Fragment";case I:return"Profiler";case C:return"StrictMode";case N:return"Suspense";case H:return"SuspenseList";case Y:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case E:return"Portal";case D:return i.displayName||"Context";case O:return(i._context.displayName||"Context")+".Consumer";case P:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case V:return o=i.displayName||null,o!==null?o:ce(i.type)||"Memo";case Z:o=i._payload,i=i._init;try{return ce(i(o))}catch{}}return null}var Ae=Array.isArray,z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne={pending:!1,data:null,method:null,action:null},_e=[],Ge=-1;function M(i){return{current:i}}function J(i){0>Ge||(i.current=_e[Ge],_e[Ge]=null,Ge--)}function X(i,o){Ge++,_e[Ge]=i.current,i.current=o}var ie=M(null),ge=M(null),be=M(null),Me=M(null);function _t(i,o){switch(X(be,o),X(ge,i),X(ie,null),o.nodeType){case 9:case 11:i=(i=o.documentElement)&&(i=i.namespaceURI)?km(i):0;break;default:if(i=o.tagName,o=o.namespaceURI)o=km(o),i=Im(o,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}J(ie),X(ie,i)}function Qe(){J(ie),J(ge),J(be)}function io(i){i.memoizedState!==null&&X(Me,i);var o=ie.current,a=Im(o,i.type);o!==a&&(X(ge,i),X(ie,a))}function xr(i){ge.current===i&&(J(ie),J(ge)),Me.current===i&&(J(Me),Jo._currentValue=ne)}var Al,rf;function vi(i){if(Al===void 0)try{throw Error()}catch(a){var o=a.stack.trim().match(/\n( *(at )?)/);Al=o&&o[1]||"",rf=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Al+i+rf}var Cl=!1;function Nl(i,o){if(!i||Cl)return"";Cl=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(o){var F=function(){throw Error()};if(Object.defineProperty(F.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(F,[])}catch(G){var B=G}Reflect.construct(i,[],F)}else{try{F.call()}catch(G){B=G}i.call(F.prototype)}}else{try{throw Error()}catch(G){B=G}(F=i())&&typeof F.catch=="function"&&F.catch(function(){})}}catch(G){if(G&&B&&typeof G.stack=="string")return[G.stack,B.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=c.DetermineComponentFrameRoot(),S=v[0],T=v[1];if(S&&T){var R=S.split(`
`),q=T.split(`
`);for(g=c=0;c<R.length&&!R[c].includes("DetermineComponentFrameRoot");)c++;for(;g<q.length&&!q[g].includes("DetermineComponentFrameRoot");)g++;if(c===R.length||g===q.length)for(c=R.length-1,g=q.length-1;1<=c&&0<=g&&R[c]!==q[g];)g--;for(;1<=c&&0<=g;c--,g--)if(R[c]!==q[g]){if(c!==1||g!==1)do if(c--,g--,0>g||R[c]!==q[g]){var j=`
`+R[c].replace(" at new "," at ");return i.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",i.displayName)),j}while(1<=c&&0<=g);break}}}finally{Cl=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?vi(a):""}function s_(i,o){switch(i.tag){case 26:case 27:case 5:return vi(i.type);case 16:return vi("Lazy");case 13:return i.child!==o&&o!==null?vi("Suspense Fallback"):vi("Suspense");case 19:return vi("SuspenseList");case 0:case 15:return Nl(i.type,!1);case 11:return Nl(i.type.render,!1);case 1:return Nl(i.type,!0);case 31:return vi("Activity");default:return""}}function af(i){try{var o="",a=null;do o+=s_(i,a),a=i,i=i.return;while(i);return o}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Rl=Object.prototype.hasOwnProperty,kl=t.unstable_scheduleCallback,Il=t.unstable_cancelCallback,o_=t.unstable_shouldYield,r_=t.unstable_requestPaint,Mt=t.unstable_now,a_=t.unstable_getCurrentPriorityLevel,lf=t.unstable_ImmediatePriority,uf=t.unstable_UserBlockingPriority,Sr=t.unstable_NormalPriority,l_=t.unstable_LowPriority,cf=t.unstable_IdlePriority,u_=t.log,c_=t.unstable_setDisableYieldValue,so=null,Dt=null;function jn(i){if(typeof u_=="function"&&c_(i),Dt&&typeof Dt.setStrictMode=="function")try{Dt.setStrictMode(so,i)}catch{}}var Ut=Math.clz32?Math.clz32:h_,d_=Math.log,f_=Math.LN2;function h_(i){return i>>>=0,i===0?32:31-(d_(i)/f_|0)|0}var wr=256,Tr=262144,Er=4194304;function _i(i){var o=i&42;if(o!==0)return o;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Ar(i,o,a){var c=i.pendingLanes;if(c===0)return 0;var g=0,v=i.suspendedLanes,S=i.pingedLanes;i=i.warmLanes;var T=c&134217727;return T!==0?(c=T&~v,c!==0?g=_i(c):(S&=T,S!==0?g=_i(S):a||(a=T&~i,a!==0&&(g=_i(a))))):(T=c&~v,T!==0?g=_i(T):S!==0?g=_i(S):a||(a=c&~i,a!==0&&(g=_i(a)))),g===0?0:o!==0&&o!==g&&(o&v)===0&&(v=g&-g,a=o&-o,v>=a||v===32&&(a&4194048)!==0)?o:g}function oo(i,o){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&o)===0}function p_(i,o){switch(i){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function df(){var i=Er;return Er<<=1,(Er&62914560)===0&&(Er=4194304),i}function Ml(i){for(var o=[],a=0;31>a;a++)o.push(i);return o}function ro(i,o){i.pendingLanes|=o,o!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function m_(i,o,a,c,g,v){var S=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var T=i.entanglements,R=i.expirationTimes,q=i.hiddenUpdates;for(a=S&~a;0<a;){var j=31-Ut(a),F=1<<j;T[j]=0,R[j]=-1;var B=q[j];if(B!==null)for(q[j]=null,j=0;j<B.length;j++){var G=B[j];G!==null&&(G.lane&=-536870913)}a&=~F}c!==0&&ff(i,c,0),v!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=v&~(S&~o))}function ff(i,o,a){i.pendingLanes|=o,i.suspendedLanes&=~o;var c=31-Ut(o);i.entangledLanes|=o,i.entanglements[c]=i.entanglements[c]|1073741824|a&261930}function hf(i,o){var a=i.entangledLanes|=o;for(i=i.entanglements;a;){var c=31-Ut(a),g=1<<c;g&o|i[c]&o&&(i[c]|=o),a&=~g}}function pf(i,o){var a=o&-o;return a=(a&42)!==0?1:Dl(a),(a&(i.suspendedLanes|o))!==0?0:a}function Dl(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Ul(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function mf(){var i=K.p;return i!==0?i:(i=window.event,i===void 0?32:eg(i.type))}function gf(i,o){var a=K.p;try{return K.p=i,o()}finally{K.p=a}}var $n=Math.random().toString(36).slice(2),ct="__reactFiber$"+$n,Tt="__reactProps$"+$n,Yi="__reactContainer$"+$n,Pl="__reactEvents$"+$n,g_="__reactListeners$"+$n,y_="__reactHandles$"+$n,yf="__reactResources$"+$n,ao="__reactMarker$"+$n;function Ol(i){delete i[ct],delete i[Tt],delete i[Pl],delete i[g_],delete i[y_]}function Ki(i){var o=i[ct];if(o)return o;for(var a=i.parentNode;a;){if(o=a[Yi]||a[ct]){if(a=o.alternate,o.child!==null||a!==null&&a.child!==null)for(i=qm(i);i!==null;){if(a=i[ct])return a;i=qm(i)}return o}i=a,a=i.parentNode}return null}function Qi(i){if(i=i[ct]||i[Yi]){var o=i.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return i}return null}function lo(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i.stateNode;throw Error(s(33))}function Xi(i){var o=i[yf];return o||(o=i[yf]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function rt(i){i[ao]=!0}var vf=new Set,_f={};function bi(i,o){Wi(i,o),Wi(i+"Capture",o)}function Wi(i,o){for(_f[i]=o,i=0;i<o.length;i++)vf.add(o[i])}var v_=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),bf={},xf={};function __(i){return Rl.call(xf,i)?!0:Rl.call(bf,i)?!1:v_.test(i)?xf[i]=!0:(bf[i]=!0,!1)}function Cr(i,o,a){if(__(o))if(a===null)i.removeAttribute(o);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(o);return;case"boolean":var c=o.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){i.removeAttribute(o);return}}i.setAttribute(o,""+a)}}function Nr(i,o,a){if(a===null)i.removeAttribute(o);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttribute(o,""+a)}}function xn(i,o,a,c){if(c===null)i.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(o,a,""+c)}}function Ft(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Sf(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function b_(i,o,a){var c=Object.getOwnPropertyDescriptor(i.constructor.prototype,o);if(!i.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var g=c.get,v=c.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return g.call(this)},set:function(S){a=""+S,v.call(this,S)}}),Object.defineProperty(i,o,{enumerable:c.enumerable}),{getValue:function(){return a},setValue:function(S){a=""+S},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Ll(i){if(!i._valueTracker){var o=Sf(i)?"checked":"value";i._valueTracker=b_(i,o,""+i[o])}}function wf(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var a=o.getValue(),c="";return i&&(c=Sf(i)?i.checked?"true":"false":i.value),i=c,i!==a?(o.setValue(i),!0):!1}function Rr(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var x_=/[\n"\\]/g;function Jt(i){return i.replace(x_,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function ql(i,o,a,c,g,v,S,T){i.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?i.type=S:i.removeAttribute("type"),o!=null?S==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+Ft(o)):i.value!==""+Ft(o)&&(i.value=""+Ft(o)):S!=="submit"&&S!=="reset"||i.removeAttribute("value"),o!=null?Bl(i,S,Ft(o)):a!=null?Bl(i,S,Ft(a)):c!=null&&i.removeAttribute("value"),g==null&&v!=null&&(i.defaultChecked=!!v),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?i.name=""+Ft(T):i.removeAttribute("name")}function Tf(i,o,a,c,g,v,S,T){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(i.type=v),o!=null||a!=null){if(!(v!=="submit"&&v!=="reset"||o!=null)){Ll(i);return}a=a!=null?""+Ft(a):"",o=o!=null?""+Ft(o):a,T||o===i.value||(i.value=o),i.defaultValue=o}c=c??g,c=typeof c!="function"&&typeof c!="symbol"&&!!c,i.checked=T?i.checked:!!c,i.defaultChecked=!!c,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(i.name=S),Ll(i)}function Bl(i,o,a){o==="number"&&Rr(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function Zi(i,o,a,c){if(i=i.options,o){o={};for(var g=0;g<a.length;g++)o["$"+a[g]]=!0;for(a=0;a<i.length;a++)g=o.hasOwnProperty("$"+i[a].value),i[a].selected!==g&&(i[a].selected=g),g&&c&&(i[a].defaultSelected=!0)}else{for(a=""+Ft(a),o=null,g=0;g<i.length;g++){if(i[g].value===a){i[g].selected=!0,c&&(i[g].defaultSelected=!0);return}o!==null||i[g].disabled||(o=i[g])}o!==null&&(o.selected=!0)}}function Ef(i,o,a){if(o!=null&&(o=""+Ft(o),o!==i.value&&(i.value=o),a==null)){i.defaultValue!==o&&(i.defaultValue=o);return}i.defaultValue=a!=null?""+Ft(a):""}function Af(i,o,a,c){if(o==null){if(c!=null){if(a!=null)throw Error(s(92));if(Ae(c)){if(1<c.length)throw Error(s(93));c=c[0]}a=c}a==null&&(a=""),o=a}a=Ft(o),i.defaultValue=a,c=i.textContent,c===a&&c!==""&&c!==null&&(i.value=c),Ll(i)}function es(i,o){if(o){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=o;return}}i.textContent=o}var S_=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Cf(i,o,a){var c=o.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="":c?i.setProperty(o,a):typeof a!="number"||a===0||S_.has(o)?o==="float"?i.cssFloat=a:i[o]=(""+a).trim():i[o]=a+"px"}function Nf(i,o,a){if(o!=null&&typeof o!="object")throw Error(s(62));if(i=i.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||o!=null&&o.hasOwnProperty(c)||(c.indexOf("--")===0?i.setProperty(c,""):c==="float"?i.cssFloat="":i[c]="");for(var g in o)c=o[g],o.hasOwnProperty(g)&&a[g]!==c&&Cf(i,g,c)}else for(var v in o)o.hasOwnProperty(v)&&Cf(i,v,o[v])}function Gl(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var w_=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),T_=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function kr(i){return T_.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Sn(){}var zl=null;function Hl(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var ts=null,ns=null;function Rf(i){var o=Qi(i);if(o&&(i=o.stateNode)){var a=i[Tt]||null;e:switch(i=o.stateNode,o.type){case"input":if(ql(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),o=a.name,a.type==="radio"&&o!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Jt(""+o)+'"][type="radio"]'),o=0;o<a.length;o++){var c=a[o];if(c!==i&&c.form===i.form){var g=c[Tt]||null;if(!g)throw Error(s(90));ql(c,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(o=0;o<a.length;o++)c=a[o],c.form===i.form&&wf(c)}break e;case"textarea":Ef(i,a.value,a.defaultValue);break e;case"select":o=a.value,o!=null&&Zi(i,!!a.multiple,o,!1)}}}var Vl=!1;function kf(i,o,a){if(Vl)return i(o,a);Vl=!0;try{var c=i(o);return c}finally{if(Vl=!1,(ts!==null||ns!==null)&&(ya(),ts&&(o=ts,i=ns,ns=ts=null,Rf(o),i)))for(o=0;o<i.length;o++)Rf(i[o])}}function uo(i,o){var a=i.stateNode;if(a===null)return null;var c=a[Tt]||null;if(c===null)return null;a=c[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(i=i.type,c=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!c;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(s(231,o,typeof a));return a}var wn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jl=!1;if(wn)try{var co={};Object.defineProperty(co,"passive",{get:function(){jl=!0}}),window.addEventListener("test",co,co),window.removeEventListener("test",co,co)}catch{jl=!1}var Fn=null,$l=null,Ir=null;function If(){if(Ir)return Ir;var i,o=$l,a=o.length,c,g="value"in Fn?Fn.value:Fn.textContent,v=g.length;for(i=0;i<a&&o[i]===g[i];i++);var S=a-i;for(c=1;c<=S&&o[a-c]===g[v-c];c++);return Ir=g.slice(i,1<c?1-c:void 0)}function Mr(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Dr(){return!0}function Mf(){return!1}function Et(i){function o(a,c,g,v,S){this._reactName=a,this._targetInst=g,this.type=c,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var T in i)i.hasOwnProperty(T)&&(a=i[T],this[T]=a?a(v):v[T]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Dr:Mf,this.isPropagationStopped=Mf,this}return b(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Dr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Dr)},persist:function(){},isPersistent:Dr}),o}var xi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ur=Et(xi),fo=b({},xi,{view:0,detail:0}),E_=Et(fo),Fl,Jl,ho,Pr=b({},fo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Kl,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==ho&&(ho&&i.type==="mousemove"?(Fl=i.screenX-ho.screenX,Jl=i.screenY-ho.screenY):Jl=Fl=0,ho=i),Fl)},movementY:function(i){return"movementY"in i?i.movementY:Jl}}),Df=Et(Pr),A_=b({},Pr,{dataTransfer:0}),C_=Et(A_),N_=b({},fo,{relatedTarget:0}),Yl=Et(N_),R_=b({},xi,{animationName:0,elapsedTime:0,pseudoElement:0}),k_=Et(R_),I_=b({},xi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),M_=Et(I_),D_=b({},xi,{data:0}),Uf=Et(D_),U_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},P_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},O_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function L_(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=O_[i])?!!o[i]:!1}function Kl(){return L_}var q_=b({},fo,{key:function(i){if(i.key){var o=U_[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Mr(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?P_[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Kl,charCode:function(i){return i.type==="keypress"?Mr(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Mr(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),B_=Et(q_),G_=b({},Pr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pf=Et(G_),z_=b({},fo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Kl}),H_=Et(z_),V_=b({},xi,{propertyName:0,elapsedTime:0,pseudoElement:0}),j_=Et(V_),$_=b({},Pr,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),F_=Et($_),J_=b({},xi,{newState:0,oldState:0}),Y_=Et(J_),K_=[9,13,27,32],Ql=wn&&"CompositionEvent"in window,po=null;wn&&"documentMode"in document&&(po=document.documentMode);var Q_=wn&&"TextEvent"in window&&!po,Of=wn&&(!Ql||po&&8<po&&11>=po),Lf=" ",qf=!1;function Bf(i,o){switch(i){case"keyup":return K_.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gf(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var is=!1;function X_(i,o){switch(i){case"compositionend":return Gf(o);case"keypress":return o.which!==32?null:(qf=!0,Lf);case"textInput":return i=o.data,i===Lf&&qf?null:i;default:return null}}function W_(i,o){if(is)return i==="compositionend"||!Ql&&Bf(i,o)?(i=If(),Ir=$l=Fn=null,is=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Of&&o.locale!=="ko"?null:o.data;default:return null}}var Z_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zf(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!Z_[i.type]:o==="textarea"}function Hf(i,o,a,c){ts?ns?ns.push(c):ns=[c]:ts=c,o=Ta(o,"onChange"),0<o.length&&(a=new Ur("onChange","change",null,a,c),i.push({event:a,listeners:o}))}var mo=null,go=null;function eb(i){Tm(i,0)}function Or(i){var o=lo(i);if(wf(o))return i}function Vf(i,o){if(i==="change")return o}var jf=!1;if(wn){var Xl;if(wn){var Wl="oninput"in document;if(!Wl){var $f=document.createElement("div");$f.setAttribute("oninput","return;"),Wl=typeof $f.oninput=="function"}Xl=Wl}else Xl=!1;jf=Xl&&(!document.documentMode||9<document.documentMode)}function Ff(){mo&&(mo.detachEvent("onpropertychange",Jf),go=mo=null)}function Jf(i){if(i.propertyName==="value"&&Or(go)){var o=[];Hf(o,go,i,Hl(i)),kf(eb,o)}}function tb(i,o,a){i==="focusin"?(Ff(),mo=o,go=a,mo.attachEvent("onpropertychange",Jf)):i==="focusout"&&Ff()}function nb(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Or(go)}function ib(i,o){if(i==="click")return Or(o)}function sb(i,o){if(i==="input"||i==="change")return Or(o)}function ob(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Pt=typeof Object.is=="function"?Object.is:ob;function yo(i,o){if(Pt(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var a=Object.keys(i),c=Object.keys(o);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var g=a[c];if(!Rl.call(o,g)||!Pt(i[g],o[g]))return!1}return!0}function Yf(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Kf(i,o){var a=Yf(i);i=0;for(var c;a;){if(a.nodeType===3){if(c=i+a.textContent.length,i<=o&&c>=o)return{node:a,offset:o-i};i=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Yf(a)}}function Qf(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?Qf(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function Xf(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var o=Rr(i.document);o instanceof i.HTMLIFrameElement;){try{var a=typeof o.contentWindow.location.href=="string"}catch{a=!1}if(a)i=o.contentWindow;else break;o=Rr(i.document)}return o}function Zl(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}var rb=wn&&"documentMode"in document&&11>=document.documentMode,ss=null,eu=null,vo=null,tu=!1;function Wf(i,o,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;tu||ss==null||ss!==Rr(c)||(c=ss,"selectionStart"in c&&Zl(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),vo&&yo(vo,c)||(vo=c,c=Ta(eu,"onSelect"),0<c.length&&(o=new Ur("onSelect","select",null,o,a),i.push({event:o,listeners:c}),o.target=ss)))}function Si(i,o){var a={};return a[i.toLowerCase()]=o.toLowerCase(),a["Webkit"+i]="webkit"+o,a["Moz"+i]="moz"+o,a}var os={animationend:Si("Animation","AnimationEnd"),animationiteration:Si("Animation","AnimationIteration"),animationstart:Si("Animation","AnimationStart"),transitionrun:Si("Transition","TransitionRun"),transitionstart:Si("Transition","TransitionStart"),transitioncancel:Si("Transition","TransitionCancel"),transitionend:Si("Transition","TransitionEnd")},nu={},Zf={};wn&&(Zf=document.createElement("div").style,"AnimationEvent"in window||(delete os.animationend.animation,delete os.animationiteration.animation,delete os.animationstart.animation),"TransitionEvent"in window||delete os.transitionend.transition);function wi(i){if(nu[i])return nu[i];if(!os[i])return i;var o=os[i],a;for(a in o)if(o.hasOwnProperty(a)&&a in Zf)return nu[i]=o[a];return i}var eh=wi("animationend"),th=wi("animationiteration"),nh=wi("animationstart"),ab=wi("transitionrun"),lb=wi("transitionstart"),ub=wi("transitioncancel"),ih=wi("transitionend"),sh=new Map,iu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");iu.push("scrollEnd");function on(i,o){sh.set(i,o),bi(o,[i])}var Lr=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Yt=[],rs=0,su=0;function qr(){for(var i=rs,o=su=rs=0;o<i;){var a=Yt[o];Yt[o++]=null;var c=Yt[o];Yt[o++]=null;var g=Yt[o];Yt[o++]=null;var v=Yt[o];if(Yt[o++]=null,c!==null&&g!==null){var S=c.pending;S===null?g.next=g:(g.next=S.next,S.next=g),c.pending=g}v!==0&&oh(a,g,v)}}function Br(i,o,a,c){Yt[rs++]=i,Yt[rs++]=o,Yt[rs++]=a,Yt[rs++]=c,su|=c,i.lanes|=c,i=i.alternate,i!==null&&(i.lanes|=c)}function ou(i,o,a,c){return Br(i,o,a,c),Gr(i)}function Ti(i,o){return Br(i,null,null,o),Gr(i)}function oh(i,o,a){i.lanes|=a;var c=i.alternate;c!==null&&(c.lanes|=a);for(var g=!1,v=i.return;v!==null;)v.childLanes|=a,c=v.alternate,c!==null&&(c.childLanes|=a),v.tag===22&&(i=v.stateNode,i===null||i._visibility&1||(g=!0)),i=v,v=v.return;return i.tag===3?(v=i.stateNode,g&&o!==null&&(g=31-Ut(a),i=v.hiddenUpdates,c=i[g],c===null?i[g]=[o]:c.push(o),o.lane=a|536870912),v):null}function Gr(i){if(50<Go)throw Go=0,pc=null,Error(s(185));for(var o=i.return;o!==null;)i=o,o=i.return;return i.tag===3?i.stateNode:null}var as={};function cb(i,o,a,c){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ot(i,o,a,c){return new cb(i,o,a,c)}function ru(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Tn(i,o){var a=i.alternate;return a===null?(a=Ot(i.tag,o,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=o,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,o=i.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function rh(i,o){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,o=a.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i}function zr(i,o,a,c,g,v){var S=0;if(c=i,typeof i=="function")ru(i)&&(S=1);else if(typeof i=="string")S=mx(i,a,ie.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case Y:return i=Ot(31,a,o,g),i.elementType=Y,i.lanes=v,i;case A:return Ei(a.children,g,v,o);case C:S=8,g|=24;break;case I:return i=Ot(12,a,o,g|2),i.elementType=I,i.lanes=v,i;case N:return i=Ot(13,a,o,g),i.elementType=N,i.lanes=v,i;case H:return i=Ot(19,a,o,g),i.elementType=H,i.lanes=v,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case D:S=10;break e;case O:S=9;break e;case P:S=11;break e;case V:S=14;break e;case Z:S=16,c=null;break e}S=29,a=Error(s(130,i===null?"null":typeof i,"")),c=null}return o=Ot(S,a,o,g),o.elementType=i,o.type=c,o.lanes=v,o}function Ei(i,o,a,c){return i=Ot(7,i,c,o),i.lanes=a,i}function au(i,o,a){return i=Ot(6,i,null,o),i.lanes=a,i}function ah(i){var o=Ot(18,null,null,0);return o.stateNode=i,o}function lu(i,o,a){return o=Ot(4,i.children!==null?i.children:[],i.key,o),o.lanes=a,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}var lh=new WeakMap;function Kt(i,o){if(typeof i=="object"&&i!==null){var a=lh.get(i);return a!==void 0?a:(o={value:i,source:o,stack:af(o)},lh.set(i,o),o)}return{value:i,source:o,stack:af(o)}}var ls=[],us=0,Hr=null,_o=0,Qt=[],Xt=0,Jn=null,pn=1,mn="";function En(i,o){ls[us++]=_o,ls[us++]=Hr,Hr=i,_o=o}function uh(i,o,a){Qt[Xt++]=pn,Qt[Xt++]=mn,Qt[Xt++]=Jn,Jn=i;var c=pn;i=mn;var g=32-Ut(c)-1;c&=~(1<<g),a+=1;var v=32-Ut(o)+g;if(30<v){var S=g-g%5;v=(c&(1<<S)-1).toString(32),c>>=S,g-=S,pn=1<<32-Ut(o)+g|a<<g|c,mn=v+i}else pn=1<<v|a<<g|c,mn=i}function uu(i){i.return!==null&&(En(i,1),uh(i,1,0))}function cu(i){for(;i===Hr;)Hr=ls[--us],ls[us]=null,_o=ls[--us],ls[us]=null;for(;i===Jn;)Jn=Qt[--Xt],Qt[Xt]=null,mn=Qt[--Xt],Qt[Xt]=null,pn=Qt[--Xt],Qt[Xt]=null}function ch(i,o){Qt[Xt++]=pn,Qt[Xt++]=mn,Qt[Xt++]=Jn,pn=o.id,mn=o.overflow,Jn=i}var dt=null,Ve=null,Ee=!1,Yn=null,Wt=!1,du=Error(s(519));function Kn(i){var o=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw bo(Kt(o,i)),du}function dh(i){var o=i.stateNode,a=i.type,c=i.memoizedProps;switch(o[ct]=i,o[Tt]=c,a){case"dialog":Se("cancel",o),Se("close",o);break;case"iframe":case"object":case"embed":Se("load",o);break;case"video":case"audio":for(a=0;a<Ho.length;a++)Se(Ho[a],o);break;case"source":Se("error",o);break;case"img":case"image":case"link":Se("error",o),Se("load",o);break;case"details":Se("toggle",o);break;case"input":Se("invalid",o),Tf(o,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Se("invalid",o);break;case"textarea":Se("invalid",o),Af(o,c.value,c.defaultValue,c.children)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||o.textContent===""+a||c.suppressHydrationWarning===!0||Nm(o.textContent,a)?(c.popover!=null&&(Se("beforetoggle",o),Se("toggle",o)),c.onScroll!=null&&Se("scroll",o),c.onScrollEnd!=null&&Se("scrollend",o),c.onClick!=null&&(o.onclick=Sn),o=!0):o=!1,o||Kn(i,!0)}function fh(i){for(dt=i.return;dt;)switch(dt.tag){case 5:case 31:case 13:Wt=!1;return;case 27:case 3:Wt=!0;return;default:dt=dt.return}}function cs(i){if(i!==dt)return!1;if(!Ee)return fh(i),Ee=!0,!1;var o=i.tag,a;if((a=o!==3&&o!==27)&&((a=o===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||Rc(i.type,i.memoizedProps)),a=!a),a&&Ve&&Kn(i),fh(i),o===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));Ve=Lm(i)}else if(o===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));Ve=Lm(i)}else o===27?(o=Ve,ui(i.type)?(i=Uc,Uc=null,Ve=i):Ve=o):Ve=dt?en(i.stateNode.nextSibling):null;return!0}function Ai(){Ve=dt=null,Ee=!1}function fu(){var i=Yn;return i!==null&&(Rt===null?Rt=i:Rt.push.apply(Rt,i),Yn=null),i}function bo(i){Yn===null?Yn=[i]:Yn.push(i)}var hu=M(null),Ci=null,An=null;function Qn(i,o,a){X(hu,o._currentValue),o._currentValue=a}function Cn(i){i._currentValue=hu.current,J(hu)}function pu(i,o,a){for(;i!==null;){var c=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,c!==null&&(c.childLanes|=o)):c!==null&&(c.childLanes&o)!==o&&(c.childLanes|=o),i===a)break;i=i.return}}function mu(i,o,a,c){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var v=g.dependencies;if(v!==null){var S=g.child;v=v.firstContext;e:for(;v!==null;){var T=v;v=g;for(var R=0;R<o.length;R++)if(T.context===o[R]){v.lanes|=a,T=v.alternate,T!==null&&(T.lanes|=a),pu(v.return,a,i),c||(S=null);break e}v=T.next}}else if(g.tag===18){if(S=g.return,S===null)throw Error(s(341));S.lanes|=a,v=S.alternate,v!==null&&(v.lanes|=a),pu(S,a,i),S=null}else S=g.child;if(S!==null)S.return=g;else for(S=g;S!==null;){if(S===i){S=null;break}if(g=S.sibling,g!==null){g.return=S.return,S=g;break}S=S.return}g=S}}function ds(i,o,a,c){i=null;for(var g=o,v=!1;g!==null;){if(!v){if((g.flags&524288)!==0)v=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var S=g.alternate;if(S===null)throw Error(s(387));if(S=S.memoizedProps,S!==null){var T=g.type;Pt(g.pendingProps.value,S.value)||(i!==null?i.push(T):i=[T])}}else if(g===Me.current){if(S=g.alternate,S===null)throw Error(s(387));S.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push(Jo):i=[Jo])}g=g.return}i!==null&&mu(o,i,a,c),o.flags|=262144}function Vr(i){for(i=i.firstContext;i!==null;){if(!Pt(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Ni(i){Ci=i,An=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function ft(i){return hh(Ci,i)}function jr(i,o){return Ci===null&&Ni(i),hh(i,o)}function hh(i,o){var a=o._currentValue;if(o={context:o,memoizedValue:a,next:null},An===null){if(i===null)throw Error(s(308));An=o,i.dependencies={lanes:0,firstContext:o},i.flags|=524288}else An=An.next=o;return a}var db=typeof AbortController<"u"?AbortController:function(){var i=[],o=this.signal={aborted:!1,addEventListener:function(a,c){i.push(c)}};this.abort=function(){o.aborted=!0,i.forEach(function(a){return a()})}},fb=t.unstable_scheduleCallback,hb=t.unstable_NormalPriority,Ze={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function gu(){return{controller:new db,data:new Map,refCount:0}}function xo(i){i.refCount--,i.refCount===0&&fb(hb,function(){i.controller.abort()})}var So=null,yu=0,fs=0,hs=null;function pb(i,o){if(So===null){var a=So=[];yu=0,fs=bc(),hs={status:"pending",value:void 0,then:function(c){a.push(c)}}}return yu++,o.then(ph,ph),o}function ph(){if(--yu===0&&So!==null){hs!==null&&(hs.status="fulfilled");var i=So;So=null,fs=0,hs=null;for(var o=0;o<i.length;o++)(0,i[o])()}}function mb(i,o){var a=[],c={status:"pending",value:null,reason:null,then:function(g){a.push(g)}};return i.then(function(){c.status="fulfilled",c.value=o;for(var g=0;g<a.length;g++)(0,a[g])(o)},function(g){for(c.status="rejected",c.reason=g,g=0;g<a.length;g++)(0,a[g])(void 0)}),c}var mh=z.S;z.S=function(i,o){Wp=Mt(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&pb(i,o),mh!==null&&mh(i,o)};var Ri=M(null);function vu(){var i=Ri.current;return i!==null?i:ze.pooledCache}function $r(i,o){o===null?X(Ri,Ri.current):X(Ri,o.pool)}function gh(){var i=vu();return i===null?null:{parent:Ze._currentValue,pool:i}}var ps=Error(s(460)),_u=Error(s(474)),Fr=Error(s(542)),Jr={then:function(){}};function yh(i){return i=i.status,i==="fulfilled"||i==="rejected"}function vh(i,o,a){switch(a=i[a],a===void 0?i.push(o):a!==o&&(o.then(Sn,Sn),o=a),o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,bh(i),i;default:if(typeof o.status=="string")o.then(Sn,Sn);else{if(i=ze,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=o,i.status="pending",i.then(function(c){if(o.status==="pending"){var g=o;g.status="fulfilled",g.value=c}},function(c){if(o.status==="pending"){var g=o;g.status="rejected",g.reason=c}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,bh(i),i}throw Ii=o,ps}}function ki(i){try{var o=i._init;return o(i._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Ii=a,ps):a}}var Ii=null;function _h(){if(Ii===null)throw Error(s(459));var i=Ii;return Ii=null,i}function bh(i){if(i===ps||i===Fr)throw Error(s(483))}var ms=null,wo=0;function Yr(i){var o=wo;return wo+=1,ms===null&&(ms=[]),vh(ms,i,o)}function To(i,o){o=o.props.ref,i.ref=o!==void 0?o:null}function Kr(i,o){throw o.$$typeof===x?Error(s(525)):(i=Object.prototype.toString.call(o),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)))}function xh(i){function o(U,k){if(i){var L=U.deletions;L===null?(U.deletions=[k],U.flags|=16):L.push(k)}}function a(U,k){if(!i)return null;for(;k!==null;)o(U,k),k=k.sibling;return null}function c(U){for(var k=new Map;U!==null;)U.key!==null?k.set(U.key,U):k.set(U.index,U),U=U.sibling;return k}function g(U,k){return U=Tn(U,k),U.index=0,U.sibling=null,U}function v(U,k,L){return U.index=L,i?(L=U.alternate,L!==null?(L=L.index,L<k?(U.flags|=67108866,k):L):(U.flags|=67108866,k)):(U.flags|=1048576,k)}function S(U){return i&&U.alternate===null&&(U.flags|=67108866),U}function T(U,k,L,$){return k===null||k.tag!==6?(k=au(L,U.mode,$),k.return=U,k):(k=g(k,L),k.return=U,k)}function R(U,k,L,$){var re=L.type;return re===A?j(U,k,L.props.children,$,L.key):k!==null&&(k.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===Z&&ki(re)===k.type)?(k=g(k,L.props),To(k,L),k.return=U,k):(k=zr(L.type,L.key,L.props,null,U.mode,$),To(k,L),k.return=U,k)}function q(U,k,L,$){return k===null||k.tag!==4||k.stateNode.containerInfo!==L.containerInfo||k.stateNode.implementation!==L.implementation?(k=lu(L,U.mode,$),k.return=U,k):(k=g(k,L.children||[]),k.return=U,k)}function j(U,k,L,$,re){return k===null||k.tag!==7?(k=Ei(L,U.mode,$,re),k.return=U,k):(k=g(k,L),k.return=U,k)}function F(U,k,L){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=au(""+k,U.mode,L),k.return=U,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case w:return L=zr(k.type,k.key,k.props,null,U.mode,L),To(L,k),L.return=U,L;case E:return k=lu(k,U.mode,L),k.return=U,k;case Z:return k=ki(k),F(U,k,L)}if(Ae(k)||he(k))return k=Ei(k,U.mode,L,null),k.return=U,k;if(typeof k.then=="function")return F(U,Yr(k),L);if(k.$$typeof===D)return F(U,jr(U,k),L);Kr(U,k)}return null}function B(U,k,L,$){var re=k!==null?k.key:null;if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return re!==null?null:T(U,k,""+L,$);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case w:return L.key===re?R(U,k,L,$):null;case E:return L.key===re?q(U,k,L,$):null;case Z:return L=ki(L),B(U,k,L,$)}if(Ae(L)||he(L))return re!==null?null:j(U,k,L,$,null);if(typeof L.then=="function")return B(U,k,Yr(L),$);if(L.$$typeof===D)return B(U,k,jr(U,L),$);Kr(U,L)}return null}function G(U,k,L,$,re){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return U=U.get(L)||null,T(k,U,""+$,re);if(typeof $=="object"&&$!==null){switch($.$$typeof){case w:return U=U.get($.key===null?L:$.key)||null,R(k,U,$,re);case E:return U=U.get($.key===null?L:$.key)||null,q(k,U,$,re);case Z:return $=ki($),G(U,k,L,$,re)}if(Ae($)||he($))return U=U.get(L)||null,j(k,U,$,re,null);if(typeof $.then=="function")return G(U,k,L,Yr($),re);if($.$$typeof===D)return G(U,k,L,jr(k,$),re);Kr(k,$)}return null}function te(U,k,L,$){for(var re=null,Ce=null,se=k,ve=k=0,Te=null;se!==null&&ve<L.length;ve++){se.index>ve?(Te=se,se=null):Te=se.sibling;var Ne=B(U,se,L[ve],$);if(Ne===null){se===null&&(se=Te);break}i&&se&&Ne.alternate===null&&o(U,se),k=v(Ne,k,ve),Ce===null?re=Ne:Ce.sibling=Ne,Ce=Ne,se=Te}if(ve===L.length)return a(U,se),Ee&&En(U,ve),re;if(se===null){for(;ve<L.length;ve++)se=F(U,L[ve],$),se!==null&&(k=v(se,k,ve),Ce===null?re=se:Ce.sibling=se,Ce=se);return Ee&&En(U,ve),re}for(se=c(se);ve<L.length;ve++)Te=G(se,U,ve,L[ve],$),Te!==null&&(i&&Te.alternate!==null&&se.delete(Te.key===null?ve:Te.key),k=v(Te,k,ve),Ce===null?re=Te:Ce.sibling=Te,Ce=Te);return i&&se.forEach(function(pi){return o(U,pi)}),Ee&&En(U,ve),re}function le(U,k,L,$){if(L==null)throw Error(s(151));for(var re=null,Ce=null,se=k,ve=k=0,Te=null,Ne=L.next();se!==null&&!Ne.done;ve++,Ne=L.next()){se.index>ve?(Te=se,se=null):Te=se.sibling;var pi=B(U,se,Ne.value,$);if(pi===null){se===null&&(se=Te);break}i&&se&&pi.alternate===null&&o(U,se),k=v(pi,k,ve),Ce===null?re=pi:Ce.sibling=pi,Ce=pi,se=Te}if(Ne.done)return a(U,se),Ee&&En(U,ve),re;if(se===null){for(;!Ne.done;ve++,Ne=L.next())Ne=F(U,Ne.value,$),Ne!==null&&(k=v(Ne,k,ve),Ce===null?re=Ne:Ce.sibling=Ne,Ce=Ne);return Ee&&En(U,ve),re}for(se=c(se);!Ne.done;ve++,Ne=L.next())Ne=G(se,U,ve,Ne.value,$),Ne!==null&&(i&&Ne.alternate!==null&&se.delete(Ne.key===null?ve:Ne.key),k=v(Ne,k,ve),Ce===null?re=Ne:Ce.sibling=Ne,Ce=Ne);return i&&se.forEach(function(Ax){return o(U,Ax)}),Ee&&En(U,ve),re}function qe(U,k,L,$){if(typeof L=="object"&&L!==null&&L.type===A&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case w:e:{for(var re=L.key;k!==null;){if(k.key===re){if(re=L.type,re===A){if(k.tag===7){a(U,k.sibling),$=g(k,L.props.children),$.return=U,U=$;break e}}else if(k.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===Z&&ki(re)===k.type){a(U,k.sibling),$=g(k,L.props),To($,L),$.return=U,U=$;break e}a(U,k);break}else o(U,k);k=k.sibling}L.type===A?($=Ei(L.props.children,U.mode,$,L.key),$.return=U,U=$):($=zr(L.type,L.key,L.props,null,U.mode,$),To($,L),$.return=U,U=$)}return S(U);case E:e:{for(re=L.key;k!==null;){if(k.key===re)if(k.tag===4&&k.stateNode.containerInfo===L.containerInfo&&k.stateNode.implementation===L.implementation){a(U,k.sibling),$=g(k,L.children||[]),$.return=U,U=$;break e}else{a(U,k);break}else o(U,k);k=k.sibling}$=lu(L,U.mode,$),$.return=U,U=$}return S(U);case Z:return L=ki(L),qe(U,k,L,$)}if(Ae(L))return te(U,k,L,$);if(he(L)){if(re=he(L),typeof re!="function")throw Error(s(150));return L=re.call(L),le(U,k,L,$)}if(typeof L.then=="function")return qe(U,k,Yr(L),$);if(L.$$typeof===D)return qe(U,k,jr(U,L),$);Kr(U,L)}return typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint"?(L=""+L,k!==null&&k.tag===6?(a(U,k.sibling),$=g(k,L),$.return=U,U=$):(a(U,k),$=au(L,U.mode,$),$.return=U,U=$),S(U)):a(U,k)}return function(U,k,L,$){try{wo=0;var re=qe(U,k,L,$);return ms=null,re}catch(se){if(se===ps||se===Fr)throw se;var Ce=Ot(29,se,null,U.mode);return Ce.lanes=$,Ce.return=U,Ce}finally{}}}var Mi=xh(!0),Sh=xh(!1),Xn=!1;function bu(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function xu(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Wn(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Zn(i,o,a){var c=i.updateQueue;if(c===null)return null;if(c=c.shared,(Ie&2)!==0){var g=c.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),c.pending=o,o=Gr(i),oh(i,null,a),o}return Br(i,c,o,a),Gr(i)}function Eo(i,o,a){if(o=o.updateQueue,o!==null&&(o=o.shared,(a&4194048)!==0)){var c=o.lanes;c&=i.pendingLanes,a|=c,o.lanes=a,hf(i,a)}}function Su(i,o){var a=i.updateQueue,c=i.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var g=null,v=null;if(a=a.firstBaseUpdate,a!==null){do{var S={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};v===null?g=v=S:v=v.next=S,a=a.next}while(a!==null);v===null?g=v=o:v=v.next=o}else g=v=o;a={baseState:c.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:c.shared,callbacks:c.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=o:i.next=o,a.lastBaseUpdate=o}var wu=!1;function Ao(){if(wu){var i=hs;if(i!==null)throw i}}function Co(i,o,a,c){wu=!1;var g=i.updateQueue;Xn=!1;var v=g.firstBaseUpdate,S=g.lastBaseUpdate,T=g.shared.pending;if(T!==null){g.shared.pending=null;var R=T,q=R.next;R.next=null,S===null?v=q:S.next=q,S=R;var j=i.alternate;j!==null&&(j=j.updateQueue,T=j.lastBaseUpdate,T!==S&&(T===null?j.firstBaseUpdate=q:T.next=q,j.lastBaseUpdate=R))}if(v!==null){var F=g.baseState;S=0,j=q=R=null,T=v;do{var B=T.lane&-536870913,G=B!==T.lane;if(G?(we&B)===B:(c&B)===B){B!==0&&B===fs&&(wu=!0),j!==null&&(j=j.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var te=i,le=T;B=o;var qe=a;switch(le.tag){case 1:if(te=le.payload,typeof te=="function"){F=te.call(qe,F,B);break e}F=te;break e;case 3:te.flags=te.flags&-65537|128;case 0:if(te=le.payload,B=typeof te=="function"?te.call(qe,F,B):te,B==null)break e;F=b({},F,B);break e;case 2:Xn=!0}}B=T.callback,B!==null&&(i.flags|=64,G&&(i.flags|=8192),G=g.callbacks,G===null?g.callbacks=[B]:G.push(B))}else G={lane:B,tag:T.tag,payload:T.payload,callback:T.callback,next:null},j===null?(q=j=G,R=F):j=j.next=G,S|=B;if(T=T.next,T===null){if(T=g.shared.pending,T===null)break;G=T,T=G.next,G.next=null,g.lastBaseUpdate=G,g.shared.pending=null}}while(!0);j===null&&(R=F),g.baseState=R,g.firstBaseUpdate=q,g.lastBaseUpdate=j,v===null&&(g.shared.lanes=0),si|=S,i.lanes=S,i.memoizedState=F}}function wh(i,o){if(typeof i!="function")throw Error(s(191,i));i.call(o)}function Th(i,o){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)wh(a[i],o)}var gs=M(null),Qr=M(0);function Eh(i,o){i=On,X(Qr,i),X(gs,o),On=i|o.baseLanes}function Tu(){X(Qr,On),X(gs,gs.current)}function Eu(){On=Qr.current,J(gs),J(Qr)}var Lt=M(null),Zt=null;function ei(i){var o=i.alternate;X(Xe,Xe.current&1),X(Lt,i),Zt===null&&(o===null||gs.current!==null||o.memoizedState!==null)&&(Zt=i)}function Au(i){X(Xe,Xe.current),X(Lt,i),Zt===null&&(Zt=i)}function Ah(i){i.tag===22?(X(Xe,Xe.current),X(Lt,i),Zt===null&&(Zt=i)):ti()}function ti(){X(Xe,Xe.current),X(Lt,Lt.current)}function qt(i){J(Lt),Zt===i&&(Zt=null),J(Xe)}var Xe=M(0);function Xr(i){for(var o=i;o!==null;){if(o.tag===13){var a=o.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Mc(a)||Dc(a)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Nn=0,ye=null,Oe=null,et=null,Wr=!1,ys=!1,Di=!1,Zr=0,No=0,vs=null,gb=0;function Ye(){throw Error(s(321))}function Cu(i,o){if(o===null)return!1;for(var a=0;a<o.length&&a<i.length;a++)if(!Pt(i[a],o[a]))return!1;return!0}function Nu(i,o,a,c,g,v){return Nn=v,ye=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,z.H=i===null||i.memoizedState===null?up:Vu,Di=!1,v=a(c,g),Di=!1,ys&&(v=Nh(o,a,c,g)),Ch(i),v}function Ch(i){z.H=Io;var o=Oe!==null&&Oe.next!==null;if(Nn=0,et=Oe=ye=null,Wr=!1,No=0,vs=null,o)throw Error(s(300));i===null||tt||(i=i.dependencies,i!==null&&Vr(i)&&(tt=!0))}function Nh(i,o,a,c){ye=i;var g=0;do{if(ys&&(vs=null),No=0,ys=!1,25<=g)throw Error(s(301));if(g+=1,et=Oe=null,i.updateQueue!=null){var v=i.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}z.H=cp,v=o(a,c)}while(ys);return v}function yb(){var i=z.H,o=i.useState()[0];return o=typeof o.then=="function"?Ro(o):o,i=i.useState()[0],(Oe!==null?Oe.memoizedState:null)!==i&&(ye.flags|=1024),o}function Ru(){var i=Zr!==0;return Zr=0,i}function ku(i,o,a){o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~a}function Iu(i){if(Wr){for(i=i.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}Wr=!1}Nn=0,et=Oe=ye=null,ys=!1,No=Zr=0,vs=null}function bt(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return et===null?ye.memoizedState=et=i:et=et.next=i,et}function We(){if(Oe===null){var i=ye.alternate;i=i!==null?i.memoizedState:null}else i=Oe.next;var o=et===null?ye.memoizedState:et.next;if(o!==null)et=o,Oe=i;else{if(i===null)throw ye.alternate===null?Error(s(467)):Error(s(310));Oe=i,i={memoizedState:Oe.memoizedState,baseState:Oe.baseState,baseQueue:Oe.baseQueue,queue:Oe.queue,next:null},et===null?ye.memoizedState=et=i:et=et.next=i}return et}function ea(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ro(i){var o=No;return No+=1,vs===null&&(vs=[]),i=vh(vs,i,o),o=ye,(et===null?o.memoizedState:et.next)===null&&(o=o.alternate,z.H=o===null||o.memoizedState===null?up:Vu),i}function ta(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Ro(i);if(i.$$typeof===D)return ft(i)}throw Error(s(438,String(i)))}function Mu(i){var o=null,a=ye.updateQueue;if(a!==null&&(o=a.memoCache),o==null){var c=ye.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(o={data:c.data.map(function(g){return g.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),a===null&&(a=ea(),ye.updateQueue=a),a.memoCache=o,a=o.data[o.index],a===void 0)for(a=o.data[o.index]=Array(i),c=0;c<i;c++)a[c]=ee;return o.index++,a}function Rn(i,o){return typeof o=="function"?o(i):o}function na(i){var o=We();return Du(o,Oe,i)}function Du(i,o,a){var c=i.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=a;var g=i.baseQueue,v=c.pending;if(v!==null){if(g!==null){var S=g.next;g.next=v.next,v.next=S}o.baseQueue=g=v,c.pending=null}if(v=i.baseState,g===null)i.memoizedState=v;else{o=g.next;var T=S=null,R=null,q=o,j=!1;do{var F=q.lane&-536870913;if(F!==q.lane?(we&F)===F:(Nn&F)===F){var B=q.revertLane;if(B===0)R!==null&&(R=R.next={lane:0,revertLane:0,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),F===fs&&(j=!0);else if((Nn&B)===B){q=q.next,B===fs&&(j=!0);continue}else F={lane:0,revertLane:q.revertLane,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},R===null?(T=R=F,S=v):R=R.next=F,ye.lanes|=B,si|=B;F=q.action,Di&&a(v,F),v=q.hasEagerState?q.eagerState:a(v,F)}else B={lane:F,revertLane:q.revertLane,gesture:q.gesture,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},R===null?(T=R=B,S=v):R=R.next=B,ye.lanes|=F,si|=F;q=q.next}while(q!==null&&q!==o);if(R===null?S=v:R.next=T,!Pt(v,i.memoizedState)&&(tt=!0,j&&(a=hs,a!==null)))throw a;i.memoizedState=v,i.baseState=S,i.baseQueue=R,c.lastRenderedState=v}return g===null&&(c.lanes=0),[i.memoizedState,c.dispatch]}function Uu(i){var o=We(),a=o.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=i;var c=a.dispatch,g=a.pending,v=o.memoizedState;if(g!==null){a.pending=null;var S=g=g.next;do v=i(v,S.action),S=S.next;while(S!==g);Pt(v,o.memoizedState)||(tt=!0),o.memoizedState=v,o.baseQueue===null&&(o.baseState=v),a.lastRenderedState=v}return[v,c]}function Rh(i,o,a){var c=ye,g=We(),v=Ee;if(v){if(a===void 0)throw Error(s(407));a=a()}else a=o();var S=!Pt((Oe||g).memoizedState,a);if(S&&(g.memoizedState=a,tt=!0),g=g.queue,Lu(Mh.bind(null,c,g,i),[i]),g.getSnapshot!==o||S||et!==null&&et.memoizedState.tag&1){if(c.flags|=2048,_s(9,{destroy:void 0},Ih.bind(null,c,g,a,o),null),ze===null)throw Error(s(349));v||(Nn&127)!==0||kh(c,o,a)}return a}function kh(i,o,a){i.flags|=16384,i={getSnapshot:o,value:a},o=ye.updateQueue,o===null?(o=ea(),ye.updateQueue=o,o.stores=[i]):(a=o.stores,a===null?o.stores=[i]:a.push(i))}function Ih(i,o,a,c){o.value=a,o.getSnapshot=c,Dh(o)&&Uh(i)}function Mh(i,o,a){return a(function(){Dh(o)&&Uh(i)})}function Dh(i){var o=i.getSnapshot;i=i.value;try{var a=o();return!Pt(i,a)}catch{return!0}}function Uh(i){var o=Ti(i,2);o!==null&&kt(o,i,2)}function Pu(i){var o=bt();if(typeof i=="function"){var a=i;if(i=a(),Di){jn(!0);try{a()}finally{jn(!1)}}}return o.memoizedState=o.baseState=i,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rn,lastRenderedState:i},o}function Ph(i,o,a,c){return i.baseState=a,Du(i,Oe,typeof c=="function"?c:Rn)}function vb(i,o,a,c,g){if(oa(i))throw Error(s(485));if(i=o.action,i!==null){var v={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){v.listeners.push(S)}};z.T!==null?a(!0):v.isTransition=!1,c(v),a=o.pending,a===null?(v.next=o.pending=v,Oh(o,v)):(v.next=a.next,o.pending=a.next=v)}}function Oh(i,o){var a=o.action,c=o.payload,g=i.state;if(o.isTransition){var v=z.T,S={};z.T=S;try{var T=a(g,c),R=z.S;R!==null&&R(S,T),Lh(i,o,T)}catch(q){Ou(i,o,q)}finally{v!==null&&S.types!==null&&(v.types=S.types),z.T=v}}else try{v=a(g,c),Lh(i,o,v)}catch(q){Ou(i,o,q)}}function Lh(i,o,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){qh(i,o,c)},function(c){return Ou(i,o,c)}):qh(i,o,a)}function qh(i,o,a){o.status="fulfilled",o.value=a,Bh(o),i.state=a,o=i.pending,o!==null&&(a=o.next,a===o?i.pending=null:(a=a.next,o.next=a,Oh(i,a)))}function Ou(i,o,a){var c=i.pending;if(i.pending=null,c!==null){c=c.next;do o.status="rejected",o.reason=a,Bh(o),o=o.next;while(o!==c)}i.action=null}function Bh(i){i=i.listeners;for(var o=0;o<i.length;o++)(0,i[o])()}function Gh(i,o){return o}function zh(i,o){if(Ee){var a=ze.formState;if(a!==null){e:{var c=ye;if(Ee){if(Ve){t:{for(var g=Ve,v=Wt;g.nodeType!==8;){if(!v){g=null;break t}if(g=en(g.nextSibling),g===null){g=null;break t}}v=g.data,g=v==="F!"||v==="F"?g:null}if(g){Ve=en(g.nextSibling),c=g.data==="F!";break e}}Kn(c)}c=!1}c&&(o=a[0])}}return a=bt(),a.memoizedState=a.baseState=o,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gh,lastRenderedState:o},a.queue=c,a=rp.bind(null,ye,c),c.dispatch=a,c=Pu(!1),v=Hu.bind(null,ye,!1,c.queue),c=bt(),g={state:o,dispatch:null,action:i,pending:null},c.queue=g,a=vb.bind(null,ye,g,v,a),g.dispatch=a,c.memoizedState=i,[o,a,!1]}function Hh(i){var o=We();return Vh(o,Oe,i)}function Vh(i,o,a){if(o=Du(i,o,Gh)[0],i=na(Rn)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var c=Ro(o)}catch(S){throw S===ps?Fr:S}else c=o;o=We();var g=o.queue,v=g.dispatch;return a!==o.memoizedState&&(ye.flags|=2048,_s(9,{destroy:void 0},_b.bind(null,g,a),null)),[c,v,i]}function _b(i,o){i.action=o}function jh(i){var o=We(),a=Oe;if(a!==null)return Vh(o,a,i);We(),o=o.memoizedState,a=We();var c=a.queue.dispatch;return a.memoizedState=i,[o,c,!1]}function _s(i,o,a,c){return i={tag:i,create:a,deps:c,inst:o,next:null},o=ye.updateQueue,o===null&&(o=ea(),ye.updateQueue=o),a=o.lastEffect,a===null?o.lastEffect=i.next=i:(c=a.next,a.next=i,i.next=c,o.lastEffect=i),i}function $h(){return We().memoizedState}function ia(i,o,a,c){var g=bt();ye.flags|=i,g.memoizedState=_s(1|o,{destroy:void 0},a,c===void 0?null:c)}function sa(i,o,a,c){var g=We();c=c===void 0?null:c;var v=g.memoizedState.inst;Oe!==null&&c!==null&&Cu(c,Oe.memoizedState.deps)?g.memoizedState=_s(o,v,a,c):(ye.flags|=i,g.memoizedState=_s(1|o,v,a,c))}function Fh(i,o){ia(8390656,8,i,o)}function Lu(i,o){sa(2048,8,i,o)}function bb(i){ye.flags|=4;var o=ye.updateQueue;if(o===null)o=ea(),ye.updateQueue=o,o.events=[i];else{var a=o.events;a===null?o.events=[i]:a.push(i)}}function Jh(i){var o=We().memoizedState;return bb({ref:o,nextImpl:i}),function(){if((Ie&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}function Yh(i,o){return sa(4,2,i,o)}function Kh(i,o){return sa(4,4,i,o)}function Qh(i,o){if(typeof o=="function"){i=i();var a=o(i);return function(){typeof a=="function"?a():o(null)}}if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function Xh(i,o,a){a=a!=null?a.concat([i]):null,sa(4,4,Qh.bind(null,o,i),a)}function qu(){}function Wh(i,o){var a=We();o=o===void 0?null:o;var c=a.memoizedState;return o!==null&&Cu(o,c[1])?c[0]:(a.memoizedState=[i,o],i)}function Zh(i,o){var a=We();o=o===void 0?null:o;var c=a.memoizedState;if(o!==null&&Cu(o,c[1]))return c[0];if(c=i(),Di){jn(!0);try{i()}finally{jn(!1)}}return a.memoizedState=[c,o],c}function Bu(i,o,a){return a===void 0||(Nn&1073741824)!==0&&(we&261930)===0?i.memoizedState=o:(i.memoizedState=a,i=em(),ye.lanes|=i,si|=i,a)}function ep(i,o,a,c){return Pt(a,o)?a:gs.current!==null?(i=Bu(i,a,c),Pt(i,o)||(tt=!0),i):(Nn&42)===0||(Nn&1073741824)!==0&&(we&261930)===0?(tt=!0,i.memoizedState=a):(i=em(),ye.lanes|=i,si|=i,o)}function tp(i,o,a,c,g){var v=K.p;K.p=v!==0&&8>v?v:8;var S=z.T,T={};z.T=T,Hu(i,!1,o,a);try{var R=g(),q=z.S;if(q!==null&&q(T,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var j=mb(R,c);ko(i,o,j,zt(i))}else ko(i,o,c,zt(i))}catch(F){ko(i,o,{then:function(){},status:"rejected",reason:F},zt())}finally{K.p=v,S!==null&&T.types!==null&&(S.types=T.types),z.T=S}}function xb(){}function Gu(i,o,a,c){if(i.tag!==5)throw Error(s(476));var g=np(i).queue;tp(i,g,o,ne,a===null?xb:function(){return ip(i),a(c)})}function np(i){var o=i.memoizedState;if(o!==null)return o;o={memoizedState:ne,baseState:ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rn,lastRenderedState:ne},next:null};var a={};return o.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rn,lastRenderedState:a},next:null},i.memoizedState=o,i=i.alternate,i!==null&&(i.memoizedState=o),o}function ip(i){var o=np(i);o.next===null&&(o=i.alternate.memoizedState),ko(i,o.next.queue,{},zt())}function zu(){return ft(Jo)}function sp(){return We().memoizedState}function op(){return We().memoizedState}function Sb(i){for(var o=i.return;o!==null;){switch(o.tag){case 24:case 3:var a=zt();i=Wn(a);var c=Zn(o,i,a);c!==null&&(kt(c,o,a),Eo(c,o,a)),o={cache:gu()},i.payload=o;return}o=o.return}}function wb(i,o,a){var c=zt();a={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},oa(i)?ap(o,a):(a=ou(i,o,a,c),a!==null&&(kt(a,i,c),lp(a,o,c)))}function rp(i,o,a){var c=zt();ko(i,o,a,c)}function ko(i,o,a,c){var g={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(oa(i))ap(o,g);else{var v=i.alternate;if(i.lanes===0&&(v===null||v.lanes===0)&&(v=o.lastRenderedReducer,v!==null))try{var S=o.lastRenderedState,T=v(S,a);if(g.hasEagerState=!0,g.eagerState=T,Pt(T,S))return Br(i,o,g,0),ze===null&&qr(),!1}catch{}finally{}if(a=ou(i,o,g,c),a!==null)return kt(a,i,c),lp(a,o,c),!0}return!1}function Hu(i,o,a,c){if(c={lane:2,revertLane:bc(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},oa(i)){if(o)throw Error(s(479))}else o=ou(i,a,c,2),o!==null&&kt(o,i,2)}function oa(i){var o=i.alternate;return i===ye||o!==null&&o===ye}function ap(i,o){ys=Wr=!0;var a=i.pending;a===null?o.next=o:(o.next=a.next,a.next=o),i.pending=o}function lp(i,o,a){if((a&4194048)!==0){var c=o.lanes;c&=i.pendingLanes,a|=c,o.lanes=a,hf(i,a)}}var Io={readContext:ft,use:ta,useCallback:Ye,useContext:Ye,useEffect:Ye,useImperativeHandle:Ye,useLayoutEffect:Ye,useInsertionEffect:Ye,useMemo:Ye,useReducer:Ye,useRef:Ye,useState:Ye,useDebugValue:Ye,useDeferredValue:Ye,useTransition:Ye,useSyncExternalStore:Ye,useId:Ye,useHostTransitionStatus:Ye,useFormState:Ye,useActionState:Ye,useOptimistic:Ye,useMemoCache:Ye,useCacheRefresh:Ye};Io.useEffectEvent=Ye;var up={readContext:ft,use:ta,useCallback:function(i,o){return bt().memoizedState=[i,o===void 0?null:o],i},useContext:ft,useEffect:Fh,useImperativeHandle:function(i,o,a){a=a!=null?a.concat([i]):null,ia(4194308,4,Qh.bind(null,o,i),a)},useLayoutEffect:function(i,o){return ia(4194308,4,i,o)},useInsertionEffect:function(i,o){ia(4,2,i,o)},useMemo:function(i,o){var a=bt();o=o===void 0?null:o;var c=i();if(Di){jn(!0);try{i()}finally{jn(!1)}}return a.memoizedState=[c,o],c},useReducer:function(i,o,a){var c=bt();if(a!==void 0){var g=a(o);if(Di){jn(!0);try{a(o)}finally{jn(!1)}}}else g=o;return c.memoizedState=c.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},c.queue=i,i=i.dispatch=wb.bind(null,ye,i),[c.memoizedState,i]},useRef:function(i){var o=bt();return i={current:i},o.memoizedState=i},useState:function(i){i=Pu(i);var o=i.queue,a=rp.bind(null,ye,o);return o.dispatch=a,[i.memoizedState,a]},useDebugValue:qu,useDeferredValue:function(i,o){var a=bt();return Bu(a,i,o)},useTransition:function(){var i=Pu(!1);return i=tp.bind(null,ye,i.queue,!0,!1),bt().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,o,a){var c=ye,g=bt();if(Ee){if(a===void 0)throw Error(s(407));a=a()}else{if(a=o(),ze===null)throw Error(s(349));(we&127)!==0||kh(c,o,a)}g.memoizedState=a;var v={value:a,getSnapshot:o};return g.queue=v,Fh(Mh.bind(null,c,v,i),[i]),c.flags|=2048,_s(9,{destroy:void 0},Ih.bind(null,c,v,a,o),null),a},useId:function(){var i=bt(),o=ze.identifierPrefix;if(Ee){var a=mn,c=pn;a=(c&~(1<<32-Ut(c)-1)).toString(32)+a,o="_"+o+"R_"+a,a=Zr++,0<a&&(o+="H"+a.toString(32)),o+="_"}else a=gb++,o="_"+o+"r_"+a.toString(32)+"_";return i.memoizedState=o},useHostTransitionStatus:zu,useFormState:zh,useActionState:zh,useOptimistic:function(i){var o=bt();o.memoizedState=o.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=a,o=Hu.bind(null,ye,!0,a),a.dispatch=o,[i,o]},useMemoCache:Mu,useCacheRefresh:function(){return bt().memoizedState=Sb.bind(null,ye)},useEffectEvent:function(i){var o=bt(),a={impl:i};return o.memoizedState=a,function(){if((Ie&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},Vu={readContext:ft,use:ta,useCallback:Wh,useContext:ft,useEffect:Lu,useImperativeHandle:Xh,useInsertionEffect:Yh,useLayoutEffect:Kh,useMemo:Zh,useReducer:na,useRef:$h,useState:function(){return na(Rn)},useDebugValue:qu,useDeferredValue:function(i,o){var a=We();return ep(a,Oe.memoizedState,i,o)},useTransition:function(){var i=na(Rn)[0],o=We().memoizedState;return[typeof i=="boolean"?i:Ro(i),o]},useSyncExternalStore:Rh,useId:sp,useHostTransitionStatus:zu,useFormState:Hh,useActionState:Hh,useOptimistic:function(i,o){var a=We();return Ph(a,Oe,i,o)},useMemoCache:Mu,useCacheRefresh:op};Vu.useEffectEvent=Jh;var cp={readContext:ft,use:ta,useCallback:Wh,useContext:ft,useEffect:Lu,useImperativeHandle:Xh,useInsertionEffect:Yh,useLayoutEffect:Kh,useMemo:Zh,useReducer:Uu,useRef:$h,useState:function(){return Uu(Rn)},useDebugValue:qu,useDeferredValue:function(i,o){var a=We();return Oe===null?Bu(a,i,o):ep(a,Oe.memoizedState,i,o)},useTransition:function(){var i=Uu(Rn)[0],o=We().memoizedState;return[typeof i=="boolean"?i:Ro(i),o]},useSyncExternalStore:Rh,useId:sp,useHostTransitionStatus:zu,useFormState:jh,useActionState:jh,useOptimistic:function(i,o){var a=We();return Oe!==null?Ph(a,Oe,i,o):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:Mu,useCacheRefresh:op};cp.useEffectEvent=Jh;function ju(i,o,a,c){o=i.memoizedState,a=a(c,o),a=a==null?o:b({},o,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var $u={enqueueSetState:function(i,o,a){i=i._reactInternals;var c=zt(),g=Wn(c);g.payload=o,a!=null&&(g.callback=a),o=Zn(i,g,c),o!==null&&(kt(o,i,c),Eo(o,i,c))},enqueueReplaceState:function(i,o,a){i=i._reactInternals;var c=zt(),g=Wn(c);g.tag=1,g.payload=o,a!=null&&(g.callback=a),o=Zn(i,g,c),o!==null&&(kt(o,i,c),Eo(o,i,c))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var a=zt(),c=Wn(a);c.tag=2,o!=null&&(c.callback=o),o=Zn(i,c,a),o!==null&&(kt(o,i,a),Eo(o,i,a))}};function dp(i,o,a,c,g,v,S){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(c,v,S):o.prototype&&o.prototype.isPureReactComponent?!yo(a,c)||!yo(g,v):!0}function fp(i,o,a,c){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(a,c),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(a,c),o.state!==i&&$u.enqueueReplaceState(o,o.state,null)}function Ui(i,o){var a=o;if("ref"in o){a={};for(var c in o)c!=="ref"&&(a[c]=o[c])}if(i=i.defaultProps){a===o&&(a=b({},a));for(var g in i)a[g]===void 0&&(a[g]=i[g])}return a}function hp(i){Lr(i)}function pp(i){console.error(i)}function mp(i){Lr(i)}function ra(i,o){try{var a=i.onUncaughtError;a(o.value,{componentStack:o.stack})}catch(c){setTimeout(function(){throw c})}}function gp(i,o,a){try{var c=i.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Fu(i,o,a){return a=Wn(a),a.tag=3,a.payload={element:null},a.callback=function(){ra(i,o)},a}function yp(i){return i=Wn(i),i.tag=3,i}function vp(i,o,a,c){var g=a.type.getDerivedStateFromError;if(typeof g=="function"){var v=c.value;i.payload=function(){return g(v)},i.callback=function(){gp(o,a,c)}}var S=a.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(i.callback=function(){gp(o,a,c),typeof g!="function"&&(oi===null?oi=new Set([this]):oi.add(this));var T=c.stack;this.componentDidCatch(c.value,{componentStack:T!==null?T:""})})}function Tb(i,o,a,c,g){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(o=a.alternate,o!==null&&ds(o,a,g,!0),a=Lt.current,a!==null){switch(a.tag){case 31:case 13:return Zt===null?va():a.alternate===null&&Ke===0&&(Ke=3),a.flags&=-257,a.flags|=65536,a.lanes=g,c===Jr?a.flags|=16384:(o=a.updateQueue,o===null?a.updateQueue=new Set([c]):o.add(c),yc(i,c,g)),!1;case 22:return a.flags|=65536,c===Jr?a.flags|=16384:(o=a.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=o):(a=o.retryQueue,a===null?o.retryQueue=new Set([c]):a.add(c)),yc(i,c,g)),!1}throw Error(s(435,a.tag))}return yc(i,c,g),va(),!1}if(Ee)return o=Lt.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=g,c!==du&&(i=Error(s(422),{cause:c}),bo(Kt(i,a)))):(c!==du&&(o=Error(s(423),{cause:c}),bo(Kt(o,a))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,c=Kt(c,a),g=Fu(i.stateNode,c,g),Su(i,g),Ke!==4&&(Ke=2)),!1;var v=Error(s(520),{cause:c});if(v=Kt(v,a),Bo===null?Bo=[v]:Bo.push(v),Ke!==4&&(Ke=2),o===null)return!0;c=Kt(c,a),a=o;do{switch(a.tag){case 3:return a.flags|=65536,i=g&-g,a.lanes|=i,i=Fu(a.stateNode,c,i),Su(a,i),!1;case 1:if(o=a.type,v=a.stateNode,(a.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(oi===null||!oi.has(v))))return a.flags|=65536,g&=-g,a.lanes|=g,g=yp(g),vp(g,i,a,c),Su(a,g),!1}a=a.return}while(a!==null);return!1}var Ju=Error(s(461)),tt=!1;function ht(i,o,a,c){o.child=i===null?Sh(o,null,a,c):Mi(o,i.child,a,c)}function _p(i,o,a,c,g){a=a.render;var v=o.ref;if("ref"in c){var S={};for(var T in c)T!=="ref"&&(S[T]=c[T])}else S=c;return Ni(o),c=Nu(i,o,a,S,v,g),T=Ru(),i!==null&&!tt?(ku(i,o,g),kn(i,o,g)):(Ee&&T&&uu(o),o.flags|=1,ht(i,o,c,g),o.child)}function bp(i,o,a,c,g){if(i===null){var v=a.type;return typeof v=="function"&&!ru(v)&&v.defaultProps===void 0&&a.compare===null?(o.tag=15,o.type=v,xp(i,o,v,c,g)):(i=zr(a.type,null,c,o,o.mode,g),i.ref=o.ref,i.return=o,o.child=i)}if(v=i.child,!tc(i,g)){var S=v.memoizedProps;if(a=a.compare,a=a!==null?a:yo,a(S,c)&&i.ref===o.ref)return kn(i,o,g)}return o.flags|=1,i=Tn(v,c),i.ref=o.ref,i.return=o,o.child=i}function xp(i,o,a,c,g){if(i!==null){var v=i.memoizedProps;if(yo(v,c)&&i.ref===o.ref)if(tt=!1,o.pendingProps=c=v,tc(i,g))(i.flags&131072)!==0&&(tt=!0);else return o.lanes=i.lanes,kn(i,o,g)}return Yu(i,o,a,c,g)}function Sp(i,o,a,c){var g=c.children,v=i!==null?i.memoizedState:null;if(i===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((o.flags&128)!==0){if(v=v!==null?v.baseLanes|a:a,i!==null){for(c=o.child=i.child,g=0;c!==null;)g=g|c.lanes|c.childLanes,c=c.sibling;c=g&~v}else c=0,o.child=null;return wp(i,o,v,a,c)}if((a&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},i!==null&&$r(o,v!==null?v.cachePool:null),v!==null?Eh(o,v):Tu(),Ah(o);else return c=o.lanes=536870912,wp(i,o,v!==null?v.baseLanes|a:a,a,c)}else v!==null?($r(o,v.cachePool),Eh(o,v),ti(),o.memoizedState=null):(i!==null&&$r(o,null),Tu(),ti());return ht(i,o,g,a),o.child}function Mo(i,o){return i!==null&&i.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function wp(i,o,a,c,g){var v=vu();return v=v===null?null:{parent:Ze._currentValue,pool:v},o.memoizedState={baseLanes:a,cachePool:v},i!==null&&$r(o,null),Tu(),Ah(o),i!==null&&ds(i,o,c,!0),o.childLanes=g,null}function aa(i,o){return o=ua({mode:o.mode,children:o.children},i.mode),o.ref=i.ref,i.child=o,o.return=i,o}function Tp(i,o,a){return Mi(o,i.child,null,a),i=aa(o,o.pendingProps),i.flags|=2,qt(o),o.memoizedState=null,i}function Eb(i,o,a){var c=o.pendingProps,g=(o.flags&128)!==0;if(o.flags&=-129,i===null){if(Ee){if(c.mode==="hidden")return i=aa(o,c),o.lanes=536870912,Mo(null,i);if(Au(o),(i=Ve)?(i=Om(i,Wt),i=i!==null&&i.data==="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:Jn!==null?{id:pn,overflow:mn}:null,retryLane:536870912,hydrationErrors:null},a=ah(i),a.return=o,o.child=a,dt=o,Ve=null)):i=null,i===null)throw Kn(o);return o.lanes=536870912,null}return aa(o,c)}var v=i.memoizedState;if(v!==null){var S=v.dehydrated;if(Au(o),g)if(o.flags&256)o.flags&=-257,o=Tp(i,o,a);else if(o.memoizedState!==null)o.child=i.child,o.flags|=128,o=null;else throw Error(s(558));else if(tt||ds(i,o,a,!1),g=(a&i.childLanes)!==0,tt||g){if(c=ze,c!==null&&(S=pf(c,a),S!==0&&S!==v.retryLane))throw v.retryLane=S,Ti(i,S),kt(c,i,S),Ju;va(),o=Tp(i,o,a)}else i=v.treeContext,Ve=en(S.nextSibling),dt=o,Ee=!0,Yn=null,Wt=!1,i!==null&&ch(o,i),o=aa(o,c),o.flags|=4096;return o}return i=Tn(i.child,{mode:c.mode,children:c.children}),i.ref=o.ref,o.child=i,i.return=o,i}function la(i,o){var a=o.ref;if(a===null)i!==null&&i.ref!==null&&(o.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(i===null||i.ref!==a)&&(o.flags|=4194816)}}function Yu(i,o,a,c,g){return Ni(o),a=Nu(i,o,a,c,void 0,g),c=Ru(),i!==null&&!tt?(ku(i,o,g),kn(i,o,g)):(Ee&&c&&uu(o),o.flags|=1,ht(i,o,a,g),o.child)}function Ep(i,o,a,c,g,v){return Ni(o),o.updateQueue=null,a=Nh(o,c,a,g),Ch(i),c=Ru(),i!==null&&!tt?(ku(i,o,v),kn(i,o,v)):(Ee&&c&&uu(o),o.flags|=1,ht(i,o,a,v),o.child)}function Ap(i,o,a,c,g){if(Ni(o),o.stateNode===null){var v=as,S=a.contextType;typeof S=="object"&&S!==null&&(v=ft(S)),v=new a(c,v),o.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=$u,o.stateNode=v,v._reactInternals=o,v=o.stateNode,v.props=c,v.state=o.memoizedState,v.refs={},bu(o),S=a.contextType,v.context=typeof S=="object"&&S!==null?ft(S):as,v.state=o.memoizedState,S=a.getDerivedStateFromProps,typeof S=="function"&&(ju(o,a,S,c),v.state=o.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(S=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),S!==v.state&&$u.enqueueReplaceState(v,v.state,null),Co(o,c,v,g),Ao(),v.state=o.memoizedState),typeof v.componentDidMount=="function"&&(o.flags|=4194308),c=!0}else if(i===null){v=o.stateNode;var T=o.memoizedProps,R=Ui(a,T);v.props=R;var q=v.context,j=a.contextType;S=as,typeof j=="object"&&j!==null&&(S=ft(j));var F=a.getDerivedStateFromProps;j=typeof F=="function"||typeof v.getSnapshotBeforeUpdate=="function",T=o.pendingProps!==T,j||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(T||q!==S)&&fp(o,v,c,S),Xn=!1;var B=o.memoizedState;v.state=B,Co(o,c,v,g),Ao(),q=o.memoizedState,T||B!==q||Xn?(typeof F=="function"&&(ju(o,a,F,c),q=o.memoizedState),(R=Xn||dp(o,a,R,c,B,q,S))?(j||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(o.flags|=4194308)):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=c,o.memoizedState=q),v.props=c,v.state=q,v.context=S,c=R):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),c=!1)}else{v=o.stateNode,xu(i,o),S=o.memoizedProps,j=Ui(a,S),v.props=j,F=o.pendingProps,B=v.context,q=a.contextType,R=as,typeof q=="object"&&q!==null&&(R=ft(q)),T=a.getDerivedStateFromProps,(q=typeof T=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==F||B!==R)&&fp(o,v,c,R),Xn=!1,B=o.memoizedState,v.state=B,Co(o,c,v,g),Ao();var G=o.memoizedState;S!==F||B!==G||Xn||i!==null&&i.dependencies!==null&&Vr(i.dependencies)?(typeof T=="function"&&(ju(o,a,T,c),G=o.memoizedState),(j=Xn||dp(o,a,j,c,B,G,R)||i!==null&&i.dependencies!==null&&Vr(i.dependencies))?(q||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,G,R),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,G,R)),typeof v.componentDidUpdate=="function"&&(o.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof v.componentDidUpdate!="function"||S===i.memoizedProps&&B===i.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&B===i.memoizedState||(o.flags|=1024),o.memoizedProps=c,o.memoizedState=G),v.props=c,v.state=G,v.context=R,c=j):(typeof v.componentDidUpdate!="function"||S===i.memoizedProps&&B===i.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&B===i.memoizedState||(o.flags|=1024),c=!1)}return v=c,la(i,o),c=(o.flags&128)!==0,v||c?(v=o.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:v.render(),o.flags|=1,i!==null&&c?(o.child=Mi(o,i.child,null,g),o.child=Mi(o,null,a,g)):ht(i,o,a,g),o.memoizedState=v.state,i=o.child):i=kn(i,o,g),i}function Cp(i,o,a,c){return Ai(),o.flags|=256,ht(i,o,a,c),o.child}var Ku={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Qu(i){return{baseLanes:i,cachePool:gh()}}function Xu(i,o,a){return i=i!==null?i.childLanes&~a:0,o&&(i|=Gt),i}function Np(i,o,a){var c=o.pendingProps,g=!1,v=(o.flags&128)!==0,S;if((S=v)||(S=i!==null&&i.memoizedState===null?!1:(Xe.current&2)!==0),S&&(g=!0,o.flags&=-129),S=(o.flags&32)!==0,o.flags&=-33,i===null){if(Ee){if(g?ei(o):ti(),(i=Ve)?(i=Om(i,Wt),i=i!==null&&i.data!=="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:Jn!==null?{id:pn,overflow:mn}:null,retryLane:536870912,hydrationErrors:null},a=ah(i),a.return=o,o.child=a,dt=o,Ve=null)):i=null,i===null)throw Kn(o);return Dc(i)?o.lanes=32:o.lanes=536870912,null}var T=c.children;return c=c.fallback,g?(ti(),g=o.mode,T=ua({mode:"hidden",children:T},g),c=Ei(c,g,a,null),T.return=o,c.return=o,T.sibling=c,o.child=T,c=o.child,c.memoizedState=Qu(a),c.childLanes=Xu(i,S,a),o.memoizedState=Ku,Mo(null,c)):(ei(o),Wu(o,T))}var R=i.memoizedState;if(R!==null&&(T=R.dehydrated,T!==null)){if(v)o.flags&256?(ei(o),o.flags&=-257,o=Zu(i,o,a)):o.memoizedState!==null?(ti(),o.child=i.child,o.flags|=128,o=null):(ti(),T=c.fallback,g=o.mode,c=ua({mode:"visible",children:c.children},g),T=Ei(T,g,a,null),T.flags|=2,c.return=o,T.return=o,c.sibling=T,o.child=c,Mi(o,i.child,null,a),c=o.child,c.memoizedState=Qu(a),c.childLanes=Xu(i,S,a),o.memoizedState=Ku,o=Mo(null,c));else if(ei(o),Dc(T)){if(S=T.nextSibling&&T.nextSibling.dataset,S)var q=S.dgst;S=q,c=Error(s(419)),c.stack="",c.digest=S,bo({value:c,source:null,stack:null}),o=Zu(i,o,a)}else if(tt||ds(i,o,a,!1),S=(a&i.childLanes)!==0,tt||S){if(S=ze,S!==null&&(c=pf(S,a),c!==0&&c!==R.retryLane))throw R.retryLane=c,Ti(i,c),kt(S,i,c),Ju;Mc(T)||va(),o=Zu(i,o,a)}else Mc(T)?(o.flags|=192,o.child=i.child,o=null):(i=R.treeContext,Ve=en(T.nextSibling),dt=o,Ee=!0,Yn=null,Wt=!1,i!==null&&ch(o,i),o=Wu(o,c.children),o.flags|=4096);return o}return g?(ti(),T=c.fallback,g=o.mode,R=i.child,q=R.sibling,c=Tn(R,{mode:"hidden",children:c.children}),c.subtreeFlags=R.subtreeFlags&65011712,q!==null?T=Tn(q,T):(T=Ei(T,g,a,null),T.flags|=2),T.return=o,c.return=o,c.sibling=T,o.child=c,Mo(null,c),c=o.child,T=i.child.memoizedState,T===null?T=Qu(a):(g=T.cachePool,g!==null?(R=Ze._currentValue,g=g.parent!==R?{parent:R,pool:R}:g):g=gh(),T={baseLanes:T.baseLanes|a,cachePool:g}),c.memoizedState=T,c.childLanes=Xu(i,S,a),o.memoizedState=Ku,Mo(i.child,c)):(ei(o),a=i.child,i=a.sibling,a=Tn(a,{mode:"visible",children:c.children}),a.return=o,a.sibling=null,i!==null&&(S=o.deletions,S===null?(o.deletions=[i],o.flags|=16):S.push(i)),o.child=a,o.memoizedState=null,a)}function Wu(i,o){return o=ua({mode:"visible",children:o},i.mode),o.return=i,i.child=o}function ua(i,o){return i=Ot(22,i,null,o),i.lanes=0,i}function Zu(i,o,a){return Mi(o,i.child,null,a),i=Wu(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function Rp(i,o,a){i.lanes|=o;var c=i.alternate;c!==null&&(c.lanes|=o),pu(i.return,o,a)}function ec(i,o,a,c,g,v){var S=i.memoizedState;S===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:g,treeForkCount:v}:(S.isBackwards=o,S.rendering=null,S.renderingStartTime=0,S.last=c,S.tail=a,S.tailMode=g,S.treeForkCount=v)}function kp(i,o,a){var c=o.pendingProps,g=c.revealOrder,v=c.tail;c=c.children;var S=Xe.current,T=(S&2)!==0;if(T?(S=S&1|2,o.flags|=128):S&=1,X(Xe,S),ht(i,o,c,a),c=Ee?_o:0,!T&&i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Rp(i,a,o);else if(i.tag===19)Rp(i,a,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(g){case"forwards":for(a=o.child,g=null;a!==null;)i=a.alternate,i!==null&&Xr(i)===null&&(g=a),a=a.sibling;a=g,a===null?(g=o.child,o.child=null):(g=a.sibling,a.sibling=null),ec(o,!1,g,a,v,c);break;case"backwards":case"unstable_legacy-backwards":for(a=null,g=o.child,o.child=null;g!==null;){if(i=g.alternate,i!==null&&Xr(i)===null){o.child=g;break}i=g.sibling,g.sibling=a,a=g,g=i}ec(o,!0,a,null,v,c);break;case"together":ec(o,!1,null,null,void 0,c);break;default:o.memoizedState=null}return o.child}function kn(i,o,a){if(i!==null&&(o.dependencies=i.dependencies),si|=o.lanes,(a&o.childLanes)===0)if(i!==null){if(ds(i,o,a,!1),(a&o.childLanes)===0)return null}else return null;if(i!==null&&o.child!==i.child)throw Error(s(153));if(o.child!==null){for(i=o.child,a=Tn(i,i.pendingProps),o.child=a,a.return=o;i.sibling!==null;)i=i.sibling,a=a.sibling=Tn(i,i.pendingProps),a.return=o;a.sibling=null}return o.child}function tc(i,o){return(i.lanes&o)!==0?!0:(i=i.dependencies,!!(i!==null&&Vr(i)))}function Ab(i,o,a){switch(o.tag){case 3:_t(o,o.stateNode.containerInfo),Qn(o,Ze,i.memoizedState.cache),Ai();break;case 27:case 5:io(o);break;case 4:_t(o,o.stateNode.containerInfo);break;case 10:Qn(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,Au(o),null;break;case 13:var c=o.memoizedState;if(c!==null)return c.dehydrated!==null?(ei(o),o.flags|=128,null):(a&o.child.childLanes)!==0?Np(i,o,a):(ei(o),i=kn(i,o,a),i!==null?i.sibling:null);ei(o);break;case 19:var g=(i.flags&128)!==0;if(c=(a&o.childLanes)!==0,c||(ds(i,o,a,!1),c=(a&o.childLanes)!==0),g){if(c)return kp(i,o,a);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),X(Xe,Xe.current),c)break;return null;case 22:return o.lanes=0,Sp(i,o,a,o.pendingProps);case 24:Qn(o,Ze,i.memoizedState.cache)}return kn(i,o,a)}function Ip(i,o,a){if(i!==null)if(i.memoizedProps!==o.pendingProps)tt=!0;else{if(!tc(i,a)&&(o.flags&128)===0)return tt=!1,Ab(i,o,a);tt=(i.flags&131072)!==0}else tt=!1,Ee&&(o.flags&1048576)!==0&&uh(o,_o,o.index);switch(o.lanes=0,o.tag){case 16:e:{var c=o.pendingProps;if(i=ki(o.elementType),o.type=i,typeof i=="function")ru(i)?(c=Ui(i,c),o.tag=1,o=Ap(null,o,i,c,a)):(o.tag=0,o=Yu(null,o,i,c,a));else{if(i!=null){var g=i.$$typeof;if(g===P){o.tag=11,o=_p(null,o,i,c,a);break e}else if(g===V){o.tag=14,o=bp(null,o,i,c,a);break e}}throw o=ce(i)||i,Error(s(306,o,""))}}return o;case 0:return Yu(i,o,o.type,o.pendingProps,a);case 1:return c=o.type,g=Ui(c,o.pendingProps),Ap(i,o,c,g,a);case 3:e:{if(_t(o,o.stateNode.containerInfo),i===null)throw Error(s(387));c=o.pendingProps;var v=o.memoizedState;g=v.element,xu(i,o),Co(o,c,null,a);var S=o.memoizedState;if(c=S.cache,Qn(o,Ze,c),c!==v.cache&&mu(o,[Ze],a,!0),Ao(),c=S.element,v.isDehydrated)if(v={element:c,isDehydrated:!1,cache:S.cache},o.updateQueue.baseState=v,o.memoizedState=v,o.flags&256){o=Cp(i,o,c,a);break e}else if(c!==g){g=Kt(Error(s(424)),o),bo(g),o=Cp(i,o,c,a);break e}else{switch(i=o.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Ve=en(i.firstChild),dt=o,Ee=!0,Yn=null,Wt=!0,a=Sh(o,null,c,a),o.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Ai(),c===g){o=kn(i,o,a);break e}ht(i,o,c,a)}o=o.child}return o;case 26:return la(i,o),i===null?(a=Hm(o.type,null,o.pendingProps,null))?o.memoizedState=a:Ee||(a=o.type,i=o.pendingProps,c=Ea(be.current).createElement(a),c[ct]=o,c[Tt]=i,pt(c,a,i),rt(c),o.stateNode=c):o.memoizedState=Hm(o.type,i.memoizedProps,o.pendingProps,i.memoizedState),null;case 27:return io(o),i===null&&Ee&&(c=o.stateNode=Bm(o.type,o.pendingProps,be.current),dt=o,Wt=!0,g=Ve,ui(o.type)?(Uc=g,Ve=en(c.firstChild)):Ve=g),ht(i,o,o.pendingProps.children,a),la(i,o),i===null&&(o.flags|=4194304),o.child;case 5:return i===null&&Ee&&((g=c=Ve)&&(c=nx(c,o.type,o.pendingProps,Wt),c!==null?(o.stateNode=c,dt=o,Ve=en(c.firstChild),Wt=!1,g=!0):g=!1),g||Kn(o)),io(o),g=o.type,v=o.pendingProps,S=i!==null?i.memoizedProps:null,c=v.children,Rc(g,v)?c=null:S!==null&&Rc(g,S)&&(o.flags|=32),o.memoizedState!==null&&(g=Nu(i,o,yb,null,null,a),Jo._currentValue=g),la(i,o),ht(i,o,c,a),o.child;case 6:return i===null&&Ee&&((i=a=Ve)&&(a=ix(a,o.pendingProps,Wt),a!==null?(o.stateNode=a,dt=o,Ve=null,i=!0):i=!1),i||Kn(o)),null;case 13:return Np(i,o,a);case 4:return _t(o,o.stateNode.containerInfo),c=o.pendingProps,i===null?o.child=Mi(o,null,c,a):ht(i,o,c,a),o.child;case 11:return _p(i,o,o.type,o.pendingProps,a);case 7:return ht(i,o,o.pendingProps,a),o.child;case 8:return ht(i,o,o.pendingProps.children,a),o.child;case 12:return ht(i,o,o.pendingProps.children,a),o.child;case 10:return c=o.pendingProps,Qn(o,o.type,c.value),ht(i,o,c.children,a),o.child;case 9:return g=o.type._context,c=o.pendingProps.children,Ni(o),g=ft(g),c=c(g),o.flags|=1,ht(i,o,c,a),o.child;case 14:return bp(i,o,o.type,o.pendingProps,a);case 15:return xp(i,o,o.type,o.pendingProps,a);case 19:return kp(i,o,a);case 31:return Eb(i,o,a);case 22:return Sp(i,o,a,o.pendingProps);case 24:return Ni(o),c=ft(Ze),i===null?(g=vu(),g===null&&(g=ze,v=gu(),g.pooledCache=v,v.refCount++,v!==null&&(g.pooledCacheLanes|=a),g=v),o.memoizedState={parent:c,cache:g},bu(o),Qn(o,Ze,g)):((i.lanes&a)!==0&&(xu(i,o),Co(o,null,null,a),Ao()),g=i.memoizedState,v=o.memoizedState,g.parent!==c?(g={parent:c,cache:c},o.memoizedState=g,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=g),Qn(o,Ze,c)):(c=v.cache,Qn(o,Ze,c),c!==g.cache&&mu(o,[Ze],a,!0))),ht(i,o,o.pendingProps.children,a),o.child;case 29:throw o.pendingProps}throw Error(s(156,o.tag))}function In(i){i.flags|=4}function nc(i,o,a,c,g){if((o=(i.mode&32)!==0)&&(o=!1),o){if(i.flags|=16777216,(g&335544128)===g)if(i.stateNode.complete)i.flags|=8192;else if(sm())i.flags|=8192;else throw Ii=Jr,_u}else i.flags&=-16777217}function Mp(i,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Jm(o))if(sm())i.flags|=8192;else throw Ii=Jr,_u}function ca(i,o){o!==null&&(i.flags|=4),i.flags&16384&&(o=i.tag!==22?df():536870912,i.lanes|=o,ws|=o)}function Do(i,o){if(!Ee)switch(i.tailMode){case"hidden":o=i.tail;for(var a=null;o!==null;)o.alternate!==null&&(a=o),o=o.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:c.sibling=null}}function je(i){var o=i.alternate!==null&&i.alternate.child===i.child,a=0,c=0;if(o)for(var g=i.child;g!==null;)a|=g.lanes|g.childLanes,c|=g.subtreeFlags&65011712,c|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)a|=g.lanes|g.childLanes,c|=g.subtreeFlags,c|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=c,i.childLanes=a,o}function Cb(i,o,a){var c=o.pendingProps;switch(cu(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return je(o),null;case 1:return je(o),null;case 3:return a=o.stateNode,c=null,i!==null&&(c=i.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),Cn(Ze),Qe(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(cs(o)?In(o):i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,fu())),je(o),null;case 26:var g=o.type,v=o.memoizedState;return i===null?(In(o),v!==null?(je(o),Mp(o,v)):(je(o),nc(o,g,null,c,a))):v?v!==i.memoizedState?(In(o),je(o),Mp(o,v)):(je(o),o.flags&=-16777217):(i=i.memoizedProps,i!==c&&In(o),je(o),nc(o,g,i,c,a)),null;case 27:if(xr(o),a=be.current,g=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==c&&In(o);else{if(!c){if(o.stateNode===null)throw Error(s(166));return je(o),null}i=ie.current,cs(o)?dh(o):(i=Bm(g,c,a),o.stateNode=i,In(o))}return je(o),null;case 5:if(xr(o),g=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==c&&In(o);else{if(!c){if(o.stateNode===null)throw Error(s(166));return je(o),null}if(v=ie.current,cs(o))dh(o);else{var S=Ea(be.current);switch(v){case 1:v=S.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:v=S.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":v=S.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":v=S.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":v=S.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof c.is=="string"?S.createElement("select",{is:c.is}):S.createElement("select"),c.multiple?v.multiple=!0:c.size&&(v.size=c.size);break;default:v=typeof c.is=="string"?S.createElement(g,{is:c.is}):S.createElement(g)}}v[ct]=o,v[Tt]=c;e:for(S=o.child;S!==null;){if(S.tag===5||S.tag===6)v.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===o)break e;for(;S.sibling===null;){if(S.return===null||S.return===o)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}o.stateNode=v;e:switch(pt(v,g,c),g){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&In(o)}}return je(o),nc(o,o.type,i===null?null:i.memoizedProps,o.pendingProps,a),null;case 6:if(i&&o.stateNode!=null)i.memoizedProps!==c&&In(o);else{if(typeof c!="string"&&o.stateNode===null)throw Error(s(166));if(i=be.current,cs(o)){if(i=o.stateNode,a=o.memoizedProps,c=null,g=dt,g!==null)switch(g.tag){case 27:case 5:c=g.memoizedProps}i[ct]=o,i=!!(i.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||Nm(i.nodeValue,a)),i||Kn(o,!0)}else i=Ea(i).createTextNode(c),i[ct]=o,o.stateNode=i}return je(o),null;case 31:if(a=o.memoizedState,i===null||i.memoizedState!==null){if(c=cs(o),a!==null){if(i===null){if(!c)throw Error(s(318));if(i=o.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[ct]=o}else Ai(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;je(o),i=!1}else a=fu(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=a),i=!0;if(!i)return o.flags&256?(qt(o),o):(qt(o),null);if((o.flags&128)!==0)throw Error(s(558))}return je(o),null;case 13:if(c=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=cs(o),c!==null&&c.dehydrated!==null){if(i===null){if(!g)throw Error(s(318));if(g=o.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(s(317));g[ct]=o}else Ai(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;je(o),g=!1}else g=fu(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return o.flags&256?(qt(o),o):(qt(o),null)}return qt(o),(o.flags&128)!==0?(o.lanes=a,o):(a=c!==null,i=i!==null&&i.memoizedState!==null,a&&(c=o.child,g=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(g=c.alternate.memoizedState.cachePool.pool),v=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),v!==g&&(c.flags|=2048)),a!==i&&a&&(o.child.flags|=8192),ca(o,o.updateQueue),je(o),null);case 4:return Qe(),i===null&&Tc(o.stateNode.containerInfo),je(o),null;case 10:return Cn(o.type),je(o),null;case 19:if(J(Xe),c=o.memoizedState,c===null)return je(o),null;if(g=(o.flags&128)!==0,v=c.rendering,v===null)if(g)Do(c,!1);else{if(Ke!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(v=Xr(i),v!==null){for(o.flags|=128,Do(c,!1),i=v.updateQueue,o.updateQueue=i,ca(o,i),o.subtreeFlags=0,i=a,a=o.child;a!==null;)rh(a,i),a=a.sibling;return X(Xe,Xe.current&1|2),Ee&&En(o,c.treeForkCount),o.child}i=i.sibling}c.tail!==null&&Mt()>ma&&(o.flags|=128,g=!0,Do(c,!1),o.lanes=4194304)}else{if(!g)if(i=Xr(v),i!==null){if(o.flags|=128,g=!0,i=i.updateQueue,o.updateQueue=i,ca(o,i),Do(c,!0),c.tail===null&&c.tailMode==="hidden"&&!v.alternate&&!Ee)return je(o),null}else 2*Mt()-c.renderingStartTime>ma&&a!==536870912&&(o.flags|=128,g=!0,Do(c,!1),o.lanes=4194304);c.isBackwards?(v.sibling=o.child,o.child=v):(i=c.last,i!==null?i.sibling=v:o.child=v,c.last=v)}return c.tail!==null?(i=c.tail,c.rendering=i,c.tail=i.sibling,c.renderingStartTime=Mt(),i.sibling=null,a=Xe.current,X(Xe,g?a&1|2:a&1),Ee&&En(o,c.treeForkCount),i):(je(o),null);case 22:case 23:return qt(o),Eu(),c=o.memoizedState!==null,i!==null?i.memoizedState!==null!==c&&(o.flags|=8192):c&&(o.flags|=8192),c?(a&536870912)!==0&&(o.flags&128)===0&&(je(o),o.subtreeFlags&6&&(o.flags|=8192)):je(o),a=o.updateQueue,a!==null&&ca(o,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),c=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(c=o.memoizedState.cachePool.pool),c!==a&&(o.flags|=2048),i!==null&&J(Ri),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),o.memoizedState.cache!==a&&(o.flags|=2048),Cn(Ze),je(o),null;case 25:return null;case 30:return null}throw Error(s(156,o.tag))}function Nb(i,o){switch(cu(o),o.tag){case 1:return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return Cn(Ze),Qe(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 26:case 27:case 5:return xr(o),null;case 31:if(o.memoizedState!==null){if(qt(o),o.alternate===null)throw Error(s(340));Ai()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 13:if(qt(o),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(s(340));Ai()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return J(Xe),null;case 4:return Qe(),null;case 10:return Cn(o.type),null;case 22:case 23:return qt(o),Eu(),i!==null&&J(Ri),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 24:return Cn(Ze),null;case 25:return null;default:return null}}function Dp(i,o){switch(cu(o),o.tag){case 3:Cn(Ze),Qe();break;case 26:case 27:case 5:xr(o);break;case 4:Qe();break;case 31:o.memoizedState!==null&&qt(o);break;case 13:qt(o);break;case 19:J(Xe);break;case 10:Cn(o.type);break;case 22:case 23:qt(o),Eu(),i!==null&&J(Ri);break;case 24:Cn(Ze)}}function Uo(i,o){try{var a=o.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var g=c.next;a=g;do{if((a.tag&i)===i){c=void 0;var v=a.create,S=a.inst;c=v(),S.destroy=c}a=a.next}while(a!==g)}}catch(T){Ue(o,o.return,T)}}function ni(i,o,a){try{var c=o.updateQueue,g=c!==null?c.lastEffect:null;if(g!==null){var v=g.next;c=v;do{if((c.tag&i)===i){var S=c.inst,T=S.destroy;if(T!==void 0){S.destroy=void 0,g=o;var R=a,q=T;try{q()}catch(j){Ue(g,R,j)}}}c=c.next}while(c!==v)}}catch(j){Ue(o,o.return,j)}}function Up(i){var o=i.updateQueue;if(o!==null){var a=i.stateNode;try{Th(o,a)}catch(c){Ue(i,i.return,c)}}}function Pp(i,o,a){a.props=Ui(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(c){Ue(i,o,c)}}function Po(i,o){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var c=i.stateNode;break;case 30:c=i.stateNode;break;default:c=i.stateNode}typeof a=="function"?i.refCleanup=a(c):a.current=c}}catch(g){Ue(i,o,g)}}function gn(i,o){var a=i.ref,c=i.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(g){Ue(i,o,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(g){Ue(i,o,g)}else a.current=null}function Op(i){var o=i.type,a=i.memoizedProps,c=i.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break e;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(g){Ue(i,i.return,g)}}function ic(i,o,a){try{var c=i.stateNode;Qb(c,i.type,a,o),c[Tt]=o}catch(g){Ue(i,i.return,g)}}function Lp(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&ui(i.type)||i.tag===4}function sc(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Lp(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&ui(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function oc(i,o,a){var c=i.tag;if(c===5||c===6)i=i.stateNode,o?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,o):(o=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,o.appendChild(i),a=a._reactRootContainer,a!=null||o.onclick!==null||(o.onclick=Sn));else if(c!==4&&(c===27&&ui(i.type)&&(a=i.stateNode,o=null),i=i.child,i!==null))for(oc(i,o,a),i=i.sibling;i!==null;)oc(i,o,a),i=i.sibling}function da(i,o,a){var c=i.tag;if(c===5||c===6)i=i.stateNode,o?a.insertBefore(i,o):a.appendChild(i);else if(c!==4&&(c===27&&ui(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(da(i,o,a),i=i.sibling;i!==null;)da(i,o,a),i=i.sibling}function qp(i){var o=i.stateNode,a=i.memoizedProps;try{for(var c=i.type,g=o.attributes;g.length;)o.removeAttributeNode(g[0]);pt(o,c,a),o[ct]=i,o[Tt]=a}catch(v){Ue(i,i.return,v)}}var Mn=!1,nt=!1,rc=!1,Bp=typeof WeakSet=="function"?WeakSet:Set,at=null;function Rb(i,o){if(i=i.containerInfo,Cc=Ma,i=Xf(i),Zl(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var g=c.anchorOffset,v=c.focusNode;c=c.focusOffset;try{a.nodeType,v.nodeType}catch{a=null;break e}var S=0,T=-1,R=-1,q=0,j=0,F=i,B=null;t:for(;;){for(var G;F!==a||g!==0&&F.nodeType!==3||(T=S+g),F!==v||c!==0&&F.nodeType!==3||(R=S+c),F.nodeType===3&&(S+=F.nodeValue.length),(G=F.firstChild)!==null;)B=F,F=G;for(;;){if(F===i)break t;if(B===a&&++q===g&&(T=S),B===v&&++j===c&&(R=S),(G=F.nextSibling)!==null)break;F=B,B=F.parentNode}F=G}a=T===-1||R===-1?null:{start:T,end:R}}else a=null}a=a||{start:0,end:0}}else a=null;for(Nc={focusedElem:i,selectionRange:a},Ma=!1,at=o;at!==null;)if(o=at,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,at=i;else for(;at!==null;){switch(o=at,v=o.alternate,i=o.flags,o.tag){case 0:if((i&4)!==0&&(i=o.updateQueue,i=i!==null?i.events:null,i!==null))for(a=0;a<i.length;a++)g=i[a],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&v!==null){i=void 0,a=o,g=v.memoizedProps,v=v.memoizedState,c=a.stateNode;try{var te=Ui(a.type,g);i=c.getSnapshotBeforeUpdate(te,v),c.__reactInternalSnapshotBeforeUpdate=i}catch(le){Ue(a,a.return,le)}}break;case 3:if((i&1024)!==0){if(i=o.stateNode.containerInfo,a=i.nodeType,a===9)Ic(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Ic(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=o.sibling,i!==null){i.return=o.return,at=i;break}at=o.return}}function Gp(i,o,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:Un(i,a),c&4&&Uo(5,a);break;case 1:if(Un(i,a),c&4)if(i=a.stateNode,o===null)try{i.componentDidMount()}catch(S){Ue(a,a.return,S)}else{var g=Ui(a.type,o.memoizedProps);o=o.memoizedState;try{i.componentDidUpdate(g,o,i.__reactInternalSnapshotBeforeUpdate)}catch(S){Ue(a,a.return,S)}}c&64&&Up(a),c&512&&Po(a,a.return);break;case 3:if(Un(i,a),c&64&&(i=a.updateQueue,i!==null)){if(o=null,a.child!==null)switch(a.child.tag){case 27:case 5:o=a.child.stateNode;break;case 1:o=a.child.stateNode}try{Th(i,o)}catch(S){Ue(a,a.return,S)}}break;case 27:o===null&&c&4&&qp(a);case 26:case 5:Un(i,a),o===null&&c&4&&Op(a),c&512&&Po(a,a.return);break;case 12:Un(i,a);break;case 31:Un(i,a),c&4&&Vp(i,a);break;case 13:Un(i,a),c&4&&jp(i,a),c&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=qb.bind(null,a),sx(i,a))));break;case 22:if(c=a.memoizedState!==null||Mn,!c){o=o!==null&&o.memoizedState!==null||nt,g=Mn;var v=nt;Mn=c,(nt=o)&&!v?Pn(i,a,(a.subtreeFlags&8772)!==0):Un(i,a),Mn=g,nt=v}break;case 30:break;default:Un(i,a)}}function zp(i){var o=i.alternate;o!==null&&(i.alternate=null,zp(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&Ol(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Je=null,At=!1;function Dn(i,o,a){for(a=a.child;a!==null;)Hp(i,o,a),a=a.sibling}function Hp(i,o,a){if(Dt&&typeof Dt.onCommitFiberUnmount=="function")try{Dt.onCommitFiberUnmount(so,a)}catch{}switch(a.tag){case 26:nt||gn(a,o),Dn(i,o,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:nt||gn(a,o);var c=Je,g=At;ui(a.type)&&(Je=a.stateNode,At=!1),Dn(i,o,a),jo(a.stateNode),Je=c,At=g;break;case 5:nt||gn(a,o);case 6:if(c=Je,g=At,Je=null,Dn(i,o,a),Je=c,At=g,Je!==null)if(At)try{(Je.nodeType===9?Je.body:Je.nodeName==="HTML"?Je.ownerDocument.body:Je).removeChild(a.stateNode)}catch(v){Ue(a,o,v)}else try{Je.removeChild(a.stateNode)}catch(v){Ue(a,o,v)}break;case 18:Je!==null&&(At?(i=Je,Um(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),Is(i)):Um(Je,a.stateNode));break;case 4:c=Je,g=At,Je=a.stateNode.containerInfo,At=!0,Dn(i,o,a),Je=c,At=g;break;case 0:case 11:case 14:case 15:ni(2,a,o),nt||ni(4,a,o),Dn(i,o,a);break;case 1:nt||(gn(a,o),c=a.stateNode,typeof c.componentWillUnmount=="function"&&Pp(a,o,c)),Dn(i,o,a);break;case 21:Dn(i,o,a);break;case 22:nt=(c=nt)||a.memoizedState!==null,Dn(i,o,a),nt=c;break;default:Dn(i,o,a)}}function Vp(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Is(i)}catch(a){Ue(o,o.return,a)}}}function jp(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Is(i)}catch(a){Ue(o,o.return,a)}}function kb(i){switch(i.tag){case 31:case 13:case 19:var o=i.stateNode;return o===null&&(o=i.stateNode=new Bp),o;case 22:return i=i.stateNode,o=i._retryCache,o===null&&(o=i._retryCache=new Bp),o;default:throw Error(s(435,i.tag))}}function fa(i,o){var a=kb(i);o.forEach(function(c){if(!a.has(c)){a.add(c);var g=Bb.bind(null,i,c);c.then(g,g)}})}function Ct(i,o){var a=o.deletions;if(a!==null)for(var c=0;c<a.length;c++){var g=a[c],v=i,S=o,T=S;e:for(;T!==null;){switch(T.tag){case 27:if(ui(T.type)){Je=T.stateNode,At=!1;break e}break;case 5:Je=T.stateNode,At=!1;break e;case 3:case 4:Je=T.stateNode.containerInfo,At=!0;break e}T=T.return}if(Je===null)throw Error(s(160));Hp(v,S,g),Je=null,At=!1,v=g.alternate,v!==null&&(v.return=null),g.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)$p(o,i),o=o.sibling}var rn=null;function $p(i,o){var a=i.alternate,c=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Ct(o,i),Nt(i),c&4&&(ni(3,i,i.return),Uo(3,i),ni(5,i,i.return));break;case 1:Ct(o,i),Nt(i),c&512&&(nt||a===null||gn(a,a.return)),c&64&&Mn&&(i=i.updateQueue,i!==null&&(c=i.callbacks,c!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var g=rn;if(Ct(o,i),Nt(i),c&512&&(nt||a===null||gn(a,a.return)),c&4){var v=a!==null?a.memoizedState:null;if(c=i.memoizedState,a===null)if(c===null)if(i.stateNode===null){e:{c=i.type,a=i.memoizedProps,g=g.ownerDocument||g;t:switch(c){case"title":v=g.getElementsByTagName("title")[0],(!v||v[ao]||v[ct]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=g.createElement(c),g.head.insertBefore(v,g.querySelector("head > title"))),pt(v,c,a),v[ct]=i,rt(v),c=v;break e;case"link":var S=$m("link","href",g).get(c+(a.href||""));if(S){for(var T=0;T<S.length;T++)if(v=S[T],v.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&v.getAttribute("rel")===(a.rel==null?null:a.rel)&&v.getAttribute("title")===(a.title==null?null:a.title)&&v.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){S.splice(T,1);break t}}v=g.createElement(c),pt(v,c,a),g.head.appendChild(v);break;case"meta":if(S=$m("meta","content",g).get(c+(a.content||""))){for(T=0;T<S.length;T++)if(v=S[T],v.getAttribute("content")===(a.content==null?null:""+a.content)&&v.getAttribute("name")===(a.name==null?null:a.name)&&v.getAttribute("property")===(a.property==null?null:a.property)&&v.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&v.getAttribute("charset")===(a.charSet==null?null:a.charSet)){S.splice(T,1);break t}}v=g.createElement(c),pt(v,c,a),g.head.appendChild(v);break;default:throw Error(s(468,c))}v[ct]=i,rt(v),c=v}i.stateNode=c}else Fm(g,i.type,i.stateNode);else i.stateNode=jm(g,c,i.memoizedProps);else v!==c?(v===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):v.count--,c===null?Fm(g,i.type,i.stateNode):jm(g,c,i.memoizedProps)):c===null&&i.stateNode!==null&&ic(i,i.memoizedProps,a.memoizedProps)}break;case 27:Ct(o,i),Nt(i),c&512&&(nt||a===null||gn(a,a.return)),a!==null&&c&4&&ic(i,i.memoizedProps,a.memoizedProps);break;case 5:if(Ct(o,i),Nt(i),c&512&&(nt||a===null||gn(a,a.return)),i.flags&32){g=i.stateNode;try{es(g,"")}catch(te){Ue(i,i.return,te)}}c&4&&i.stateNode!=null&&(g=i.memoizedProps,ic(i,g,a!==null?a.memoizedProps:g)),c&1024&&(rc=!0);break;case 6:if(Ct(o,i),Nt(i),c&4){if(i.stateNode===null)throw Error(s(162));c=i.memoizedProps,a=i.stateNode;try{a.nodeValue=c}catch(te){Ue(i,i.return,te)}}break;case 3:if(Na=null,g=rn,rn=Aa(o.containerInfo),Ct(o,i),rn=g,Nt(i),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Is(o.containerInfo)}catch(te){Ue(i,i.return,te)}rc&&(rc=!1,Fp(i));break;case 4:c=rn,rn=Aa(i.stateNode.containerInfo),Ct(o,i),Nt(i),rn=c;break;case 12:Ct(o,i),Nt(i);break;case 31:Ct(o,i),Nt(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,fa(i,c)));break;case 13:Ct(o,i),Nt(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(pa=Mt()),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,fa(i,c)));break;case 22:g=i.memoizedState!==null;var R=a!==null&&a.memoizedState!==null,q=Mn,j=nt;if(Mn=q||g,nt=j||R,Ct(o,i),nt=j,Mn=q,Nt(i),c&8192)e:for(o=i.stateNode,o._visibility=g?o._visibility&-2:o._visibility|1,g&&(a===null||R||Mn||nt||Pi(i)),a=null,o=i;;){if(o.tag===5||o.tag===26){if(a===null){R=a=o;try{if(v=R.stateNode,g)S=v.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{T=R.stateNode;var F=R.memoizedProps.style,B=F!=null&&F.hasOwnProperty("display")?F.display:null;T.style.display=B==null||typeof B=="boolean"?"":(""+B).trim()}}catch(te){Ue(R,R.return,te)}}}else if(o.tag===6){if(a===null){R=o;try{R.stateNode.nodeValue=g?"":R.memoizedProps}catch(te){Ue(R,R.return,te)}}}else if(o.tag===18){if(a===null){R=o;try{var G=R.stateNode;g?Pm(G,!0):Pm(R.stateNode,!1)}catch(te){Ue(R,R.return,te)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;a===o&&(a=null),o=o.return}a===o&&(a=null),o.sibling.return=o.return,o=o.sibling}c&4&&(c=i.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,fa(i,a))));break;case 19:Ct(o,i),Nt(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,fa(i,c)));break;case 30:break;case 21:break;default:Ct(o,i),Nt(i)}}function Nt(i){var o=i.flags;if(o&2){try{for(var a,c=i.return;c!==null;){if(Lp(c)){a=c;break}c=c.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var g=a.stateNode,v=sc(i);da(i,v,g);break;case 5:var S=a.stateNode;a.flags&32&&(es(S,""),a.flags&=-33);var T=sc(i);da(i,T,S);break;case 3:case 4:var R=a.stateNode.containerInfo,q=sc(i);oc(i,q,R);break;default:throw Error(s(161))}}catch(j){Ue(i,i.return,j)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function Fp(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var o=i;Fp(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),i=i.sibling}}function Un(i,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Gp(i,o.alternate,o),o=o.sibling}function Pi(i){for(i=i.child;i!==null;){var o=i;switch(o.tag){case 0:case 11:case 14:case 15:ni(4,o,o.return),Pi(o);break;case 1:gn(o,o.return);var a=o.stateNode;typeof a.componentWillUnmount=="function"&&Pp(o,o.return,a),Pi(o);break;case 27:jo(o.stateNode);case 26:case 5:gn(o,o.return),Pi(o);break;case 22:o.memoizedState===null&&Pi(o);break;case 30:Pi(o);break;default:Pi(o)}i=i.sibling}}function Pn(i,o,a){for(a=a&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var c=o.alternate,g=i,v=o,S=v.flags;switch(v.tag){case 0:case 11:case 15:Pn(g,v,a),Uo(4,v);break;case 1:if(Pn(g,v,a),c=v,g=c.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(q){Ue(c,c.return,q)}if(c=v,g=c.updateQueue,g!==null){var T=c.stateNode;try{var R=g.shared.hiddenCallbacks;if(R!==null)for(g.shared.hiddenCallbacks=null,g=0;g<R.length;g++)wh(R[g],T)}catch(q){Ue(c,c.return,q)}}a&&S&64&&Up(v),Po(v,v.return);break;case 27:qp(v);case 26:case 5:Pn(g,v,a),a&&c===null&&S&4&&Op(v),Po(v,v.return);break;case 12:Pn(g,v,a);break;case 31:Pn(g,v,a),a&&S&4&&Vp(g,v);break;case 13:Pn(g,v,a),a&&S&4&&jp(g,v);break;case 22:v.memoizedState===null&&Pn(g,v,a),Po(v,v.return);break;case 30:break;default:Pn(g,v,a)}o=o.sibling}}function ac(i,o){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(i=o.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&xo(a))}function lc(i,o){i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&xo(i))}function an(i,o,a,c){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Jp(i,o,a,c),o=o.sibling}function Jp(i,o,a,c){var g=o.flags;switch(o.tag){case 0:case 11:case 15:an(i,o,a,c),g&2048&&Uo(9,o);break;case 1:an(i,o,a,c);break;case 3:an(i,o,a,c),g&2048&&(i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&xo(i)));break;case 12:if(g&2048){an(i,o,a,c),i=o.stateNode;try{var v=o.memoizedProps,S=v.id,T=v.onPostCommit;typeof T=="function"&&T(S,o.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(R){Ue(o,o.return,R)}}else an(i,o,a,c);break;case 31:an(i,o,a,c);break;case 13:an(i,o,a,c);break;case 23:break;case 22:v=o.stateNode,S=o.alternate,o.memoizedState!==null?v._visibility&2?an(i,o,a,c):Oo(i,o):v._visibility&2?an(i,o,a,c):(v._visibility|=2,bs(i,o,a,c,(o.subtreeFlags&10256)!==0||!1)),g&2048&&ac(S,o);break;case 24:an(i,o,a,c),g&2048&&lc(o.alternate,o);break;default:an(i,o,a,c)}}function bs(i,o,a,c,g){for(g=g&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var v=i,S=o,T=a,R=c,q=S.flags;switch(S.tag){case 0:case 11:case 15:bs(v,S,T,R,g),Uo(8,S);break;case 23:break;case 22:var j=S.stateNode;S.memoizedState!==null?j._visibility&2?bs(v,S,T,R,g):Oo(v,S):(j._visibility|=2,bs(v,S,T,R,g)),g&&q&2048&&ac(S.alternate,S);break;case 24:bs(v,S,T,R,g),g&&q&2048&&lc(S.alternate,S);break;default:bs(v,S,T,R,g)}o=o.sibling}}function Oo(i,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var a=i,c=o,g=c.flags;switch(c.tag){case 22:Oo(a,c),g&2048&&ac(c.alternate,c);break;case 24:Oo(a,c),g&2048&&lc(c.alternate,c);break;default:Oo(a,c)}o=o.sibling}}var Lo=8192;function xs(i,o,a){if(i.subtreeFlags&Lo)for(i=i.child;i!==null;)Yp(i,o,a),i=i.sibling}function Yp(i,o,a){switch(i.tag){case 26:xs(i,o,a),i.flags&Lo&&i.memoizedState!==null&&gx(a,rn,i.memoizedState,i.memoizedProps);break;case 5:xs(i,o,a);break;case 3:case 4:var c=rn;rn=Aa(i.stateNode.containerInfo),xs(i,o,a),rn=c;break;case 22:i.memoizedState===null&&(c=i.alternate,c!==null&&c.memoizedState!==null?(c=Lo,Lo=16777216,xs(i,o,a),Lo=c):xs(i,o,a));break;default:xs(i,o,a)}}function Kp(i){var o=i.alternate;if(o!==null&&(i=o.child,i!==null)){o.child=null;do o=i.sibling,i.sibling=null,i=o;while(i!==null)}}function qo(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var a=0;a<o.length;a++){var c=o[a];at=c,Xp(c,i)}Kp(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Qp(i),i=i.sibling}function Qp(i){switch(i.tag){case 0:case 11:case 15:qo(i),i.flags&2048&&ni(9,i,i.return);break;case 3:qo(i);break;case 12:qo(i);break;case 22:var o=i.stateNode;i.memoizedState!==null&&o._visibility&2&&(i.return===null||i.return.tag!==13)?(o._visibility&=-3,ha(i)):qo(i);break;default:qo(i)}}function ha(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var a=0;a<o.length;a++){var c=o[a];at=c,Xp(c,i)}Kp(i)}for(i=i.child;i!==null;){switch(o=i,o.tag){case 0:case 11:case 15:ni(8,o,o.return),ha(o);break;case 22:a=o.stateNode,a._visibility&2&&(a._visibility&=-3,ha(o));break;default:ha(o)}i=i.sibling}}function Xp(i,o){for(;at!==null;){var a=at;switch(a.tag){case 0:case 11:case 15:ni(8,a,o);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:xo(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,at=c;else e:for(a=i;at!==null;){c=at;var g=c.sibling,v=c.return;if(zp(c),c===a){at=null;break e}if(g!==null){g.return=v,at=g;break e}at=v}}}var Ib={getCacheForType:function(i){var o=ft(Ze),a=o.data.get(i);return a===void 0&&(a=i(),o.data.set(i,a)),a},cacheSignal:function(){return ft(Ze).controller.signal}},Mb=typeof WeakMap=="function"?WeakMap:Map,Ie=0,ze=null,xe=null,we=0,De=0,Bt=null,ii=!1,Ss=!1,uc=!1,On=0,Ke=0,si=0,Oi=0,cc=0,Gt=0,ws=0,Bo=null,Rt=null,dc=!1,pa=0,Wp=0,ma=1/0,ga=null,oi=null,st=0,ri=null,Ts=null,Ln=0,fc=0,hc=null,Zp=null,Go=0,pc=null;function zt(){return(Ie&2)!==0&&we!==0?we&-we:z.T!==null?bc():mf()}function em(){if(Gt===0)if((we&536870912)===0||Ee){var i=Tr;Tr<<=1,(Tr&3932160)===0&&(Tr=262144),Gt=i}else Gt=536870912;return i=Lt.current,i!==null&&(i.flags|=32),Gt}function kt(i,o,a){(i===ze&&(De===2||De===9)||i.cancelPendingCommit!==null)&&(Es(i,0),ai(i,we,Gt,!1)),ro(i,a),((Ie&2)===0||i!==ze)&&(i===ze&&((Ie&2)===0&&(Oi|=a),Ke===4&&ai(i,we,Gt,!1)),yn(i))}function tm(i,o,a){if((Ie&6)!==0)throw Error(s(327));var c=!a&&(o&127)===0&&(o&i.expiredLanes)===0||oo(i,o),g=c?Pb(i,o):gc(i,o,!0),v=c;do{if(g===0){Ss&&!c&&ai(i,o,0,!1);break}else{if(a=i.current.alternate,v&&!Db(a)){g=gc(i,o,!1),v=!1;continue}if(g===2){if(v=o,i.errorRecoveryDisabledLanes&v)var S=0;else S=i.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){o=S;e:{var T=i;g=Bo;var R=T.current.memoizedState.isDehydrated;if(R&&(Es(T,S).flags|=256),S=gc(T,S,!1),S!==2){if(uc&&!R){T.errorRecoveryDisabledLanes|=v,Oi|=v,g=4;break e}v=Rt,Rt=g,v!==null&&(Rt===null?Rt=v:Rt.push.apply(Rt,v))}g=S}if(v=!1,g!==2)continue}}if(g===1){Es(i,0),ai(i,o,0,!0);break}e:{switch(c=i,v=g,v){case 0:case 1:throw Error(s(345));case 4:if((o&4194048)!==o)break;case 6:ai(c,o,Gt,!ii);break e;case 2:Rt=null;break;case 3:case 5:break;default:throw Error(s(329))}if((o&62914560)===o&&(g=pa+300-Mt(),10<g)){if(ai(c,o,Gt,!ii),Ar(c,0,!0)!==0)break e;Ln=o,c.timeoutHandle=Mm(nm.bind(null,c,a,Rt,ga,dc,o,Gt,Oi,ws,ii,v,"Throttled",-0,0),g);break e}nm(c,a,Rt,ga,dc,o,Gt,Oi,ws,ii,v,null,-0,0)}}break}while(!0);yn(i)}function nm(i,o,a,c,g,v,S,T,R,q,j,F,B,G){if(i.timeoutHandle=-1,F=o.subtreeFlags,F&8192||(F&16785408)===16785408){F={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Sn},Yp(o,v,F);var te=(v&62914560)===v?pa-Mt():(v&4194048)===v?Wp-Mt():0;if(te=yx(F,te),te!==null){Ln=v,i.cancelPendingCommit=te(cm.bind(null,i,o,v,a,c,g,S,T,R,j,F,null,B,G)),ai(i,v,S,!q);return}}cm(i,o,v,a,c,g,S,T,R)}function Db(i){for(var o=i;;){var a=o.tag;if((a===0||a===11||a===15)&&o.flags&16384&&(a=o.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var g=a[c],v=g.getSnapshot;g=g.value;try{if(!Pt(v(),g))return!1}catch{return!1}}if(a=o.child,o.subtreeFlags&16384&&a!==null)a.return=o,o=a;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function ai(i,o,a,c){o&=~cc,o&=~Oi,i.suspendedLanes|=o,i.pingedLanes&=~o,c&&(i.warmLanes|=o),c=i.expirationTimes;for(var g=o;0<g;){var v=31-Ut(g),S=1<<v;c[v]=-1,g&=~S}a!==0&&ff(i,a,o)}function ya(){return(Ie&6)===0?(zo(0),!1):!0}function mc(){if(xe!==null){if(De===0)var i=xe.return;else i=xe,An=Ci=null,Iu(i),ms=null,wo=0,i=xe;for(;i!==null;)Dp(i.alternate,i),i=i.return;xe=null}}function Es(i,o){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,Zb(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),Ln=0,mc(),ze=i,xe=a=Tn(i.current,null),we=o,De=0,Bt=null,ii=!1,Ss=oo(i,o),uc=!1,ws=Gt=cc=Oi=si=Ke=0,Rt=Bo=null,dc=!1,(o&8)!==0&&(o|=o&32);var c=i.entangledLanes;if(c!==0)for(i=i.entanglements,c&=o;0<c;){var g=31-Ut(c),v=1<<g;o|=i[g],c&=~v}return On=o,qr(),a}function im(i,o){ye=null,z.H=Io,o===ps||o===Fr?(o=_h(),De=3):o===_u?(o=_h(),De=4):De=o===Ju?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Bt=o,xe===null&&(Ke=1,ra(i,Kt(o,i.current)))}function sm(){var i=Lt.current;return i===null?!0:(we&4194048)===we?Zt===null:(we&62914560)===we||(we&536870912)!==0?i===Zt:!1}function om(){var i=z.H;return z.H=Io,i===null?Io:i}function rm(){var i=z.A;return z.A=Ib,i}function va(){Ke=4,ii||(we&4194048)!==we&&Lt.current!==null||(Ss=!0),(si&134217727)===0&&(Oi&134217727)===0||ze===null||ai(ze,we,Gt,!1)}function gc(i,o,a){var c=Ie;Ie|=2;var g=om(),v=rm();(ze!==i||we!==o)&&(ga=null,Es(i,o)),o=!1;var S=Ke;e:do try{if(De!==0&&xe!==null){var T=xe,R=Bt;switch(De){case 8:mc(),S=6;break e;case 3:case 2:case 9:case 6:Lt.current===null&&(o=!0);var q=De;if(De=0,Bt=null,As(i,T,R,q),a&&Ss){S=0;break e}break;default:q=De,De=0,Bt=null,As(i,T,R,q)}}Ub(),S=Ke;break}catch(j){im(i,j)}while(!0);return o&&i.shellSuspendCounter++,An=Ci=null,Ie=c,z.H=g,z.A=v,xe===null&&(ze=null,we=0,qr()),S}function Ub(){for(;xe!==null;)am(xe)}function Pb(i,o){var a=Ie;Ie|=2;var c=om(),g=rm();ze!==i||we!==o?(ga=null,ma=Mt()+500,Es(i,o)):Ss=oo(i,o);e:do try{if(De!==0&&xe!==null){o=xe;var v=Bt;t:switch(De){case 1:De=0,Bt=null,As(i,o,v,1);break;case 2:case 9:if(yh(v)){De=0,Bt=null,lm(o);break}o=function(){De!==2&&De!==9||ze!==i||(De=7),yn(i)},v.then(o,o);break e;case 3:De=7;break e;case 4:De=5;break e;case 7:yh(v)?(De=0,Bt=null,lm(o)):(De=0,Bt=null,As(i,o,v,7));break;case 5:var S=null;switch(xe.tag){case 26:S=xe.memoizedState;case 5:case 27:var T=xe;if(S?Jm(S):T.stateNode.complete){De=0,Bt=null;var R=T.sibling;if(R!==null)xe=R;else{var q=T.return;q!==null?(xe=q,_a(q)):xe=null}break t}}De=0,Bt=null,As(i,o,v,5);break;case 6:De=0,Bt=null,As(i,o,v,6);break;case 8:mc(),Ke=6;break e;default:throw Error(s(462))}}Ob();break}catch(j){im(i,j)}while(!0);return An=Ci=null,z.H=c,z.A=g,Ie=a,xe!==null?0:(ze=null,we=0,qr(),Ke)}function Ob(){for(;xe!==null&&!o_();)am(xe)}function am(i){var o=Ip(i.alternate,i,On);i.memoizedProps=i.pendingProps,o===null?_a(i):xe=o}function lm(i){var o=i,a=o.alternate;switch(o.tag){case 15:case 0:o=Ep(a,o,o.pendingProps,o.type,void 0,we);break;case 11:o=Ep(a,o,o.pendingProps,o.type.render,o.ref,we);break;case 5:Iu(o);default:Dp(a,o),o=xe=rh(o,On),o=Ip(a,o,On)}i.memoizedProps=i.pendingProps,o===null?_a(i):xe=o}function As(i,o,a,c){An=Ci=null,Iu(o),ms=null,wo=0;var g=o.return;try{if(Tb(i,g,o,a,we)){Ke=1,ra(i,Kt(a,i.current)),xe=null;return}}catch(v){if(g!==null)throw xe=g,v;Ke=1,ra(i,Kt(a,i.current)),xe=null;return}o.flags&32768?(Ee||c===1?i=!0:Ss||(we&536870912)!==0?i=!1:(ii=i=!0,(c===2||c===9||c===3||c===6)&&(c=Lt.current,c!==null&&c.tag===13&&(c.flags|=16384))),um(o,i)):_a(o)}function _a(i){var o=i;do{if((o.flags&32768)!==0){um(o,ii);return}i=o.return;var a=Cb(o.alternate,o,On);if(a!==null){xe=a;return}if(o=o.sibling,o!==null){xe=o;return}xe=o=i}while(o!==null);Ke===0&&(Ke=5)}function um(i,o){do{var a=Nb(i.alternate,i);if(a!==null){a.flags&=32767,xe=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!o&&(i=i.sibling,i!==null)){xe=i;return}xe=i=a}while(i!==null);Ke=6,xe=null}function cm(i,o,a,c,g,v,S,T,R){i.cancelPendingCommit=null;do ba();while(st!==0);if((Ie&6)!==0)throw Error(s(327));if(o!==null){if(o===i.current)throw Error(s(177));if(v=o.lanes|o.childLanes,v|=su,m_(i,a,v,S,T,R),i===ze&&(xe=ze=null,we=0),Ts=o,ri=i,Ln=a,fc=v,hc=g,Zp=c,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,Gb(Sr,function(){return mm(),null})):(i.callbackNode=null,i.callbackPriority=0),c=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||c){c=z.T,z.T=null,g=K.p,K.p=2,S=Ie,Ie|=4;try{Rb(i,o,a)}finally{Ie=S,K.p=g,z.T=c}}st=1,dm(),fm(),hm()}}function dm(){if(st===1){st=0;var i=ri,o=Ts,a=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||a){a=z.T,z.T=null;var c=K.p;K.p=2;var g=Ie;Ie|=4;try{$p(o,i);var v=Nc,S=Xf(i.containerInfo),T=v.focusedElem,R=v.selectionRange;if(S!==T&&T&&T.ownerDocument&&Qf(T.ownerDocument.documentElement,T)){if(R!==null&&Zl(T)){var q=R.start,j=R.end;if(j===void 0&&(j=q),"selectionStart"in T)T.selectionStart=q,T.selectionEnd=Math.min(j,T.value.length);else{var F=T.ownerDocument||document,B=F&&F.defaultView||window;if(B.getSelection){var G=B.getSelection(),te=T.textContent.length,le=Math.min(R.start,te),qe=R.end===void 0?le:Math.min(R.end,te);!G.extend&&le>qe&&(S=qe,qe=le,le=S);var U=Kf(T,le),k=Kf(T,qe);if(U&&k&&(G.rangeCount!==1||G.anchorNode!==U.node||G.anchorOffset!==U.offset||G.focusNode!==k.node||G.focusOffset!==k.offset)){var L=F.createRange();L.setStart(U.node,U.offset),G.removeAllRanges(),le>qe?(G.addRange(L),G.extend(k.node,k.offset)):(L.setEnd(k.node,k.offset),G.addRange(L))}}}}for(F=[],G=T;G=G.parentNode;)G.nodeType===1&&F.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<F.length;T++){var $=F[T];$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}Ma=!!Cc,Nc=Cc=null}finally{Ie=g,K.p=c,z.T=a}}i.current=o,st=2}}function fm(){if(st===2){st=0;var i=ri,o=Ts,a=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||a){a=z.T,z.T=null;var c=K.p;K.p=2;var g=Ie;Ie|=4;try{Gp(i,o.alternate,o)}finally{Ie=g,K.p=c,z.T=a}}st=3}}function hm(){if(st===4||st===3){st=0,r_();var i=ri,o=Ts,a=Ln,c=Zp;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?st=5:(st=0,Ts=ri=null,pm(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(oi=null),Ul(a),o=o.stateNode,Dt&&typeof Dt.onCommitFiberRoot=="function")try{Dt.onCommitFiberRoot(so,o,void 0,(o.current.flags&128)===128)}catch{}if(c!==null){o=z.T,g=K.p,K.p=2,z.T=null;try{for(var v=i.onRecoverableError,S=0;S<c.length;S++){var T=c[S];v(T.value,{componentStack:T.stack})}}finally{z.T=o,K.p=g}}(Ln&3)!==0&&ba(),yn(i),g=i.pendingLanes,(a&261930)!==0&&(g&42)!==0?i===pc?Go++:(Go=0,pc=i):Go=0,zo(0)}}function pm(i,o){(i.pooledCacheLanes&=o)===0&&(o=i.pooledCache,o!=null&&(i.pooledCache=null,xo(o)))}function ba(){return dm(),fm(),hm(),mm()}function mm(){if(st!==5)return!1;var i=ri,o=fc;fc=0;var a=Ul(Ln),c=z.T,g=K.p;try{K.p=32>a?32:a,z.T=null,a=hc,hc=null;var v=ri,S=Ln;if(st=0,Ts=ri=null,Ln=0,(Ie&6)!==0)throw Error(s(331));var T=Ie;if(Ie|=4,Qp(v.current),Jp(v,v.current,S,a),Ie=T,zo(0,!1),Dt&&typeof Dt.onPostCommitFiberRoot=="function")try{Dt.onPostCommitFiberRoot(so,v)}catch{}return!0}finally{K.p=g,z.T=c,pm(i,o)}}function gm(i,o,a){o=Kt(a,o),o=Fu(i.stateNode,o,2),i=Zn(i,o,2),i!==null&&(ro(i,2),yn(i))}function Ue(i,o,a){if(i.tag===3)gm(i,i,a);else for(;o!==null;){if(o.tag===3){gm(o,i,a);break}else if(o.tag===1){var c=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(oi===null||!oi.has(c))){i=Kt(a,i),a=yp(2),c=Zn(o,a,2),c!==null&&(vp(a,c,o,i),ro(c,2),yn(c));break}}o=o.return}}function yc(i,o,a){var c=i.pingCache;if(c===null){c=i.pingCache=new Mb;var g=new Set;c.set(o,g)}else g=c.get(o),g===void 0&&(g=new Set,c.set(o,g));g.has(a)||(uc=!0,g.add(a),i=Lb.bind(null,i,o,a),o.then(i,i))}function Lb(i,o,a){var c=i.pingCache;c!==null&&c.delete(o),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,ze===i&&(we&a)===a&&(Ke===4||Ke===3&&(we&62914560)===we&&300>Mt()-pa?(Ie&2)===0&&Es(i,0):cc|=a,ws===we&&(ws=0)),yn(i)}function ym(i,o){o===0&&(o=df()),i=Ti(i,o),i!==null&&(ro(i,o),yn(i))}function qb(i){var o=i.memoizedState,a=0;o!==null&&(a=o.retryLane),ym(i,a)}function Bb(i,o){var a=0;switch(i.tag){case 31:case 13:var c=i.stateNode,g=i.memoizedState;g!==null&&(a=g.retryLane);break;case 19:c=i.stateNode;break;case 22:c=i.stateNode._retryCache;break;default:throw Error(s(314))}c!==null&&c.delete(o),ym(i,a)}function Gb(i,o){return kl(i,o)}var xa=null,Cs=null,vc=!1,Sa=!1,_c=!1,li=0;function yn(i){i!==Cs&&i.next===null&&(Cs===null?xa=Cs=i:Cs=Cs.next=i),Sa=!0,vc||(vc=!0,Hb())}function zo(i,o){if(!_c&&Sa){_c=!0;do for(var a=!1,c=xa;c!==null;){if(i!==0){var g=c.pendingLanes;if(g===0)var v=0;else{var S=c.suspendedLanes,T=c.pingedLanes;v=(1<<31-Ut(42|i)+1)-1,v&=g&~(S&~T),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(a=!0,xm(c,v))}else v=we,v=Ar(c,c===ze?v:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(v&3)===0||oo(c,v)||(a=!0,xm(c,v));c=c.next}while(a);_c=!1}}function zb(){vm()}function vm(){Sa=vc=!1;var i=0;li!==0&&Wb()&&(i=li);for(var o=Mt(),a=null,c=xa;c!==null;){var g=c.next,v=_m(c,o);v===0?(c.next=null,a===null?xa=g:a.next=g,g===null&&(Cs=a)):(a=c,(i!==0||(v&3)!==0)&&(Sa=!0)),c=g}st!==0&&st!==5||zo(i),li!==0&&(li=0)}function _m(i,o){for(var a=i.suspendedLanes,c=i.pingedLanes,g=i.expirationTimes,v=i.pendingLanes&-62914561;0<v;){var S=31-Ut(v),T=1<<S,R=g[S];R===-1?((T&a)===0||(T&c)!==0)&&(g[S]=p_(T,o)):R<=o&&(i.expiredLanes|=T),v&=~T}if(o=ze,a=we,a=Ar(i,i===o?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c=i.callbackNode,a===0||i===o&&(De===2||De===9)||i.cancelPendingCommit!==null)return c!==null&&c!==null&&Il(c),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||oo(i,a)){if(o=a&-a,o===i.callbackPriority)return o;switch(c!==null&&Il(c),Ul(a)){case 2:case 8:a=uf;break;case 32:a=Sr;break;case 268435456:a=cf;break;default:a=Sr}return c=bm.bind(null,i),a=kl(a,c),i.callbackPriority=o,i.callbackNode=a,o}return c!==null&&c!==null&&Il(c),i.callbackPriority=2,i.callbackNode=null,2}function bm(i,o){if(st!==0&&st!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(ba()&&i.callbackNode!==a)return null;var c=we;return c=Ar(i,i===ze?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c===0?null:(tm(i,c,o),_m(i,Mt()),i.callbackNode!=null&&i.callbackNode===a?bm.bind(null,i):null)}function xm(i,o){if(ba())return null;tm(i,o,!0)}function Hb(){ex(function(){(Ie&6)!==0?kl(lf,zb):vm()})}function bc(){if(li===0){var i=fs;i===0&&(i=wr,wr<<=1,(wr&261888)===0&&(wr=256)),li=i}return li}function Sm(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:kr(""+i)}function wm(i,o){var a=o.ownerDocument.createElement("input");return a.name=o.name,a.value=o.value,i.id&&a.setAttribute("form",i.id),o.parentNode.insertBefore(a,o),i=new FormData(i),a.parentNode.removeChild(a),i}function Vb(i,o,a,c,g){if(o==="submit"&&a&&a.stateNode===g){var v=Sm((g[Tt]||null).action),S=c.submitter;S&&(o=(o=S[Tt]||null)?Sm(o.formAction):S.getAttribute("formAction"),o!==null&&(v=o,S=null));var T=new Ur("action","action",null,c,g);i.push({event:T,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(li!==0){var R=S?wm(g,S):new FormData(g);Gu(a,{pending:!0,data:R,method:g.method,action:v},null,R)}}else typeof v=="function"&&(T.preventDefault(),R=S?wm(g,S):new FormData(g),Gu(a,{pending:!0,data:R,method:g.method,action:v},v,R))},currentTarget:g}]})}}for(var xc=0;xc<iu.length;xc++){var Sc=iu[xc],jb=Sc.toLowerCase(),$b=Sc[0].toUpperCase()+Sc.slice(1);on(jb,"on"+$b)}on(eh,"onAnimationEnd"),on(th,"onAnimationIteration"),on(nh,"onAnimationStart"),on("dblclick","onDoubleClick"),on("focusin","onFocus"),on("focusout","onBlur"),on(ab,"onTransitionRun"),on(lb,"onTransitionStart"),on(ub,"onTransitionCancel"),on(ih,"onTransitionEnd"),Wi("onMouseEnter",["mouseout","mouseover"]),Wi("onMouseLeave",["mouseout","mouseover"]),Wi("onPointerEnter",["pointerout","pointerover"]),Wi("onPointerLeave",["pointerout","pointerover"]),bi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),bi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),bi("onBeforeInput",["compositionend","keypress","textInput","paste"]),bi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),bi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),bi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ho="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ho));function Tm(i,o){o=(o&4)!==0;for(var a=0;a<i.length;a++){var c=i[a],g=c.event;c=c.listeners;e:{var v=void 0;if(o)for(var S=c.length-1;0<=S;S--){var T=c[S],R=T.instance,q=T.currentTarget;if(T=T.listener,R!==v&&g.isPropagationStopped())break e;v=T,g.currentTarget=q;try{v(g)}catch(j){Lr(j)}g.currentTarget=null,v=R}else for(S=0;S<c.length;S++){if(T=c[S],R=T.instance,q=T.currentTarget,T=T.listener,R!==v&&g.isPropagationStopped())break e;v=T,g.currentTarget=q;try{v(g)}catch(j){Lr(j)}g.currentTarget=null,v=R}}}}function Se(i,o){var a=o[Pl];a===void 0&&(a=o[Pl]=new Set);var c=i+"__bubble";a.has(c)||(Em(o,i,2,!1),a.add(c))}function wc(i,o,a){var c=0;o&&(c|=4),Em(a,i,c,o)}var wa="_reactListening"+Math.random().toString(36).slice(2);function Tc(i){if(!i[wa]){i[wa]=!0,vf.forEach(function(a){a!=="selectionchange"&&(Fb.has(a)||wc(a,!1,i),wc(a,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[wa]||(o[wa]=!0,wc("selectionchange",!1,o))}}function Em(i,o,a,c){switch(eg(o)){case 2:var g=bx;break;case 8:g=xx;break;default:g=Bc}a=g.bind(null,o,a,i),g=void 0,!jl||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),c?g!==void 0?i.addEventListener(o,a,{capture:!0,passive:g}):i.addEventListener(o,a,!0):g!==void 0?i.addEventListener(o,a,{passive:g}):i.addEventListener(o,a,!1)}function Ec(i,o,a,c,g){var v=c;if((o&1)===0&&(o&2)===0&&c!==null)e:for(;;){if(c===null)return;var S=c.tag;if(S===3||S===4){var T=c.stateNode.containerInfo;if(T===g)break;if(S===4)for(S=c.return;S!==null;){var R=S.tag;if((R===3||R===4)&&S.stateNode.containerInfo===g)return;S=S.return}for(;T!==null;){if(S=Ki(T),S===null)return;if(R=S.tag,R===5||R===6||R===26||R===27){c=v=S;continue e}T=T.parentNode}}c=c.return}kf(function(){var q=v,j=Hl(a),F=[];e:{var B=sh.get(i);if(B!==void 0){var G=Ur,te=i;switch(i){case"keypress":if(Mr(a)===0)break e;case"keydown":case"keyup":G=B_;break;case"focusin":te="focus",G=Yl;break;case"focusout":te="blur",G=Yl;break;case"beforeblur":case"afterblur":G=Yl;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=Df;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=C_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=H_;break;case eh:case th:case nh:G=k_;break;case ih:G=j_;break;case"scroll":case"scrollend":G=E_;break;case"wheel":G=F_;break;case"copy":case"cut":case"paste":G=M_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=Pf;break;case"toggle":case"beforetoggle":G=Y_}var le=(o&4)!==0,qe=!le&&(i==="scroll"||i==="scrollend"),U=le?B!==null?B+"Capture":null:B;le=[];for(var k=q,L;k!==null;){var $=k;if(L=$.stateNode,$=$.tag,$!==5&&$!==26&&$!==27||L===null||U===null||($=uo(k,U),$!=null&&le.push(Vo(k,$,L))),qe)break;k=k.return}0<le.length&&(B=new G(B,te,null,a,j),F.push({event:B,listeners:le}))}}if((o&7)===0){e:{if(B=i==="mouseover"||i==="pointerover",G=i==="mouseout"||i==="pointerout",B&&a!==zl&&(te=a.relatedTarget||a.fromElement)&&(Ki(te)||te[Yi]))break e;if((G||B)&&(B=j.window===j?j:(B=j.ownerDocument)?B.defaultView||B.parentWindow:window,G?(te=a.relatedTarget||a.toElement,G=q,te=te?Ki(te):null,te!==null&&(qe=l(te),le=te.tag,te!==qe||le!==5&&le!==27&&le!==6)&&(te=null)):(G=null,te=q),G!==te)){if(le=Df,$="onMouseLeave",U="onMouseEnter",k="mouse",(i==="pointerout"||i==="pointerover")&&(le=Pf,$="onPointerLeave",U="onPointerEnter",k="pointer"),qe=G==null?B:lo(G),L=te==null?B:lo(te),B=new le($,k+"leave",G,a,j),B.target=qe,B.relatedTarget=L,$=null,Ki(j)===q&&(le=new le(U,k+"enter",te,a,j),le.target=L,le.relatedTarget=qe,$=le),qe=$,G&&te)t:{for(le=Jb,U=G,k=te,L=0,$=U;$;$=le($))L++;$=0;for(var re=k;re;re=le(re))$++;for(;0<L-$;)U=le(U),L--;for(;0<$-L;)k=le(k),$--;for(;L--;){if(U===k||k!==null&&U===k.alternate){le=U;break t}U=le(U),k=le(k)}le=null}else le=null;G!==null&&Am(F,B,G,le,!1),te!==null&&qe!==null&&Am(F,qe,te,le,!0)}}e:{if(B=q?lo(q):window,G=B.nodeName&&B.nodeName.toLowerCase(),G==="select"||G==="input"&&B.type==="file")var Ce=Vf;else if(zf(B))if(jf)Ce=sb;else{Ce=nb;var se=tb}else G=B.nodeName,!G||G.toLowerCase()!=="input"||B.type!=="checkbox"&&B.type!=="radio"?q&&Gl(q.elementType)&&(Ce=Vf):Ce=ib;if(Ce&&(Ce=Ce(i,q))){Hf(F,Ce,a,j);break e}se&&se(i,B,q),i==="focusout"&&q&&B.type==="number"&&q.memoizedProps.value!=null&&Bl(B,"number",B.value)}switch(se=q?lo(q):window,i){case"focusin":(zf(se)||se.contentEditable==="true")&&(ss=se,eu=q,vo=null);break;case"focusout":vo=eu=ss=null;break;case"mousedown":tu=!0;break;case"contextmenu":case"mouseup":case"dragend":tu=!1,Wf(F,a,j);break;case"selectionchange":if(rb)break;case"keydown":case"keyup":Wf(F,a,j)}var ve;if(Ql)e:{switch(i){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else is?Bf(i,a)&&(Te="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(Te="onCompositionStart");Te&&(Of&&a.locale!=="ko"&&(is||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&is&&(ve=If()):(Fn=j,$l="value"in Fn?Fn.value:Fn.textContent,is=!0)),se=Ta(q,Te),0<se.length&&(Te=new Uf(Te,i,null,a,j),F.push({event:Te,listeners:se}),ve?Te.data=ve:(ve=Gf(a),ve!==null&&(Te.data=ve)))),(ve=Q_?X_(i,a):W_(i,a))&&(Te=Ta(q,"onBeforeInput"),0<Te.length&&(se=new Uf("onBeforeInput","beforeinput",null,a,j),F.push({event:se,listeners:Te}),se.data=ve)),Vb(F,i,q,a,j)}Tm(F,o)})}function Vo(i,o,a){return{instance:i,listener:o,currentTarget:a}}function Ta(i,o){for(var a=o+"Capture",c=[];i!==null;){var g=i,v=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||v===null||(g=uo(i,a),g!=null&&c.unshift(Vo(i,g,v)),g=uo(i,o),g!=null&&c.push(Vo(i,g,v))),i.tag===3)return c;i=i.return}return[]}function Jb(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Am(i,o,a,c,g){for(var v=o._reactName,S=[];a!==null&&a!==c;){var T=a,R=T.alternate,q=T.stateNode;if(T=T.tag,R!==null&&R===c)break;T!==5&&T!==26&&T!==27||q===null||(R=q,g?(q=uo(a,v),q!=null&&S.unshift(Vo(a,q,R))):g||(q=uo(a,v),q!=null&&S.push(Vo(a,q,R)))),a=a.return}S.length!==0&&i.push({event:o,listeners:S})}var Yb=/\r\n?/g,Kb=/\u0000|\uFFFD/g;function Cm(i){return(typeof i=="string"?i:""+i).replace(Yb,`
`).replace(Kb,"")}function Nm(i,o){return o=Cm(o),Cm(i)===o}function Le(i,o,a,c,g,v){switch(a){case"children":typeof c=="string"?o==="body"||o==="textarea"&&c===""||es(i,c):(typeof c=="number"||typeof c=="bigint")&&o!=="body"&&es(i,""+c);break;case"className":Nr(i,"class",c);break;case"tabIndex":Nr(i,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Nr(i,a,c);break;case"style":Nf(i,c,v);break;case"data":if(o!=="object"){Nr(i,"data",c);break}case"src":case"href":if(c===""&&(o!=="a"||a!=="href")){i.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(a);break}c=kr(""+c),i.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(a==="formAction"?(o!=="input"&&Le(i,o,"name",g.name,g,null),Le(i,o,"formEncType",g.formEncType,g,null),Le(i,o,"formMethod",g.formMethod,g,null),Le(i,o,"formTarget",g.formTarget,g,null)):(Le(i,o,"encType",g.encType,g,null),Le(i,o,"method",g.method,g,null),Le(i,o,"target",g.target,g,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(a);break}c=kr(""+c),i.setAttribute(a,c);break;case"onClick":c!=null&&(i.onclick=Sn);break;case"onScroll":c!=null&&Se("scroll",i);break;case"onScrollEnd":c!=null&&Se("scrollend",i);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(a=c.__html,a!=null){if(g.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"multiple":i.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":i.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){i.removeAttribute("xlink:href");break}a=kr(""+c),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,""+c):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":c===!0?i.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,c):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?i.setAttribute(a,c):i.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?i.removeAttribute(a):i.setAttribute(a,c);break;case"popover":Se("beforetoggle",i),Se("toggle",i),Cr(i,"popover",c);break;case"xlinkActuate":xn(i,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":xn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":xn(i,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":xn(i,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":xn(i,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":xn(i,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":xn(i,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":xn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":xn(i,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Cr(i,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=w_.get(a)||a,Cr(i,a,c))}}function Ac(i,o,a,c,g,v){switch(a){case"style":Nf(i,c,v);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(a=c.__html,a!=null){if(g.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"children":typeof c=="string"?es(i,c):(typeof c=="number"||typeof c=="bigint")&&es(i,""+c);break;case"onScroll":c!=null&&Se("scroll",i);break;case"onScrollEnd":c!=null&&Se("scrollend",i);break;case"onClick":c!=null&&(i.onclick=Sn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!_f.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(g=a.endsWith("Capture"),o=a.slice(2,g?a.length-7:void 0),v=i[Tt]||null,v=v!=null?v[a]:null,typeof v=="function"&&i.removeEventListener(o,v,g),typeof c=="function")){typeof v!="function"&&v!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(o,c,g);break e}a in i?i[a]=c:c===!0?i.setAttribute(a,""):Cr(i,a,c)}}}function pt(i,o,a){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Se("error",i),Se("load",i);var c=!1,g=!1,v;for(v in a)if(a.hasOwnProperty(v)){var S=a[v];if(S!=null)switch(v){case"src":c=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:Le(i,o,v,S,a,null)}}g&&Le(i,o,"srcSet",a.srcSet,a,null),c&&Le(i,o,"src",a.src,a,null);return;case"input":Se("invalid",i);var T=v=S=g=null,R=null,q=null;for(c in a)if(a.hasOwnProperty(c)){var j=a[c];if(j!=null)switch(c){case"name":g=j;break;case"type":S=j;break;case"checked":R=j;break;case"defaultChecked":q=j;break;case"value":v=j;break;case"defaultValue":T=j;break;case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(s(137,o));break;default:Le(i,o,c,j,a,null)}}Tf(i,v,T,R,q,S,g,!1);return;case"select":Se("invalid",i),c=S=v=null;for(g in a)if(a.hasOwnProperty(g)&&(T=a[g],T!=null))switch(g){case"value":v=T;break;case"defaultValue":S=T;break;case"multiple":c=T;default:Le(i,o,g,T,a,null)}o=v,a=S,i.multiple=!!c,o!=null?Zi(i,!!c,o,!1):a!=null&&Zi(i,!!c,a,!0);return;case"textarea":Se("invalid",i),v=g=c=null;for(S in a)if(a.hasOwnProperty(S)&&(T=a[S],T!=null))switch(S){case"value":c=T;break;case"defaultValue":g=T;break;case"children":v=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(s(91));break;default:Le(i,o,S,T,a,null)}Af(i,c,g,v);return;case"option":for(R in a)if(a.hasOwnProperty(R)&&(c=a[R],c!=null))switch(R){case"selected":i.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Le(i,o,R,c,a,null)}return;case"dialog":Se("beforetoggle",i),Se("toggle",i),Se("cancel",i),Se("close",i);break;case"iframe":case"object":Se("load",i);break;case"video":case"audio":for(c=0;c<Ho.length;c++)Se(Ho[c],i);break;case"image":Se("error",i),Se("load",i);break;case"details":Se("toggle",i);break;case"embed":case"source":case"link":Se("error",i),Se("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in a)if(a.hasOwnProperty(q)&&(c=a[q],c!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:Le(i,o,q,c,a,null)}return;default:if(Gl(o)){for(j in a)a.hasOwnProperty(j)&&(c=a[j],c!==void 0&&Ac(i,o,j,c,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(c=a[T],c!=null&&Le(i,o,T,c,a,null))}function Qb(i,o,a,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,v=null,S=null,T=null,R=null,q=null,j=null;for(G in a){var F=a[G];if(a.hasOwnProperty(G)&&F!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":R=F;default:c.hasOwnProperty(G)||Le(i,o,G,null,c,F)}}for(var B in c){var G=c[B];if(F=a[B],c.hasOwnProperty(B)&&(G!=null||F!=null))switch(B){case"type":v=G;break;case"name":g=G;break;case"checked":q=G;break;case"defaultChecked":j=G;break;case"value":S=G;break;case"defaultValue":T=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,o));break;default:G!==F&&Le(i,o,B,G,c,F)}}ql(i,S,T,R,q,j,v,g);return;case"select":G=S=T=B=null;for(v in a)if(R=a[v],a.hasOwnProperty(v)&&R!=null)switch(v){case"value":break;case"multiple":G=R;default:c.hasOwnProperty(v)||Le(i,o,v,null,c,R)}for(g in c)if(v=c[g],R=a[g],c.hasOwnProperty(g)&&(v!=null||R!=null))switch(g){case"value":B=v;break;case"defaultValue":T=v;break;case"multiple":S=v;default:v!==R&&Le(i,o,g,v,c,R)}o=T,a=S,c=G,B!=null?Zi(i,!!a,B,!1):!!c!=!!a&&(o!=null?Zi(i,!!a,o,!0):Zi(i,!!a,a?[]:"",!1));return;case"textarea":G=B=null;for(T in a)if(g=a[T],a.hasOwnProperty(T)&&g!=null&&!c.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:Le(i,o,T,null,c,g)}for(S in c)if(g=c[S],v=a[S],c.hasOwnProperty(S)&&(g!=null||v!=null))switch(S){case"value":B=g;break;case"defaultValue":G=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(s(91));break;default:g!==v&&Le(i,o,S,g,c,v)}Ef(i,B,G);return;case"option":for(var te in a)if(B=a[te],a.hasOwnProperty(te)&&B!=null&&!c.hasOwnProperty(te))switch(te){case"selected":i.selected=!1;break;default:Le(i,o,te,null,c,B)}for(R in c)if(B=c[R],G=a[R],c.hasOwnProperty(R)&&B!==G&&(B!=null||G!=null))switch(R){case"selected":i.selected=B&&typeof B!="function"&&typeof B!="symbol";break;default:Le(i,o,R,B,c,G)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var le in a)B=a[le],a.hasOwnProperty(le)&&B!=null&&!c.hasOwnProperty(le)&&Le(i,o,le,null,c,B);for(q in c)if(B=c[q],G=a[q],c.hasOwnProperty(q)&&B!==G&&(B!=null||G!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(s(137,o));break;default:Le(i,o,q,B,c,G)}return;default:if(Gl(o)){for(var qe in a)B=a[qe],a.hasOwnProperty(qe)&&B!==void 0&&!c.hasOwnProperty(qe)&&Ac(i,o,qe,void 0,c,B);for(j in c)B=c[j],G=a[j],!c.hasOwnProperty(j)||B===G||B===void 0&&G===void 0||Ac(i,o,j,B,c,G);return}}for(var U in a)B=a[U],a.hasOwnProperty(U)&&B!=null&&!c.hasOwnProperty(U)&&Le(i,o,U,null,c,B);for(F in c)B=c[F],G=a[F],!c.hasOwnProperty(F)||B===G||B==null&&G==null||Le(i,o,F,B,c,G)}function Rm(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Xb(){if(typeof performance.getEntriesByType=="function"){for(var i=0,o=0,a=performance.getEntriesByType("resource"),c=0;c<a.length;c++){var g=a[c],v=g.transferSize,S=g.initiatorType,T=g.duration;if(v&&T&&Rm(S)){for(S=0,T=g.responseEnd,c+=1;c<a.length;c++){var R=a[c],q=R.startTime;if(q>T)break;var j=R.transferSize,F=R.initiatorType;j&&Rm(F)&&(R=R.responseEnd,S+=j*(R<T?1:(T-q)/(R-q)))}if(--c,o+=8*(v+S)/(g.duration/1e3),i++,10<i)break}}if(0<i)return o/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Cc=null,Nc=null;function Ea(i){return i.nodeType===9?i:i.ownerDocument}function km(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Im(i,o){if(i===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&o==="foreignObject"?0:i}function Rc(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var kc=null;function Wb(){var i=window.event;return i&&i.type==="popstate"?i===kc?!1:(kc=i,!0):(kc=null,!1)}var Mm=typeof setTimeout=="function"?setTimeout:void 0,Zb=typeof clearTimeout=="function"?clearTimeout:void 0,Dm=typeof Promise=="function"?Promise:void 0,ex=typeof queueMicrotask=="function"?queueMicrotask:typeof Dm<"u"?function(i){return Dm.resolve(null).then(i).catch(tx)}:Mm;function tx(i){setTimeout(function(){throw i})}function ui(i){return i==="head"}function Um(i,o){var a=o,c=0;do{var g=a.nextSibling;if(i.removeChild(a),g&&g.nodeType===8)if(a=g.data,a==="/$"||a==="/&"){if(c===0){i.removeChild(g),Is(o);return}c--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")c++;else if(a==="html")jo(i.ownerDocument.documentElement);else if(a==="head"){a=i.ownerDocument.head,jo(a);for(var v=a.firstChild;v;){var S=v.nextSibling,T=v.nodeName;v[ao]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=S}}else a==="body"&&jo(i.ownerDocument.body);a=g}while(a);Is(o)}function Pm(i,o){var a=i;i=0;do{var c=a.nextSibling;if(a.nodeType===1?o?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(o?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),c&&c.nodeType===8)if(a=c.data,a==="/$"){if(i===0)break;i--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||i++;a=c}while(a)}function Ic(i){var o=i.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var a=o;switch(o=o.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Ic(a),Ol(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function nx(i,o,a,c){for(;i.nodeType===1;){var g=a;if(i.nodeName.toLowerCase()!==o.toLowerCase()){if(!c&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(c){if(!i[ao])switch(o){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(v=i.getAttribute("rel"),v==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(v!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(v=i.getAttribute("src"),(v!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&v&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(o==="input"&&i.type==="hidden"){var v=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===v)return i}else return i;if(i=en(i.nextSibling),i===null)break}return null}function ix(i,o,a){if(o==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=en(i.nextSibling),i===null))return null;return i}function Om(i,o){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=en(i.nextSibling),i===null))return null;return i}function Mc(i){return i.data==="$?"||i.data==="$~"}function Dc(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function sx(i,o){var a=i.ownerDocument;if(i.data==="$~")i._reactRetry=o;else if(i.data!=="$?"||a.readyState!=="loading")o();else{var c=function(){o(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),i._reactRetry=c}}function en(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return i}var Uc=null;function Lm(i){i=i.nextSibling;for(var o=0;i;){if(i.nodeType===8){var a=i.data;if(a==="/$"||a==="/&"){if(o===0)return en(i.nextSibling);o--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||o++}i=i.nextSibling}return null}function qm(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(o===0)return i;o--}else a!=="/$"&&a!=="/&"||o++}i=i.previousSibling}return null}function Bm(i,o,a){switch(o=Ea(a),i){case"html":if(i=o.documentElement,!i)throw Error(s(452));return i;case"head":if(i=o.head,!i)throw Error(s(453));return i;case"body":if(i=o.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function jo(i){for(var o=i.attributes;o.length;)i.removeAttributeNode(o[0]);Ol(i)}var tn=new Map,Gm=new Set;function Aa(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var qn=K.d;K.d={f:ox,r:rx,D:ax,C:lx,L:ux,m:cx,X:fx,S:dx,M:hx};function ox(){var i=qn.f(),o=ya();return i||o}function rx(i){var o=Qi(i);o!==null&&o.tag===5&&o.type==="form"?ip(o):qn.r(i)}var Ns=typeof document>"u"?null:document;function zm(i,o,a){var c=Ns;if(c&&typeof o=="string"&&o){var g=Jt(o);g='link[rel="'+i+'"][href="'+g+'"]',typeof a=="string"&&(g+='[crossorigin="'+a+'"]'),Gm.has(g)||(Gm.add(g),i={rel:i,crossOrigin:a,href:o},c.querySelector(g)===null&&(o=c.createElement("link"),pt(o,"link",i),rt(o),c.head.appendChild(o)))}}function ax(i){qn.D(i),zm("dns-prefetch",i,null)}function lx(i,o){qn.C(i,o),zm("preconnect",i,o)}function ux(i,o,a){qn.L(i,o,a);var c=Ns;if(c&&i&&o){var g='link[rel="preload"][as="'+Jt(o)+'"]';o==="image"&&a&&a.imageSrcSet?(g+='[imagesrcset="'+Jt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(g+='[imagesizes="'+Jt(a.imageSizes)+'"]')):g+='[href="'+Jt(i)+'"]';var v=g;switch(o){case"style":v=Rs(i);break;case"script":v=ks(i)}tn.has(v)||(i=b({rel:"preload",href:o==="image"&&a&&a.imageSrcSet?void 0:i,as:o},a),tn.set(v,i),c.querySelector(g)!==null||o==="style"&&c.querySelector($o(v))||o==="script"&&c.querySelector(Fo(v))||(o=c.createElement("link"),pt(o,"link",i),rt(o),c.head.appendChild(o)))}}function cx(i,o){qn.m(i,o);var a=Ns;if(a&&i){var c=o&&typeof o.as=="string"?o.as:"script",g='link[rel="modulepreload"][as="'+Jt(c)+'"][href="'+Jt(i)+'"]',v=g;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=ks(i)}if(!tn.has(v)&&(i=b({rel:"modulepreload",href:i},o),tn.set(v,i),a.querySelector(g)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Fo(v)))return}c=a.createElement("link"),pt(c,"link",i),rt(c),a.head.appendChild(c)}}}function dx(i,o,a){qn.S(i,o,a);var c=Ns;if(c&&i){var g=Xi(c).hoistableStyles,v=Rs(i);o=o||"default";var S=g.get(v);if(!S){var T={loading:0,preload:null};if(S=c.querySelector($o(v)))T.loading=5;else{i=b({rel:"stylesheet",href:i,"data-precedence":o},a),(a=tn.get(v))&&Pc(i,a);var R=S=c.createElement("link");rt(R),pt(R,"link",i),R._p=new Promise(function(q,j){R.onload=q,R.onerror=j}),R.addEventListener("load",function(){T.loading|=1}),R.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Ca(S,o,c)}S={type:"stylesheet",instance:S,count:1,state:T},g.set(v,S)}}}function fx(i,o){qn.X(i,o);var a=Ns;if(a&&i){var c=Xi(a).hoistableScripts,g=ks(i),v=c.get(g);v||(v=a.querySelector(Fo(g)),v||(i=b({src:i,async:!0},o),(o=tn.get(g))&&Oc(i,o),v=a.createElement("script"),rt(v),pt(v,"link",i),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(g,v))}}function hx(i,o){qn.M(i,o);var a=Ns;if(a&&i){var c=Xi(a).hoistableScripts,g=ks(i),v=c.get(g);v||(v=a.querySelector(Fo(g)),v||(i=b({src:i,async:!0,type:"module"},o),(o=tn.get(g))&&Oc(i,o),v=a.createElement("script"),rt(v),pt(v,"link",i),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(g,v))}}function Hm(i,o,a,c){var g=(g=be.current)?Aa(g):null;if(!g)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(o=Rs(a.href),a=Xi(g).hoistableStyles,c=a.get(o),c||(c={type:"style",instance:null,count:0,state:null},a.set(o,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=Rs(a.href);var v=Xi(g).hoistableStyles,S=v.get(i);if(S||(g=g.ownerDocument||g,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(i,S),(v=g.querySelector($o(i)))&&!v._p&&(S.instance=v,S.state.loading=5),tn.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},tn.set(i,a),v||px(g,i,a,S.state))),o&&c===null)throw Error(s(528,""));return S}if(o&&c!==null)throw Error(s(529,""));return null;case"script":return o=a.async,a=a.src,typeof a=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=ks(a),a=Xi(g).hoistableScripts,c=a.get(o),c||(c={type:"script",instance:null,count:0,state:null},a.set(o,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function Rs(i){return'href="'+Jt(i)+'"'}function $o(i){return'link[rel="stylesheet"]['+i+"]"}function Vm(i){return b({},i,{"data-precedence":i.precedence,precedence:null})}function px(i,o,a,c){i.querySelector('link[rel="preload"][as="style"]['+o+"]")?c.loading=1:(o=i.createElement("link"),c.preload=o,o.addEventListener("load",function(){return c.loading|=1}),o.addEventListener("error",function(){return c.loading|=2}),pt(o,"link",a),rt(o),i.head.appendChild(o))}function ks(i){return'[src="'+Jt(i)+'"]'}function Fo(i){return"script[async]"+i}function jm(i,o,a){if(o.count++,o.instance===null)switch(o.type){case"style":var c=i.querySelector('style[data-href~="'+Jt(a.href)+'"]');if(c)return o.instance=c,rt(c),c;var g=b({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(i.ownerDocument||i).createElement("style"),rt(c),pt(c,"style",g),Ca(c,a.precedence,i),o.instance=c;case"stylesheet":g=Rs(a.href);var v=i.querySelector($o(g));if(v)return o.state.loading|=4,o.instance=v,rt(v),v;c=Vm(a),(g=tn.get(g))&&Pc(c,g),v=(i.ownerDocument||i).createElement("link"),rt(v);var S=v;return S._p=new Promise(function(T,R){S.onload=T,S.onerror=R}),pt(v,"link",c),o.state.loading|=4,Ca(v,a.precedence,i),o.instance=v;case"script":return v=ks(a.src),(g=i.querySelector(Fo(v)))?(o.instance=g,rt(g),g):(c=a,(g=tn.get(v))&&(c=b({},a),Oc(c,g)),i=i.ownerDocument||i,g=i.createElement("script"),rt(g),pt(g,"link",c),i.head.appendChild(g),o.instance=g);case"void":return null;default:throw Error(s(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(c=o.instance,o.state.loading|=4,Ca(c,a.precedence,i));return o.instance}function Ca(i,o,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=c.length?c[c.length-1]:null,v=g,S=0;S<c.length;S++){var T=c[S];if(T.dataset.precedence===o)v=T;else if(v!==g)break}v?v.parentNode.insertBefore(i,v.nextSibling):(o=a.nodeType===9?a.head:a,o.insertBefore(i,o.firstChild))}function Pc(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.title==null&&(i.title=o.title)}function Oc(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.integrity==null&&(i.integrity=o.integrity)}var Na=null;function $m(i,o,a){if(Na===null){var c=new Map,g=Na=new Map;g.set(a,c)}else g=Na,c=g.get(a),c||(c=new Map,g.set(a,c));if(c.has(i))return c;for(c.set(i,null),a=a.getElementsByTagName(i),g=0;g<a.length;g++){var v=a[g];if(!(v[ao]||v[ct]||i==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var S=v.getAttribute(o)||"";S=i+S;var T=c.get(S);T?T.push(v):c.set(S,[v])}}return c}function Fm(i,o,a){i=i.ownerDocument||i,i.head.insertBefore(a,o==="title"?i.querySelector("head > title"):null)}function mx(i,o,a){if(a===1||o.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return i=o.disabled,typeof o.precedence=="string"&&i==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function Jm(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function gx(i,o,a,c){if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var g=Rs(c.href),v=o.querySelector($o(g));if(v){o=v._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(i.count++,i=Ra.bind(i),o.then(i,i)),a.state.loading|=4,a.instance=v,rt(v);return}v=o.ownerDocument||o,c=Vm(c),(g=tn.get(g))&&Pc(c,g),v=v.createElement("link"),rt(v);var S=v;S._p=new Promise(function(T,R){S.onload=T,S.onerror=R}),pt(v,"link",c),a.instance=v}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(a,o),(o=a.state.preload)&&(a.state.loading&3)===0&&(i.count++,a=Ra.bind(i),o.addEventListener("load",a),o.addEventListener("error",a))}}var Lc=0;function yx(i,o){return i.stylesheets&&i.count===0&&Ia(i,i.stylesheets),0<i.count||0<i.imgCount?function(a){var c=setTimeout(function(){if(i.stylesheets&&Ia(i,i.stylesheets),i.unsuspend){var v=i.unsuspend;i.unsuspend=null,v()}},6e4+o);0<i.imgBytes&&Lc===0&&(Lc=62500*Xb());var g=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Ia(i,i.stylesheets),i.unsuspend)){var v=i.unsuspend;i.unsuspend=null,v()}},(i.imgBytes>Lc?50:800)+o);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(c),clearTimeout(g)}}:null}function Ra(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ia(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var ka=null;function Ia(i,o){i.stylesheets=null,i.unsuspend!==null&&(i.count++,ka=new Map,o.forEach(vx,i),ka=null,Ra.call(i))}function vx(i,o){if(!(o.state.loading&4)){var a=ka.get(i);if(a)var c=a.get(null);else{a=new Map,ka.set(i,a);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<g.length;v++){var S=g[v];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(a.set(S.dataset.precedence,S),c=S)}c&&a.set(null,c)}g=o.instance,S=g.getAttribute("data-precedence"),v=a.get(S)||c,v===c&&a.set(null,g),a.set(S,g),this.count++,c=Ra.bind(this),g.addEventListener("load",c),g.addEventListener("error",c),v?v.parentNode.insertBefore(g,v.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),o.state.loading|=4}}var Jo={$$typeof:D,Provider:null,Consumer:null,_currentValue:ne,_currentValue2:ne,_threadCount:0};function _x(i,o,a,c,g,v,S,T,R){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ml(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ml(0),this.hiddenUpdates=Ml(null),this.identifierPrefix=c,this.onUncaughtError=g,this.onCaughtError=v,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function Ym(i,o,a,c,g,v,S,T,R,q,j,F){return i=new _x(i,o,a,S,R,q,j,F,T),o=1,v===!0&&(o|=24),v=Ot(3,null,null,o),i.current=v,v.stateNode=i,o=gu(),o.refCount++,i.pooledCache=o,o.refCount++,v.memoizedState={element:c,isDehydrated:a,cache:o},bu(v),i}function Km(i){return i?(i=as,i):as}function Qm(i,o,a,c,g,v){g=Km(g),c.context===null?c.context=g:c.pendingContext=g,c=Wn(o),c.payload={element:a},v=v===void 0?null:v,v!==null&&(c.callback=v),a=Zn(i,c,o),a!==null&&(kt(a,i,o),Eo(a,i,o))}function Xm(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<o?a:o}}function qc(i,o){Xm(i,o),(i=i.alternate)&&Xm(i,o)}function Wm(i){if(i.tag===13||i.tag===31){var o=Ti(i,67108864);o!==null&&kt(o,i,67108864),qc(i,67108864)}}function Zm(i){if(i.tag===13||i.tag===31){var o=zt();o=Dl(o);var a=Ti(i,o);a!==null&&kt(a,i,o),qc(i,o)}}var Ma=!0;function bx(i,o,a,c){var g=z.T;z.T=null;var v=K.p;try{K.p=2,Bc(i,o,a,c)}finally{K.p=v,z.T=g}}function xx(i,o,a,c){var g=z.T;z.T=null;var v=K.p;try{K.p=8,Bc(i,o,a,c)}finally{K.p=v,z.T=g}}function Bc(i,o,a,c){if(Ma){var g=Gc(c);if(g===null)Ec(i,o,c,Da,a),tg(i,c);else if(wx(g,i,o,a,c))c.stopPropagation();else if(tg(i,c),o&4&&-1<Sx.indexOf(i)){for(;g!==null;){var v=Qi(g);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var S=_i(v.pendingLanes);if(S!==0){var T=v;for(T.pendingLanes|=2,T.entangledLanes|=2;S;){var R=1<<31-Ut(S);T.entanglements[1]|=R,S&=~R}yn(v),(Ie&6)===0&&(ma=Mt()+500,zo(0))}}break;case 31:case 13:T=Ti(v,2),T!==null&&kt(T,v,2),ya(),qc(v,2)}if(v=Gc(c),v===null&&Ec(i,o,c,Da,a),v===g)break;g=v}g!==null&&c.stopPropagation()}else Ec(i,o,c,null,a)}}function Gc(i){return i=Hl(i),zc(i)}var Da=null;function zc(i){if(Da=null,i=Ki(i),i!==null){var o=l(i);if(o===null)i=null;else{var a=o.tag;if(a===13){if(i=u(o),i!==null)return i;i=null}else if(a===31){if(i=f(o),i!==null)return i;i=null}else if(a===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Da=i,null}function eg(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(a_()){case lf:return 2;case uf:return 8;case Sr:case l_:return 32;case cf:return 268435456;default:return 32}default:return 32}}var Hc=!1,ci=null,di=null,fi=null,Yo=new Map,Ko=new Map,hi=[],Sx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function tg(i,o){switch(i){case"focusin":case"focusout":ci=null;break;case"dragenter":case"dragleave":di=null;break;case"mouseover":case"mouseout":fi=null;break;case"pointerover":case"pointerout":Yo.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ko.delete(o.pointerId)}}function Qo(i,o,a,c,g,v){return i===null||i.nativeEvent!==v?(i={blockedOn:o,domEventName:a,eventSystemFlags:c,nativeEvent:v,targetContainers:[g]},o!==null&&(o=Qi(o),o!==null&&Wm(o)),i):(i.eventSystemFlags|=c,o=i.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),i)}function wx(i,o,a,c,g){switch(o){case"focusin":return ci=Qo(ci,i,o,a,c,g),!0;case"dragenter":return di=Qo(di,i,o,a,c,g),!0;case"mouseover":return fi=Qo(fi,i,o,a,c,g),!0;case"pointerover":var v=g.pointerId;return Yo.set(v,Qo(Yo.get(v)||null,i,o,a,c,g)),!0;case"gotpointercapture":return v=g.pointerId,Ko.set(v,Qo(Ko.get(v)||null,i,o,a,c,g)),!0}return!1}function ng(i){var o=Ki(i.target);if(o!==null){var a=l(o);if(a!==null){if(o=a.tag,o===13){if(o=u(a),o!==null){i.blockedOn=o,gf(i.priority,function(){Zm(a)});return}}else if(o===31){if(o=f(a),o!==null){i.blockedOn=o,gf(i.priority,function(){Zm(a)});return}}else if(o===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Ua(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var a=Gc(i.nativeEvent);if(a===null){a=i.nativeEvent;var c=new a.constructor(a.type,a);zl=c,a.target.dispatchEvent(c),zl=null}else return o=Qi(a),o!==null&&Wm(o),i.blockedOn=a,!1;o.shift()}return!0}function ig(i,o,a){Ua(i)&&a.delete(o)}function Tx(){Hc=!1,ci!==null&&Ua(ci)&&(ci=null),di!==null&&Ua(di)&&(di=null),fi!==null&&Ua(fi)&&(fi=null),Yo.forEach(ig),Ko.forEach(ig)}function Pa(i,o){i.blockedOn===o&&(i.blockedOn=null,Hc||(Hc=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Tx)))}var Oa=null;function sg(i){Oa!==i&&(Oa=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Oa===i&&(Oa=null);for(var o=0;o<i.length;o+=3){var a=i[o],c=i[o+1],g=i[o+2];if(typeof c!="function"){if(zc(c||a)===null)continue;break}var v=Qi(a);v!==null&&(i.splice(o,3),o-=3,Gu(v,{pending:!0,data:g,method:a.method,action:c},c,g))}}))}function Is(i){function o(R){return Pa(R,i)}ci!==null&&Pa(ci,i),di!==null&&Pa(di,i),fi!==null&&Pa(fi,i),Yo.forEach(o),Ko.forEach(o);for(var a=0;a<hi.length;a++){var c=hi[a];c.blockedOn===i&&(c.blockedOn=null)}for(;0<hi.length&&(a=hi[0],a.blockedOn===null);)ng(a),a.blockedOn===null&&hi.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var g=a[c],v=a[c+1],S=g[Tt]||null;if(typeof v=="function")S||sg(a);else if(S){var T=null;if(v&&v.hasAttribute("formAction")){if(g=v,S=v[Tt]||null)T=S.formAction;else if(zc(g)!==null)continue}else T=S.action;typeof T=="function"?a[c+1]=T:(a.splice(c,3),c-=3),sg(a)}}}function og(){function i(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(S){return g=S})},focusReset:"manual",scroll:"manual"})}function o(){g!==null&&(g(),g=null),c||setTimeout(a,20)}function a(){if(!c&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,g=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(a,100),function(){c=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),g!==null&&(g(),g=null)}}}function Vc(i){this._internalRoot=i}La.prototype.render=Vc.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(s(409));var a=o.current,c=zt();Qm(a,c,i,o,null,null)},La.prototype.unmount=Vc.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;Qm(i.current,2,null,i,null,null),ya(),o[Yi]=null}};function La(i){this._internalRoot=i}La.prototype.unstable_scheduleHydration=function(i){if(i){var o=mf();i={blockedOn:null,target:i,priority:o};for(var a=0;a<hi.length&&o!==0&&o<hi[a].priority;a++);hi.splice(a,0,i),a===0&&ng(i)}};var rg=e.version;if(rg!=="19.2.4")throw Error(s(527,rg,"19.2.4"));K.findDOMNode=function(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=p(o),i=i!==null?y(i):null,i=i===null?null:i.stateNode,i};var Ex={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qa.isDisabled&&qa.supportsFiber)try{so=qa.inject(Ex),Dt=qa}catch{}}return Wo.createRoot=function(i,o){if(!r(i))throw Error(s(299));var a=!1,c="",g=hp,v=pp,S=mp;return o!=null&&(o.unstable_strictMode===!0&&(a=!0),o.identifierPrefix!==void 0&&(c=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(S=o.onRecoverableError)),o=Ym(i,1,!1,null,null,a,c,null,g,v,S,og),i[Yi]=o.current,Tc(i),new Vc(o)},Wo.hydrateRoot=function(i,o,a){if(!r(i))throw Error(s(299));var c=!1,g="",v=hp,S=pp,T=mp,R=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onUncaughtError!==void 0&&(v=a.onUncaughtError),a.onCaughtError!==void 0&&(S=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.formState!==void 0&&(R=a.formState)),o=Ym(i,1,!0,o,a??null,c,g,R,v,S,T,og),o.context=Km(null),a=o.current,c=zt(),c=Dl(c),g=Wn(c),g.callback=null,Zn(a,g,c),a=c,o.current.lanes=a,ro(o,a),yn(o),i[Yi]=o.current,Tc(i),new La(o)},Wo.version="19.2.4",Wo}var vg;function Bx(){if(vg)return Fc.exports;vg=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Fc.exports=qx(),Fc.exports}var Gx=Bx();const zx=Od(Gx);function qd(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let Fi=qd();function D0(t){Fi=t}const U0=/[&<>"']/,Hx=new RegExp(U0.source,"g"),P0=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,Vx=new RegExp(P0.source,"g"),jx={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},_g=t=>jx[t];function jt(t,e){if(e){if(U0.test(t))return t.replace(Hx,_g)}else if(P0.test(t))return t.replace(Vx,_g);return t}const $x=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function Fx(t){return t.replace($x,(e,n)=>(n=n.toLowerCase(),n==="colon"?":":n.charAt(0)==="#"?n.charAt(1)==="x"?String.fromCharCode(parseInt(n.substring(2),16)):String.fromCharCode(+n.substring(1)):""))}const Jx=/(^|[^\[])\^/g;function Be(t,e){let n=typeof t=="string"?t:t.source;e=e||"";const s={replace:(r,l)=>{let u=typeof l=="string"?l:l.source;return u=u.replace(Jx,"$1"),n=n.replace(r,u),s},getRegex:()=>new RegExp(n,e)};return s}function bg(t){try{t=encodeURI(t).replace(/%25/g,"%")}catch{return null}return t}const or={exec:()=>null};function xg(t,e){const n=t.replace(/\|/g,(l,u,f)=>{let m=!1,p=u;for(;--p>=0&&f[p]==="\\";)m=!m;return m?"|":" |"}),s=n.split(/ \|/);let r=0;if(s[0].trim()||s.shift(),s.length>0&&!s[s.length-1].trim()&&s.pop(),e)if(s.length>e)s.splice(e);else for(;s.length<e;)s.push("");for(;r<s.length;r++)s[r]=s[r].trim().replace(/\\\|/g,"|");return s}function Ga(t,e,n){const s=t.length;if(s===0)return"";let r=0;for(;r<s&&t.charAt(s-r-1)===e;)r++;return t.slice(0,s-r)}function Yx(t,e){if(t.indexOf(e[1])===-1)return-1;let n=0;for(let s=0;s<t.length;s++)if(t[s]==="\\")s++;else if(t[s]===e[0])n++;else if(t[s]===e[1]&&(n--,n<0))return s;return-1}function Sg(t,e,n,s){const r=e.href,l=e.title?jt(e.title):null,u=t[1].replace(/\\([\[\]])/g,"$1");if(t[0].charAt(0)!=="!"){s.state.inLink=!0;const f={type:"link",raw:n,href:r,title:l,text:u,tokens:s.inlineTokens(u)};return s.state.inLink=!1,f}return{type:"image",raw:n,href:r,title:l,text:jt(u)}}function Kx(t,e){const n=t.match(/^(\s+)(?:```)/);if(n===null)return e;const s=n[1];return e.split(`
`).map(r=>{const l=r.match(/^\s+/);if(l===null)return r;const[u]=l;return u.length>=s.length?r.slice(s.length):r}).join(`
`)}class nl{constructor(e){$e(this,"options");$e(this,"rules");$e(this,"lexer");this.options=e||Fi}space(e){const n=this.rules.block.newline.exec(e);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(e){const n=this.rules.block.code.exec(e);if(n){const s=n[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?s:Ga(s,`
`)}}}fences(e){const n=this.rules.block.fences.exec(e);if(n){const s=n[0],r=Kx(s,n[3]||"");return{type:"code",raw:s,lang:n[2]?n[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):n[2],text:r}}}heading(e){const n=this.rules.block.heading.exec(e);if(n){let s=n[2].trim();if(/#$/.test(s)){const r=Ga(s,"#");(this.options.pedantic||!r||/ $/.test(r))&&(s=r.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:s,tokens:this.lexer.inline(s)}}}hr(e){const n=this.rules.block.hr.exec(e);if(n)return{type:"hr",raw:n[0]}}blockquote(e){const n=this.rules.block.blockquote.exec(e);if(n){let s=n[0].replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`);s=Ga(s.replace(/^ *>[ \t]?/gm,""),`
`);const r=this.lexer.state.top;this.lexer.state.top=!0;const l=this.lexer.blockTokens(s);return this.lexer.state.top=r,{type:"blockquote",raw:n[0],tokens:l,text:s}}}list(e){let n=this.rules.block.list.exec(e);if(n){let s=n[1].trim();const r=s.length>1,l={type:"list",raw:"",ordered:r,start:r?+s.slice(0,-1):"",loose:!1,items:[]};s=r?`\\d{1,9}\\${s.slice(-1)}`:`\\${s}`,this.options.pedantic&&(s=r?s:"[*+-]");const u=new RegExp(`^( {0,3}${s})((?:[	 ][^\\n]*)?(?:\\n|$))`);let f="",m="",p=!1;for(;e;){let y=!1;if(!(n=u.exec(e))||this.rules.block.hr.test(e))break;f=n[0],e=e.substring(f.length);let b=n[2].split(`
`,1)[0].replace(/^\t+/,I=>" ".repeat(3*I.length)),x=e.split(`
`,1)[0],w=0;this.options.pedantic?(w=2,m=b.trimStart()):(w=n[2].search(/[^ ]/),w=w>4?1:w,m=b.slice(w),w+=n[1].length);let E=!1;if(!b&&/^ *$/.test(x)&&(f+=x+`
`,e=e.substring(x.length+1),y=!0),!y){const I=new RegExp(`^ {0,${Math.min(3,w-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),O=new RegExp(`^ {0,${Math.min(3,w-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),D=new RegExp(`^ {0,${Math.min(3,w-1)}}(?:\`\`\`|~~~)`),P=new RegExp(`^ {0,${Math.min(3,w-1)}}#`);for(;e;){const N=e.split(`
`,1)[0];if(x=N,this.options.pedantic&&(x=x.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),D.test(x)||P.test(x)||I.test(x)||O.test(e))break;if(x.search(/[^ ]/)>=w||!x.trim())m+=`
`+x.slice(w);else{if(E||b.search(/[^ ]/)>=4||D.test(b)||P.test(b)||O.test(b))break;m+=`
`+x}!E&&!x.trim()&&(E=!0),f+=N+`
`,e=e.substring(N.length+1),b=x.slice(w)}}l.loose||(p?l.loose=!0:/\n *\n *$/.test(f)&&(p=!0));let A=null,C;this.options.gfm&&(A=/^\[[ xX]\] /.exec(m),A&&(C=A[0]!=="[ ] ",m=m.replace(/^\[[ xX]\] +/,""))),l.items.push({type:"list_item",raw:f,task:!!A,checked:C,loose:!1,text:m,tokens:[]}),l.raw+=f}l.items[l.items.length-1].raw=f.trimEnd(),l.items[l.items.length-1].text=m.trimEnd(),l.raw=l.raw.trimEnd();for(let y=0;y<l.items.length;y++)if(this.lexer.state.top=!1,l.items[y].tokens=this.lexer.blockTokens(l.items[y].text,[]),!l.loose){const b=l.items[y].tokens.filter(w=>w.type==="space"),x=b.length>0&&b.some(w=>/\n.*\n/.test(w.raw));l.loose=x}if(l.loose)for(let y=0;y<l.items.length;y++)l.items[y].loose=!0;return l}}html(e){const n=this.rules.block.html.exec(e);if(n)return{type:"html",block:!0,raw:n[0],pre:n[1]==="pre"||n[1]==="script"||n[1]==="style",text:n[0]}}def(e){const n=this.rules.block.def.exec(e);if(n){const s=n[1].toLowerCase().replace(/\s+/g," "),r=n[2]?n[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",l=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):n[3];return{type:"def",tag:s,raw:n[0],href:r,title:l}}}table(e){const n=this.rules.block.table.exec(e);if(!n||!/[:|]/.test(n[2]))return;const s=xg(n[1]),r=n[2].replace(/^\||\| *$/g,"").split("|"),l=n[3]&&n[3].trim()?n[3].replace(/\n[ \t]*$/,"").split(`
`):[],u={type:"table",raw:n[0],header:[],align:[],rows:[]};if(s.length===r.length){for(const f of r)/^ *-+: *$/.test(f)?u.align.push("right"):/^ *:-+: *$/.test(f)?u.align.push("center"):/^ *:-+ *$/.test(f)?u.align.push("left"):u.align.push(null);for(const f of s)u.header.push({text:f,tokens:this.lexer.inline(f)});for(const f of l)u.rows.push(xg(f,u.header.length).map(m=>({text:m,tokens:this.lexer.inline(m)})));return u}}lheading(e){const n=this.rules.block.lheading.exec(e);if(n)return{type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(e){const n=this.rules.block.paragraph.exec(e);if(n){const s=n[1].charAt(n[1].length-1)===`
`?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:s,tokens:this.lexer.inline(s)}}}text(e){const n=this.rules.block.text.exec(e);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(e){const n=this.rules.inline.escape.exec(e);if(n)return{type:"escape",raw:n[0],text:jt(n[1])}}tag(e){const n=this.rules.inline.tag.exec(e);if(n)return!this.lexer.state.inLink&&/^<a /i.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:n[0]}}link(e){const n=this.rules.inline.link.exec(e);if(n){const s=n[2].trim();if(!this.options.pedantic&&/^</.test(s)){if(!/>$/.test(s))return;const u=Ga(s.slice(0,-1),"\\");if((s.length-u.length)%2===0)return}else{const u=Yx(n[2],"()");if(u>-1){const m=(n[0].indexOf("!")===0?5:4)+n[1].length+u;n[2]=n[2].substring(0,u),n[0]=n[0].substring(0,m).trim(),n[3]=""}}let r=n[2],l="";if(this.options.pedantic){const u=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);u&&(r=u[1],l=u[3])}else l=n[3]?n[3].slice(1,-1):"";return r=r.trim(),/^</.test(r)&&(this.options.pedantic&&!/>$/.test(s)?r=r.slice(1):r=r.slice(1,-1)),Sg(n,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:l&&l.replace(this.rules.inline.anyPunctuation,"$1")},n[0],this.lexer)}}reflink(e,n){let s;if((s=this.rules.inline.reflink.exec(e))||(s=this.rules.inline.nolink.exec(e))){const r=(s[2]||s[1]).replace(/\s+/g," "),l=n[r.toLowerCase()];if(!l){const u=s[0].charAt(0);return{type:"text",raw:u,text:u}}return Sg(s,l,s[0],this.lexer)}}emStrong(e,n,s=""){let r=this.rules.inline.emStrongLDelim.exec(e);if(!r||r[3]&&s.match(/[\p{L}\p{N}]/u))return;if(!(r[1]||r[2]||"")||!s||this.rules.inline.punctuation.exec(s)){const u=[...r[0]].length-1;let f,m,p=u,y=0;const b=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(b.lastIndex=0,n=n.slice(-1*e.length+u);(r=b.exec(n))!=null;){if(f=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!f)continue;if(m=[...f].length,r[3]||r[4]){p+=m;continue}else if((r[5]||r[6])&&u%3&&!((u+m)%3)){y+=m;continue}if(p-=m,p>0)continue;m=Math.min(m,m+p+y);const x=[...r[0]][0].length,w=e.slice(0,u+r.index+x+m);if(Math.min(u,m)%2){const A=w.slice(1,-1);return{type:"em",raw:w,text:A,tokens:this.lexer.inlineTokens(A)}}const E=w.slice(2,-2);return{type:"strong",raw:w,text:E,tokens:this.lexer.inlineTokens(E)}}}}codespan(e){const n=this.rules.inline.code.exec(e);if(n){let s=n[2].replace(/\n/g," ");const r=/[^ ]/.test(s),l=/^ /.test(s)&&/ $/.test(s);return r&&l&&(s=s.substring(1,s.length-1)),s=jt(s,!0),{type:"codespan",raw:n[0],text:s}}}br(e){const n=this.rules.inline.br.exec(e);if(n)return{type:"br",raw:n[0]}}del(e){const n=this.rules.inline.del.exec(e);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(e){const n=this.rules.inline.autolink.exec(e);if(n){let s,r;return n[2]==="@"?(s=jt(n[1]),r="mailto:"+s):(s=jt(n[1]),r=s),{type:"link",raw:n[0],text:s,href:r,tokens:[{type:"text",raw:s,text:s}]}}}url(e){var s;let n;if(n=this.rules.inline.url.exec(e)){let r,l;if(n[2]==="@")r=jt(n[0]),l="mailto:"+r;else{let u;do u=n[0],n[0]=((s=this.rules.inline._backpedal.exec(n[0]))==null?void 0:s[0])??"";while(u!==n[0]);r=jt(n[0]),n[1]==="www."?l="http://"+n[0]:l=n[0]}return{type:"link",raw:n[0],text:r,href:l,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e){const n=this.rules.inline.text.exec(e);if(n){let s;return this.lexer.state.inRawBlock?s=n[0]:s=jt(n[0]),{type:"text",raw:n[0],text:s}}}}const Qx=/^(?: *(?:\n|$))+/,Xx=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,Wx=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,yr=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Zx=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,O0=/(?:[*+-]|\d{1,9}[.)])/,L0=Be(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,O0).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),Bd=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,eS=/^[^\n]+/,Gd=/(?!\s*\])(?:\\.|[^\[\]\\])+/,tS=Be(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",Gd).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),nS=Be(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,O0).getRegex(),pl="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",zd=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,iS=Be("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",zd).replace("tag",pl).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),q0=Be(Bd).replace("hr",yr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",pl).getRegex(),sS=Be(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",q0).getRegex(),Hd={blockquote:sS,code:Xx,def:tS,fences:Wx,heading:Zx,hr:yr,html:iS,lheading:L0,list:nS,newline:Qx,paragraph:q0,table:or,text:eS},wg=Be("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",yr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",pl).getRegex(),oS={...Hd,table:wg,paragraph:Be(Bd).replace("hr",yr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",wg).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",pl).getRegex()},rS={...Hd,html:Be(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",zd).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:or,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Be(Bd).replace("hr",yr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",L0).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},B0=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,aS=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,G0=/^( {2,}|\\)\n(?!\s*$)/,lS=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,vr="\\p{P}\\p{S}",uS=Be(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,vr).getRegex(),cS=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,dS=Be(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,vr).getRegex(),fS=Be("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,vr).getRegex(),hS=Be("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,vr).getRegex(),pS=Be(/\\([punct])/,"gu").replace(/punct/g,vr).getRegex(),mS=Be(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),gS=Be(zd).replace("(?:-->|$)","-->").getRegex(),yS=Be("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",gS).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),il=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,vS=Be(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",il).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),z0=Be(/^!?\[(label)\]\[(ref)\]/).replace("label",il).replace("ref",Gd).getRegex(),H0=Be(/^!?\[(ref)\](?:\[\])?/).replace("ref",Gd).getRegex(),_S=Be("reflink|nolink(?!\\()","g").replace("reflink",z0).replace("nolink",H0).getRegex(),Vd={_backpedal:or,anyPunctuation:pS,autolink:mS,blockSkip:cS,br:G0,code:aS,del:or,emStrongLDelim:dS,emStrongRDelimAst:fS,emStrongRDelimUnd:hS,escape:B0,link:vS,nolink:H0,punctuation:uS,reflink:z0,reflinkSearch:_S,tag:yS,text:lS,url:or},bS={...Vd,link:Be(/^!?\[(label)\]\((.*?)\)/).replace("label",il).getRegex(),reflink:Be(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",il).getRegex()},ud={...Vd,escape:Be(B0).replace("])","~|])").getRegex(),url:Be(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},xS={...ud,br:Be(G0).replace("{2,}","*").getRegex(),text:Be(ud.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},za={normal:Hd,gfm:oS,pedantic:rS},Zo={normal:Vd,gfm:ud,breaks:xS,pedantic:bS};class vn{constructor(e){$e(this,"tokens");$e(this,"options");$e(this,"state");$e(this,"tokenizer");$e(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Fi,this.options.tokenizer=this.options.tokenizer||new nl,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={block:za.normal,inline:Zo.normal};this.options.pedantic?(n.block=za.pedantic,n.inline=Zo.pedantic):this.options.gfm&&(n.block=za.gfm,this.options.breaks?n.inline=Zo.breaks:n.inline=Zo.gfm),this.tokenizer.rules=n}static get rules(){return{block:za,inline:Zo}}static lex(e,n){return new vn(n).lex(e)}static lexInline(e,n){return new vn(n).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){const s=this.inlineQueue[n];this.inlineTokens(s.src,s.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,n=[]){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(f,m,p)=>m+"    ".repeat(p.length));let s,r,l,u;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(f=>(s=f.call({lexer:this},e,n))?(e=e.substring(s.raw.length),n.push(s),!0):!1))){if(s=this.tokenizer.space(e)){e=e.substring(s.raw.length),s.raw.length===1&&n.length>0?n[n.length-1].raw+=`
`:n.push(s);continue}if(s=this.tokenizer.code(e)){e=e.substring(s.raw.length),r=n[n.length-1],r&&(r.type==="paragraph"||r.type==="text")?(r.raw+=`
`+s.raw,r.text+=`
`+s.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text):n.push(s);continue}if(s=this.tokenizer.fences(e)){e=e.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.heading(e)){e=e.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.hr(e)){e=e.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.blockquote(e)){e=e.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.list(e)){e=e.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.html(e)){e=e.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.def(e)){e=e.substring(s.raw.length),r=n[n.length-1],r&&(r.type==="paragraph"||r.type==="text")?(r.raw+=`
`+s.raw,r.text+=`
`+s.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text):this.tokens.links[s.tag]||(this.tokens.links[s.tag]={href:s.href,title:s.title});continue}if(s=this.tokenizer.table(e)){e=e.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.lheading(e)){e=e.substring(s.raw.length),n.push(s);continue}if(l=e,this.options.extensions&&this.options.extensions.startBlock){let f=1/0;const m=e.slice(1);let p;this.options.extensions.startBlock.forEach(y=>{p=y.call({lexer:this},m),typeof p=="number"&&p>=0&&(f=Math.min(f,p))}),f<1/0&&f>=0&&(l=e.substring(0,f+1))}if(this.state.top&&(s=this.tokenizer.paragraph(l))){r=n[n.length-1],u&&r.type==="paragraph"?(r.raw+=`
`+s.raw,r.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):n.push(s),u=l.length!==e.length,e=e.substring(s.raw.length);continue}if(s=this.tokenizer.text(e)){e=e.substring(s.raw.length),r=n[n.length-1],r&&r.type==="text"?(r.raw+=`
`+s.raw,r.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):n.push(s);continue}if(e){const f="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(f);break}else throw new Error(f)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){let s,r,l,u=e,f,m,p;if(this.tokens.links){const y=Object.keys(this.tokens.links);if(y.length>0)for(;(f=this.tokenizer.rules.inline.reflinkSearch.exec(u))!=null;)y.includes(f[0].slice(f[0].lastIndexOf("[")+1,-1))&&(u=u.slice(0,f.index)+"["+"a".repeat(f[0].length-2)+"]"+u.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(f=this.tokenizer.rules.inline.blockSkip.exec(u))!=null;)u=u.slice(0,f.index)+"["+"a".repeat(f[0].length-2)+"]"+u.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(f=this.tokenizer.rules.inline.anyPunctuation.exec(u))!=null;)u=u.slice(0,f.index)+"++"+u.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(m||(p=""),m=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(y=>(s=y.call({lexer:this},e,n))?(e=e.substring(s.raw.length),n.push(s),!0):!1))){if(s=this.tokenizer.escape(e)){e=e.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.tag(e)){e=e.substring(s.raw.length),r=n[n.length-1],r&&s.type==="text"&&r.type==="text"?(r.raw+=s.raw,r.text+=s.text):n.push(s);continue}if(s=this.tokenizer.link(e)){e=e.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(s.raw.length),r=n[n.length-1],r&&s.type==="text"&&r.type==="text"?(r.raw+=s.raw,r.text+=s.text):n.push(s);continue}if(s=this.tokenizer.emStrong(e,u,p)){e=e.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.codespan(e)){e=e.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.br(e)){e=e.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.del(e)){e=e.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.autolink(e)){e=e.substring(s.raw.length),n.push(s);continue}if(!this.state.inLink&&(s=this.tokenizer.url(e))){e=e.substring(s.raw.length),n.push(s);continue}if(l=e,this.options.extensions&&this.options.extensions.startInline){let y=1/0;const b=e.slice(1);let x;this.options.extensions.startInline.forEach(w=>{x=w.call({lexer:this},b),typeof x=="number"&&x>=0&&(y=Math.min(y,x))}),y<1/0&&y>=0&&(l=e.substring(0,y+1))}if(s=this.tokenizer.inlineText(l)){e=e.substring(s.raw.length),s.raw.slice(-1)!=="_"&&(p=s.raw.slice(-1)),m=!0,r=n[n.length-1],r&&r.type==="text"?(r.raw+=s.raw,r.text+=s.text):n.push(s);continue}if(e){const y="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(y);break}else throw new Error(y)}}return n}}class sl{constructor(e){$e(this,"options");this.options=e||Fi}code(e,n,s){var l;const r=(l=(n||"").match(/^\S*/))==null?void 0:l[0];return e=e.replace(/\n$/,"")+`
`,r?'<pre><code class="language-'+jt(r)+'">'+(s?e:jt(e,!0))+`</code></pre>
`:"<pre><code>"+(s?e:jt(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
${e}</blockquote>
`}html(e,n){return e}heading(e,n,s){return`<h${n}>${e}</h${n}>
`}hr(){return`<hr>
`}list(e,n,s){const r=n?"ol":"ul",l=n&&s!==1?' start="'+s+'"':"";return"<"+r+l+`>
`+e+"</"+r+`>
`}listitem(e,n,s){return`<li>${e}</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(e){return`<p>${e}</p>
`}table(e,n){return n&&(n=`<tbody>${n}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+n+`</table>
`}tablerow(e){return`<tr>
${e}</tr>
`}tablecell(e,n){const s=n.header?"th":"td";return(n.align?`<${s} align="${n.align}">`:`<${s}>`)+e+`</${s}>
`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return"<br>"}del(e){return`<del>${e}</del>`}link(e,n,s){const r=bg(e);if(r===null)return s;e=r;let l='<a href="'+e+'"';return n&&(l+=' title="'+n+'"'),l+=">"+s+"</a>",l}image(e,n,s){const r=bg(e);if(r===null)return s;e=r;let l=`<img src="${e}" alt="${s}"`;return n&&(l+=` title="${n}"`),l+=">",l}text(e){return e}}class jd{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,n,s){return""+s}image(e,n,s){return""+s}br(){return""}}class _n{constructor(e){$e(this,"options");$e(this,"renderer");$e(this,"textRenderer");this.options=e||Fi,this.options.renderer=this.options.renderer||new sl,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new jd}static parse(e,n){return new _n(n).parse(e)}static parseInline(e,n){return new _n(n).parseInline(e)}parse(e,n=!0){let s="";for(let r=0;r<e.length;r++){const l=e[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[l.type]){const u=l,f=this.options.extensions.renderers[u.type].call({parser:this},u);if(f!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(u.type)){s+=f||"";continue}}switch(l.type){case"space":continue;case"hr":{s+=this.renderer.hr();continue}case"heading":{const u=l;s+=this.renderer.heading(this.parseInline(u.tokens),u.depth,Fx(this.parseInline(u.tokens,this.textRenderer)));continue}case"code":{const u=l;s+=this.renderer.code(u.text,u.lang,!!u.escaped);continue}case"table":{const u=l;let f="",m="";for(let y=0;y<u.header.length;y++)m+=this.renderer.tablecell(this.parseInline(u.header[y].tokens),{header:!0,align:u.align[y]});f+=this.renderer.tablerow(m);let p="";for(let y=0;y<u.rows.length;y++){const b=u.rows[y];m="";for(let x=0;x<b.length;x++)m+=this.renderer.tablecell(this.parseInline(b[x].tokens),{header:!1,align:u.align[x]});p+=this.renderer.tablerow(m)}s+=this.renderer.table(f,p);continue}case"blockquote":{const u=l,f=this.parse(u.tokens);s+=this.renderer.blockquote(f);continue}case"list":{const u=l,f=u.ordered,m=u.start,p=u.loose;let y="";for(let b=0;b<u.items.length;b++){const x=u.items[b],w=x.checked,E=x.task;let A="";if(x.task){const C=this.renderer.checkbox(!!w);p?x.tokens.length>0&&x.tokens[0].type==="paragraph"?(x.tokens[0].text=C+" "+x.tokens[0].text,x.tokens[0].tokens&&x.tokens[0].tokens.length>0&&x.tokens[0].tokens[0].type==="text"&&(x.tokens[0].tokens[0].text=C+" "+x.tokens[0].tokens[0].text)):x.tokens.unshift({type:"text",text:C+" "}):A+=C+" "}A+=this.parse(x.tokens,p),y+=this.renderer.listitem(A,E,!!w)}s+=this.renderer.list(y,f,m);continue}case"html":{const u=l;s+=this.renderer.html(u.text,u.block);continue}case"paragraph":{const u=l;s+=this.renderer.paragraph(this.parseInline(u.tokens));continue}case"text":{let u=l,f=u.tokens?this.parseInline(u.tokens):u.text;for(;r+1<e.length&&e[r+1].type==="text";)u=e[++r],f+=`
`+(u.tokens?this.parseInline(u.tokens):u.text);s+=n?this.renderer.paragraph(f):f;continue}default:{const u='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(u),"";throw new Error(u)}}}return s}parseInline(e,n){n=n||this.renderer;let s="";for(let r=0;r<e.length;r++){const l=e[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[l.type]){const u=this.options.extensions.renderers[l.type].call({parser:this},l);if(u!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(l.type)){s+=u||"";continue}}switch(l.type){case"escape":{const u=l;s+=n.text(u.text);break}case"html":{const u=l;s+=n.html(u.text);break}case"link":{const u=l;s+=n.link(u.href,u.title,this.parseInline(u.tokens,n));break}case"image":{const u=l;s+=n.image(u.href,u.title,u.text);break}case"strong":{const u=l;s+=n.strong(this.parseInline(u.tokens,n));break}case"em":{const u=l;s+=n.em(this.parseInline(u.tokens,n));break}case"codespan":{const u=l;s+=n.codespan(u.text);break}case"br":{s+=n.br();break}case"del":{const u=l;s+=n.del(this.parseInline(u.tokens,n));break}case"text":{const u=l;s+=n.text(u.text);break}default:{const u='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(u),"";throw new Error(u)}}}return s}}class rr{constructor(e){$e(this,"options");this.options=e||Fi}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}}$e(rr,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));var $i,cd,V0;class SS{constructor(...e){lg(this,$i);$e(this,"defaults",qd());$e(this,"options",this.setOptions);$e(this,"parse",Ba(this,$i,cd).call(this,vn.lex,_n.parse));$e(this,"parseInline",Ba(this,$i,cd).call(this,vn.lexInline,_n.parseInline));$e(this,"Parser",_n);$e(this,"Renderer",sl);$e(this,"TextRenderer",jd);$e(this,"Lexer",vn);$e(this,"Tokenizer",nl);$e(this,"Hooks",rr);this.use(...e)}walkTokens(e,n){var r,l;let s=[];for(const u of e)switch(s=s.concat(n.call(this,u)),u.type){case"table":{const f=u;for(const m of f.header)s=s.concat(this.walkTokens(m.tokens,n));for(const m of f.rows)for(const p of m)s=s.concat(this.walkTokens(p.tokens,n));break}case"list":{const f=u;s=s.concat(this.walkTokens(f.items,n));break}default:{const f=u;(l=(r=this.defaults.extensions)==null?void 0:r.childTokens)!=null&&l[f.type]?this.defaults.extensions.childTokens[f.type].forEach(m=>{const p=f[m].flat(1/0);s=s.concat(this.walkTokens(p,n))}):f.tokens&&(s=s.concat(this.walkTokens(f.tokens,n)))}}return s}use(...e){const n=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(s=>{const r={...s};if(r.async=this.defaults.async||r.async||!1,s.extensions&&(s.extensions.forEach(l=>{if(!l.name)throw new Error("extension name required");if("renderer"in l){const u=n.renderers[l.name];u?n.renderers[l.name]=function(...f){let m=l.renderer.apply(this,f);return m===!1&&(m=u.apply(this,f)),m}:n.renderers[l.name]=l.renderer}if("tokenizer"in l){if(!l.level||l.level!=="block"&&l.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const u=n[l.level];u?u.unshift(l.tokenizer):n[l.level]=[l.tokenizer],l.start&&(l.level==="block"?n.startBlock?n.startBlock.push(l.start):n.startBlock=[l.start]:l.level==="inline"&&(n.startInline?n.startInline.push(l.start):n.startInline=[l.start]))}"childTokens"in l&&l.childTokens&&(n.childTokens[l.name]=l.childTokens)}),r.extensions=n),s.renderer){const l=this.defaults.renderer||new sl(this.defaults);for(const u in s.renderer){if(!(u in l))throw new Error(`renderer '${u}' does not exist`);if(u==="options")continue;const f=u,m=s.renderer[f],p=l[f];l[f]=(...y)=>{let b=m.apply(l,y);return b===!1&&(b=p.apply(l,y)),b||""}}r.renderer=l}if(s.tokenizer){const l=this.defaults.tokenizer||new nl(this.defaults);for(const u in s.tokenizer){if(!(u in l))throw new Error(`tokenizer '${u}' does not exist`);if(["options","rules","lexer"].includes(u))continue;const f=u,m=s.tokenizer[f],p=l[f];l[f]=(...y)=>{let b=m.apply(l,y);return b===!1&&(b=p.apply(l,y)),b}}r.tokenizer=l}if(s.hooks){const l=this.defaults.hooks||new rr;for(const u in s.hooks){if(!(u in l))throw new Error(`hook '${u}' does not exist`);if(u==="options")continue;const f=u,m=s.hooks[f],p=l[f];rr.passThroughHooks.has(u)?l[f]=y=>{if(this.defaults.async)return Promise.resolve(m.call(l,y)).then(x=>p.call(l,x));const b=m.call(l,y);return p.call(l,b)}:l[f]=(...y)=>{let b=m.apply(l,y);return b===!1&&(b=p.apply(l,y)),b}}r.hooks=l}if(s.walkTokens){const l=this.defaults.walkTokens,u=s.walkTokens;r.walkTokens=function(f){let m=[];return m.push(u.call(this,f)),l&&(m=m.concat(l.call(this,f))),m}}this.defaults={...this.defaults,...r}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,n){return vn.lex(e,n??this.defaults)}parser(e,n){return _n.parse(e,n??this.defaults)}}$i=new WeakSet,cd=function(e,n){return(s,r)=>{const l={...r},u={...this.defaults,...l};this.defaults.async===!0&&l.async===!1&&(u.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),u.async=!0);const f=Ba(this,$i,V0).call(this,!!u.silent,!!u.async);if(typeof s>"u"||s===null)return f(new Error("marked(): input parameter is undefined or null"));if(typeof s!="string")return f(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(s)+", string expected"));if(u.hooks&&(u.hooks.options=u),u.async)return Promise.resolve(u.hooks?u.hooks.preprocess(s):s).then(m=>e(m,u)).then(m=>u.hooks?u.hooks.processAllTokens(m):m).then(m=>u.walkTokens?Promise.all(this.walkTokens(m,u.walkTokens)).then(()=>m):m).then(m=>n(m,u)).then(m=>u.hooks?u.hooks.postprocess(m):m).catch(f);try{u.hooks&&(s=u.hooks.preprocess(s));let m=e(s,u);u.hooks&&(m=u.hooks.processAllTokens(m)),u.walkTokens&&this.walkTokens(m,u.walkTokens);let p=n(m,u);return u.hooks&&(p=u.hooks.postprocess(p)),p}catch(m){return f(m)}}},V0=function(e,n){return s=>{if(s.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const r="<p>An error occurred:</p><pre>"+jt(s.message+"",!0)+"</pre>";return n?Promise.resolve(r):r}if(n)return Promise.reject(s);throw s}};const ji=new SS;function Pe(t,e){return ji.parse(t,e)}Pe.options=Pe.setOptions=function(t){return ji.setOptions(t),Pe.defaults=ji.defaults,D0(Pe.defaults),Pe};Pe.getDefaults=qd;Pe.defaults=Fi;Pe.use=function(...t){return ji.use(...t),Pe.defaults=ji.defaults,D0(Pe.defaults),Pe};Pe.walkTokens=function(t,e){return ji.walkTokens(t,e)};Pe.parseInline=ji.parseInline;Pe.Parser=_n;Pe.parser=_n.parse;Pe.Renderer=sl;Pe.TextRenderer=jd;Pe.Lexer=vn;Pe.lexer=vn.lex;Pe.Tokenizer=nl;Pe.Hooks=rr;Pe.parse=Pe;Pe.options;Pe.setOptions;Pe.use;Pe.walkTokens;Pe.parseInline;_n.parse;vn.lex;var wS={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let TS,ES;function AS(){return{geminiUrl:TS,vertexUrl:ES}}function CS(t,e,n,s){var r,l;if(!(t!=null&&t.baseUrl)){const u=AS();return e?(r=u.vertexUrl)!==null&&r!==void 0?r:n:(l=u.geminiUrl)!==null&&l!==void 0?l:s}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zn{}function Q(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(s,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const l=e[r];return l!=null?String(l):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function h(t,e,n){for(let l=0;l<e.length-1;l++){const u=e[l];if(u.endsWith("[]")){const f=u.slice(0,-2);if(!(f in t))if(Array.isArray(n))t[f]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(t[f])){const m=t[f];if(Array.isArray(n))for(let p=0;p<m.length;p++){const y=m[p];h(y,e.slice(l+1),n[p])}else for(const p of m)h(p,e.slice(l+1),n)}return}else if(u.endsWith("[0]")){const f=u.slice(0,-3);f in t||(t[f]=[{}]);const m=t[f];h(m[0],e.slice(l+1),n);return}(!t[u]||typeof t[u]!="object")&&(t[u]={}),t=t[u]}const s=e[e.length-1],r=t[s];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[s]=n}function d(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let s=0;s<e.length;s++){if(typeof t!="object"||t===null)return n;const r=e[s];if(r.endsWith("[]")){const l=r.slice(0,-2);if(l in t){const u=t[l];return Array.isArray(u)?u.map(f=>d(f,e.slice(s+1),n)):n}else return n}else t=t[r]}return t}catch(s){if(s instanceof TypeError)return n;throw s}}function NS(t,e){for(const[n,s]of Object.entries(e)){const r=n.split("."),l=s.split("."),u=new Set;let f=-1;for(let m=0;m<r.length;m++)if(r[m]==="*"){f=m;break}if(f!==-1&&l.length>f)for(let m=f;m<l.length;m++){const p=l[m];p!=="*"&&!p.endsWith("[]")&&!p.endsWith("[0]")&&u.add(p)}dd(t,r,l,0,u)}}function dd(t,e,n,s,r){if(s>=e.length||typeof t!="object"||t===null)return;const l=e[s];if(l.endsWith("[]")){const u=l.slice(0,-2),f=t;if(u in f&&Array.isArray(f[u]))for(const m of f[u])dd(m,e,n,s+1,r)}else if(l==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const u=t,f=Object.keys(u).filter(p=>!p.startsWith("_")&&!r.has(p)),m={};for(const p of f)m[p]=u[p];for(const[p,y]of Object.entries(m)){const b=[];for(const x of n.slice(s))x==="*"?b.push(p):b.push(x);h(u,b,y)}for(const p of f)delete u[p]}}else{const u=t;l in u&&dd(u[l],e,n,s+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $d(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RS(t){const e={},n=d(t,["operationName"]);n!=null&&h(e,["operationName"],n);const s=d(t,["resourceName"]);return s!=null&&h(e,["_url","resourceName"],s),e}function kS(t){const e={},n=d(t,["name"]);n!=null&&h(e,["name"],n);const s=d(t,["metadata"]);s!=null&&h(e,["metadata"],s);const r=d(t,["done"]);r!=null&&h(e,["done"],r);const l=d(t,["error"]);l!=null&&h(e,["error"],l);const u=d(t,["response","generateVideoResponse"]);return u!=null&&h(e,["response"],MS(u)),e}function IS(t){const e={},n=d(t,["name"]);n!=null&&h(e,["name"],n);const s=d(t,["metadata"]);s!=null&&h(e,["metadata"],s);const r=d(t,["done"]);r!=null&&h(e,["done"],r);const l=d(t,["error"]);l!=null&&h(e,["error"],l);const u=d(t,["response"]);return u!=null&&h(e,["response"],DS(u)),e}function MS(t){const e={},n=d(t,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>US(u))),h(e,["generatedVideos"],l)}const s=d(t,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const r=d(t,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function DS(t){const e={},n=d(t,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>PS(u))),h(e,["generatedVideos"],l)}const s=d(t,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const r=d(t,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function US(t){const e={},n=d(t,["video"]);return n!=null&&h(e,["video"],zS(n)),e}function PS(t){const e={},n=d(t,["_self"]);return n!=null&&h(e,["video"],HS(n)),e}function OS(t){const e={},n=d(t,["operationName"]);return n!=null&&h(e,["_url","operationName"],n),e}function LS(t){const e={},n=d(t,["operationName"]);return n!=null&&h(e,["_url","operationName"],n),e}function qS(t){const e={},n=d(t,["name"]);n!=null&&h(e,["name"],n);const s=d(t,["metadata"]);s!=null&&h(e,["metadata"],s);const r=d(t,["done"]);r!=null&&h(e,["done"],r);const l=d(t,["error"]);l!=null&&h(e,["error"],l);const u=d(t,["response"]);return u!=null&&h(e,["response"],BS(u)),e}function BS(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=d(t,["parent"]);s!=null&&h(e,["parent"],s);const r=d(t,["documentName"]);return r!=null&&h(e,["documentName"],r),e}function j0(t){const e={},n=d(t,["name"]);n!=null&&h(e,["name"],n);const s=d(t,["metadata"]);s!=null&&h(e,["metadata"],s);const r=d(t,["done"]);r!=null&&h(e,["done"],r);const l=d(t,["error"]);l!=null&&h(e,["error"],l);const u=d(t,["response"]);return u!=null&&h(e,["response"],GS(u)),e}function GS(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=d(t,["parent"]);s!=null&&h(e,["parent"],s);const r=d(t,["documentName"]);return r!=null&&h(e,["documentName"],r),e}function zS(t){const e={},n=d(t,["uri"]);n!=null&&h(e,["uri"],n);const s=d(t,["encodedVideo"]);s!=null&&h(e,["videoBytes"],$d(s));const r=d(t,["encoding"]);return r!=null&&h(e,["mimeType"],r),e}function HS(t){const e={},n=d(t,["gcsUri"]);n!=null&&h(e,["uri"],n);const s=d(t,["bytesBase64Encoded"]);s!=null&&h(e,["videoBytes"],$d(s));const r=d(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Tg;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Tg||(Tg={}));var Eg;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Eg||(Eg={}));var Ag;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Ag||(Ag={}));var Re;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Re||(Re={}));var Cg;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Cg||(Cg={}));var Ng;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Ng||(Ng={}));var Rg;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Rg||(Rg={}));var kg;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(kg||(kg={}));var Ig;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Ig||(Ig={}));var Mg;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Mg||(Mg={}));var Dg;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(Dg||(Dg={}));var Ug;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(Ug||(Ug={}));var Pg;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Pg||(Pg={}));var Og;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Og||(Og={}));var Lg;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Lg||(Lg={}));var qg;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(qg||(qg={}));var Bg;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Bg||(Bg={}));var Gg;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Gg||(Gg={}));var zg;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(zg||(zg={}));var Hg;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(Hg||(Hg={}));var Vg;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Vg||(Vg={}));var cr;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(cr||(cr={}));var jg;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(jg||(jg={}));var $g;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})($g||($g={}));var Fg;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Fg||(Fg={}));var fd;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(fd||(fd={}));var Jg;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Jg||(Jg={}));var Yg;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Yg||(Yg={}));var hd;(function(t){t.COLLECTION="COLLECTION"})(hd||(hd={}));var Kg;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Kg||(Kg={}));var Qg;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Qg||(Qg={}));var Xg;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Xg||(Xg={}));var Wg;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Wg||(Wg={}));var Zg;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(Zg||(Zg={}));var ey;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(ey||(ey={}));var ty;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(ty||(ty={}));var ny;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(ny||(ny={}));var iy;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(iy||(iy={}));var sy;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(sy||(sy={}));var oy;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(oy||(oy={}));var ry;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(ry||(ry={}));var ay;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(ay||(ay={}));var ly;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING",t.DISTILLATION="DISTILLATION"})(ly||(ly={}));var uy;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(uy||(uy={}));var cy;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(cy||(cy={}));var dy;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(dy||(dy={}));var fy;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(fy||(fy={}));var hy;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(hy||(hy={}));var py;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(py||(py={}));var my;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(my||(my={}));var gy;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(gy||(gy={}));var yy;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(yy||(yy={}));var vy;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(vy||(vy={}));var _y;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(_y||(_y={}));var by;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(by||(by={}));var xy;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(xy||(xy={}));var Fs;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Fs||(Fs={}));class pd{constructor(e){const n={};for(const s of e.headers.entries())n[s[0]]=s[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class er{get text(){var e,n,s,r,l,u,f,m;if(((r=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",y=!1;const b=[];for(const x of(m=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)!==null&&m!==void 0?m:[]){for(const[w,E]of Object.entries(x))w!=="text"&&w!=="thought"&&w!=="thoughtSignature"&&(E!==null||E!==void 0)&&b.push(w);if(typeof x.text=="string"){if(typeof x.thought=="boolean"&&x.thought)continue;y=!0,p+=x.text}}return b.length>0&&console.warn(`there are non-text parts ${b} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),y?p:void 0}get data(){var e,n,s,r,l,u,f,m;if(((r=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const y=[];for(const b of(m=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)!==null&&m!==void 0?m:[]){for(const[x,w]of Object.entries(b))x!=="inlineData"&&(w!==null||w!==void 0)&&y.push(x);b.inlineData&&typeof b.inlineData.data=="string"&&(p+=atob(b.inlineData.data))}return y.length>0&&console.warn(`there are non-data parts ${y} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,n,s,r,l,u,f,m;if(((r=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(m=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||m===void 0?void 0:m.filter(y=>y.functionCall).map(y=>y.functionCall).filter(y=>y!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var e,n,s,r,l,u,f,m,p;if(((r=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const y=(m=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||m===void 0?void 0:m.filter(b=>b.executableCode).map(b=>b.executableCode).filter(b=>b!==void 0);if((y==null?void 0:y.length)!==0)return(p=y==null?void 0:y[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,n,s,r,l,u,f,m,p;if(((r=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const y=(m=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||m===void 0?void 0:m.filter(b=>b.codeExecutionResult).map(b=>b.codeExecutionResult).filter(b=>b!==void 0);if((y==null?void 0:y.length)!==0)return(p=y==null?void 0:y[0])===null||p===void 0?void 0:p.output}}class Sy{}class wy{}class VS{}class jS{}class $S{}class FS{}class Ty{}class Ey{}class Ay{}class JS{}class ol{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const s=new ol;let r;const l=e;return n?r=IS(l):r=kS(l),Object.assign(s,r),s}}class Cy{}class Ny{}class Ry{}class ky{}class YS{}class KS{}class QS{}class Fd{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const s=new Fd,l=qS(e);return Object.assign(s,l),s}}class XS{}class WS{}class ZS{}class ew{}class Iy{}class tw{get text(){var e,n,s;let r="",l=!1;const u=[];for(const f of(s=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&s!==void 0?s:[]){for(const[m,p]of Object.entries(f))m!=="text"&&m!=="thought"&&p!==null&&u.push(m);if(typeof f.text=="string"){if(typeof f.thought=="boolean"&&f.thought)continue;l=!0,r+=f.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?r:void 0}get data(){var e,n,s;let r="";const l=[];for(const u of(s=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&s!==void 0?s:[]){for(const[f,m]of Object.entries(u))f!=="inlineData"&&m!==null&&l.push(f);u.inlineData&&typeof u.inlineData.data=="string"&&(r+=atob(u.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class nw{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Jd{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const s=new Jd,l=j0(e);return Object.assign(s,l),s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ke(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function $0(t,e){const n=ke(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function F0(t){return Array.isArray(t)?t.map(e=>rl(e)):[rl(t)]}function rl(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function J0(t){const e=rl(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Y0(t){const e=rl(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function My(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function K0(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>My(e)):[My(t)]}function md(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Dy(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Uy(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function vt(t){if(t==null)throw new Error("ContentUnion is required");return md(t)?t:{role:"user",parts:K0(t)}}function Yd(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const s=vt(n);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(t.isVertexAI()){const n=vt(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>vt(n)):[vt(e)]}function nn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Dy(t)||Uy(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[vt(t)]}const e=[],n=[],s=md(t[0]);for(const r of t){const l=md(r);if(l!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(r);else{if(Dy(r)||Uy(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return s||e.push({role:"user",parts:K0(n)}),e}function iw(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(s=>s!=="null");if(n.length===1)e.type=Object.values(Re).includes(n[0].toUpperCase())?n[0].toUpperCase():Re.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of n)e.anyOf.push({type:Object.values(Re).includes(s.toUpperCase())?s.toUpperCase():Re.TYPE_UNSPECIFIED})}}function Ks(t){const e={},n=["items"],s=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=t.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,t=l[1]):l[1].type==="null"&&(e.nullable=!0,t=l[0])),t.type instanceof Array&&iw(t.type,e);for(const[u,f]of Object.entries(t))if(f!=null)if(u=="type"){if(f==="null")throw new Error("type: null can not be the only possible type for the field.");if(f instanceof Array)continue;e.type=Object.values(Re).includes(f.toUpperCase())?f.toUpperCase():Re.TYPE_UNSPECIFIED}else if(n.includes(u))e[u]=Ks(f);else if(s.includes(u)){const m=[];for(const p of f){if(p.type=="null"){e.nullable=!0;continue}m.push(Ks(p))}e[u]=m}else if(r.includes(u)){const m={};for(const[p,y]of Object.entries(f))m[p]=Ks(y);e[u]=m}else{if(u==="additionalProperties")continue;e[u]=f}return e}function Kd(t){return Ks(t)}function Qd(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Xd(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Zs(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ks(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ks(e.response));return t}function eo(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function sw(t,e,n,s=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===s;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function Hn(t,e){if(typeof e!="string")throw new Error("name must be a string");return sw(t,e,"cachedContents")}function Q0(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function yi(t){return $d(t)}function ow(t){return t!=null&&typeof t=="object"&&"name"in t}function rw(t){return t!=null&&typeof t=="object"&&"video"in t}function aw(t){return t!=null&&typeof t=="object"&&"uri"in t}function X0(t){var e;let n;if(ow(t)&&(n=t.name),!(aw(t)&&(n=t.uri,n===void 0))&&!(rw(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function W0(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function Z0(t){for(const e of["models","tunedModels","publisherModels"])if(lw(t,e))return t[e];return[]}function lw(t,e){return t!==null&&typeof t=="object"&&e in t}function uw(t,e={}){const n=t,s={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(s.responseJsonSchema=n.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function cw(t,e={}){const n=[],s=new Set;for(const r of t){const l=r.name;if(s.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);s.add(l);const u=uw(r,e);u.functionDeclarations&&n.push(...u.functionDeclarations)}return{functionDeclarations:n}}function ev(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const s=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(r>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function dw(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function tv(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const r=n.inlinedResponses;if(!Array.isArray(r)||r.length===0)return t;let l=!1;for(const u of r){if(typeof u!="object"||u===null)continue;const m=u.response;if(typeof m!="object"||m===null)continue;if(m.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function to(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function nv(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fw(t){const e={},n=d(t,["responsesFile"]);n!=null&&h(e,["fileName"],n);const s=d(t,["inlinedResponses","inlinedResponses"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>Fw(u))),h(e,["inlinedResponses"],l)}const r=d(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["inlinedEmbedContentResponses"],l)}return e}function hw(t){const e={},n=d(t,["predictionsFormat"]);n!=null&&h(e,["format"],n);const s=d(t,["gcsDestination","outputUriPrefix"]);s!=null&&h(e,["gcsUri"],s);const r=d(t,["bigqueryDestination","outputUri"]);return r!=null&&h(e,["bigqueryUri"],r),e}function pw(t){const e={},n=d(t,["format"]);n!=null&&h(e,["predictionsFormat"],n);const s=d(t,["gcsUri"]);s!=null&&h(e,["gcsDestination","outputUriPrefix"],s);const r=d(t,["bigqueryUri"]);if(r!=null&&h(e,["bigqueryDestination","outputUri"],r),d(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(d(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function el(t){const e={},n=d(t,["name"]);n!=null&&h(e,["name"],n);const s=d(t,["metadata","displayName"]);s!=null&&h(e,["displayName"],s);const r=d(t,["metadata","state"]);r!=null&&h(e,["state"],nv(r));const l=d(t,["metadata","createTime"]);l!=null&&h(e,["createTime"],l);const u=d(t,["metadata","endTime"]);u!=null&&h(e,["endTime"],u);const f=d(t,["metadata","updateTime"]);f!=null&&h(e,["updateTime"],f);const m=d(t,["metadata","model"]);m!=null&&h(e,["model"],m);const p=d(t,["metadata","output"]);return p!=null&&h(e,["dest"],fw(tv(p))),e}function gd(t){const e={},n=d(t,["name"]);n!=null&&h(e,["name"],n);const s=d(t,["displayName"]);s!=null&&h(e,["displayName"],s);const r=d(t,["state"]);r!=null&&h(e,["state"],nv(r));const l=d(t,["error"]);l!=null&&h(e,["error"],l);const u=d(t,["createTime"]);u!=null&&h(e,["createTime"],u);const f=d(t,["startTime"]);f!=null&&h(e,["startTime"],f);const m=d(t,["endTime"]);m!=null&&h(e,["endTime"],m);const p=d(t,["updateTime"]);p!=null&&h(e,["updateTime"],p);const y=d(t,["model"]);y!=null&&h(e,["model"],y);const b=d(t,["inputConfig"]);b!=null&&h(e,["src"],mw(b));const x=d(t,["outputConfig"]);x!=null&&h(e,["dest"],hw(tv(x)));const w=d(t,["completionStats"]);return w!=null&&h(e,["completionStats"],w),e}function mw(t){const e={},n=d(t,["instancesFormat"]);n!=null&&h(e,["format"],n);const s=d(t,["gcsSource","uris"]);s!=null&&h(e,["gcsUri"],s);const r=d(t,["bigquerySource","inputUri"]);return r!=null&&h(e,["bigqueryUri"],r),e}function gw(t,e){const n={};if(d(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(d(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=d(e,["fileName"]);s!=null&&h(n,["fileName"],s);const r=d(e,["inlinedRequests"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>$w(t,u))),h(n,["requests","requests"],l)}return n}function yw(t){const e={},n=d(t,["format"]);n!=null&&h(e,["instancesFormat"],n);const s=d(t,["gcsUri"]);s!=null&&h(e,["gcsSource","uris"],s);const r=d(t,["bigqueryUri"]);if(r!=null&&h(e,["bigquerySource","inputUri"],r),d(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function vw(t){const e={},n=d(t,["data"]);if(n!=null&&h(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function _w(t,e){const n={},s=d(e,["name"]);return s!=null&&h(n,["_url","name"],to(t,s)),n}function bw(t,e){const n={},s=d(e,["name"]);return s!=null&&h(n,["_url","name"],to(t,s)),n}function xw(t){const e={},n=d(t,["content"]);n!=null&&h(e,["content"],n);const s=d(t,["citationMetadata"]);s!=null&&h(e,["citationMetadata"],Sw(s));const r=d(t,["tokenCount"]);r!=null&&h(e,["tokenCount"],r);const l=d(t,["finishReason"]);l!=null&&h(e,["finishReason"],l);const u=d(t,["avgLogprobs"]);u!=null&&h(e,["avgLogprobs"],u);const f=d(t,["groundingMetadata"]);f!=null&&h(e,["groundingMetadata"],f);const m=d(t,["index"]);m!=null&&h(e,["index"],m);const p=d(t,["logprobsResult"]);p!=null&&h(e,["logprobsResult"],p);const y=d(t,["safetyRatings"]);if(y!=null){let x=y;Array.isArray(x)&&(x=x.map(w=>w)),h(e,["safetyRatings"],x)}const b=d(t,["urlContextMetadata"]);return b!=null&&h(e,["urlContextMetadata"],b),e}function Sw(t){const e={},n=d(t,["citationSources"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>r)),h(e,["citations"],s)}return e}function iv(t){const e={},n=d(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>Zw(l))),h(e,["parts"],r)}const s=d(t,["role"]);return s!=null&&h(e,["role"],s),e}function ww(t,e){const n={},s=d(t,["displayName"]);if(e!==void 0&&s!=null&&h(e,["batch","displayName"],s),d(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function Tw(t,e){const n={},s=d(t,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const r=d(t,["dest"]);return e!==void 0&&r!=null&&h(e,["outputConfig"],pw(dw(r))),n}function Py(t,e){const n={},s=d(e,["model"]);s!=null&&h(n,["_url","model"],ke(t,s));const r=d(e,["src"]);r!=null&&h(n,["batch","inputConfig"],gw(t,ev(t,r)));const l=d(e,["config"]);return l!=null&&ww(l,n),n}function Ew(t,e){const n={},s=d(e,["model"]);s!=null&&h(n,["model"],ke(t,s));const r=d(e,["src"]);r!=null&&h(n,["inputConfig"],yw(ev(t,r)));const l=d(e,["config"]);return l!=null&&Tw(l,n),n}function Aw(t,e){const n={},s=d(t,["displayName"]);return e!==void 0&&s!=null&&h(e,["batch","displayName"],s),n}function Cw(t,e){const n={},s=d(e,["model"]);s!=null&&h(n,["_url","model"],ke(t,s));const r=d(e,["src"]);r!=null&&h(n,["batch","inputConfig"],Uw(t,r));const l=d(e,["config"]);return l!=null&&Aw(l,n),n}function Nw(t,e){const n={},s=d(e,["name"]);return s!=null&&h(n,["_url","name"],to(t,s)),n}function Rw(t,e){const n={},s=d(e,["name"]);return s!=null&&h(n,["_url","name"],to(t,s)),n}function kw(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=d(t,["name"]);s!=null&&h(e,["name"],s);const r=d(t,["done"]);r!=null&&h(e,["done"],r);const l=d(t,["error"]);return l!=null&&h(e,["error"],l),e}function Iw(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=d(t,["name"]);s!=null&&h(e,["name"],s);const r=d(t,["done"]);r!=null&&h(e,["done"],r);const l=d(t,["error"]);return l!=null&&h(e,["error"],l),e}function Mw(t,e){const n={},s=d(e,["contents"]);if(s!=null){let l=Yd(t,s);Array.isArray(l)&&(l=l.map(u=>u)),h(n,["requests[]","request","content"],l)}const r=d(e,["config"]);return r!=null&&(h(n,["_self"],Dw(r,n)),NS(n,{"requests[].*":"requests[].request.*"})),n}function Dw(t,e){const n={},s=d(t,["taskType"]);e!==void 0&&s!=null&&h(e,["requests[]","taskType"],s);const r=d(t,["title"]);e!==void 0&&r!=null&&h(e,["requests[]","title"],r);const l=d(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&h(e,["requests[]","outputDimensionality"],l),d(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Uw(t,e){const n={},s=d(e,["fileName"]);s!=null&&h(n,["file_name"],s);const r=d(e,["inlinedRequests"]);return r!=null&&h(n,["requests"],Mw(t,r)),n}function Pw(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const s=d(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function Ow(t){const e={},n=d(t,["id"]);n!=null&&h(e,["id"],n);const s=d(t,["args"]);s!=null&&h(e,["args"],s);const r=d(t,["name"]);if(r!=null&&h(e,["name"],r),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Lw(t){const e={},n=d(t,["allowedFunctionNames"]);n!=null&&h(e,["allowedFunctionNames"],n);const s=d(t,["mode"]);if(s!=null&&h(e,["mode"],s),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function qw(t,e,n){const s={},r=d(e,["systemInstruction"]);n!==void 0&&r!=null&&h(n,["systemInstruction"],iv(vt(r)));const l=d(e,["temperature"]);l!=null&&h(s,["temperature"],l);const u=d(e,["topP"]);u!=null&&h(s,["topP"],u);const f=d(e,["topK"]);f!=null&&h(s,["topK"],f);const m=d(e,["candidateCount"]);m!=null&&h(s,["candidateCount"],m);const p=d(e,["maxOutputTokens"]);p!=null&&h(s,["maxOutputTokens"],p);const y=d(e,["stopSequences"]);y!=null&&h(s,["stopSequences"],y);const b=d(e,["responseLogprobs"]);b!=null&&h(s,["responseLogprobs"],b);const x=d(e,["logprobs"]);x!=null&&h(s,["logprobs"],x);const w=d(e,["presencePenalty"]);w!=null&&h(s,["presencePenalty"],w);const E=d(e,["frequencyPenalty"]);E!=null&&h(s,["frequencyPenalty"],E);const A=d(e,["seed"]);A!=null&&h(s,["seed"],A);const C=d(e,["responseMimeType"]);C!=null&&h(s,["responseMimeType"],C);const I=d(e,["responseSchema"]);I!=null&&h(s,["responseSchema"],Kd(I));const O=d(e,["responseJsonSchema"]);if(O!=null&&h(s,["responseJsonSchema"],O),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const D=d(e,["safetySettings"]);if(n!==void 0&&D!=null){let ae=D;Array.isArray(ae)&&(ae=ae.map(ce=>eT(ce))),h(n,["safetySettings"],ae)}const P=d(e,["tools"]);if(n!==void 0&&P!=null){let ae=eo(P);Array.isArray(ae)&&(ae=ae.map(ce=>nT(Zs(ce)))),h(n,["tools"],ae)}const N=d(e,["toolConfig"]);if(n!==void 0&&N!=null&&h(n,["toolConfig"],tT(N)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const H=d(e,["cachedContent"]);n!==void 0&&H!=null&&h(n,["cachedContent"],Hn(t,H));const V=d(e,["responseModalities"]);V!=null&&h(s,["responseModalities"],V);const Z=d(e,["mediaResolution"]);Z!=null&&h(s,["mediaResolution"],Z);const Y=d(e,["speechConfig"]);if(Y!=null&&h(s,["speechConfig"],Qd(Y)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ee=d(e,["thinkingConfig"]);ee!=null&&h(s,["thinkingConfig"],ee);const fe=d(e,["imageConfig"]);fe!=null&&h(s,["imageConfig"],jw(fe));const he=d(e,["enableEnhancedCivicAnswers"]);if(he!=null&&h(s,["enableEnhancedCivicAnswers"],he),d(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return s}function Bw(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=d(t,["candidates"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(p=>xw(p))),h(e,["candidates"],m)}const r=d(t,["modelVersion"]);r!=null&&h(e,["modelVersion"],r);const l=d(t,["promptFeedback"]);l!=null&&h(e,["promptFeedback"],l);const u=d(t,["responseId"]);u!=null&&h(e,["responseId"],u);const f=d(t,["usageMetadata"]);return f!=null&&h(e,["usageMetadata"],f),e}function Gw(t,e){const n={},s=d(e,["name"]);return s!=null&&h(n,["_url","name"],to(t,s)),n}function zw(t,e){const n={},s=d(e,["name"]);return s!=null&&h(n,["_url","name"],to(t,s)),n}function Hw(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function Vw(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function jw(t){const e={},n=d(t,["aspectRatio"]);n!=null&&h(e,["aspectRatio"],n);const s=d(t,["imageSize"]);if(s!=null&&h(e,["imageSize"],s),d(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(d(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function $w(t,e){const n={},s=d(e,["model"]);s!=null&&h(n,["request","model"],ke(t,s));const r=d(e,["contents"]);if(r!=null){let f=nn(r);Array.isArray(f)&&(f=f.map(m=>iv(m))),h(n,["request","contents"],f)}const l=d(e,["metadata"]);l!=null&&h(n,["metadata"],l);const u=d(e,["config"]);return u!=null&&h(n,["request","generationConfig"],qw(t,u,d(n,["request"],{}))),n}function Fw(t){const e={},n=d(t,["response"]);n!=null&&h(e,["response"],Bw(n));const s=d(t,["metadata"]);s!=null&&h(e,["metadata"],s);const r=d(t,["error"]);return r!=null&&h(e,["error"],r),e}function Jw(t,e){const n={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=d(t,["pageToken"]);if(e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),d(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function Yw(t,e){const n={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=d(t,["pageToken"]);e!==void 0&&r!=null&&h(e,["_query","pageToken"],r);const l=d(t,["filter"]);return e!==void 0&&l!=null&&h(e,["_query","filter"],l),n}function Kw(t){const e={},n=d(t,["config"]);return n!=null&&Jw(n,e),e}function Qw(t){const e={},n=d(t,["config"]);return n!=null&&Yw(n,e),e}function Xw(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=d(t,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=d(t,["operations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>el(u))),h(e,["batchJobs"],l)}return e}function Ww(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=d(t,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=d(t,["batchPredictionJobs"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>gd(u))),h(e,["batchJobs"],l)}return e}function Zw(t){const e={},n=d(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const s=d(t,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const r=d(t,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=d(t,["fileData"]);l!=null&&h(e,["fileData"],Pw(l));const u=d(t,["functionCall"]);u!=null&&h(e,["functionCall"],Ow(u));const f=d(t,["functionResponse"]);f!=null&&h(e,["functionResponse"],f);const m=d(t,["inlineData"]);m!=null&&h(e,["inlineData"],vw(m));const p=d(t,["text"]);p!=null&&h(e,["text"],p);const y=d(t,["thought"]);y!=null&&h(e,["thought"],y);const b=d(t,["thoughtSignature"]);b!=null&&h(e,["thoughtSignature"],b);const x=d(t,["videoMetadata"]);return x!=null&&h(e,["videoMetadata"],x),e}function eT(t){const e={},n=d(t,["category"]);if(n!=null&&h(e,["category"],n),d(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=d(t,["threshold"]);return s!=null&&h(e,["threshold"],s),e}function tT(t){const e={},n=d(t,["retrievalConfig"]);n!=null&&h(e,["retrievalConfig"],n);const s=d(t,["functionCallingConfig"]);return s!=null&&h(e,["functionCallingConfig"],Lw(s)),e}function nT(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=d(t,["computerUse"]);n!=null&&h(e,["computerUse"],n);const s=d(t,["fileSearch"]);s!=null&&h(e,["fileSearch"],s);const r=d(t,["codeExecution"]);if(r!=null&&h(e,["codeExecution"],r),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=d(t,["functionDeclarations"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(b=>b)),h(e,["functionDeclarations"],y)}const u=d(t,["googleMaps"]);u!=null&&h(e,["googleMaps"],Hw(u));const f=d(t,["googleSearch"]);f!=null&&h(e,["googleSearch"],Vw(f));const m=d(t,["googleSearchRetrieval"]);m!=null&&h(e,["googleSearchRetrieval"],m);const p=d(t,["urlContext"]);return p!=null&&h(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Gn;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Gn||(Gn={}));class Ji{constructor(e,n,s,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,s,r)}init(e,n,s){var r,l;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!s||Object.keys(s).length===0?u={config:{}}:typeof s=="object"?u=Object.assign({},s):u=s,u.config&&(u.config.pageToken=n.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(l=(r=u.config)===null||r===void 0?void 0:r.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class iT extends zn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ji(Gn.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=Py(this.apiClient,e),s=n._url,r=Q("{model}:batchGenerateContent",s),f=n.batch.inputConfig.requests,m=f.requests,p=[];for(const y of m){const b=Object.assign({},y);if(b.systemInstruction){const x=b.systemInstruction;delete b.systemInstruction;const w=b.request;w.systemInstruction=x,b.request=w}p.push(b)}return f.requests=p,delete n.config,delete n._url,delete n._query,{path:r,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const s=n?Object.assign({},n):{},r=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${r}`),s.dest===void 0){const l=this.getGcsUri(e),u=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?s.dest=`${l.slice(0,-6)}/dest`:s.dest=`${l}_dest_${r}`;else if(u)s.dest=`${u}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var n,s,r,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=Ew(this.apiClient,e);return f=Q("batchPredictionJobs",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>gd(y))}else{const p=Py(this.apiClient,e);return f=Q("{model}:batchGenerateContent",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>el(y))}}async createEmbeddingsInternal(e){var n,s;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=Cw(this.apiClient,e);return l=Q("{model}:asyncBatchEmbedContent",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>el(m))}}async get(e){var n,s,r,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=zw(this.apiClient,e);return f=Q("batchPredictionJobs/{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>gd(y))}else{const p=Gw(this.apiClient,e);return f=Q("batches/{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>el(y))}}async cancel(e){var n,s,r,l;let u="",f={};if(this.apiClient.isVertexAI()){const m=bw(this.apiClient,e);u=Q("batchPredictionJobs/{name}:cancel",m._url),f=m._query,delete m._url,delete m._query,await this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const m=_w(this.apiClient,e);u=Q("batches/{name}:cancel",m._url),f=m._query,delete m._url,delete m._query,await this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var n,s,r,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=Qw(e);return f=Q("batchPredictionJobs",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(b=>{const x=b;return x.sdkHttpResponse={headers:y.headers},x})),u.then(y=>{const b=Ww(y),x=new Iy;return Object.assign(x,b),x})}else{const p=Kw(e);return f=Q("batches",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(b=>{const x=b;return x.sdkHttpResponse={headers:y.headers},x})),u.then(y=>{const b=Xw(y),x=new Iy;return Object.assign(x,b),x})}}async delete(e){var n,s,r,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=Rw(this.apiClient,e);return f=Q("batchPredictionJobs/{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(b=>{const x=b;return x.sdkHttpResponse={headers:y.headers},x})),u.then(y=>Iw(y))}else{const p=Nw(this.apiClient,e);return f=Q("batches/{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(b=>{const x=b;return x.sdkHttpResponse={headers:y.headers},x})),u.then(y=>kw(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sT(t){const e={},n=d(t,["data"]);if(n!=null&&h(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function Oy(t){const e={},n=d(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>CT(l))),h(e,["parts"],r)}const s=d(t,["role"]);return s!=null&&h(e,["role"],s),e}function oT(t,e){const n={},s=d(t,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const r=d(t,["expireTime"]);e!==void 0&&r!=null&&h(e,["expireTime"],r);const l=d(t,["displayName"]);e!==void 0&&l!=null&&h(e,["displayName"],l);const u=d(t,["contents"]);if(e!==void 0&&u!=null){let y=nn(u);Array.isArray(y)&&(y=y.map(b=>Oy(b))),h(e,["contents"],y)}const f=d(t,["systemInstruction"]);e!==void 0&&f!=null&&h(e,["systemInstruction"],Oy(vt(f)));const m=d(t,["tools"]);if(e!==void 0&&m!=null){let y=m;Array.isArray(y)&&(y=y.map(b=>RT(b))),h(e,["tools"],y)}const p=d(t,["toolConfig"]);if(e!==void 0&&p!=null&&h(e,["toolConfig"],NT(p)),d(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function rT(t,e){const n={},s=d(t,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const r=d(t,["expireTime"]);e!==void 0&&r!=null&&h(e,["expireTime"],r);const l=d(t,["displayName"]);e!==void 0&&l!=null&&h(e,["displayName"],l);const u=d(t,["contents"]);if(e!==void 0&&u!=null){let b=nn(u);Array.isArray(b)&&(b=b.map(x=>x)),h(e,["contents"],b)}const f=d(t,["systemInstruction"]);e!==void 0&&f!=null&&h(e,["systemInstruction"],vt(f));const m=d(t,["tools"]);if(e!==void 0&&m!=null){let b=m;Array.isArray(b)&&(b=b.map(x=>kT(x))),h(e,["tools"],b)}const p=d(t,["toolConfig"]);e!==void 0&&p!=null&&h(e,["toolConfig"],p);const y=d(t,["kmsKeyName"]);return e!==void 0&&y!=null&&h(e,["encryption_spec","kmsKeyName"],y),n}function aT(t,e){const n={},s=d(e,["model"]);s!=null&&h(n,["model"],$0(t,s));const r=d(e,["config"]);return r!=null&&oT(r,n),n}function lT(t,e){const n={},s=d(e,["model"]);s!=null&&h(n,["model"],$0(t,s));const r=d(e,["config"]);return r!=null&&rT(r,n),n}function uT(t,e){const n={},s=d(e,["name"]);return s!=null&&h(n,["_url","name"],Hn(t,s)),n}function cT(t,e){const n={},s=d(e,["name"]);return s!=null&&h(n,["_url","name"],Hn(t,s)),n}function dT(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function fT(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function hT(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const s=d(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function pT(t){const e={},n=d(t,["id"]);n!=null&&h(e,["id"],n);const s=d(t,["args"]);s!=null&&h(e,["args"],s);const r=d(t,["name"]);if(r!=null&&h(e,["name"],r),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function mT(t){const e={},n=d(t,["allowedFunctionNames"]);n!=null&&h(e,["allowedFunctionNames"],n);const s=d(t,["mode"]);if(s!=null&&h(e,["mode"],s),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function gT(t){const e={},n=d(t,["description"]);n!=null&&h(e,["description"],n);const s=d(t,["name"]);s!=null&&h(e,["name"],s);const r=d(t,["parameters"]);r!=null&&h(e,["parameters"],r);const l=d(t,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const u=d(t,["response"]);u!=null&&h(e,["response"],u);const f=d(t,["responseJsonSchema"]);if(f!=null&&h(e,["responseJsonSchema"],f),d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function yT(t,e){const n={},s=d(e,["name"]);return s!=null&&h(n,["_url","name"],Hn(t,s)),n}function vT(t,e){const n={},s=d(e,["name"]);return s!=null&&h(n,["_url","name"],Hn(t,s)),n}function _T(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function bT(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function xT(t,e){const n={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=d(t,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),n}function ST(t,e){const n={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=d(t,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),n}function wT(t){const e={},n=d(t,["config"]);return n!=null&&xT(n,e),e}function TT(t){const e={},n=d(t,["config"]);return n!=null&&ST(n,e),e}function ET(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=d(t,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=d(t,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["cachedContents"],l)}return e}function AT(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=d(t,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=d(t,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["cachedContents"],l)}return e}function CT(t){const e={},n=d(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const s=d(t,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const r=d(t,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=d(t,["fileData"]);l!=null&&h(e,["fileData"],hT(l));const u=d(t,["functionCall"]);u!=null&&h(e,["functionCall"],pT(u));const f=d(t,["functionResponse"]);f!=null&&h(e,["functionResponse"],f);const m=d(t,["inlineData"]);m!=null&&h(e,["inlineData"],sT(m));const p=d(t,["text"]);p!=null&&h(e,["text"],p);const y=d(t,["thought"]);y!=null&&h(e,["thought"],y);const b=d(t,["thoughtSignature"]);b!=null&&h(e,["thoughtSignature"],b);const x=d(t,["videoMetadata"]);return x!=null&&h(e,["videoMetadata"],x),e}function NT(t){const e={},n=d(t,["retrievalConfig"]);n!=null&&h(e,["retrievalConfig"],n);const s=d(t,["functionCallingConfig"]);return s!=null&&h(e,["functionCallingConfig"],mT(s)),e}function RT(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=d(t,["computerUse"]);n!=null&&h(e,["computerUse"],n);const s=d(t,["fileSearch"]);s!=null&&h(e,["fileSearch"],s);const r=d(t,["codeExecution"]);if(r!=null&&h(e,["codeExecution"],r),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=d(t,["functionDeclarations"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(b=>b)),h(e,["functionDeclarations"],y)}const u=d(t,["googleMaps"]);u!=null&&h(e,["googleMaps"],_T(u));const f=d(t,["googleSearch"]);f!=null&&h(e,["googleSearch"],bT(f));const m=d(t,["googleSearchRetrieval"]);m!=null&&h(e,["googleSearchRetrieval"],m);const p=d(t,["urlContext"]);return p!=null&&h(e,["urlContext"],p),e}function kT(t){const e={},n=d(t,["retrieval"]);n!=null&&h(e,["retrieval"],n);const s=d(t,["computerUse"]);if(s!=null&&h(e,["computerUse"],s),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=d(t,["codeExecution"]);r!=null&&h(e,["codeExecution"],r);const l=d(t,["enterpriseWebSearch"]);l!=null&&h(e,["enterpriseWebSearch"],l);const u=d(t,["functionDeclarations"]);if(u!=null){let b=u;Array.isArray(b)&&(b=b.map(x=>gT(x))),h(e,["functionDeclarations"],b)}const f=d(t,["googleMaps"]);f!=null&&h(e,["googleMaps"],f);const m=d(t,["googleSearch"]);m!=null&&h(e,["googleSearch"],m);const p=d(t,["googleSearchRetrieval"]);p!=null&&h(e,["googleSearchRetrieval"],p);const y=d(t,["urlContext"]);return y!=null&&h(e,["urlContext"],y),e}function IT(t,e){const n={},s=d(t,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const r=d(t,["expireTime"]);return e!==void 0&&r!=null&&h(e,["expireTime"],r),n}function MT(t,e){const n={},s=d(t,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const r=d(t,["expireTime"]);return e!==void 0&&r!=null&&h(e,["expireTime"],r),n}function DT(t,e){const n={},s=d(e,["name"]);s!=null&&h(n,["_url","name"],Hn(t,s));const r=d(e,["config"]);return r!=null&&IT(r,n),n}function UT(t,e){const n={},s=d(e,["name"]);s!=null&&h(n,["_url","name"],Hn(t,s));const r=d(e,["config"]);return r!=null&&MT(r,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class PT extends zn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ji(Gn.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(n),n)}async create(e){var n,s,r,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=lT(this.apiClient,e);return f=Q("cachedContents",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>y)}else{const p=aT(this.apiClient,e);return f=Q("cachedContents",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>y)}}async get(e){var n,s,r,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=vT(this.apiClient,e);return f=Q("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>y)}else{const p=yT(this.apiClient,e);return f=Q("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>y)}}async delete(e){var n,s,r,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=cT(this.apiClient,e);return f=Q("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(b=>{const x=b;return x.sdkHttpResponse={headers:y.headers},x})),u.then(y=>{const b=fT(y),x=new Ry;return Object.assign(x,b),x})}else{const p=uT(this.apiClient,e);return f=Q("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(b=>{const x=b;return x.sdkHttpResponse={headers:y.headers},x})),u.then(y=>{const b=dT(y),x=new Ry;return Object.assign(x,b),x})}}async update(e){var n,s,r,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=UT(this.apiClient,e);return f=Q("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>y)}else{const p=DT(this.apiClient,e);return f=Q("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>y)}}async listInternal(e){var n,s,r,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=TT(e);return f=Q("cachedContents",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(b=>{const x=b;return x.sdkHttpResponse={headers:y.headers},x})),u.then(y=>{const b=AT(y),x=new ky;return Object.assign(x,b),x})}else{const p=wT(e);return f=Q("cachedContents",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(b=>{const x=b;return x.sdkHttpResponse={headers:y.headers},x})),u.then(y=>{const b=ET(y),x=new ky;return Object.assign(x,b),x})}}}function al(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(n[s[r]]=t[s[r]]);return n}function Ly(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],s=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function pe(t){return this instanceof pe?(this.v=t,this):new pe(t)}function dn(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=n.apply(t,e||[]),r,l=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",u),r[Symbol.asyncIterator]=function(){return this},r;function u(w){return function(E){return Promise.resolve(E).then(w,b)}}function f(w,E){s[w]&&(r[w]=function(A){return new Promise(function(C,I){l.push([w,A,C,I])>1||m(w,A)})},E&&(r[w]=E(r[w])))}function m(w,E){try{p(s[w](E))}catch(A){x(l[0][3],A)}}function p(w){w.value instanceof pe?Promise.resolve(w.value.v).then(y,b):x(l[0][2],w)}function y(w){m("next",w)}function b(w){m("throw",w)}function x(w,E){w(E),l.shift(),l.length&&m(l[0][0],l[0][1])}}function fn(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Ly=="function"?Ly(t):t[Symbol.iterator](),n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n);function s(l){n[l]=t[l]&&function(u){return new Promise(function(f,m){u=t[l](u),r(f,m,u.done,u.value)})}}function r(l,u,f,m){Promise.resolve(m).then(function(p){l({value:p,done:f})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function OT(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:sv(n)}function sv(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function LT(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function qy(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let s=0;for(;s<n;)if(t[s].role==="user")e.push(t[s]),s++;else{const r=[];let l=!0;for(;s<n&&t[s].role==="model";)r.push(t[s]),l&&!sv(t[s])&&(l=!1),s++;l?e.push(...r):e.pop()}return e}class qT{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new BT(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class BT{constructor(e,n,s,r={},l=[]){this.apiClient=e,this.modelsModule=n,this.model=s,this.config=r,this.history=l,this.sendPromise=Promise.resolve(),LT(l)}async sendMessage(e){var n;await this.sendPromise;const s=vt(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var l,u,f;const m=await r,p=(u=(l=m.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content,y=m.automaticFunctionCallingHistory,b=this.getHistory(!0).length;let x=[];y!=null&&(x=(f=y.slice(b))!==null&&f!==void 0?f:[]);const w=p?[p]:[];this.recordHistory(s,w,x)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const s=vt(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const l=await r;return this.processStreamResponse(l,s)}getHistory(e=!1){const n=e?qy(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return dn(this,arguments,function*(){var r,l,u,f,m,p;const y=[];try{for(var b=!0,x=fn(e),w;w=yield pe(x.next()),r=w.done,!r;b=!0){f=w.value,b=!1;const E=f;if(OT(E)){const A=(p=(m=E.candidates)===null||m===void 0?void 0:m[0])===null||p===void 0?void 0:p.content;A!==void 0&&y.push(A)}yield yield pe(E)}}catch(E){l={error:E}}finally{try{!b&&!r&&(u=x.return)&&(yield pe(u.call(x)))}finally{if(l)throw l.error}}this.recordHistory(n,y)})}recordHistory(e,n,s){let r=[];n.length>0&&n.every(l=>l.role!==void 0)?r=n:r.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...qy(s)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dr extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,dr.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function GT(t){const e={},n=d(t,["file"]);return n!=null&&h(e,["file"],n),e}function zT(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function HT(t){const e={},n=d(t,["name"]);return n!=null&&h(e,["_url","file"],X0(n)),e}function VT(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function jT(t){const e={},n=d(t,["name"]);return n!=null&&h(e,["_url","file"],X0(n)),e}function $T(t){const e={},n=d(t,["uris"]);return n!=null&&h(e,["uris"],n),e}function FT(t,e){const n={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=d(t,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),n}function JT(t){const e={},n=d(t,["config"]);return n!=null&&FT(n,e),e}function YT(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=d(t,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=d(t,["files"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["files"],l)}return e}function KT(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=d(t,["files"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>l)),h(e,["files"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class QT extends zn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ji(Gn.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var n,s;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=JT(e);return l=Q("files",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const y=p;return y.sdkHttpResponse={headers:m.headers},y})),r.then(m=>{const p=YT(m),y=new XS;return Object.assign(y,p),y})}}async createInternal(e){var n,s;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=GT(e);return l=Q("upload/v1beta/files",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>{const p=zT(m),y=new WS;return Object.assign(y,p),y})}}async get(e){var n,s;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=jT(e);return l=Q("files/{file}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>m)}}async delete(e){var n,s;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=HT(e);return l=Q("files/{file}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const y=p;return y.sdkHttpResponse={headers:m.headers},y})),r.then(m=>{const p=VT(m),y=new ZS;return Object.assign(y,p),y})}}async registerFilesInternal(e){var n,s;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=$T(e);return l=Q("files:register",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>{const p=KT(m),y=new ew;return Object.assign(y,p),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tl(t){const e={},n=d(t,["data"]);if(n!=null&&h(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function XT(t){const e={},n=d(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>hE(l))),h(e,["parts"],r)}const s=d(t,["role"]);return s!=null&&h(e,["role"],s),e}function WT(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const s=d(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function ZT(t){const e={},n=d(t,["id"]);n!=null&&h(e,["id"],n);const s=d(t,["args"]);s!=null&&h(e,["args"],s);const r=d(t,["name"]);if(r!=null&&h(e,["name"],r),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function eE(t){const e={},n=d(t,["description"]);n!=null&&h(e,["description"],n);const s=d(t,["name"]);s!=null&&h(e,["name"],s);const r=d(t,["parameters"]);r!=null&&h(e,["parameters"],r);const l=d(t,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const u=d(t,["response"]);u!=null&&h(e,["response"],u);const f=d(t,["responseJsonSchema"]);if(f!=null&&h(e,["responseJsonSchema"],f),d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function tE(t){const e={},n=d(t,["modelSelectionConfig"]);n!=null&&h(e,["modelConfig"],n);const s=d(t,["responseJsonSchema"]);s!=null&&h(e,["responseJsonSchema"],s);const r=d(t,["audioTimestamp"]);r!=null&&h(e,["audioTimestamp"],r);const l=d(t,["candidateCount"]);l!=null&&h(e,["candidateCount"],l);const u=d(t,["enableAffectiveDialog"]);u!=null&&h(e,["enableAffectiveDialog"],u);const f=d(t,["frequencyPenalty"]);f!=null&&h(e,["frequencyPenalty"],f);const m=d(t,["logprobs"]);m!=null&&h(e,["logprobs"],m);const p=d(t,["maxOutputTokens"]);p!=null&&h(e,["maxOutputTokens"],p);const y=d(t,["mediaResolution"]);y!=null&&h(e,["mediaResolution"],y);const b=d(t,["presencePenalty"]);b!=null&&h(e,["presencePenalty"],b);const x=d(t,["responseLogprobs"]);x!=null&&h(e,["responseLogprobs"],x);const w=d(t,["responseMimeType"]);w!=null&&h(e,["responseMimeType"],w);const E=d(t,["responseModalities"]);E!=null&&h(e,["responseModalities"],E);const A=d(t,["responseSchema"]);A!=null&&h(e,["responseSchema"],A);const C=d(t,["routingConfig"]);C!=null&&h(e,["routingConfig"],C);const I=d(t,["seed"]);I!=null&&h(e,["seed"],I);const O=d(t,["speechConfig"]);O!=null&&h(e,["speechConfig"],O);const D=d(t,["stopSequences"]);D!=null&&h(e,["stopSequences"],D);const P=d(t,["temperature"]);P!=null&&h(e,["temperature"],P);const N=d(t,["thinkingConfig"]);N!=null&&h(e,["thinkingConfig"],N);const H=d(t,["topK"]);H!=null&&h(e,["topK"],H);const V=d(t,["topP"]);if(V!=null&&h(e,["topP"],V),d(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function nE(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function iE(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function sE(t,e){const n={},s=d(t,["generationConfig"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig"],s);const r=d(t,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const l=d(t,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const u=d(t,["topP"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","topP"],u);const f=d(t,["topK"]);e!==void 0&&f!=null&&h(e,["setup","generationConfig","topK"],f);const m=d(t,["maxOutputTokens"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","maxOutputTokens"],m);const p=d(t,["mediaResolution"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","mediaResolution"],p);const y=d(t,["seed"]);e!==void 0&&y!=null&&h(e,["setup","generationConfig","seed"],y);const b=d(t,["speechConfig"]);e!==void 0&&b!=null&&h(e,["setup","generationConfig","speechConfig"],Xd(b));const x=d(t,["thinkingConfig"]);e!==void 0&&x!=null&&h(e,["setup","generationConfig","thinkingConfig"],x);const w=d(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],w);const E=d(t,["systemInstruction"]);e!==void 0&&E!=null&&h(e,["setup","systemInstruction"],XT(vt(E)));const A=d(t,["tools"]);if(e!==void 0&&A!=null){let H=eo(A);Array.isArray(H)&&(H=H.map(V=>mE(Zs(V)))),h(e,["setup","tools"],H)}const C=d(t,["sessionResumption"]);e!==void 0&&C!=null&&h(e,["setup","sessionResumption"],pE(C));const I=d(t,["inputAudioTranscription"]);e!==void 0&&I!=null&&h(e,["setup","inputAudioTranscription"],I);const O=d(t,["outputAudioTranscription"]);e!==void 0&&O!=null&&h(e,["setup","outputAudioTranscription"],O);const D=d(t,["realtimeInputConfig"]);e!==void 0&&D!=null&&h(e,["setup","realtimeInputConfig"],D);const P=d(t,["contextWindowCompression"]);e!==void 0&&P!=null&&h(e,["setup","contextWindowCompression"],P);const N=d(t,["proactivity"]);if(e!==void 0&&N!=null&&h(e,["setup","proactivity"],N),d(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function oE(t,e){const n={},s=d(t,["generationConfig"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig"],tE(s));const r=d(t,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const l=d(t,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const u=d(t,["topP"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","topP"],u);const f=d(t,["topK"]);e!==void 0&&f!=null&&h(e,["setup","generationConfig","topK"],f);const m=d(t,["maxOutputTokens"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","maxOutputTokens"],m);const p=d(t,["mediaResolution"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","mediaResolution"],p);const y=d(t,["seed"]);e!==void 0&&y!=null&&h(e,["setup","generationConfig","seed"],y);const b=d(t,["speechConfig"]);e!==void 0&&b!=null&&h(e,["setup","generationConfig","speechConfig"],Xd(b));const x=d(t,["thinkingConfig"]);e!==void 0&&x!=null&&h(e,["setup","generationConfig","thinkingConfig"],x);const w=d(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],w);const E=d(t,["systemInstruction"]);e!==void 0&&E!=null&&h(e,["setup","systemInstruction"],vt(E));const A=d(t,["tools"]);if(e!==void 0&&A!=null){let V=eo(A);Array.isArray(V)&&(V=V.map(Z=>gE(Zs(Z)))),h(e,["setup","tools"],V)}const C=d(t,["sessionResumption"]);e!==void 0&&C!=null&&h(e,["setup","sessionResumption"],C);const I=d(t,["inputAudioTranscription"]);e!==void 0&&I!=null&&h(e,["setup","inputAudioTranscription"],I);const O=d(t,["outputAudioTranscription"]);e!==void 0&&O!=null&&h(e,["setup","outputAudioTranscription"],O);const D=d(t,["realtimeInputConfig"]);e!==void 0&&D!=null&&h(e,["setup","realtimeInputConfig"],D);const P=d(t,["contextWindowCompression"]);e!==void 0&&P!=null&&h(e,["setup","contextWindowCompression"],P);const N=d(t,["proactivity"]);e!==void 0&&N!=null&&h(e,["setup","proactivity"],N);const H=d(t,["explicitVadSignal"]);return e!==void 0&&H!=null&&h(e,["setup","explicitVadSignal"],H),n}function rE(t,e){const n={},s=d(e,["model"]);s!=null&&h(n,["setup","model"],ke(t,s));const r=d(e,["config"]);return r!=null&&h(n,["config"],sE(r,n)),n}function aE(t,e){const n={},s=d(e,["model"]);s!=null&&h(n,["setup","model"],ke(t,s));const r=d(e,["config"]);return r!=null&&h(n,["config"],oE(r,n)),n}function lE(t){const e={},n=d(t,["musicGenerationConfig"]);return n!=null&&h(e,["musicGenerationConfig"],n),e}function uE(t){const e={},n=d(t,["weightedPrompts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>r)),h(e,["weightedPrompts"],s)}return e}function cE(t){const e={},n=d(t,["media"]);if(n!=null){let p=F0(n);Array.isArray(p)&&(p=p.map(y=>tl(y))),h(e,["mediaChunks"],p)}const s=d(t,["audio"]);s!=null&&h(e,["audio"],tl(Y0(s)));const r=d(t,["audioStreamEnd"]);r!=null&&h(e,["audioStreamEnd"],r);const l=d(t,["video"]);l!=null&&h(e,["video"],tl(J0(l)));const u=d(t,["text"]);u!=null&&h(e,["text"],u);const f=d(t,["activityStart"]);f!=null&&h(e,["activityStart"],f);const m=d(t,["activityEnd"]);return m!=null&&h(e,["activityEnd"],m),e}function dE(t){const e={},n=d(t,["media"]);if(n!=null){let p=F0(n);Array.isArray(p)&&(p=p.map(y=>y)),h(e,["mediaChunks"],p)}const s=d(t,["audio"]);s!=null&&h(e,["audio"],Y0(s));const r=d(t,["audioStreamEnd"]);r!=null&&h(e,["audioStreamEnd"],r);const l=d(t,["video"]);l!=null&&h(e,["video"],J0(l));const u=d(t,["text"]);u!=null&&h(e,["text"],u);const f=d(t,["activityStart"]);f!=null&&h(e,["activityStart"],f);const m=d(t,["activityEnd"]);return m!=null&&h(e,["activityEnd"],m),e}function fE(t){const e={},n=d(t,["setupComplete"]);n!=null&&h(e,["setupComplete"],n);const s=d(t,["serverContent"]);s!=null&&h(e,["serverContent"],s);const r=d(t,["toolCall"]);r!=null&&h(e,["toolCall"],r);const l=d(t,["toolCallCancellation"]);l!=null&&h(e,["toolCallCancellation"],l);const u=d(t,["usageMetadata"]);u!=null&&h(e,["usageMetadata"],yE(u));const f=d(t,["goAway"]);f!=null&&h(e,["goAway"],f);const m=d(t,["sessionResumptionUpdate"]);m!=null&&h(e,["sessionResumptionUpdate"],m);const p=d(t,["voiceActivityDetectionSignal"]);p!=null&&h(e,["voiceActivityDetectionSignal"],p);const y=d(t,["voiceActivity"]);return y!=null&&h(e,["voiceActivity"],vE(y)),e}function hE(t){const e={},n=d(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const s=d(t,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const r=d(t,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=d(t,["fileData"]);l!=null&&h(e,["fileData"],WT(l));const u=d(t,["functionCall"]);u!=null&&h(e,["functionCall"],ZT(u));const f=d(t,["functionResponse"]);f!=null&&h(e,["functionResponse"],f);const m=d(t,["inlineData"]);m!=null&&h(e,["inlineData"],tl(m));const p=d(t,["text"]);p!=null&&h(e,["text"],p);const y=d(t,["thought"]);y!=null&&h(e,["thought"],y);const b=d(t,["thoughtSignature"]);b!=null&&h(e,["thoughtSignature"],b);const x=d(t,["videoMetadata"]);return x!=null&&h(e,["videoMetadata"],x),e}function pE(t){const e={},n=d(t,["handle"]);if(n!=null&&h(e,["handle"],n),d(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function mE(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=d(t,["computerUse"]);n!=null&&h(e,["computerUse"],n);const s=d(t,["fileSearch"]);s!=null&&h(e,["fileSearch"],s);const r=d(t,["codeExecution"]);if(r!=null&&h(e,["codeExecution"],r),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=d(t,["functionDeclarations"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(b=>b)),h(e,["functionDeclarations"],y)}const u=d(t,["googleMaps"]);u!=null&&h(e,["googleMaps"],nE(u));const f=d(t,["googleSearch"]);f!=null&&h(e,["googleSearch"],iE(f));const m=d(t,["googleSearchRetrieval"]);m!=null&&h(e,["googleSearchRetrieval"],m);const p=d(t,["urlContext"]);return p!=null&&h(e,["urlContext"],p),e}function gE(t){const e={},n=d(t,["retrieval"]);n!=null&&h(e,["retrieval"],n);const s=d(t,["computerUse"]);if(s!=null&&h(e,["computerUse"],s),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=d(t,["codeExecution"]);r!=null&&h(e,["codeExecution"],r);const l=d(t,["enterpriseWebSearch"]);l!=null&&h(e,["enterpriseWebSearch"],l);const u=d(t,["functionDeclarations"]);if(u!=null){let b=u;Array.isArray(b)&&(b=b.map(x=>eE(x))),h(e,["functionDeclarations"],b)}const f=d(t,["googleMaps"]);f!=null&&h(e,["googleMaps"],f);const m=d(t,["googleSearch"]);m!=null&&h(e,["googleSearch"],m);const p=d(t,["googleSearchRetrieval"]);p!=null&&h(e,["googleSearchRetrieval"],p);const y=d(t,["urlContext"]);return y!=null&&h(e,["urlContext"],y),e}function yE(t){const e={},n=d(t,["promptTokenCount"]);n!=null&&h(e,["promptTokenCount"],n);const s=d(t,["cachedContentTokenCount"]);s!=null&&h(e,["cachedContentTokenCount"],s);const r=d(t,["candidatesTokenCount"]);r!=null&&h(e,["responseTokenCount"],r);const l=d(t,["toolUsePromptTokenCount"]);l!=null&&h(e,["toolUsePromptTokenCount"],l);const u=d(t,["thoughtsTokenCount"]);u!=null&&h(e,["thoughtsTokenCount"],u);const f=d(t,["totalTokenCount"]);f!=null&&h(e,["totalTokenCount"],f);const m=d(t,["promptTokensDetails"]);if(m!=null){let w=m;Array.isArray(w)&&(w=w.map(E=>E)),h(e,["promptTokensDetails"],w)}const p=d(t,["cacheTokensDetails"]);if(p!=null){let w=p;Array.isArray(w)&&(w=w.map(E=>E)),h(e,["cacheTokensDetails"],w)}const y=d(t,["candidatesTokensDetails"]);if(y!=null){let w=y;Array.isArray(w)&&(w=w.map(E=>E)),h(e,["responseTokensDetails"],w)}const b=d(t,["toolUsePromptTokensDetails"]);if(b!=null){let w=b;Array.isArray(w)&&(w=w.map(E=>E)),h(e,["toolUsePromptTokensDetails"],w)}const x=d(t,["trafficType"]);return x!=null&&h(e,["trafficType"],x),e}function vE(t){const e={},n=d(t,["type"]);return n!=null&&h(e,["voiceActivityType"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _E(t,e){const n={},s=d(t,["data"]);if(s!=null&&h(n,["data"],s),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=d(t,["mimeType"]);return r!=null&&h(n,["mimeType"],r),n}function bE(t,e){const n={},s=d(t,["content"]);s!=null&&h(n,["content"],s);const r=d(t,["citationMetadata"]);r!=null&&h(n,["citationMetadata"],xE(r));const l=d(t,["tokenCount"]);l!=null&&h(n,["tokenCount"],l);const u=d(t,["finishReason"]);u!=null&&h(n,["finishReason"],u);const f=d(t,["avgLogprobs"]);f!=null&&h(n,["avgLogprobs"],f);const m=d(t,["groundingMetadata"]);m!=null&&h(n,["groundingMetadata"],m);const p=d(t,["index"]);p!=null&&h(n,["index"],p);const y=d(t,["logprobsResult"]);y!=null&&h(n,["logprobsResult"],y);const b=d(t,["safetyRatings"]);if(b!=null){let w=b;Array.isArray(w)&&(w=w.map(E=>E)),h(n,["safetyRatings"],w)}const x=d(t,["urlContextMetadata"]);return x!=null&&h(n,["urlContextMetadata"],x),n}function xE(t,e){const n={},s=d(t,["citationSources"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>l)),h(n,["citations"],r)}return n}function SE(t,e,n){const s={},r=d(e,["model"]);r!=null&&h(s,["_url","model"],ke(t,r));const l=d(e,["contents"]);if(l!=null){let u=nn(l);Array.isArray(u)&&(u=u.map(f=>f)),h(s,["contents"],u)}return s}function wE(t,e){const n={},s=d(t,["sdkHttpResponse"]);s!=null&&h(n,["sdkHttpResponse"],s);const r=d(t,["tokensInfo"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),h(n,["tokensInfo"],l)}return n}function TE(t,e){const n={},s=d(t,["values"]);s!=null&&h(n,["values"],s);const r=d(t,["statistics"]);return r!=null&&h(n,["statistics"],EE(r)),n}function EE(t,e){const n={},s=d(t,["truncated"]);s!=null&&h(n,["truncated"],s);const r=d(t,["token_count"]);return r!=null&&h(n,["tokenCount"],r),n}function ml(t,e){const n={},s=d(t,["parts"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>UA(u))),h(n,["parts"],l)}const r=d(t,["role"]);return r!=null&&h(n,["role"],r),n}function AE(t,e){const n={},s=d(t,["controlType"]);s!=null&&h(n,["controlType"],s);const r=d(t,["enableControlImageComputation"]);return r!=null&&h(n,["computeControl"],r),n}function CE(t,e){const n={};if(d(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(d(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(d(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return n}function NE(t,e,n){const s={},r=d(t,["systemInstruction"]);e!==void 0&&r!=null&&h(e,["systemInstruction"],vt(r));const l=d(t,["tools"]);if(e!==void 0&&l!=null){let f=l;Array.isArray(f)&&(f=f.map(m=>lv(m))),h(e,["tools"],f)}const u=d(t,["generationConfig"]);return e!==void 0&&u!=null&&h(e,["generationConfig"],_A(u)),s}function RE(t,e,n){const s={},r=d(e,["model"]);r!=null&&h(s,["_url","model"],ke(t,r));const l=d(e,["contents"]);if(l!=null){let f=nn(l);Array.isArray(f)&&(f=f.map(m=>ml(m))),h(s,["contents"],f)}const u=d(e,["config"]);return u!=null&&CE(u),s}function kE(t,e,n){const s={},r=d(e,["model"]);r!=null&&h(s,["_url","model"],ke(t,r));const l=d(e,["contents"]);if(l!=null){let f=nn(l);Array.isArray(f)&&(f=f.map(m=>m)),h(s,["contents"],f)}const u=d(e,["config"]);return u!=null&&NE(u,s),s}function IE(t,e){const n={},s=d(t,["sdkHttpResponse"]);s!=null&&h(n,["sdkHttpResponse"],s);const r=d(t,["totalTokens"]);r!=null&&h(n,["totalTokens"],r);const l=d(t,["cachedContentTokenCount"]);return l!=null&&h(n,["cachedContentTokenCount"],l),n}function ME(t,e){const n={},s=d(t,["sdkHttpResponse"]);s!=null&&h(n,["sdkHttpResponse"],s);const r=d(t,["totalTokens"]);return r!=null&&h(n,["totalTokens"],r),n}function DE(t,e,n){const s={},r=d(e,["model"]);return r!=null&&h(s,["_url","name"],ke(t,r)),s}function UE(t,e,n){const s={},r=d(e,["model"]);return r!=null&&h(s,["_url","name"],ke(t,r)),s}function PE(t,e){const n={},s=d(t,["sdkHttpResponse"]);return s!=null&&h(n,["sdkHttpResponse"],s),n}function OE(t,e){const n={},s=d(t,["sdkHttpResponse"]);return s!=null&&h(n,["sdkHttpResponse"],s),n}function LE(t,e,n){const s={},r=d(t,["outputGcsUri"]);e!==void 0&&r!=null&&h(e,["parameters","storageUri"],r);const l=d(t,["negativePrompt"]);e!==void 0&&l!=null&&h(e,["parameters","negativePrompt"],l);const u=d(t,["numberOfImages"]);e!==void 0&&u!=null&&h(e,["parameters","sampleCount"],u);const f=d(t,["aspectRatio"]);e!==void 0&&f!=null&&h(e,["parameters","aspectRatio"],f);const m=d(t,["guidanceScale"]);e!==void 0&&m!=null&&h(e,["parameters","guidanceScale"],m);const p=d(t,["seed"]);e!==void 0&&p!=null&&h(e,["parameters","seed"],p);const y=d(t,["safetyFilterLevel"]);e!==void 0&&y!=null&&h(e,["parameters","safetySetting"],y);const b=d(t,["personGeneration"]);e!==void 0&&b!=null&&h(e,["parameters","personGeneration"],b);const x=d(t,["includeSafetyAttributes"]);e!==void 0&&x!=null&&h(e,["parameters","includeSafetyAttributes"],x);const w=d(t,["includeRaiReason"]);e!==void 0&&w!=null&&h(e,["parameters","includeRaiReason"],w);const E=d(t,["language"]);e!==void 0&&E!=null&&h(e,["parameters","language"],E);const A=d(t,["outputMimeType"]);e!==void 0&&A!=null&&h(e,["parameters","outputOptions","mimeType"],A);const C=d(t,["outputCompressionQuality"]);e!==void 0&&C!=null&&h(e,["parameters","outputOptions","compressionQuality"],C);const I=d(t,["addWatermark"]);e!==void 0&&I!=null&&h(e,["parameters","addWatermark"],I);const O=d(t,["labels"]);e!==void 0&&O!=null&&h(e,["labels"],O);const D=d(t,["editMode"]);e!==void 0&&D!=null&&h(e,["parameters","editMode"],D);const P=d(t,["baseSteps"]);return e!==void 0&&P!=null&&h(e,["parameters","editConfig","baseSteps"],P),s}function qE(t,e,n){const s={},r=d(e,["model"]);r!=null&&h(s,["_url","model"],ke(t,r));const l=d(e,["prompt"]);l!=null&&h(s,["instances[0]","prompt"],l);const u=d(e,["referenceImages"]);if(u!=null){let m=u;Array.isArray(m)&&(m=m.map(p=>GA(p))),h(s,["instances[0]","referenceImages"],m)}const f=d(e,["config"]);return f!=null&&LE(f,s),s}function BE(t,e){const n={},s=d(t,["sdkHttpResponse"]);s!=null&&h(n,["sdkHttpResponse"],s);const r=d(t,["predictions"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>gl(u))),h(n,["generatedImages"],l)}return n}function GE(t,e,n){const s={},r=d(t,["taskType"]);e!==void 0&&r!=null&&h(e,["requests[]","taskType"],r);const l=d(t,["title"]);e!==void 0&&l!=null&&h(e,["requests[]","title"],l);const u=d(t,["outputDimensionality"]);if(e!==void 0&&u!=null&&h(e,["requests[]","outputDimensionality"],u),d(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return s}function zE(t,e,n){const s={},r=d(t,["taskType"]);e!==void 0&&r!=null&&h(e,["instances[]","task_type"],r);const l=d(t,["title"]);e!==void 0&&l!=null&&h(e,["instances[]","title"],l);const u=d(t,["outputDimensionality"]);e!==void 0&&u!=null&&h(e,["parameters","outputDimensionality"],u);const f=d(t,["mimeType"]);e!==void 0&&f!=null&&h(e,["instances[]","mimeType"],f);const m=d(t,["autoTruncate"]);return e!==void 0&&m!=null&&h(e,["parameters","autoTruncate"],m),s}function HE(t,e,n){const s={},r=d(e,["model"]);r!=null&&h(s,["_url","model"],ke(t,r));const l=d(e,["contents"]);if(l!=null){let m=Yd(t,l);Array.isArray(m)&&(m=m.map(p=>p)),h(s,["requests[]","content"],m)}const u=d(e,["config"]);u!=null&&GE(u,s);const f=d(e,["model"]);return f!==void 0&&h(s,["requests[]","model"],ke(t,f)),s}function VE(t,e,n){const s={},r=d(e,["model"]);r!=null&&h(s,["_url","model"],ke(t,r));const l=d(e,["contents"]);if(l!=null){let f=Yd(t,l);Array.isArray(f)&&(f=f.map(m=>m)),h(s,["instances[]","content"],f)}const u=d(e,["config"]);return u!=null&&zE(u,s),s}function jE(t,e){const n={},s=d(t,["sdkHttpResponse"]);s!=null&&h(n,["sdkHttpResponse"],s);const r=d(t,["embeddings"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>f)),h(n,["embeddings"],u)}const l=d(t,["metadata"]);return l!=null&&h(n,["metadata"],l),n}function $E(t,e){const n={},s=d(t,["sdkHttpResponse"]);s!=null&&h(n,["sdkHttpResponse"],s);const r=d(t,["predictions[]","embeddings"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>TE(f))),h(n,["embeddings"],u)}const l=d(t,["metadata"]);return l!=null&&h(n,["metadata"],l),n}function FE(t,e){const n={},s=d(t,["endpoint"]);s!=null&&h(n,["name"],s);const r=d(t,["deployedModelId"]);return r!=null&&h(n,["deployedModelId"],r),n}function JE(t,e){const n={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(t,["fileUri"]);s!=null&&h(n,["fileUri"],s);const r=d(t,["mimeType"]);return r!=null&&h(n,["mimeType"],r),n}function YE(t,e){const n={},s=d(t,["id"]);s!=null&&h(n,["id"],s);const r=d(t,["args"]);r!=null&&h(n,["args"],r);const l=d(t,["name"]);if(l!=null&&h(n,["name"],l),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return n}function KE(t,e){const n={},s=d(t,["allowedFunctionNames"]);s!=null&&h(n,["allowedFunctionNames"],s);const r=d(t,["mode"]);if(r!=null&&h(n,["mode"],r),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return n}function QE(t,e){const n={},s=d(t,["description"]);s!=null&&h(n,["description"],s);const r=d(t,["name"]);r!=null&&h(n,["name"],r);const l=d(t,["parameters"]);l!=null&&h(n,["parameters"],l);const u=d(t,["parametersJsonSchema"]);u!=null&&h(n,["parametersJsonSchema"],u);const f=d(t,["response"]);f!=null&&h(n,["response"],f);const m=d(t,["responseJsonSchema"]);if(m!=null&&h(n,["responseJsonSchema"],m),d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return n}function XE(t,e,n,s){const r={},l=d(e,["systemInstruction"]);n!==void 0&&l!=null&&h(n,["systemInstruction"],ml(vt(l)));const u=d(e,["temperature"]);u!=null&&h(r,["temperature"],u);const f=d(e,["topP"]);f!=null&&h(r,["topP"],f);const m=d(e,["topK"]);m!=null&&h(r,["topK"],m);const p=d(e,["candidateCount"]);p!=null&&h(r,["candidateCount"],p);const y=d(e,["maxOutputTokens"]);y!=null&&h(r,["maxOutputTokens"],y);const b=d(e,["stopSequences"]);b!=null&&h(r,["stopSequences"],b);const x=d(e,["responseLogprobs"]);x!=null&&h(r,["responseLogprobs"],x);const w=d(e,["logprobs"]);w!=null&&h(r,["logprobs"],w);const E=d(e,["presencePenalty"]);E!=null&&h(r,["presencePenalty"],E);const A=d(e,["frequencyPenalty"]);A!=null&&h(r,["frequencyPenalty"],A);const C=d(e,["seed"]);C!=null&&h(r,["seed"],C);const I=d(e,["responseMimeType"]);I!=null&&h(r,["responseMimeType"],I);const O=d(e,["responseSchema"]);O!=null&&h(r,["responseSchema"],Kd(O));const D=d(e,["responseJsonSchema"]);if(D!=null&&h(r,["responseJsonSchema"],D),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const P=d(e,["safetySettings"]);if(n!==void 0&&P!=null){let ce=P;Array.isArray(ce)&&(ce=ce.map(Ae=>zA(Ae))),h(n,["safetySettings"],ce)}const N=d(e,["tools"]);if(n!==void 0&&N!=null){let ce=eo(N);Array.isArray(ce)&&(ce=ce.map(Ae=>YA(Zs(Ae)))),h(n,["tools"],ce)}const H=d(e,["toolConfig"]);if(n!==void 0&&H!=null&&h(n,["toolConfig"],JA(H)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const V=d(e,["cachedContent"]);n!==void 0&&V!=null&&h(n,["cachedContent"],Hn(t,V));const Z=d(e,["responseModalities"]);Z!=null&&h(r,["responseModalities"],Z);const Y=d(e,["mediaResolution"]);Y!=null&&h(r,["mediaResolution"],Y);const ee=d(e,["speechConfig"]);if(ee!=null&&h(r,["speechConfig"],Qd(ee)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const fe=d(e,["thinkingConfig"]);fe!=null&&h(r,["thinkingConfig"],fe);const he=d(e,["imageConfig"]);he!=null&&h(r,["imageConfig"],TA(he));const ae=d(e,["enableEnhancedCivicAnswers"]);if(ae!=null&&h(r,["enableEnhancedCivicAnswers"],ae),d(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return r}function WE(t,e,n,s){const r={},l=d(e,["systemInstruction"]);n!==void 0&&l!=null&&h(n,["systemInstruction"],vt(l));const u=d(e,["temperature"]);u!=null&&h(r,["temperature"],u);const f=d(e,["topP"]);f!=null&&h(r,["topP"],f);const m=d(e,["topK"]);m!=null&&h(r,["topK"],m);const p=d(e,["candidateCount"]);p!=null&&h(r,["candidateCount"],p);const y=d(e,["maxOutputTokens"]);y!=null&&h(r,["maxOutputTokens"],y);const b=d(e,["stopSequences"]);b!=null&&h(r,["stopSequences"],b);const x=d(e,["responseLogprobs"]);x!=null&&h(r,["responseLogprobs"],x);const w=d(e,["logprobs"]);w!=null&&h(r,["logprobs"],w);const E=d(e,["presencePenalty"]);E!=null&&h(r,["presencePenalty"],E);const A=d(e,["frequencyPenalty"]);A!=null&&h(r,["frequencyPenalty"],A);const C=d(e,["seed"]);C!=null&&h(r,["seed"],C);const I=d(e,["responseMimeType"]);I!=null&&h(r,["responseMimeType"],I);const O=d(e,["responseSchema"]);O!=null&&h(r,["responseSchema"],Kd(O));const D=d(e,["responseJsonSchema"]);D!=null&&h(r,["responseJsonSchema"],D);const P=d(e,["routingConfig"]);P!=null&&h(r,["routingConfig"],P);const N=d(e,["modelSelectionConfig"]);N!=null&&h(r,["modelConfig"],N);const H=d(e,["safetySettings"]);if(n!==void 0&&H!=null){let ne=H;Array.isArray(ne)&&(ne=ne.map(_e=>_e)),h(n,["safetySettings"],ne)}const V=d(e,["tools"]);if(n!==void 0&&V!=null){let ne=eo(V);Array.isArray(ne)&&(ne=ne.map(_e=>lv(Zs(_e)))),h(n,["tools"],ne)}const Z=d(e,["toolConfig"]);n!==void 0&&Z!=null&&h(n,["toolConfig"],Z);const Y=d(e,["labels"]);n!==void 0&&Y!=null&&h(n,["labels"],Y);const ee=d(e,["cachedContent"]);n!==void 0&&ee!=null&&h(n,["cachedContent"],Hn(t,ee));const fe=d(e,["responseModalities"]);fe!=null&&h(r,["responseModalities"],fe);const he=d(e,["mediaResolution"]);he!=null&&h(r,["mediaResolution"],he);const ae=d(e,["speechConfig"]);ae!=null&&h(r,["speechConfig"],Qd(ae));const ce=d(e,["audioTimestamp"]);ce!=null&&h(r,["audioTimestamp"],ce);const Ae=d(e,["thinkingConfig"]);Ae!=null&&h(r,["thinkingConfig"],Ae);const z=d(e,["imageConfig"]);if(z!=null&&h(r,["imageConfig"],EA(z)),d(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const K=d(e,["modelArmorConfig"]);return n!==void 0&&K!=null&&h(n,["modelArmorConfig"],K),r}function By(t,e,n){const s={},r=d(e,["model"]);r!=null&&h(s,["_url","model"],ke(t,r));const l=d(e,["contents"]);if(l!=null){let f=nn(l);Array.isArray(f)&&(f=f.map(m=>ml(m))),h(s,["contents"],f)}const u=d(e,["config"]);return u!=null&&h(s,["generationConfig"],XE(t,u,s)),s}function Gy(t,e,n){const s={},r=d(e,["model"]);r!=null&&h(s,["_url","model"],ke(t,r));const l=d(e,["contents"]);if(l!=null){let f=nn(l);Array.isArray(f)&&(f=f.map(m=>m)),h(s,["contents"],f)}const u=d(e,["config"]);return u!=null&&h(s,["generationConfig"],WE(t,u,s)),s}function zy(t,e){const n={},s=d(t,["sdkHttpResponse"]);s!=null&&h(n,["sdkHttpResponse"],s);const r=d(t,["candidates"]);if(r!=null){let p=r;Array.isArray(p)&&(p=p.map(y=>bE(y))),h(n,["candidates"],p)}const l=d(t,["modelVersion"]);l!=null&&h(n,["modelVersion"],l);const u=d(t,["promptFeedback"]);u!=null&&h(n,["promptFeedback"],u);const f=d(t,["responseId"]);f!=null&&h(n,["responseId"],f);const m=d(t,["usageMetadata"]);return m!=null&&h(n,["usageMetadata"],m),n}function Hy(t,e){const n={},s=d(t,["sdkHttpResponse"]);s!=null&&h(n,["sdkHttpResponse"],s);const r=d(t,["candidates"]);if(r!=null){let y=r;Array.isArray(y)&&(y=y.map(b=>b)),h(n,["candidates"],y)}const l=d(t,["createTime"]);l!=null&&h(n,["createTime"],l);const u=d(t,["modelVersion"]);u!=null&&h(n,["modelVersion"],u);const f=d(t,["promptFeedback"]);f!=null&&h(n,["promptFeedback"],f);const m=d(t,["responseId"]);m!=null&&h(n,["responseId"],m);const p=d(t,["usageMetadata"]);return p!=null&&h(n,["usageMetadata"],p),n}function ZE(t,e,n){const s={};if(d(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=d(t,["numberOfImages"]);e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r);const l=d(t,["aspectRatio"]);e!==void 0&&l!=null&&h(e,["parameters","aspectRatio"],l);const u=d(t,["guidanceScale"]);if(e!==void 0&&u!=null&&h(e,["parameters","guidanceScale"],u),d(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const f=d(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&h(e,["parameters","safetySetting"],f);const m=d(t,["personGeneration"]);e!==void 0&&m!=null&&h(e,["parameters","personGeneration"],m);const p=d(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&h(e,["parameters","includeSafetyAttributes"],p);const y=d(t,["includeRaiReason"]);e!==void 0&&y!=null&&h(e,["parameters","includeRaiReason"],y);const b=d(t,["language"]);e!==void 0&&b!=null&&h(e,["parameters","language"],b);const x=d(t,["outputMimeType"]);e!==void 0&&x!=null&&h(e,["parameters","outputOptions","mimeType"],x);const w=d(t,["outputCompressionQuality"]);if(e!==void 0&&w!=null&&h(e,["parameters","outputOptions","compressionQuality"],w),d(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(d(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const E=d(t,["imageSize"]);if(e!==void 0&&E!=null&&h(e,["parameters","sampleImageSize"],E),d(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return s}function eA(t,e,n){const s={},r=d(t,["outputGcsUri"]);e!==void 0&&r!=null&&h(e,["parameters","storageUri"],r);const l=d(t,["negativePrompt"]);e!==void 0&&l!=null&&h(e,["parameters","negativePrompt"],l);const u=d(t,["numberOfImages"]);e!==void 0&&u!=null&&h(e,["parameters","sampleCount"],u);const f=d(t,["aspectRatio"]);e!==void 0&&f!=null&&h(e,["parameters","aspectRatio"],f);const m=d(t,["guidanceScale"]);e!==void 0&&m!=null&&h(e,["parameters","guidanceScale"],m);const p=d(t,["seed"]);e!==void 0&&p!=null&&h(e,["parameters","seed"],p);const y=d(t,["safetyFilterLevel"]);e!==void 0&&y!=null&&h(e,["parameters","safetySetting"],y);const b=d(t,["personGeneration"]);e!==void 0&&b!=null&&h(e,["parameters","personGeneration"],b);const x=d(t,["includeSafetyAttributes"]);e!==void 0&&x!=null&&h(e,["parameters","includeSafetyAttributes"],x);const w=d(t,["includeRaiReason"]);e!==void 0&&w!=null&&h(e,["parameters","includeRaiReason"],w);const E=d(t,["language"]);e!==void 0&&E!=null&&h(e,["parameters","language"],E);const A=d(t,["outputMimeType"]);e!==void 0&&A!=null&&h(e,["parameters","outputOptions","mimeType"],A);const C=d(t,["outputCompressionQuality"]);e!==void 0&&C!=null&&h(e,["parameters","outputOptions","compressionQuality"],C);const I=d(t,["addWatermark"]);e!==void 0&&I!=null&&h(e,["parameters","addWatermark"],I);const O=d(t,["labels"]);e!==void 0&&O!=null&&h(e,["labels"],O);const D=d(t,["imageSize"]);e!==void 0&&D!=null&&h(e,["parameters","sampleImageSize"],D);const P=d(t,["enhancePrompt"]);return e!==void 0&&P!=null&&h(e,["parameters","enhancePrompt"],P),s}function tA(t,e,n){const s={},r=d(e,["model"]);r!=null&&h(s,["_url","model"],ke(t,r));const l=d(e,["prompt"]);l!=null&&h(s,["instances[0]","prompt"],l);const u=d(e,["config"]);return u!=null&&ZE(u,s),s}function nA(t,e,n){const s={},r=d(e,["model"]);r!=null&&h(s,["_url","model"],ke(t,r));const l=d(e,["prompt"]);l!=null&&h(s,["instances[0]","prompt"],l);const u=d(e,["config"]);return u!=null&&eA(u,s),s}function iA(t,e){const n={},s=d(t,["sdkHttpResponse"]);s!=null&&h(n,["sdkHttpResponse"],s);const r=d(t,["predictions"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>mA(f))),h(n,["generatedImages"],u)}const l=d(t,["positivePromptSafetyAttributes"]);return l!=null&&h(n,["positivePromptSafetyAttributes"],rv(l)),n}function sA(t,e){const n={},s=d(t,["sdkHttpResponse"]);s!=null&&h(n,["sdkHttpResponse"],s);const r=d(t,["predictions"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>gl(f))),h(n,["generatedImages"],u)}const l=d(t,["positivePromptSafetyAttributes"]);return l!=null&&h(n,["positivePromptSafetyAttributes"],av(l)),n}function oA(t,e,n){const s={},r=d(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r),d(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const l=d(t,["durationSeconds"]);if(e!==void 0&&l!=null&&h(e,["parameters","durationSeconds"],l),d(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=d(t,["aspectRatio"]);e!==void 0&&u!=null&&h(e,["parameters","aspectRatio"],u);const f=d(t,["resolution"]);e!==void 0&&f!=null&&h(e,["parameters","resolution"],f);const m=d(t,["personGeneration"]);if(e!==void 0&&m!=null&&h(e,["parameters","personGeneration"],m),d(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=d(t,["negativePrompt"]);e!==void 0&&p!=null&&h(e,["parameters","negativePrompt"],p);const y=d(t,["enhancePrompt"]);if(e!==void 0&&y!=null&&h(e,["parameters","enhancePrompt"],y),d(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const b=d(t,["lastFrame"]);e!==void 0&&b!=null&&h(e,["instances[0]","lastFrame"],yl(b));const x=d(t,["referenceImages"]);if(e!==void 0&&x!=null){let w=x;Array.isArray(w)&&(w=w.map(E=>aC(E))),h(e,["instances[0]","referenceImages"],w)}if(d(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(d(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return s}function rA(t,e,n){const s={},r=d(t,["numberOfVideos"]);e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r);const l=d(t,["outputGcsUri"]);e!==void 0&&l!=null&&h(e,["parameters","storageUri"],l);const u=d(t,["fps"]);e!==void 0&&u!=null&&h(e,["parameters","fps"],u);const f=d(t,["durationSeconds"]);e!==void 0&&f!=null&&h(e,["parameters","durationSeconds"],f);const m=d(t,["seed"]);e!==void 0&&m!=null&&h(e,["parameters","seed"],m);const p=d(t,["aspectRatio"]);e!==void 0&&p!=null&&h(e,["parameters","aspectRatio"],p);const y=d(t,["resolution"]);e!==void 0&&y!=null&&h(e,["parameters","resolution"],y);const b=d(t,["personGeneration"]);e!==void 0&&b!=null&&h(e,["parameters","personGeneration"],b);const x=d(t,["pubsubTopic"]);e!==void 0&&x!=null&&h(e,["parameters","pubsubTopic"],x);const w=d(t,["negativePrompt"]);e!==void 0&&w!=null&&h(e,["parameters","negativePrompt"],w);const E=d(t,["enhancePrompt"]);e!==void 0&&E!=null&&h(e,["parameters","enhancePrompt"],E);const A=d(t,["generateAudio"]);e!==void 0&&A!=null&&h(e,["parameters","generateAudio"],A);const C=d(t,["lastFrame"]);e!==void 0&&C!=null&&h(e,["instances[0]","lastFrame"],hn(C));const I=d(t,["referenceImages"]);if(e!==void 0&&I!=null){let P=I;Array.isArray(P)&&(P=P.map(N=>lC(N))),h(e,["instances[0]","referenceImages"],P)}const O=d(t,["mask"]);e!==void 0&&O!=null&&h(e,["instances[0]","mask"],rC(O));const D=d(t,["compressionQuality"]);return e!==void 0&&D!=null&&h(e,["parameters","compressionQuality"],D),s}function aA(t,e){const n={},s=d(t,["name"]);s!=null&&h(n,["name"],s);const r=d(t,["metadata"]);r!=null&&h(n,["metadata"],r);const l=d(t,["done"]);l!=null&&h(n,["done"],l);const u=d(t,["error"]);u!=null&&h(n,["error"],u);const f=d(t,["response","generateVideoResponse"]);return f!=null&&h(n,["response"],dA(f)),n}function lA(t,e){const n={},s=d(t,["name"]);s!=null&&h(n,["name"],s);const r=d(t,["metadata"]);r!=null&&h(n,["metadata"],r);const l=d(t,["done"]);l!=null&&h(n,["done"],l);const u=d(t,["error"]);u!=null&&h(n,["error"],u);const f=d(t,["response"]);return f!=null&&h(n,["response"],fA(f)),n}function uA(t,e,n){const s={},r=d(e,["model"]);r!=null&&h(s,["_url","model"],ke(t,r));const l=d(e,["prompt"]);l!=null&&h(s,["instances[0]","prompt"],l);const u=d(e,["image"]);u!=null&&h(s,["instances[0]","image"],yl(u));const f=d(e,["video"]);f!=null&&h(s,["instances[0]","video"],uv(f));const m=d(e,["source"]);m!=null&&hA(m,s);const p=d(e,["config"]);return p!=null&&oA(p,s),s}function cA(t,e,n){const s={},r=d(e,["model"]);r!=null&&h(s,["_url","model"],ke(t,r));const l=d(e,["prompt"]);l!=null&&h(s,["instances[0]","prompt"],l);const u=d(e,["image"]);u!=null&&h(s,["instances[0]","image"],hn(u));const f=d(e,["video"]);f!=null&&h(s,["instances[0]","video"],cv(f));const m=d(e,["source"]);m!=null&&pA(m,s);const p=d(e,["config"]);return p!=null&&rA(p,s),s}function dA(t,e){const n={},s=d(t,["generatedSamples"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(f=>yA(f))),h(n,["generatedVideos"],u)}const r=d(t,["raiMediaFilteredCount"]);r!=null&&h(n,["raiMediaFilteredCount"],r);const l=d(t,["raiMediaFilteredReasons"]);return l!=null&&h(n,["raiMediaFilteredReasons"],l),n}function fA(t,e){const n={},s=d(t,["videos"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(f=>vA(f))),h(n,["generatedVideos"],u)}const r=d(t,["raiMediaFilteredCount"]);r!=null&&h(n,["raiMediaFilteredCount"],r);const l=d(t,["raiMediaFilteredReasons"]);return l!=null&&h(n,["raiMediaFilteredReasons"],l),n}function hA(t,e,n){const s={},r=d(t,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const l=d(t,["image"]);e!==void 0&&l!=null&&h(e,["instances[0]","image"],yl(l));const u=d(t,["video"]);return e!==void 0&&u!=null&&h(e,["instances[0]","video"],uv(u)),s}function pA(t,e,n){const s={},r=d(t,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const l=d(t,["image"]);e!==void 0&&l!=null&&h(e,["instances[0]","image"],hn(l));const u=d(t,["video"]);return e!==void 0&&u!=null&&h(e,["instances[0]","video"],cv(u)),s}function mA(t,e){const n={},s=d(t,["_self"]);s!=null&&h(n,["image"],AA(s));const r=d(t,["raiFilteredReason"]);r!=null&&h(n,["raiFilteredReason"],r);const l=d(t,["_self"]);return l!=null&&h(n,["safetyAttributes"],rv(l)),n}function gl(t,e){const n={},s=d(t,["_self"]);s!=null&&h(n,["image"],ov(s));const r=d(t,["raiFilteredReason"]);r!=null&&h(n,["raiFilteredReason"],r);const l=d(t,["_self"]);l!=null&&h(n,["safetyAttributes"],av(l));const u=d(t,["prompt"]);return u!=null&&h(n,["enhancedPrompt"],u),n}function gA(t,e){const n={},s=d(t,["_self"]);s!=null&&h(n,["mask"],ov(s));const r=d(t,["labels"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),h(n,["labels"],l)}return n}function yA(t,e){const n={},s=d(t,["video"]);return s!=null&&h(n,["video"],sC(s)),n}function vA(t,e){const n={},s=d(t,["_self"]);return s!=null&&h(n,["video"],oC(s)),n}function _A(t,e){const n={},s=d(t,["modelSelectionConfig"]);s!=null&&h(n,["modelConfig"],s);const r=d(t,["responseJsonSchema"]);r!=null&&h(n,["responseJsonSchema"],r);const l=d(t,["audioTimestamp"]);l!=null&&h(n,["audioTimestamp"],l);const u=d(t,["candidateCount"]);u!=null&&h(n,["candidateCount"],u);const f=d(t,["enableAffectiveDialog"]);f!=null&&h(n,["enableAffectiveDialog"],f);const m=d(t,["frequencyPenalty"]);m!=null&&h(n,["frequencyPenalty"],m);const p=d(t,["logprobs"]);p!=null&&h(n,["logprobs"],p);const y=d(t,["maxOutputTokens"]);y!=null&&h(n,["maxOutputTokens"],y);const b=d(t,["mediaResolution"]);b!=null&&h(n,["mediaResolution"],b);const x=d(t,["presencePenalty"]);x!=null&&h(n,["presencePenalty"],x);const w=d(t,["responseLogprobs"]);w!=null&&h(n,["responseLogprobs"],w);const E=d(t,["responseMimeType"]);E!=null&&h(n,["responseMimeType"],E);const A=d(t,["responseModalities"]);A!=null&&h(n,["responseModalities"],A);const C=d(t,["responseSchema"]);C!=null&&h(n,["responseSchema"],C);const I=d(t,["routingConfig"]);I!=null&&h(n,["routingConfig"],I);const O=d(t,["seed"]);O!=null&&h(n,["seed"],O);const D=d(t,["speechConfig"]);D!=null&&h(n,["speechConfig"],D);const P=d(t,["stopSequences"]);P!=null&&h(n,["stopSequences"],P);const N=d(t,["temperature"]);N!=null&&h(n,["temperature"],N);const H=d(t,["thinkingConfig"]);H!=null&&h(n,["thinkingConfig"],H);const V=d(t,["topK"]);V!=null&&h(n,["topK"],V);const Z=d(t,["topP"]);if(Z!=null&&h(n,["topP"],Z),d(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return n}function bA(t,e,n){const s={},r=d(e,["model"]);return r!=null&&h(s,["_url","name"],ke(t,r)),s}function xA(t,e,n){const s={},r=d(e,["model"]);return r!=null&&h(s,["_url","name"],ke(t,r)),s}function SA(t,e){const n={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const s=d(t,["enableWidget"]);return s!=null&&h(n,["enableWidget"],s),n}function wA(t,e){const n={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const s=d(t,["timeRangeFilter"]);return s!=null&&h(n,["timeRangeFilter"],s),n}function TA(t,e){const n={},s=d(t,["aspectRatio"]);s!=null&&h(n,["aspectRatio"],s);const r=d(t,["imageSize"]);if(r!=null&&h(n,["imageSize"],r),d(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(d(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return n}function EA(t,e){const n={},s=d(t,["aspectRatio"]);s!=null&&h(n,["aspectRatio"],s);const r=d(t,["imageSize"]);r!=null&&h(n,["imageSize"],r);const l=d(t,["personGeneration"]);l!=null&&h(n,["personGeneration"],l);const u=d(t,["outputMimeType"]);u!=null&&h(n,["imageOutputOptions","mimeType"],u);const f=d(t,["outputCompressionQuality"]);return f!=null&&h(n,["imageOutputOptions","compressionQuality"],f),n}function AA(t,e){const n={},s=d(t,["bytesBase64Encoded"]);s!=null&&h(n,["imageBytes"],yi(s));const r=d(t,["mimeType"]);return r!=null&&h(n,["mimeType"],r),n}function ov(t,e){const n={},s=d(t,["gcsUri"]);s!=null&&h(n,["gcsUri"],s);const r=d(t,["bytesBase64Encoded"]);r!=null&&h(n,["imageBytes"],yi(r));const l=d(t,["mimeType"]);return l!=null&&h(n,["mimeType"],l),n}function yl(t,e){const n={};if(d(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const s=d(t,["imageBytes"]);s!=null&&h(n,["bytesBase64Encoded"],yi(s));const r=d(t,["mimeType"]);return r!=null&&h(n,["mimeType"],r),n}function hn(t,e){const n={},s=d(t,["gcsUri"]);s!=null&&h(n,["gcsUri"],s);const r=d(t,["imageBytes"]);r!=null&&h(n,["bytesBase64Encoded"],yi(r));const l=d(t,["mimeType"]);return l!=null&&h(n,["mimeType"],l),n}function CA(t,e,n,s){const r={},l=d(e,["pageSize"]);n!==void 0&&l!=null&&h(n,["_query","pageSize"],l);const u=d(e,["pageToken"]);n!==void 0&&u!=null&&h(n,["_query","pageToken"],u);const f=d(e,["filter"]);n!==void 0&&f!=null&&h(n,["_query","filter"],f);const m=d(e,["queryBase"]);return n!==void 0&&m!=null&&h(n,["_url","models_url"],W0(t,m)),r}function NA(t,e,n,s){const r={},l=d(e,["pageSize"]);n!==void 0&&l!=null&&h(n,["_query","pageSize"],l);const u=d(e,["pageToken"]);n!==void 0&&u!=null&&h(n,["_query","pageToken"],u);const f=d(e,["filter"]);n!==void 0&&f!=null&&h(n,["_query","filter"],f);const m=d(e,["queryBase"]);return n!==void 0&&m!=null&&h(n,["_url","models_url"],W0(t,m)),r}function RA(t,e,n){const s={},r=d(e,["config"]);return r!=null&&CA(t,r,s),s}function kA(t,e,n){const s={},r=d(e,["config"]);return r!=null&&NA(t,r,s),s}function IA(t,e){const n={},s=d(t,["sdkHttpResponse"]);s!=null&&h(n,["sdkHttpResponse"],s);const r=d(t,["nextPageToken"]);r!=null&&h(n,["nextPageToken"],r);const l=d(t,["_self"]);if(l!=null){let u=Z0(l);Array.isArray(u)&&(u=u.map(f=>yd(f))),h(n,["models"],u)}return n}function MA(t,e){const n={},s=d(t,["sdkHttpResponse"]);s!=null&&h(n,["sdkHttpResponse"],s);const r=d(t,["nextPageToken"]);r!=null&&h(n,["nextPageToken"],r);const l=d(t,["_self"]);if(l!=null){let u=Z0(l);Array.isArray(u)&&(u=u.map(f=>vd(f))),h(n,["models"],u)}return n}function DA(t,e){const n={},s=d(t,["maskMode"]);s!=null&&h(n,["maskMode"],s);const r=d(t,["segmentationClasses"]);r!=null&&h(n,["maskClasses"],r);const l=d(t,["maskDilation"]);return l!=null&&h(n,["dilation"],l),n}function yd(t,e){const n={},s=d(t,["name"]);s!=null&&h(n,["name"],s);const r=d(t,["displayName"]);r!=null&&h(n,["displayName"],r);const l=d(t,["description"]);l!=null&&h(n,["description"],l);const u=d(t,["version"]);u!=null&&h(n,["version"],u);const f=d(t,["_self"]);f!=null&&h(n,["tunedModelInfo"],KA(f));const m=d(t,["inputTokenLimit"]);m!=null&&h(n,["inputTokenLimit"],m);const p=d(t,["outputTokenLimit"]);p!=null&&h(n,["outputTokenLimit"],p);const y=d(t,["supportedGenerationMethods"]);y!=null&&h(n,["supportedActions"],y);const b=d(t,["temperature"]);b!=null&&h(n,["temperature"],b);const x=d(t,["maxTemperature"]);x!=null&&h(n,["maxTemperature"],x);const w=d(t,["topP"]);w!=null&&h(n,["topP"],w);const E=d(t,["topK"]);E!=null&&h(n,["topK"],E);const A=d(t,["thinking"]);return A!=null&&h(n,["thinking"],A),n}function vd(t,e){const n={},s=d(t,["name"]);s!=null&&h(n,["name"],s);const r=d(t,["displayName"]);r!=null&&h(n,["displayName"],r);const l=d(t,["description"]);l!=null&&h(n,["description"],l);const u=d(t,["versionId"]);u!=null&&h(n,["version"],u);const f=d(t,["deployedModels"]);if(f!=null){let x=f;Array.isArray(x)&&(x=x.map(w=>FE(w))),h(n,["endpoints"],x)}const m=d(t,["labels"]);m!=null&&h(n,["labels"],m);const p=d(t,["_self"]);p!=null&&h(n,["tunedModelInfo"],QA(p));const y=d(t,["defaultCheckpointId"]);y!=null&&h(n,["defaultCheckpointId"],y);const b=d(t,["checkpoints"]);if(b!=null){let x=b;Array.isArray(x)&&(x=x.map(w=>w)),h(n,["checkpoints"],x)}return n}function UA(t,e){const n={},s=d(t,["mediaResolution"]);s!=null&&h(n,["mediaResolution"],s);const r=d(t,["codeExecutionResult"]);r!=null&&h(n,["codeExecutionResult"],r);const l=d(t,["executableCode"]);l!=null&&h(n,["executableCode"],l);const u=d(t,["fileData"]);u!=null&&h(n,["fileData"],JE(u));const f=d(t,["functionCall"]);f!=null&&h(n,["functionCall"],YE(f));const m=d(t,["functionResponse"]);m!=null&&h(n,["functionResponse"],m);const p=d(t,["inlineData"]);p!=null&&h(n,["inlineData"],_E(p));const y=d(t,["text"]);y!=null&&h(n,["text"],y);const b=d(t,["thought"]);b!=null&&h(n,["thought"],b);const x=d(t,["thoughtSignature"]);x!=null&&h(n,["thoughtSignature"],x);const w=d(t,["videoMetadata"]);return w!=null&&h(n,["videoMetadata"],w),n}function PA(t,e){const n={},s=d(t,["productImage"]);return s!=null&&h(n,["image"],hn(s)),n}function OA(t,e,n){const s={},r=d(t,["numberOfImages"]);e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r);const l=d(t,["baseSteps"]);e!==void 0&&l!=null&&h(e,["parameters","baseSteps"],l);const u=d(t,["outputGcsUri"]);e!==void 0&&u!=null&&h(e,["parameters","storageUri"],u);const f=d(t,["seed"]);e!==void 0&&f!=null&&h(e,["parameters","seed"],f);const m=d(t,["safetyFilterLevel"]);e!==void 0&&m!=null&&h(e,["parameters","safetySetting"],m);const p=d(t,["personGeneration"]);e!==void 0&&p!=null&&h(e,["parameters","personGeneration"],p);const y=d(t,["addWatermark"]);e!==void 0&&y!=null&&h(e,["parameters","addWatermark"],y);const b=d(t,["outputMimeType"]);e!==void 0&&b!=null&&h(e,["parameters","outputOptions","mimeType"],b);const x=d(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&h(e,["parameters","outputOptions","compressionQuality"],x);const w=d(t,["enhancePrompt"]);e!==void 0&&w!=null&&h(e,["parameters","enhancePrompt"],w);const E=d(t,["labels"]);return e!==void 0&&E!=null&&h(e,["labels"],E),s}function LA(t,e,n){const s={},r=d(e,["model"]);r!=null&&h(s,["_url","model"],ke(t,r));const l=d(e,["source"]);l!=null&&BA(l,s);const u=d(e,["config"]);return u!=null&&OA(u,s),s}function qA(t,e){const n={},s=d(t,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>gl(l))),h(n,["generatedImages"],r)}return n}function BA(t,e,n){const s={},r=d(t,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const l=d(t,["personImage"]);e!==void 0&&l!=null&&h(e,["instances[0]","personImage","image"],hn(l));const u=d(t,["productImages"]);if(e!==void 0&&u!=null){let f=u;Array.isArray(f)&&(f=f.map(m=>PA(m))),h(e,["instances[0]","productImages"],f)}return s}function GA(t,e){const n={},s=d(t,["referenceImage"]);s!=null&&h(n,["referenceImage"],hn(s));const r=d(t,["referenceId"]);r!=null&&h(n,["referenceId"],r);const l=d(t,["referenceType"]);l!=null&&h(n,["referenceType"],l);const u=d(t,["maskImageConfig"]);u!=null&&h(n,["maskImageConfig"],DA(u));const f=d(t,["controlImageConfig"]);f!=null&&h(n,["controlImageConfig"],AE(f));const m=d(t,["styleImageConfig"]);m!=null&&h(n,["styleImageConfig"],m);const p=d(t,["subjectImageConfig"]);return p!=null&&h(n,["subjectImageConfig"],p),n}function rv(t,e){const n={},s=d(t,["safetyAttributes","categories"]);s!=null&&h(n,["categories"],s);const r=d(t,["safetyAttributes","scores"]);r!=null&&h(n,["scores"],r);const l=d(t,["contentType"]);return l!=null&&h(n,["contentType"],l),n}function av(t,e){const n={},s=d(t,["safetyAttributes","categories"]);s!=null&&h(n,["categories"],s);const r=d(t,["safetyAttributes","scores"]);r!=null&&h(n,["scores"],r);const l=d(t,["contentType"]);return l!=null&&h(n,["contentType"],l),n}function zA(t,e){const n={},s=d(t,["category"]);if(s!=null&&h(n,["category"],s),d(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=d(t,["threshold"]);return r!=null&&h(n,["threshold"],r),n}function HA(t,e){const n={},s=d(t,["image"]);return s!=null&&h(n,["image"],hn(s)),n}function VA(t,e,n){const s={},r=d(t,["mode"]);e!==void 0&&r!=null&&h(e,["parameters","mode"],r);const l=d(t,["maxPredictions"]);e!==void 0&&l!=null&&h(e,["parameters","maxPredictions"],l);const u=d(t,["confidenceThreshold"]);e!==void 0&&u!=null&&h(e,["parameters","confidenceThreshold"],u);const f=d(t,["maskDilation"]);e!==void 0&&f!=null&&h(e,["parameters","maskDilation"],f);const m=d(t,["binaryColorThreshold"]);e!==void 0&&m!=null&&h(e,["parameters","binaryColorThreshold"],m);const p=d(t,["labels"]);return e!==void 0&&p!=null&&h(e,["labels"],p),s}function jA(t,e,n){const s={},r=d(e,["model"]);r!=null&&h(s,["_url","model"],ke(t,r));const l=d(e,["source"]);l!=null&&FA(l,s);const u=d(e,["config"]);return u!=null&&VA(u,s),s}function $A(t,e){const n={},s=d(t,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>gA(l))),h(n,["generatedMasks"],r)}return n}function FA(t,e,n){const s={},r=d(t,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const l=d(t,["image"]);e!==void 0&&l!=null&&h(e,["instances[0]","image"],hn(l));const u=d(t,["scribbleImage"]);return e!==void 0&&u!=null&&h(e,["instances[0]","scribble"],HA(u)),s}function JA(t,e){const n={},s=d(t,["retrievalConfig"]);s!=null&&h(n,["retrievalConfig"],s);const r=d(t,["functionCallingConfig"]);return r!=null&&h(n,["functionCallingConfig"],KE(r)),n}function YA(t,e){const n={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(t,["computerUse"]);s!=null&&h(n,["computerUse"],s);const r=d(t,["fileSearch"]);r!=null&&h(n,["fileSearch"],r);const l=d(t,["codeExecution"]);if(l!=null&&h(n,["codeExecution"],l),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=d(t,["functionDeclarations"]);if(u!=null){let b=u;Array.isArray(b)&&(b=b.map(x=>x)),h(n,["functionDeclarations"],b)}const f=d(t,["googleMaps"]);f!=null&&h(n,["googleMaps"],SA(f));const m=d(t,["googleSearch"]);m!=null&&h(n,["googleSearch"],wA(m));const p=d(t,["googleSearchRetrieval"]);p!=null&&h(n,["googleSearchRetrieval"],p);const y=d(t,["urlContext"]);return y!=null&&h(n,["urlContext"],y),n}function lv(t,e){const n={},s=d(t,["retrieval"]);s!=null&&h(n,["retrieval"],s);const r=d(t,["computerUse"]);if(r!=null&&h(n,["computerUse"],r),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=d(t,["codeExecution"]);l!=null&&h(n,["codeExecution"],l);const u=d(t,["enterpriseWebSearch"]);u!=null&&h(n,["enterpriseWebSearch"],u);const f=d(t,["functionDeclarations"]);if(f!=null){let x=f;Array.isArray(x)&&(x=x.map(w=>QE(w))),h(n,["functionDeclarations"],x)}const m=d(t,["googleMaps"]);m!=null&&h(n,["googleMaps"],m);const p=d(t,["googleSearch"]);p!=null&&h(n,["googleSearch"],p);const y=d(t,["googleSearchRetrieval"]);y!=null&&h(n,["googleSearchRetrieval"],y);const b=d(t,["urlContext"]);return b!=null&&h(n,["urlContext"],b),n}function KA(t,e){const n={},s=d(t,["baseModel"]);s!=null&&h(n,["baseModel"],s);const r=d(t,["createTime"]);r!=null&&h(n,["createTime"],r);const l=d(t,["updateTime"]);return l!=null&&h(n,["updateTime"],l),n}function QA(t,e){const n={},s=d(t,["labels","google-vertex-llm-tuning-base-model-id"]);s!=null&&h(n,["baseModel"],s);const r=d(t,["createTime"]);r!=null&&h(n,["createTime"],r);const l=d(t,["updateTime"]);return l!=null&&h(n,["updateTime"],l),n}function XA(t,e,n){const s={},r=d(t,["displayName"]);e!==void 0&&r!=null&&h(e,["displayName"],r);const l=d(t,["description"]);e!==void 0&&l!=null&&h(e,["description"],l);const u=d(t,["defaultCheckpointId"]);return e!==void 0&&u!=null&&h(e,["defaultCheckpointId"],u),s}function WA(t,e,n){const s={},r=d(t,["displayName"]);e!==void 0&&r!=null&&h(e,["displayName"],r);const l=d(t,["description"]);e!==void 0&&l!=null&&h(e,["description"],l);const u=d(t,["defaultCheckpointId"]);return e!==void 0&&u!=null&&h(e,["defaultCheckpointId"],u),s}function ZA(t,e,n){const s={},r=d(e,["model"]);r!=null&&h(s,["_url","name"],ke(t,r));const l=d(e,["config"]);return l!=null&&XA(l,s),s}function eC(t,e,n){const s={},r=d(e,["model"]);r!=null&&h(s,["_url","model"],ke(t,r));const l=d(e,["config"]);return l!=null&&WA(l,s),s}function tC(t,e,n){const s={},r=d(t,["outputGcsUri"]);e!==void 0&&r!=null&&h(e,["parameters","storageUri"],r);const l=d(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&h(e,["parameters","safetySetting"],l);const u=d(t,["personGeneration"]);e!==void 0&&u!=null&&h(e,["parameters","personGeneration"],u);const f=d(t,["includeRaiReason"]);e!==void 0&&f!=null&&h(e,["parameters","includeRaiReason"],f);const m=d(t,["outputMimeType"]);e!==void 0&&m!=null&&h(e,["parameters","outputOptions","mimeType"],m);const p=d(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&h(e,["parameters","outputOptions","compressionQuality"],p);const y=d(t,["enhanceInputImage"]);e!==void 0&&y!=null&&h(e,["parameters","upscaleConfig","enhanceInputImage"],y);const b=d(t,["imagePreservationFactor"]);e!==void 0&&b!=null&&h(e,["parameters","upscaleConfig","imagePreservationFactor"],b);const x=d(t,["labels"]);e!==void 0&&x!=null&&h(e,["labels"],x);const w=d(t,["numberOfImages"]);e!==void 0&&w!=null&&h(e,["parameters","sampleCount"],w);const E=d(t,["mode"]);return e!==void 0&&E!=null&&h(e,["parameters","mode"],E),s}function nC(t,e,n){const s={},r=d(e,["model"]);r!=null&&h(s,["_url","model"],ke(t,r));const l=d(e,["image"]);l!=null&&h(s,["instances[0]","image"],hn(l));const u=d(e,["upscaleFactor"]);u!=null&&h(s,["parameters","upscaleConfig","upscaleFactor"],u);const f=d(e,["config"]);return f!=null&&tC(f,s),s}function iC(t,e){const n={},s=d(t,["sdkHttpResponse"]);s!=null&&h(n,["sdkHttpResponse"],s);const r=d(t,["predictions"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>gl(u))),h(n,["generatedImages"],l)}return n}function sC(t,e){const n={},s=d(t,["uri"]);s!=null&&h(n,["uri"],s);const r=d(t,["encodedVideo"]);r!=null&&h(n,["videoBytes"],yi(r));const l=d(t,["encoding"]);return l!=null&&h(n,["mimeType"],l),n}function oC(t,e){const n={},s=d(t,["gcsUri"]);s!=null&&h(n,["uri"],s);const r=d(t,["bytesBase64Encoded"]);r!=null&&h(n,["videoBytes"],yi(r));const l=d(t,["mimeType"]);return l!=null&&h(n,["mimeType"],l),n}function rC(t,e){const n={},s=d(t,["image"]);s!=null&&h(n,["_self"],hn(s));const r=d(t,["maskMode"]);return r!=null&&h(n,["maskMode"],r),n}function aC(t,e){const n={},s=d(t,["image"]);s!=null&&h(n,["image"],yl(s));const r=d(t,["referenceType"]);return r!=null&&h(n,["referenceType"],r),n}function lC(t,e){const n={},s=d(t,["image"]);s!=null&&h(n,["image"],hn(s));const r=d(t,["referenceType"]);return r!=null&&h(n,["referenceType"],r),n}function uv(t,e){const n={},s=d(t,["uri"]);s!=null&&h(n,["uri"],s);const r=d(t,["videoBytes"]);r!=null&&h(n,["encodedVideo"],yi(r));const l=d(t,["mimeType"]);return l!=null&&h(n,["encoding"],l),n}function cv(t,e){const n={},s=d(t,["uri"]);s!=null&&h(n,["gcsUri"],s);const r=d(t,["videoBytes"]);r!=null&&h(n,["bytesBase64Encoded"],yi(r));const l=d(t,["mimeType"]);return l!=null&&h(n,["mimeType"],l),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uC(t,e){const n={},s=d(t,["displayName"]);return e!==void 0&&s!=null&&h(e,["displayName"],s),n}function cC(t){const e={},n=d(t,["config"]);return n!=null&&uC(n,e),e}function dC(t,e){const n={},s=d(t,["force"]);return e!==void 0&&s!=null&&h(e,["_query","force"],s),n}function fC(t){const e={},n=d(t,["name"]);n!=null&&h(e,["_url","name"],n);const s=d(t,["config"]);return s!=null&&dC(s,e),e}function hC(t){const e={},n=d(t,["name"]);return n!=null&&h(e,["_url","name"],n),e}function pC(t,e){const n={},s=d(t,["customMetadata"]);if(e!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["customMetadata"],l)}const r=d(t,["chunkingConfig"]);return e!==void 0&&r!=null&&h(e,["chunkingConfig"],r),n}function mC(t){const e={},n=d(t,["name"]);n!=null&&h(e,["name"],n);const s=d(t,["metadata"]);s!=null&&h(e,["metadata"],s);const r=d(t,["done"]);r!=null&&h(e,["done"],r);const l=d(t,["error"]);l!=null&&h(e,["error"],l);const u=d(t,["response"]);return u!=null&&h(e,["response"],yC(u)),e}function gC(t){const e={},n=d(t,["fileSearchStoreName"]);n!=null&&h(e,["_url","file_search_store_name"],n);const s=d(t,["fileName"]);s!=null&&h(e,["fileName"],s);const r=d(t,["config"]);return r!=null&&pC(r,e),e}function yC(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=d(t,["parent"]);s!=null&&h(e,["parent"],s);const r=d(t,["documentName"]);return r!=null&&h(e,["documentName"],r),e}function vC(t,e){const n={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=d(t,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),n}function _C(t){const e={},n=d(t,["config"]);return n!=null&&vC(n,e),e}function bC(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=d(t,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=d(t,["fileSearchStores"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["fileSearchStores"],l)}return e}function dv(t,e){const n={},s=d(t,["mimeType"]);e!==void 0&&s!=null&&h(e,["mimeType"],s);const r=d(t,["displayName"]);e!==void 0&&r!=null&&h(e,["displayName"],r);const l=d(t,["customMetadata"]);if(e!==void 0&&l!=null){let f=l;Array.isArray(f)&&(f=f.map(m=>m)),h(e,["customMetadata"],f)}const u=d(t,["chunkingConfig"]);return e!==void 0&&u!=null&&h(e,["chunkingConfig"],u),n}function xC(t){const e={},n=d(t,["fileSearchStoreName"]);n!=null&&h(e,["_url","file_search_store_name"],n);const s=d(t,["config"]);return s!=null&&dv(s,e),e}function SC(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wC="Content-Type",TC="X-Server-Timeout",EC="User-Agent",_d="x-goog-api-client",AC="1.39.0",CC=`google-genai-sdk/${AC}`,NC="v1beta1",RC="v1beta";class kC{constructor(e){var n,s,r;this.clientOptions=Object.assign({},e),this.customBaseUrl=(n=e.httpOptions)===null||n===void 0?void 0:n.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const l={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const f=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!f?(l.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?l.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(l.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),l.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:NC}else{if(!this.clientOptions.apiKey)throw new dr({message:"API key must be set when using the Gemini API.",status:403});l.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:RC,l.baseUrl="https://generativelanguage.googleapis.com/"}l.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=l,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(l,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,s){const r=[this.getRequestUrlInternal(n)];return s&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e,n){return!(n.baseUrl&&n.baseUrlResourceScope===hd.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e,n),r=this.constructUrl(e.path,n,s);if(e.queryParams)for(const[u,f]of Object.entries(e.queryParams))r.searchParams.append(u,String(f));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,n,r.toString(),e.abortSignal),this.unaryApiCall(r,l,e.httpMethod)}patchHttpOptions(e,n){const s=JSON.parse(JSON.stringify(e));for(const[r,l]of Object.entries(n))typeof l=="object"?s[r]=Object.assign(Object.assign({},s[r]),l):l!==void 0&&(s[r]=l);return s}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e,n),r=this.constructUrl(e.path,n,s);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,n,r.toString(),e.abortSignal),this.streamApiCall(r,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,s,r){if(n&&n.timeout||r){const l=new AbortController,u=l.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const f=setTimeout(()=>l.abort(),n.timeout);f&&typeof f.unref=="function"&&f.unref()}r&&r.addEventListener("abort",()=>{l.abort()}),e.signal=u}return n&&n.extraBody!==null&&IC(e,n.extraBody),e.headers=await this.getHeadersInternal(n,s),e}async unaryApiCall(e,n,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:s})).then(async r=>(await Vy(r),new pd(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:s})).then(async r=>(await Vy(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return dn(this,arguments,function*(){var s;const r=(s=e==null?void 0:e.body)===null||s===void 0?void 0:s.getReader(),l=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let u="";const f="data:",m=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:p,value:y}=yield pe(r.read());if(p){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const b=l.decode(y,{stream:!0});try{const E=JSON.parse(b);if("error"in E){const A=JSON.parse(JSON.stringify(E.error)),C=A.status,I=A.code,O=`got status: ${C}. ${JSON.stringify(E)}`;if(I>=400&&I<600)throw new dr({message:O,status:I})}}catch(E){if(E.name==="ApiError")throw E}u+=b;let x=-1,w=0;for(;;){x=-1,w=0;for(const C of m){const I=u.indexOf(C);I!==-1&&(x===-1||I<x)&&(x=I,w=C.length)}if(x===-1)break;const E=u.substring(0,x);u=u.substring(x+w);const A=E.trim();if(A.startsWith(f)){const C=A.substring(f.length).trim();try{const I=new Response(C,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield pe(new pd(I))}catch(I){throw new Error(`exception parsing stream chunk ${C}. ${I}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},n=CC+" "+this.clientOptions.userAgentExtra;return e[EC]=n,e[_d]=n,e[wC]="application/json",e}async getHeadersInternal(e,n){const s=new Headers;if(e&&e.headers){for(const[r,l]of Object.entries(e.headers))s.append(r,l);e.timeout&&e.timeout>0&&s.append(TC,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,n),s}getFileName(e){var n;let s="";return typeof e=="string"&&(s=e.replace(/[/\\]+$/,""),s=(n=s.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),s}async uploadFile(e,n){var s;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const l=this.clientOptions.uploader,u=await l.stat(e);r.sizeBytes=String(u.size);const f=(s=n==null?void 0:n.mimeType)!==null&&s!==void 0?s:u.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=f;const m={file:r},p=this.getFileName(e),y=Q("upload/v1beta/files",m._url),b=await this.fetchUploadUrl(y,r.sizeBytes,r.mimeType,p,m,n==null?void 0:n.httpOptions);return l.upload(e,b,this)}async uploadFileToFileSearchStore(e,n,s){var r;const l=this.clientOptions.uploader,u=await l.stat(n),f=String(u.size),m=(r=s==null?void 0:s.mimeType)!==null&&r!==void 0?r:u.type;if(m===void 0||m==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const p=`upload/v1beta/${e}:uploadToFileSearchStore`,y=this.getFileName(n),b={};s!=null&&dv(s,b);const x=await this.fetchUploadUrl(p,f,m,y,b,s==null?void 0:s.httpOptions);return l.uploadToFileSearchStore(n,x,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,s,r,l,u){var f;let m={};u?m=u:m={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${s}`},r?{"X-Goog-Upload-File-Name":r}:{})};const p=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:m});if(!p||!(p!=null&&p.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const y=(f=p==null?void 0:p.headers)===null||f===void 0?void 0:f["x-goog-upload-url"];if(y===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return y}}async function Vy(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let s;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await t.json():s={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(s);throw n>=400&&n<600?new dr({message:r,status:n}):new Error(r)}}function IC(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const l=JSON.parse(t.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))n=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(l,u){const f=Object.assign({},l);for(const m in u)if(Object.prototype.hasOwnProperty.call(u,m)){const p=u[m],y=f[m];p&&typeof p=="object"&&!Array.isArray(p)&&y&&typeof y=="object"&&!Array.isArray(y)?f[m]=s(y,p):(y&&p&&typeof y!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${m}". Original type: ${typeof y}, New type: ${typeof p}. Overwriting.`),f[m]=p)}return f}const r=s(n,e);t.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const MC="mcp_used/unknown";let DC=!1;function fv(t){for(const e of t)if(UC(e)||typeof e=="object"&&"inputSchema"in e)return!0;return DC}function hv(t){var e;const n=(e=t[_d])!==null&&e!==void 0?e:"";t[_d]=(n+` ${MC}`).trimStart()}function UC(t){return t!==null&&typeof t=="object"&&t instanceof Wd}function PC(t){return dn(this,arguments,function*(n,s=100){let r,l=0;for(;l<s;){const u=yield pe(n.listTools({cursor:r}));for(const f of u.tools)yield yield pe(f),l++;if(!u.nextCursor)break;r=u.nextCursor}})}class Wd{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Wd(e,n)}async initialize(){var e,n,s,r;if(this.mcpTools.length>0)return;const l={},u=[];for(const y of this.mcpClients)try{for(var f=!0,m=(n=void 0,fn(PC(y))),p;p=await m.next(),e=p.done,!e;f=!0){r=p.value,f=!1;const b=r;u.push(b);const x=b.name;if(l[x])throw new Error(`Duplicate function name ${x} found in MCP tools. Please ensure function names are unique.`);l[x]=y}}catch(b){n={error:b}}finally{try{!f&&!e&&(s=m.return)&&await s.call(m)}finally{if(n)throw n.error}}this.mcpTools=u,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),cw(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[s.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const u=await r.callTool({name:s.name,arguments:s.args},void 0,l);n.push({functionResponse:{name:s.name,response:u.isError?{error:u}:u}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function OC(t,e,n){const s=new nw;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data),Object.assign(s,r),e(s)}class LC{constructor(e,n,s){this.apiClient=e,this.auth=n,this.webSocketFactory=s}async connect(e){var n,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),u=GC(this.apiClient.getDefaultHeaders()),f=this.apiClient.getApiKey(),m=`${r}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${f}`;let p=()=>{};const y=new Promise(D=>{p=D}),b=e.callbacks,x=function(){p({})},w=this.apiClient,E={onopen:x,onmessage:D=>{OC(w,b.onmessage,D)},onerror:(n=b==null?void 0:b.onerror)!==null&&n!==void 0?n:function(D){},onclose:(s=b==null?void 0:b.onclose)!==null&&s!==void 0?s:function(D){}},A=this.webSocketFactory.create(m,BC(u),E);A.connect(),await y;const O={setup:{model:ke(this.apiClient,e.model)}};return A.send(JSON.stringify(O)),new qC(A,this.apiClient)}}class qC{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=uE(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=lE(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Fs.PLAY)}pause(){this.sendPlaybackControl(Fs.PAUSE)}stop(){this.sendPlaybackControl(Fs.STOP)}resetContext(){this.sendPlaybackControl(Fs.RESET_CONTEXT)}close(){this.conn.close()}}function BC(t){const e={};return t.forEach((n,s)=>{e[s]=n}),e}function GC(t){const e=new Headers;for(const[n,s]of Object.entries(t))e.append(n,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const zC="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function HC(t,e,n){const s=new tw;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const l=JSON.parse(r);if(t.isVertexAI()){const u=fE(l);Object.assign(s,u)}else Object.assign(s,l);e(s)}class VC{constructor(e,n,s){this.apiClient=e,this.auth=n,this.webSocketFactory=s,this.music=new LC(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,s,r,l,u,f;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const m=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let y;const b=this.apiClient.getHeaders();e.config&&e.config.tools&&fv(e.config.tools)&&hv(b);const x=JC(b);if(this.apiClient.isVertexAI()){const Y=this.apiClient.getProject(),ee=this.apiClient.getLocation(),fe=this.apiClient.getApiKey(),he=!!Y&&!!ee||!!fe;this.apiClient.getCustomBaseUrl()&&!he?y=m:(y=`${m}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(x,y))}else{const Y=this.apiClient.getApiKey();let ee="BidiGenerateContent",fe="key";Y!=null&&Y.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),ee="BidiGenerateContentConstrained",fe="access_token"),y=`${m}/ws/google.ai.generativelanguage.${p}.GenerativeService.${ee}?${fe}=${Y}`}let w=()=>{};const E=new Promise(Y=>{w=Y}),A=e.callbacks,C=function(){var Y;(Y=A==null?void 0:A.onopen)===null||Y===void 0||Y.call(A),w({})},I=this.apiClient,O={onopen:C,onmessage:Y=>{HC(I,A.onmessage,Y)},onerror:(n=A==null?void 0:A.onerror)!==null&&n!==void 0?n:function(Y){},onclose:(s=A==null?void 0:A.onclose)!==null&&s!==void 0?s:function(Y){}},D=this.webSocketFactory.create(y,FC(x),O);D.connect(),await E;let P=ke(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&P.startsWith("publishers/")){const Y=this.apiClient.getProject(),ee=this.apiClient.getLocation();Y&&ee&&(P=`projects/${Y}/locations/${ee}/`+P)}let N={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[cr.AUDIO]}:e.config.responseModalities=[cr.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const H=(f=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&f!==void 0?f:[],V=[];for(const Y of H)if(this.isCallableTool(Y)){const ee=Y;V.push(await ee.tool())}else V.push(Y);V.length>0&&(e.config.tools=V);const Z={model:P,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?N=aE(this.apiClient,Z):N=rE(this.apiClient,Z),delete N.config,D.send(JSON.stringify(N)),new $C(D,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const jC={turnComplete:!0};class $C{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let s=[];try{s=nn(n.turns),e.isVertexAI()||(s=s.map(r=>ml(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:s,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let s=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?s=n.functionResponses:s=[n.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const l of s){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(zC)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},jC),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:dE(e)}:n={realtimeInput:cE(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function FC(t){const e={};return t.forEach((n,s)=>{e[s]=n}),e}function JC(t){const e=new Headers;for(const[n,s]of Object.entries(t))e.append(n,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jy=10;function $y(t){var e,n,s;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const u of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Qs(u)){r=!0;break}if(!r)return!0;const l=(s=t==null?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function Qs(t){return"callTool"in t&&typeof t.callTool=="function"}function YC(t){var e,n,s;return(s=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>Qs(r)))!==null&&s!==void 0?s:!1}function Fy(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((s,r)=>{if(Qs(s))return;const l=s;l.functionDeclarations&&l.functionDeclarations.length>0&&n.push(r)}),n}function Jy(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class KC extends zn{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var s,r,l,u,f;const m=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!YC(n)||$y(n.config))return await this.generateContentInternal(m);const p=Fy(n);if(p.length>0){const A=p.map(C=>`tools[${C}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${A}.`)}let y,b;const x=nn(m.contents),w=(l=(r=(s=m.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&l!==void 0?l:jy;let E=0;for(;E<w&&(y=await this.generateContentInternal(m),!(!y.functionCalls||y.functionCalls.length===0));){const A=y.candidates[0].content,C=[];for(const I of(f=(u=n.config)===null||u===void 0?void 0:u.tools)!==null&&f!==void 0?f:[])if(Qs(I)){const D=await I.callTool(y.functionCalls);C.push(...D)}E++,b={role:"user",parts:C},m.contents=nn(m.contents),m.contents.push(A),m.contents.push(b),Jy(m.config)&&(x.push(A),x.push(b))}return Jy(m.config)&&(y.automaticFunctionCallingHistory=x),y},this.generateContentStream=async n=>{var s,r,l,u,f;if(this.maybeMoveToResponseJsonSchem(n),$y(n.config)){const b=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(b)}const m=Fy(n);if(m.length>0){const b=m.map(x=>`tools[${x}]`).join(", ");throw new Error(`Incompatible tools found at ${b}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const p=(l=(r=(s=n==null?void 0:n.config)===null||s===void 0?void 0:s.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,y=(f=(u=n==null?void 0:n.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||f===void 0?void 0:f.disable;if(p&&!y)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(s=>{var r;let l;const u=[];if(s!=null&&s.generatedImages)for(const m of s.generatedImages)m&&(m!=null&&m.safetyAttributes)&&((r=m==null?void 0:m.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?l=m==null?void 0:m.safetyAttributes:u.push(m);let f;return l?f={generatedImages:u,positivePromptSafetyAttributes:l,sdkHttpResponse:s.sdkHttpResponse}:f={generatedImages:u,sdkHttpResponse:s.sdkHttpResponse},f}),this.list=async n=>{var s;const u={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((s=u.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new Ji(Gn.PAGED_ITEM_MODELS,f=>this.listInternal(f),await this.listInternal(u),u)},this.editImage=async n=>{const s={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(s.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async n=>{let s={numberOfImages:1,mode:"upscale"};n.config&&(s=Object.assign(Object.assign({},s),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:s};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>{var s,r,l,u,f,m;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=n.video)===null||s===void 0)&&s.uri&&(!((r=n.video)===null||r===void 0)&&r.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((u=(l=n.source)===null||l===void 0?void 0:l.video)===null||u===void 0)&&u.uri&&(!((m=(f=n.source)===null||f===void 0?void 0:f.video)===null||m===void 0)&&m.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,s,r;const l=(n=e.config)===null||n===void 0?void 0:n.tools;if(!l)return e;const u=await Promise.all(l.map(async m=>Qs(m)?await m.tool():m)),f={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(f.config.tools=u,e.config&&e.config.tools&&fv(e.config.tools)){const m=(r=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&r!==void 0?r:{};let p=Object.assign({},m);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),hv(p),f.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return f}async initAfcToolsMap(e){var n,s,r;const l=new Map;for(const u of(s=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&s!==void 0?s:[])if(Qs(u)){const f=u,m=await f.tool();for(const p of(r=m.functionDeclarations)!==null&&r!==void 0?r:[]){if(!p.name)throw new Error("Function declaration name is required.");if(l.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);l.set(p.name,f)}}return l}async processAfcStream(e){var n,s,r;const l=(r=(s=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&r!==void 0?r:jy;let u=!1,f=0;const m=await this.initAfcToolsMap(e);return(function(p,y,b){return dn(this,arguments,function*(){for(var x,w,E,A,C,I;f<l;){u&&(f++,u=!1);const N=yield pe(p.processParamsMaybeAddMcpUsage(b)),H=yield pe(p.generateContentStreamInternal(N)),V=[],Z=[];try{for(var O=!0,D=(w=void 0,fn(H)),P;P=yield pe(D.next()),x=P.done,!x;O=!0){A=P.value,O=!1;const Y=A;if(yield yield pe(Y),Y.candidates&&(!((C=Y.candidates[0])===null||C===void 0)&&C.content)){Z.push(Y.candidates[0].content);for(const ee of(I=Y.candidates[0].content.parts)!==null&&I!==void 0?I:[])if(f<l&&ee.functionCall){if(!ee.functionCall.name)throw new Error("Function call name was not returned by the model.");if(y.has(ee.functionCall.name)){const fe=yield pe(y.get(ee.functionCall.name).callTool([ee.functionCall]));V.push(...fe)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${y.keys()}, mising tool: ${ee.functionCall.name}`)}}}}catch(Y){w={error:Y}}finally{try{!O&&!x&&(E=D.return)&&(yield pe(E.call(D)))}finally{if(w)throw w.error}}if(V.length>0){u=!0;const Y=new er;Y.candidates=[{content:{role:"user",parts:V}}],yield yield pe(Y);const ee=[];ee.push(...Z),ee.push({role:"user",parts:V});const fe=nn(b.contents).concat(ee);b.contents=fe}else break}})})(this,m,e)}async generateContentInternal(e){var n,s,r,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=Gy(this.apiClient,e);return f=Q("{model}:generateContent",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(b=>{const x=b;return x.sdkHttpResponse={headers:y.headers},x})),u.then(y=>{const b=Hy(y),x=new er;return Object.assign(x,b),x})}else{const p=By(this.apiClient,e);return f=Q("{model}:generateContent",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(b=>{const x=b;return x.sdkHttpResponse={headers:y.headers},x})),u.then(y=>{const b=zy(y),x=new er;return Object.assign(x,b),x})}}async generateContentStreamInternal(e){var n,s,r,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=Gy(this.apiClient,e);return f=Q("{model}:streamGenerateContent?alt=sse",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.requestStream({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),u.then(function(b){return dn(this,arguments,function*(){var x,w,E,A;try{for(var C=!0,I=fn(b),O;O=yield pe(I.next()),x=O.done,!x;C=!0){A=O.value,C=!1;const D=A,P=Hy(yield pe(D.json()),e);P.sdkHttpResponse={headers:D.headers};const N=new er;Object.assign(N,P),yield yield pe(N)}}catch(D){w={error:D}}finally{try{!C&&!x&&(E=I.return)&&(yield pe(E.call(I)))}finally{if(w)throw w.error}}})})}else{const p=By(this.apiClient,e);return f=Q("{model}:streamGenerateContent?alt=sse",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.requestStream({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),u.then(function(b){return dn(this,arguments,function*(){var x,w,E,A;try{for(var C=!0,I=fn(b),O;O=yield pe(I.next()),x=O.done,!x;C=!0){A=O.value,C=!1;const D=A,P=zy(yield pe(D.json()),e);P.sdkHttpResponse={headers:D.headers};const N=new er;Object.assign(N,P),yield yield pe(N)}}catch(D){w={error:D}}finally{try{!C&&!x&&(E=I.return)&&(yield pe(E.call(I)))}finally{if(w)throw w.error}}})})}}async embedContent(e){var n,s,r,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=VE(this.apiClient,e);return f=Q("{model}:predict",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(b=>{const x=b;return x.sdkHttpResponse={headers:y.headers},x})),u.then(y=>{const b=$E(y),x=new Sy;return Object.assign(x,b),x})}else{const p=HE(this.apiClient,e);return f=Q("{model}:batchEmbedContents",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(b=>{const x=b;return x.sdkHttpResponse={headers:y.headers},x})),u.then(y=>{const b=jE(y),x=new Sy;return Object.assign(x,b),x})}}async generateImagesInternal(e){var n,s,r,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=nA(this.apiClient,e);return f=Q("{model}:predict",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(b=>{const x=b;return x.sdkHttpResponse={headers:y.headers},x})),u.then(y=>{const b=sA(y),x=new wy;return Object.assign(x,b),x})}else{const p=tA(this.apiClient,e);return f=Q("{model}:predict",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(b=>{const x=b;return x.sdkHttpResponse={headers:y.headers},x})),u.then(y=>{const b=iA(y),x=new wy;return Object.assign(x,b),x})}}async editImageInternal(e){var n,s;let r,l="",u={};if(this.apiClient.isVertexAI()){const f=qE(this.apiClient,e);return l=Q("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const y=p;return y.sdkHttpResponse={headers:m.headers},y})),r.then(m=>{const p=BE(m),y=new VS;return Object.assign(y,p),y})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,s;let r,l="",u={};if(this.apiClient.isVertexAI()){const f=nC(this.apiClient,e);return l=Q("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const y=p;return y.sdkHttpResponse={headers:m.headers},y})),r.then(m=>{const p=iC(m),y=new jS;return Object.assign(y,p),y})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,s;let r,l="",u={};if(this.apiClient.isVertexAI()){const f=LA(this.apiClient,e);return l=Q("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>{const p=qA(m),y=new $S;return Object.assign(y,p),y})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,s;let r,l="",u={};if(this.apiClient.isVertexAI()){const f=jA(this.apiClient,e);return l=Q("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>{const p=$A(m),y=new FS;return Object.assign(y,p),y})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,s,r,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=xA(this.apiClient,e);return f=Q("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>vd(y))}else{const p=bA(this.apiClient,e);return f=Q("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>yd(y))}}async listInternal(e){var n,s,r,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=kA(this.apiClient,e);return f=Q("{models_url}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(b=>{const x=b;return x.sdkHttpResponse={headers:y.headers},x})),u.then(y=>{const b=MA(y),x=new Ty;return Object.assign(x,b),x})}else{const p=RA(this.apiClient,e);return f=Q("{models_url}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(b=>{const x=b;return x.sdkHttpResponse={headers:y.headers},x})),u.then(y=>{const b=IA(y),x=new Ty;return Object.assign(x,b),x})}}async update(e){var n,s,r,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=eC(this.apiClient,e);return f=Q("{model}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>vd(y))}else{const p=ZA(this.apiClient,e);return f=Q("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>yd(y))}}async delete(e){var n,s,r,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=UE(this.apiClient,e);return f=Q("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(b=>{const x=b;return x.sdkHttpResponse={headers:y.headers},x})),u.then(y=>{const b=OE(y),x=new Ey;return Object.assign(x,b),x})}else{const p=DE(this.apiClient,e);return f=Q("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(b=>{const x=b;return x.sdkHttpResponse={headers:y.headers},x})),u.then(y=>{const b=PE(y),x=new Ey;return Object.assign(x,b),x})}}async countTokens(e){var n,s,r,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=kE(this.apiClient,e);return f=Q("{model}:countTokens",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(b=>{const x=b;return x.sdkHttpResponse={headers:y.headers},x})),u.then(y=>{const b=ME(y),x=new Ay;return Object.assign(x,b),x})}else{const p=RE(this.apiClient,e);return f=Q("{model}:countTokens",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(b=>{const x=b;return x.sdkHttpResponse={headers:y.headers},x})),u.then(y=>{const b=IE(y),x=new Ay;return Object.assign(x,b),x})}}async computeTokens(e){var n,s;let r,l="",u={};if(this.apiClient.isVertexAI()){const f=SE(this.apiClient,e);return l=Q("{model}:computeTokens",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const y=p;return y.sdkHttpResponse={headers:m.headers},y})),r.then(m=>{const p=wE(m),y=new JS;return Object.assign(y,p),y})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,s,r,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=cA(this.apiClient,e);return f=Q("{model}:predictLongRunning",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>{const b=lA(y),x=new ol;return Object.assign(x,b),x})}else{const p=uA(this.apiClient,e);return f=Q("{model}:predictLongRunning",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>{const b=aA(y),x=new ol;return Object.assign(x,b),x})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class QC extends zn{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,s=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:l}});return n._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:s});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const n=e.operation,s=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:l}});return n._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:s});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,s,r,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=LS(e);return f=Q("{operationName}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u}else{const p=OS(e);return f=Q("{operationName}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u}}async fetchPredictVideosOperationInternal(e){var n,s;let r,l="",u={};if(this.apiClient.isVertexAI()){const f=RS(e);return l=Q("{resourceName}:fetchPredictOperation",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function XC(t){const e={},n=d(t,["data"]);if(n!=null&&h(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function WC(t){const e={},n=d(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>aN(l))),h(e,["parts"],r)}const s=d(t,["role"]);return s!=null&&h(e,["role"],s),e}function ZC(t,e,n){const s={},r=d(e,["expireTime"]);n!==void 0&&r!=null&&h(n,["expireTime"],r);const l=d(e,["newSessionExpireTime"]);n!==void 0&&l!=null&&h(n,["newSessionExpireTime"],l);const u=d(e,["uses"]);n!==void 0&&u!=null&&h(n,["uses"],u);const f=d(e,["liveConnectConstraints"]);n!==void 0&&f!=null&&h(n,["bidiGenerateContentSetup"],rN(t,f));const m=d(e,["lockAdditionalFields"]);return n!==void 0&&m!=null&&h(n,["fieldMask"],m),s}function eN(t,e){const n={},s=d(e,["config"]);return s!=null&&h(n,["config"],ZC(t,s,n)),n}function tN(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const s=d(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function nN(t){const e={},n=d(t,["id"]);n!=null&&h(e,["id"],n);const s=d(t,["args"]);s!=null&&h(e,["args"],s);const r=d(t,["name"]);if(r!=null&&h(e,["name"],r),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function iN(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function sN(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function oN(t,e){const n={},s=d(t,["generationConfig"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig"],s);const r=d(t,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const l=d(t,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const u=d(t,["topP"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","topP"],u);const f=d(t,["topK"]);e!==void 0&&f!=null&&h(e,["setup","generationConfig","topK"],f);const m=d(t,["maxOutputTokens"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","maxOutputTokens"],m);const p=d(t,["mediaResolution"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","mediaResolution"],p);const y=d(t,["seed"]);e!==void 0&&y!=null&&h(e,["setup","generationConfig","seed"],y);const b=d(t,["speechConfig"]);e!==void 0&&b!=null&&h(e,["setup","generationConfig","speechConfig"],Xd(b));const x=d(t,["thinkingConfig"]);e!==void 0&&x!=null&&h(e,["setup","generationConfig","thinkingConfig"],x);const w=d(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],w);const E=d(t,["systemInstruction"]);e!==void 0&&E!=null&&h(e,["setup","systemInstruction"],WC(vt(E)));const A=d(t,["tools"]);if(e!==void 0&&A!=null){let H=eo(A);Array.isArray(H)&&(H=H.map(V=>uN(Zs(V)))),h(e,["setup","tools"],H)}const C=d(t,["sessionResumption"]);e!==void 0&&C!=null&&h(e,["setup","sessionResumption"],lN(C));const I=d(t,["inputAudioTranscription"]);e!==void 0&&I!=null&&h(e,["setup","inputAudioTranscription"],I);const O=d(t,["outputAudioTranscription"]);e!==void 0&&O!=null&&h(e,["setup","outputAudioTranscription"],O);const D=d(t,["realtimeInputConfig"]);e!==void 0&&D!=null&&h(e,["setup","realtimeInputConfig"],D);const P=d(t,["contextWindowCompression"]);e!==void 0&&P!=null&&h(e,["setup","contextWindowCompression"],P);const N=d(t,["proactivity"]);if(e!==void 0&&N!=null&&h(e,["setup","proactivity"],N),d(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function rN(t,e){const n={},s=d(e,["model"]);s!=null&&h(n,["setup","model"],ke(t,s));const r=d(e,["config"]);return r!=null&&h(n,["config"],oN(r,n)),n}function aN(t){const e={},n=d(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const s=d(t,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const r=d(t,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=d(t,["fileData"]);l!=null&&h(e,["fileData"],tN(l));const u=d(t,["functionCall"]);u!=null&&h(e,["functionCall"],nN(u));const f=d(t,["functionResponse"]);f!=null&&h(e,["functionResponse"],f);const m=d(t,["inlineData"]);m!=null&&h(e,["inlineData"],XC(m));const p=d(t,["text"]);p!=null&&h(e,["text"],p);const y=d(t,["thought"]);y!=null&&h(e,["thought"],y);const b=d(t,["thoughtSignature"]);b!=null&&h(e,["thoughtSignature"],b);const x=d(t,["videoMetadata"]);return x!=null&&h(e,["videoMetadata"],x),e}function lN(t){const e={},n=d(t,["handle"]);if(n!=null&&h(e,["handle"],n),d(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function uN(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=d(t,["computerUse"]);n!=null&&h(e,["computerUse"],n);const s=d(t,["fileSearch"]);s!=null&&h(e,["fileSearch"],s);const r=d(t,["codeExecution"]);if(r!=null&&h(e,["codeExecution"],r),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=d(t,["functionDeclarations"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(b=>b)),h(e,["functionDeclarations"],y)}const u=d(t,["googleMaps"]);u!=null&&h(e,["googleMaps"],iN(u));const f=d(t,["googleSearch"]);f!=null&&h(e,["googleSearch"],sN(f));const m=d(t,["googleSearchRetrieval"]);m!=null&&h(e,["googleSearchRetrieval"],m);const p=d(t,["urlContext"]);return p!=null&&h(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cN(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const s=t[n];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const r=Object.keys(s).map(l=>`${n}.${l}`);e.push(...r)}else e.push(n)}return e.join(",")}function dN(t,e){let n=null;const s=t.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const l=s.setup;typeof l=="object"&&l!==null?(t.bidiGenerateContentSetup=l,n=l):delete t.bidiGenerateContentSetup}else s!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const l=cN(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?t.fieldMask=l:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let f=[];r.length>0&&(f=r.map(p=>u.includes(p)?`generationConfig.${p}`:p));const m=[];l&&m.push(l),f.length>0&&m.push(...f),m.length>0?t.fieldMask=m.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class fN extends zn{constructor(e){super(),this.apiClient=e}async create(e){var n,s;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const f=eN(this.apiClient,e);l=Q("auth_tokens",f._url),u=f._query,delete f.config,delete f._url,delete f._query;const m=dN(f,e.config);return r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),r.then(p=>p)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hN(t,e){const n={},s=d(t,["force"]);return e!==void 0&&s!=null&&h(e,["_query","force"],s),n}function pN(t){const e={},n=d(t,["name"]);n!=null&&h(e,["_url","name"],n);const s=d(t,["config"]);return s!=null&&hN(s,e),e}function mN(t){const e={},n=d(t,["name"]);return n!=null&&h(e,["_url","name"],n),e}function gN(t,e){const n={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=d(t,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),n}function yN(t){const e={},n=d(t,["parent"]);n!=null&&h(e,["_url","parent"],n);const s=d(t,["config"]);return s!=null&&gN(s,e),e}function vN(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=d(t,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=d(t,["documents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _N extends zn{constructor(e){super(),this.apiClient=e,this.list=async n=>new Ji(Gn.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:n.parent,config:s.config}),await this.listInternal(n),n)}async get(e){var n,s;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=mN(e);return l=Q("{name}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>m)}}async delete(e){var n,s;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=pN(e);r=Q("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,s;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=yN(e);return l=Q("{parent}/documents",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>{const p=vN(m),y=new YS;return Object.assign(y,p),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bN extends zn{constructor(e,n=new _N(e)){super(),this.apiClient=e,this.documents=n,this.list=async(s={})=>new Ji(Gn.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(s),s)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,s;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=cC(e);return l=Q("fileSearchStores",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>m)}}async get(e){var n,s;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=hC(e);return l=Q("{name}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>m)}}async delete(e){var n,s;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=fC(e);r=Q("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,s;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=_C(e);return l=Q("fileSearchStores",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>{const p=bC(m),y=new KS;return Object.assign(y,p),y})}}async uploadToFileSearchStoreInternal(e){var n,s;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=xC(e);return l=Q("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>{const p=SC(m),y=new QS;return Object.assign(y,p),y})}}async importFile(e){var n,s;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=gC(e);return l=Q("{file_search_store_name}:importFile",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>{const p=mC(m),y=new Fd;return Object.assign(y,p),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let pv=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return pv=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^n()&15>>+s/4).toString(16))};const xN=()=>pv();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bd(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const xd=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sn extends Error{}class wt extends sn{constructor(e,n,s,r){super(`${wt.makeMessage(e,n,s)}`),this.status=e,this.headers=r,this.error=n}static makeMessage(e,n,s){const r=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):s;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,n,s,r){if(!e||!r)return new vl({message:s,cause:xd(n)});const l=n;return e===400?new gv(e,l,s,r):e===401?new yv(e,l,s,r):e===403?new vv(e,l,s,r):e===404?new _v(e,l,s,r):e===409?new bv(e,l,s,r):e===422?new xv(e,l,s,r):e===429?new Sv(e,l,s,r):e>=500?new wv(e,l,s,r):new wt(e,l,s,r)}}class Sd extends wt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class vl extends wt{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class mv extends vl{constructor({message:e}={}){super({message:e??"Request timed out."})}}class gv extends wt{}class yv extends wt{}class vv extends wt{}class _v extends wt{}class bv extends wt{}class xv extends wt{}class Sv extends wt{}class wv extends wt{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const SN=/^[a-z][a-z0-9+.-]*:/i,wN=t=>SN.test(t);let wd=t=>(wd=Array.isArray,wd(t));const TN=wd;let EN=TN;const Yy=EN;function AN(t){if(!t)return!0;for(const e in t)return!1;return!0}function CN(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const NN=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new sn(`${t} must be an integer`);if(e<0)throw new sn(`${t} must be a positive integer`);return e},RN=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kN=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Vs="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function IN(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const MN=()=>{var t,e,n,s,r;const l=IN();if(l==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Vs,"X-Stainless-OS":Qy(Deno.build.os),"X-Stainless-Arch":Ky(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Vs,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(l==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Vs,"X-Stainless-OS":Qy((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":Ky((s=globalThis.process.arch)!==null&&s!==void 0?s:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const u=DN();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Vs,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Vs,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function DN(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const s=n.exec(navigator.userAgent);if(s){const r=s[1]||0,l=s[2]||0,u=s[3]||0;return{browser:e,version:`${r}.${l}.${u}`}}}return null}const Ky=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",Qy=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Ha;const UN=()=>Ha??(Ha=MN());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function PN(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Tv(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function ON(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return Tv({start(){},async pull(n){const{done:s,value:r}=await e.next();s?n.close():n.enqueue(r)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function Ev(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function LN(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const s=t.getReader(),r=s.cancel();s.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qN=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Av=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Qc(t,e,n){return Av(),new File(t,e??"unknown_file",n)}function BN(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const GN=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Cv=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",zN=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&Cv(t),HN=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function VN(t,e,n){if(Av(),t=await t,zN(t))return t instanceof File?t:Qc([await t.arrayBuffer()],t.name);if(HN(t)){const r=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Qc(await Td(r),e,n)}const s=await Td(t);if(e||(e=BN(t)),!(n!=null&&n.type)){const r=s.find(l=>typeof l=="object"&&"type"in l&&l.type);typeof r=="string"&&(n=Object.assign(Object.assign({},n),{type:r}))}return Qc(s,e,n)}async function Td(t){var e,n,s,r,l;let u=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)u.push(t);else if(Cv(t))u.push(t instanceof Blob?t:await t.arrayBuffer());else if(GN(t))try{for(var f=!0,m=fn(t),p;p=await m.next(),e=p.done,!e;f=!0){r=p.value,f=!1;const y=r;u.push(...await Td(y))}}catch(y){n={error:y}}finally{try{!f&&!e&&(s=m.return)&&await s.call(m)}finally{if(n)throw n.error}}else{const y=(l=t==null?void 0:t.constructor)===null||l===void 0?void 0:l.name;throw new Error(`Unexpected data type: ${typeof t}${y?`; constructor: ${y}`:""}${jN(t)}`)}return u}function jN(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Nv{constructor(e){this._client=e}}Nv._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Rv(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Xy=Object.freeze(Object.create(null)),$N=(t=Rv)=>(function(n,...s){if(n.length===1)return n[0];let r=!1;const l=[],u=n.reduce((y,b,x)=>{var w,E,A;/[?#]/.test(b)&&(r=!0);const C=s[x];let I=(r?encodeURIComponent:t)(""+C);return x!==s.length&&(C==null||typeof C=="object"&&C.toString===((A=Object.getPrototypeOf((E=Object.getPrototypeOf((w=C.hasOwnProperty)!==null&&w!==void 0?w:Xy))!==null&&E!==void 0?E:Xy))===null||A===void 0?void 0:A.toString))&&(I=C+"",l.push({start:y.length+b.length,length:I.length,error:`Value of type ${Object.prototype.toString.call(C).slice(8,-1)} is not a valid path parameter`})),y+b+(x===s.length?"":I)},""),f=u.split(/[?#]/,1)[0],m=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let p;for(;(p=m.exec(f))!==null;)l.push({start:p.index,length:p[0].length,error:`Value "${p[0]}" can't be safely passed as a path parameter`});if(l.sort((y,b)=>y.start-b.start),l.length>0){let y=0;const b=l.reduce((x,w)=>{const E=" ".repeat(w.start-y),A="^".repeat(w.length);return y=w.start+w.length,x+E+A},"");throw new sn(`Path parameters result in path with invalid segments:
${l.map(x=>x.error).join(`
`)}
${u}
${b}`)}return u}),Va=$N(Rv);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kv extends Nv{create(e,n){var s;const{api_version:r=this._client.apiVersion}=e,l=al(e,["api_version"]);if("model"in l&&"agent_config"in l)throw new sn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in l&&"generation_config"in l)throw new sn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Va`/${r}/interactions`,Object.assign(Object.assign({body:l},n),{stream:(s=e.stream)!==null&&s!==void 0?s:!1}))}delete(e,n={},s){const{api_version:r=this._client.apiVersion}=n??{};return this._client.delete(Va`/${r}/interactions/${e}`,s)}cancel(e,n={},s){const{api_version:r=this._client.apiVersion}=n??{};return this._client.post(Va`/${r}/interactions/${e}/cancel`,s)}get(e,n={},s){var r;const l=n??{},{api_version:u=this._client.apiVersion}=l,f=al(l,["api_version"]);return this._client.get(Va`/${u}/interactions/${e}`,Object.assign(Object.assign({query:f},s),{stream:(r=n==null?void 0:n.stream)!==null&&r!==void 0?r:!1}))}}kv._key=Object.freeze(["interactions"]);class Iv extends kv{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function FN(t){let e=0;for(const r of t)e+=r.length;const n=new Uint8Array(e);let s=0;for(const r of t)n.set(r,s),s+=r.length;return n}let ja;function Zd(t){let e;return(ja??(e=new globalThis.TextEncoder,ja=e.encode.bind(e)))(t)}let $a;function Wy(t){let e;return($a??(e=new globalThis.TextDecoder,$a=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _l{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Zd(e):e;this.buffer=FN([this.buffer,n]);const s=[];let r;for(;(r=JN(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){s.push(Wy(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const l=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,u=Wy(this.buffer.subarray(0,l));s.push(u),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return s}flush(){return this.buffer.length?this.decode(`
`):[]}}_l.NEWLINE_CHARS=new Set([`
`,"\r"]);_l.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function JN(t,e){for(let r=e??0;r<t.length;r++){if(t[r]===10)return{preceding:r,index:r+1,carriage:!1};if(t[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function YN(t){for(let s=0;s<t.length-1;s++){if(t[s]===10&&t[s+1]===10||t[s]===13&&t[s+1]===13)return s+2;if(t[s]===13&&t[s+1]===10&&s+3<t.length&&t[s+2]===13&&t[s+3]===10)return s+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ll={off:0,error:200,warn:300,info:400,debug:500},Zy=(t,e,n)=>{if(t){if(CN(ll,t))return t;St(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(ll))}`)}};function ir(){}function Fa(t,e,n){return!e||ll[t]>ll[n]?ir:e[t].bind(e)}const KN={error:ir,warn:ir,info:ir,debug:ir};let e0=new WeakMap;function St(t){var e;const n=t.logger,s=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return KN;const r=e0.get(n);if(r&&r[0]===s)return r[1];const l={error:Fa("error",n,s),warn:Fa("warn",n,s),info:Fa("info",n,s),debug:Fa("debug",n,s)};return e0.set(n,[s,l]),l}const Bi=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Js{constructor(e,n,s){this.iterator=e,this.controller=n,this.client=s}static fromSSEResponse(e,n,s){let r=!1;const l=s?St(s):console;function u(){return dn(this,arguments,function*(){var m,p,y,b;if(r)throw new sn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let x=!1;try{try{for(var w=!0,E=fn(QN(e,n)),A;A=yield pe(E.next()),m=A.done,!m;w=!0){b=A.value,w=!1;const C=b;if(!x)if(C.data.startsWith("[DONE]")){x=!0;continue}else try{yield yield pe(JSON.parse(C.data))}catch(I){throw l.error("Could not parse message into JSON:",C.data),l.error("From chunk:",C.raw),I}}}catch(C){p={error:C}}finally{try{!w&&!m&&(y=E.return)&&(yield pe(y.call(E)))}finally{if(p)throw p.error}}x=!0}catch(C){if(bd(C))return yield pe(void 0);throw C}finally{x||n.abort()}})}return new Js(u,n,s)}static fromReadableStream(e,n,s){let r=!1;function l(){return dn(this,arguments,function*(){var m,p,y,b;const x=new _l,w=Ev(e);try{for(var E=!0,A=fn(w),C;C=yield pe(A.next()),m=C.done,!m;E=!0){b=C.value,E=!1;const I=b;for(const O of x.decode(I))yield yield pe(O)}}catch(I){p={error:I}}finally{try{!E&&!m&&(y=A.return)&&(yield pe(y.call(A)))}finally{if(p)throw p.error}}for(const I of x.flush())yield yield pe(I)})}function u(){return dn(this,arguments,function*(){var m,p,y,b;if(r)throw new sn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let x=!1;try{try{for(var w=!0,E=fn(l()),A;A=yield pe(E.next()),m=A.done,!m;w=!0){b=A.value,w=!1;const C=b;x||C&&(yield yield pe(JSON.parse(C)))}}catch(C){p={error:C}}finally{try{!w&&!m&&(y=E.return)&&(yield pe(y.call(E)))}finally{if(p)throw p.error}}x=!0}catch(C){if(bd(C))return yield pe(void 0);throw C}finally{x||n.abort()}})}return new Js(u,n,s)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],s=this.iterator(),r=l=>({next:()=>{if(l.length===0){const u=s.next();e.push(u),n.push(u)}return l.shift()}});return[new Js(()=>r(e),this.controller,this.client),new Js(()=>r(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return Tv({async start(){n=e[Symbol.asyncIterator]()},async pull(s){try{const{value:r,done:l}=await n.next();if(l)return s.close();const u=Zd(JSON.stringify(r)+`
`);s.enqueue(u)}catch(r){s.error(r)}},async cancel(){var s;await((s=n.return)===null||s===void 0?void 0:s.call(n))}})}}function QN(t,e){return dn(this,arguments,function*(){var s,r,l,u;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new sn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new sn("Attempted to iterate over a response with no body");const f=new WN,m=new _l,p=Ev(t.body);try{for(var y=!0,b=fn(XN(p)),x;x=yield pe(b.next()),s=x.done,!s;y=!0){u=x.value,y=!1;const w=u;for(const E of m.decode(w)){const A=f.decode(E);A&&(yield yield pe(A))}}}catch(w){r={error:w}}finally{try{!y&&!s&&(l=b.return)&&(yield pe(l.call(b)))}finally{if(r)throw r.error}}for(const w of m.flush()){const E=f.decode(w);E&&(yield yield pe(E))}})}function XN(t){return dn(this,arguments,function*(){var n,s,r,l;let u=new Uint8Array;try{for(var f=!0,m=fn(t),p;p=yield pe(m.next()),n=p.done,!n;f=!0){l=p.value,f=!1;const y=l;if(y==null)continue;const b=y instanceof ArrayBuffer?new Uint8Array(y):typeof y=="string"?Zd(y):y;let x=new Uint8Array(u.length+b.length);x.set(u),x.set(b,u.length),u=x;let w;for(;(w=YN(u))!==-1;)yield yield pe(u.slice(0,w)),u=u.slice(w)}}catch(y){s={error:y}}finally{try{!f&&!n&&(r=m.return)&&(yield pe(r.call(m)))}finally{if(s)throw s.error}}u.length>0&&(yield yield pe(u))})}class WN{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const l={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],l}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,s,r]=ZN(e,":");return r.startsWith(" ")&&(r=r.substring(1)),n==="event"?this.event=r:n==="data"&&this.data.push(r),null}}function ZN(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function eR(t,e){const{response:n,requestLogID:s,retryOfRequestLogID:r,startTime:l}=e,u=await(async()=>{var f;if(e.options.stream)return St(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Js.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const m=n.headers.get("content-type"),p=(f=m==null?void 0:m.split(";")[0])===null||f===void 0?void 0:f.trim();return(p==null?void 0:p.includes("application/json"))||(p==null?void 0:p.endsWith("+json"))?await n.json():await n.text()})();return St(t).debug(`[${s}] response parsed`,Bi({retryOfRequestLogID:r,url:n.url,status:n.status,body:u,durationMs:Date.now()-l})),u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ef extends Promise{constructor(e,n,s=eR){super(r=>{r(null)}),this.responsePromise=n,this.parseResponse=s,this.client=e}_thenUnwrap(e){return new ef(this.client,this.responsePromise,async(n,s)=>e(await this.parseResponse(n,s),s))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Mv=Symbol("brand.privateNullableHeaders");function*tR(t){if(!t)return;if(Mv in t){const{values:s,nulls:r}=t;yield*s.entries();for(const l of r)yield[l,null];return}let e=!1,n;t instanceof Headers?n=t.entries():Yy(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let s of n){const r=s[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const l=Yy(s[1])?s[1]:[s[1]];let u=!1;for(const f of l)f!==void 0&&(e&&!u&&(u=!0,yield[r,null]),yield[r,f])}}const tr=t=>{const e=new Headers,n=new Set;for(const s of t){const r=new Set;for(const[l,u]of tR(s)){const f=l.toLowerCase();r.has(f)||(e.delete(l),r.add(f)),u===null?(e.delete(l),n.add(f)):(e.append(l,u),n.delete(f))}}return{[Mv]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Xc=t=>{var e,n,s,r,l,u;if(typeof globalThis.process<"u")return(s=(n=(e=wS)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&s!==void 0?s:void 0;if(typeof globalThis.Deno<"u")return(u=(l=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||l===void 0?void 0:l.call(r,t))===null||u===void 0?void 0:u.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Dv;class bl{constructor(e){var n,s,r,l,u,f,m,{baseURL:p=Xc("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:y=(n=Xc("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:b="v1beta"}=e,x=al(e,["baseURL","apiKey","apiVersion"]);const w=Object.assign(Object.assign({apiKey:y,apiVersion:b},x),{baseURL:p||"https://generativelanguage.googleapis.com"});this.baseURL=w.baseURL,this.timeout=(s=w.timeout)!==null&&s!==void 0?s:bl.DEFAULT_TIMEOUT,this.logger=(r=w.logger)!==null&&r!==void 0?r:console;const E="warn";this.logLevel=E,this.logLevel=(u=(l=Zy(w.logLevel,"ClientOptions.logLevel",this))!==null&&l!==void 0?l:Zy(Xc("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:E,this.fetchOptions=w.fetchOptions,this.maxRetries=(f=w.maxRetries)!==null&&f!==void 0?f:2,this.fetch=(m=w.fetch)!==null&&m!==void 0?m:PN(),this.encoder=qN,this._options=w,this.apiKey=y,this.apiVersion=b,this.clientAdapter=w.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=tr([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return tr([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return tr([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,s])=>typeof s<"u").map(([n,s])=>{if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(s)}`;if(s===null)return`${encodeURIComponent(n)}=`;throw new sn(`Cannot stringify type ${typeof s}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Vs}`}defaultIdempotencyKey(){return`stainless-node-retry-${xN()}`}makeStatusError(e,n,s,r){return wt.generate(e,n,s,r)}buildURL(e,n,s){const r=!this.baseURLOverridden()&&s||this.baseURL,l=wN(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return AN(u)||(n=Object.assign(Object.assign({},u),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(l.search=this.stringifyQuery(n)),l.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:s}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,s){return this.request(Promise.resolve(s).then(r=>Object.assign({method:e,path:n},r)))}request(e,n=null){return new ef(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,s){var r,l,u;const f=await e,m=(r=f.maxRetries)!==null&&r!==void 0?r:this.maxRetries;n==null&&(n=m),await this.prepareOptions(f);const{req:p,url:y,timeout:b}=await this.buildRequest(f,{retryCount:m-n});await this.prepareRequest(p,{url:y,options:f});const x="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),w=s===void 0?"":`, retryOf: ${s}`,E=Date.now();if(St(this).debug(`[${x}] sending request`,Bi({retryOfRequestLogID:s,method:f.method,url:y,options:f,headers:p.headers})),!((l=f.signal)===null||l===void 0)&&l.aborted)throw new Sd;const A=new AbortController,C=await this.fetchWithTimeout(y,p,b,A).catch(xd),I=Date.now();if(C instanceof globalThis.Error){const D=`retrying, ${n} attempts remaining`;if(!((u=f.signal)===null||u===void 0)&&u.aborted)throw new Sd;const P=bd(C)||/timed? ?out/i.test(String(C)+("cause"in C?String(C.cause):""));if(n)return St(this).info(`[${x}] connection ${P?"timed out":"failed"} - ${D}`),St(this).debug(`[${x}] connection ${P?"timed out":"failed"} (${D})`,Bi({retryOfRequestLogID:s,url:y,durationMs:I-E,message:C.message})),this.retryRequest(f,n,s??x);throw St(this).info(`[${x}] connection ${P?"timed out":"failed"} - error; no more retries left`),St(this).debug(`[${x}] connection ${P?"timed out":"failed"} (error; no more retries left)`,Bi({retryOfRequestLogID:s,url:y,durationMs:I-E,message:C.message})),P?new mv:new vl({cause:C})}const O=`[${x}${w}] ${p.method} ${y} ${C.ok?"succeeded":"failed"} with status ${C.status} in ${I-E}ms`;if(!C.ok){const D=await this.shouldRetry(C);if(n&&D){const Y=`retrying, ${n} attempts remaining`;return await LN(C.body),St(this).info(`${O} - ${Y}`),St(this).debug(`[${x}] response error (${Y})`,Bi({retryOfRequestLogID:s,url:C.url,status:C.status,headers:C.headers,durationMs:I-E})),this.retryRequest(f,n,s??x,C.headers)}const P=D?"error; no more retries left":"error; not retryable";St(this).info(`${O} - ${P}`);const N=await C.text().catch(Y=>xd(Y).message),H=RN(N),V=H?void 0:N;throw St(this).debug(`[${x}] response error (${P})`,Bi({retryOfRequestLogID:s,url:C.url,status:C.status,headers:C.headers,message:V,durationMs:Date.now()-E})),this.makeStatusError(C.status,H,V,C.headers)}return St(this).info(O),St(this).debug(`[${x}] response start`,Bi({retryOfRequestLogID:s,url:C.url,status:C.status,headers:C.headers,durationMs:I-E})),{response:C,options:f,controller:A,requestLogID:x,retryOfRequestLogID:s,startTime:E}}async fetchWithTimeout(e,n,s,r){const l=n||{},{signal:u,method:f}=l,m=al(l,["signal","method"]);u&&u.addEventListener("abort",()=>r.abort());const p=setTimeout(()=>r.abort(),s),y=globalThis.ReadableStream&&m.body instanceof globalThis.ReadableStream||typeof m.body=="object"&&m.body!==null&&Symbol.asyncIterator in m.body,b=Object.assign(Object.assign(Object.assign({signal:r.signal},y?{duplex:"half"}:{}),{method:"GET"}),m);f&&(b.method=f.toUpperCase());try{return await this.fetch.call(void 0,e,b)}finally{clearTimeout(p)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,s,r){var l;let u;const f=r==null?void 0:r.get("retry-after-ms");if(f){const p=parseFloat(f);Number.isNaN(p)||(u=p)}const m=r==null?void 0:r.get("retry-after");if(m&&!u){const p=parseFloat(m);Number.isNaN(p)?u=Date.parse(m)-Date.now():u=p*1e3}if(!(u&&0<=u&&u<60*1e3)){const p=(l=e.maxRetries)!==null&&l!==void 0?l:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(n,p)}return await kN(u),this.makeRequest(e,n-1,s)}calculateDefaultRetryTimeoutMillis(e,n){const l=n-e,u=Math.min(.5*Math.pow(2,l),8),f=1-Math.random()*.25;return u*f*1e3}async buildRequest(e,{retryCount:n=0}={}){var s,r,l;const u=Object.assign({},e),{method:f,path:m,query:p,defaultBaseURL:y}=u,b=this.buildURL(m,p,y);"timeout"in u&&NN("timeout",u.timeout),u.timeout=(s=u.timeout)!==null&&s!==void 0?s:this.timeout;const{bodyHeaders:x,body:w}=this.buildBody({options:u}),E=await this.buildHeaders({options:e,method:f,bodyHeaders:x,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:f,headers:E},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&w instanceof globalThis.ReadableStream&&{duplex:"half"}),w&&{body:w}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(l=u.fetchOptions)!==null&&l!==void 0?l:{}),url:b,timeout:u.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:s,retryCount:r}){let l={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),l[this.idempotencyHeader]=e.idempotencyKey);const u=await this.authHeaders(e);let f=tr([l,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),UN()),this._options.defaultHeaders,s,e.headers,u]);return this.validateHeaders(f),f.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=tr([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&s.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:ON(e)}:this.encoder({body:e,headers:s})}}bl.DEFAULT_TIMEOUT=6e4;class ut extends bl{constructor(){super(...arguments),this.interactions=new Iv(this)}}Dv=ut;ut.GeminiNextGenAPIClient=Dv;ut.GeminiNextGenAPIClientError=sn;ut.APIError=wt;ut.APIConnectionError=vl;ut.APIConnectionTimeoutError=mv;ut.APIUserAbortError=Sd;ut.NotFoundError=_v;ut.ConflictError=bv;ut.RateLimitError=Sv;ut.BadRequestError=gv;ut.AuthenticationError=yv;ut.InternalServerError=wv;ut.PermissionDeniedError=vv;ut.UnprocessableEntityError=xv;ut.toFile=VN;ut.Interactions=Iv;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nR(t,e){const n={},s=d(t,["name"]);return s!=null&&h(n,["_url","name"],s),n}function iR(t,e){const n={},s=d(t,["name"]);return s!=null&&h(n,["_url","name"],s),n}function sR(t,e){const n={},s=d(t,["sdkHttpResponse"]);return s!=null&&h(n,["sdkHttpResponse"],s),n}function oR(t,e){const n={},s=d(t,["sdkHttpResponse"]);return s!=null&&h(n,["sdkHttpResponse"],s),n}function rR(t,e,n){const s={};if(d(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=d(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&h(e,["displayName"],r),d(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=d(t,["epochCount"]);e!==void 0&&l!=null&&h(e,["tuningTask","hyperparameters","epochCount"],l);const u=d(t,["learningRateMultiplier"]);if(u!=null&&h(s,["tuningTask","hyperparameters","learningRateMultiplier"],u),d(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(d(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(d(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(d(t,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(d(t,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const f=d(t,["batchSize"]);e!==void 0&&f!=null&&h(e,["tuningTask","hyperparameters","batchSize"],f);const m=d(t,["learningRate"]);if(e!==void 0&&m!=null&&h(e,["tuningTask","hyperparameters","learningRate"],m),d(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(d(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(d(t,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(d(t,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(d(t,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(d(t,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");return s}function aR(t,e,n){const s={};let r=d(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const N=d(t,["validationDataset"]);e!==void 0&&N!=null&&h(e,["supervisedTuningSpec"],Wc(N))}else if(r==="PREFERENCE_TUNING"){const N=d(t,["validationDataset"]);e!==void 0&&N!=null&&h(e,["preferenceOptimizationSpec"],Wc(N))}else if(r==="DISTILLATION"){const N=d(t,["validationDataset"]);e!==void 0&&N!=null&&h(e,["distillationSpec"],Wc(N))}const l=d(t,["tunedModelDisplayName"]);e!==void 0&&l!=null&&h(e,["tunedModelDisplayName"],l);const u=d(t,["description"]);e!==void 0&&u!=null&&h(e,["description"],u);let f=d(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const N=d(t,["epochCount"]);e!==void 0&&N!=null&&h(e,["supervisedTuningSpec","hyperParameters","epochCount"],N)}else if(f==="PREFERENCE_TUNING"){const N=d(t,["epochCount"]);e!==void 0&&N!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],N)}else if(f==="DISTILLATION"){const N=d(t,["epochCount"]);e!==void 0&&N!=null&&h(e,["distillationSpec","hyperParameters","epochCount"],N)}let m=d(n,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const N=d(t,["learningRateMultiplier"]);e!==void 0&&N!=null&&h(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],N)}else if(m==="PREFERENCE_TUNING"){const N=d(t,["learningRateMultiplier"]);e!==void 0&&N!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],N)}else if(m==="DISTILLATION"){const N=d(t,["learningRateMultiplier"]);e!==void 0&&N!=null&&h(e,["distillationSpec","hyperParameters","learningRateMultiplier"],N)}let p=d(n,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const N=d(t,["exportLastCheckpointOnly"]);e!==void 0&&N!=null&&h(e,["supervisedTuningSpec","exportLastCheckpointOnly"],N)}else if(p==="PREFERENCE_TUNING"){const N=d(t,["exportLastCheckpointOnly"]);e!==void 0&&N!=null&&h(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],N)}else if(p==="DISTILLATION"){const N=d(t,["exportLastCheckpointOnly"]);e!==void 0&&N!=null&&h(e,["distillationSpec","exportLastCheckpointOnly"],N)}let y=d(n,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const N=d(t,["adapterSize"]);e!==void 0&&N!=null&&h(e,["supervisedTuningSpec","hyperParameters","adapterSize"],N)}else if(y==="PREFERENCE_TUNING"){const N=d(t,["adapterSize"]);e!==void 0&&N!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],N)}else if(y==="DISTILLATION"){const N=d(t,["adapterSize"]);e!==void 0&&N!=null&&h(e,["distillationSpec","hyperParameters","adapterSize"],N)}let b=d(n,["config","method"]);if(b===void 0&&(b="SUPERVISED_FINE_TUNING"),b==="SUPERVISED_FINE_TUNING"){const N=d(t,["tuningMode"]);e!==void 0&&N!=null&&h(e,["supervisedTuningSpec","tuningMode"],N)}const x=d(t,["customBaseModel"]);e!==void 0&&x!=null&&h(e,["customBaseModel"],x);let w=d(n,["config","method"]);if(w===void 0&&(w="SUPERVISED_FINE_TUNING"),w==="SUPERVISED_FINE_TUNING"){const N=d(t,["batchSize"]);e!==void 0&&N!=null&&h(e,["supervisedTuningSpec","hyperParameters","batchSize"],N)}let E=d(n,["config","method"]);if(E===void 0&&(E="SUPERVISED_FINE_TUNING"),E==="SUPERVISED_FINE_TUNING"){const N=d(t,["learningRate"]);e!==void 0&&N!=null&&h(e,["supervisedTuningSpec","hyperParameters","learningRate"],N)}const A=d(t,["labels"]);e!==void 0&&A!=null&&h(e,["labels"],A);const C=d(t,["beta"]);e!==void 0&&C!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","beta"],C);const I=d(t,["baseTeacherModel"]);e!==void 0&&I!=null&&h(e,["distillationSpec","baseTeacherModel"],I);const O=d(t,["tunedTeacherModelSource"]);e!==void 0&&O!=null&&h(e,["distillationSpec","tunedTeacherModelSource"],O);const D=d(t,["sftLossWeightMultiplier"]);e!==void 0&&D!=null&&h(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],D);const P=d(t,["outputUri"]);return e!==void 0&&P!=null&&h(e,["outputUri"],P),s}function lR(t,e){const n={},s=d(t,["baseModel"]);s!=null&&h(n,["baseModel"],s);const r=d(t,["preTunedModel"]);r!=null&&h(n,["preTunedModel"],r);const l=d(t,["trainingDataset"]);l!=null&&_R(l);const u=d(t,["config"]);return u!=null&&rR(u,n),n}function uR(t,e){const n={},s=d(t,["baseModel"]);s!=null&&h(n,["baseModel"],s);const r=d(t,["preTunedModel"]);r!=null&&h(n,["preTunedModel"],r);const l=d(t,["trainingDataset"]);l!=null&&bR(l,n,e);const u=d(t,["config"]);return u!=null&&aR(u,n,e),n}function cR(t,e){const n={},s=d(t,["name"]);return s!=null&&h(n,["_url","name"],s),n}function dR(t,e){const n={},s=d(t,["name"]);return s!=null&&h(n,["_url","name"],s),n}function fR(t,e,n){const s={},r=d(t,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const l=d(t,["pageToken"]);e!==void 0&&l!=null&&h(e,["_query","pageToken"],l);const u=d(t,["filter"]);return e!==void 0&&u!=null&&h(e,["_query","filter"],u),s}function hR(t,e,n){const s={},r=d(t,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const l=d(t,["pageToken"]);e!==void 0&&l!=null&&h(e,["_query","pageToken"],l);const u=d(t,["filter"]);return e!==void 0&&u!=null&&h(e,["_query","filter"],u),s}function pR(t,e){const n={},s=d(t,["config"]);return s!=null&&fR(s,n),n}function mR(t,e){const n={},s=d(t,["config"]);return s!=null&&hR(s,n),n}function gR(t,e){const n={},s=d(t,["sdkHttpResponse"]);s!=null&&h(n,["sdkHttpResponse"],s);const r=d(t,["nextPageToken"]);r!=null&&h(n,["nextPageToken"],r);const l=d(t,["tunedModels"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(f=>Uv(f))),h(n,["tuningJobs"],u)}return n}function yR(t,e){const n={},s=d(t,["sdkHttpResponse"]);s!=null&&h(n,["sdkHttpResponse"],s);const r=d(t,["nextPageToken"]);r!=null&&h(n,["nextPageToken"],r);const l=d(t,["tuningJobs"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(f=>Ed(f))),h(n,["tuningJobs"],u)}return n}function vR(t,e){const n={},s=d(t,["name"]);s!=null&&h(n,["model"],s);const r=d(t,["name"]);return r!=null&&h(n,["endpoint"],r),n}function _R(t,e){const n={};if(d(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=d(t,["examples"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>l)),h(n,["examples","examples"],r)}return n}function bR(t,e,n){const s={};let r=d(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const u=d(t,["gcsUri"]);e!==void 0&&u!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(r==="PREFERENCE_TUNING"){const u=d(t,["gcsUri"]);e!==void 0&&u!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}else if(r==="DISTILLATION"){const u=d(t,["gcsUri"]);e!==void 0&&u!=null&&h(e,["distillationSpec","promptDatasetUri"],u)}let l=d(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const u=d(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(l==="PREFERENCE_TUNING"){const u=d(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}else if(l==="DISTILLATION"){const u=d(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&h(e,["distillationSpec","promptDatasetUri"],u)}if(d(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function Uv(t,e){const n={},s=d(t,["sdkHttpResponse"]);s!=null&&h(n,["sdkHttpResponse"],s);const r=d(t,["name"]);r!=null&&h(n,["name"],r);const l=d(t,["state"]);l!=null&&h(n,["state"],Q0(l));const u=d(t,["createTime"]);u!=null&&h(n,["createTime"],u);const f=d(t,["tuningTask","startTime"]);f!=null&&h(n,["startTime"],f);const m=d(t,["tuningTask","completeTime"]);m!=null&&h(n,["endTime"],m);const p=d(t,["updateTime"]);p!=null&&h(n,["updateTime"],p);const y=d(t,["description"]);y!=null&&h(n,["description"],y);const b=d(t,["baseModel"]);b!=null&&h(n,["baseModel"],b);const x=d(t,["_self"]);return x!=null&&h(n,["tunedModel"],vR(x)),n}function Ed(t,e){const n={},s=d(t,["sdkHttpResponse"]);s!=null&&h(n,["sdkHttpResponse"],s);const r=d(t,["name"]);r!=null&&h(n,["name"],r);const l=d(t,["state"]);l!=null&&h(n,["state"],Q0(l));const u=d(t,["createTime"]);u!=null&&h(n,["createTime"],u);const f=d(t,["startTime"]);f!=null&&h(n,["startTime"],f);const m=d(t,["endTime"]);m!=null&&h(n,["endTime"],m);const p=d(t,["updateTime"]);p!=null&&h(n,["updateTime"],p);const y=d(t,["error"]);y!=null&&h(n,["error"],y);const b=d(t,["description"]);b!=null&&h(n,["description"],b);const x=d(t,["baseModel"]);x!=null&&h(n,["baseModel"],x);const w=d(t,["tunedModel"]);w!=null&&h(n,["tunedModel"],w);const E=d(t,["preTunedModel"]);E!=null&&h(n,["preTunedModel"],E);const A=d(t,["supervisedTuningSpec"]);A!=null&&h(n,["supervisedTuningSpec"],A);const C=d(t,["preferenceOptimizationSpec"]);C!=null&&h(n,["preferenceOptimizationSpec"],C);const I=d(t,["distillationSpec"]);I!=null&&h(n,["distillationSpec"],I);const O=d(t,["tuningDataStats"]);O!=null&&h(n,["tuningDataStats"],O);const D=d(t,["encryptionSpec"]);D!=null&&h(n,["encryptionSpec"],D);const P=d(t,["partnerModelTuningSpec"]);P!=null&&h(n,["partnerModelTuningSpec"],P);const N=d(t,["customBaseModel"]);N!=null&&h(n,["customBaseModel"],N);const H=d(t,["experiment"]);H!=null&&h(n,["experiment"],H);const V=d(t,["labels"]);V!=null&&h(n,["labels"],V);const Z=d(t,["outputUri"]);Z!=null&&h(n,["outputUri"],Z);const Y=d(t,["pipelineJob"]);Y!=null&&h(n,["pipelineJob"],Y);const ee=d(t,["serviceAccount"]);ee!=null&&h(n,["serviceAccount"],ee);const fe=d(t,["tunedModelDisplayName"]);fe!=null&&h(n,["tunedModelDisplayName"],fe);const he=d(t,["veoTuningSpec"]);return he!=null&&h(n,["veoTuningSpec"],he),n}function xR(t,e){const n={},s=d(t,["sdkHttpResponse"]);s!=null&&h(n,["sdkHttpResponse"],s);const r=d(t,["name"]);r!=null&&h(n,["name"],r);const l=d(t,["metadata"]);l!=null&&h(n,["metadata"],l);const u=d(t,["done"]);u!=null&&h(n,["done"],u);const f=d(t,["error"]);return f!=null&&h(n,["error"],f),n}function Wc(t,e){const n={},s=d(t,["gcsUri"]);s!=null&&h(n,["validationDatasetUri"],s);const r=d(t,["vertexDatasetResource"]);return r!=null&&h(n,["validationDatasetUri"],r),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class SR extends zn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ji(Gn.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var s;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel};!((s=n.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(r.checkpointId=n.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},n),{preTunedModel:r});return l.baseModel=void 0,await this.tuneInternal(l)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),l=await this.tuneMldevInternal(r);let u="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?u=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(u=l.name.split("/operations/")[0]),{name:u,state:fd.JOB_STATE_QUEUED}}}}async getInternal(e){var n,s,r,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=dR(e);return f=Q("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(b=>{const x=b;return x.sdkHttpResponse={headers:y.headers},x})),u.then(y=>Ed(y))}else{const p=cR(e);return f=Q("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(b=>{const x=b;return x.sdkHttpResponse={headers:y.headers},x})),u.then(y=>Uv(y))}}async listInternal(e){var n,s,r,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=mR(e);return f=Q("tuningJobs",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(b=>{const x=b;return x.sdkHttpResponse={headers:y.headers},x})),u.then(y=>{const b=yR(y),x=new Cy;return Object.assign(x,b),x})}else{const p=pR(e);return f=Q("tunedModels",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(b=>{const x=b;return x.sdkHttpResponse={headers:y.headers},x})),u.then(y=>{const b=gR(y),x=new Cy;return Object.assign(x,b),x})}}async cancel(e){var n,s,r,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=iR(e);return f=Q("{name}:cancel",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(b=>{const x=b;return x.sdkHttpResponse={headers:y.headers},x})),u.then(y=>{const b=oR(y),x=new Ny;return Object.assign(x,b),x})}else{const p=nR(e);return f=Q("{name}:cancel",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(b=>{const x=b;return x.sdkHttpResponse={headers:y.headers},x})),u.then(y=>{const b=sR(y),x=new Ny;return Object.assign(x,b),x})}}async tuneInternal(e){var n,s;let r,l="",u={};if(this.apiClient.isVertexAI()){const f=uR(e,e);return l=Q("tuningJobs",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const y=p;return y.sdkHttpResponse={headers:m.headers},y})),r.then(m=>Ed(m))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,s;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=lR(e);return l=Q("tunedModels",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const y=p;return y.sdkHttpResponse={headers:m.headers},y})),r.then(m=>xR(m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wR{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const TR=1024*1024*8,ER=3,AR=1e3,CR=2,ul="x-goog-upload-status";async function NR(t,e,n){var s;const r=await Pv(t,e,n),l=await(r==null?void 0:r.json());if(((s=r==null?void 0:r.headers)===null||s===void 0?void 0:s[ul])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function RR(t,e,n){var s;const r=await Pv(t,e,n),l=await(r==null?void 0:r.json());if(((s=r==null?void 0:r.headers)===null||s===void 0?void 0:s[ul])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=j0(l),f=new Jd;return Object.assign(f,u),f}async function Pv(t,e,n){var s,r;let l=0,u=0,f=new pd(new Response),m="upload";for(l=t.size;u<l;){const p=Math.min(TR,l-u),y=t.slice(u,u+p);u+p>=l&&(m+=", finalize");let b=0,x=AR;for(;b<ER&&(f=await n.request({path:"",body:y,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":String(u),"Content-Length":String(p)}}}),!(!((s=f==null?void 0:f.headers)===null||s===void 0)&&s[ul]));)b++,await IR(x),x=x*CR;if(u+=p,((r=f==null?void 0:f.headers)===null||r===void 0?void 0:r[ul])!=="active")break;if(l<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return f}async function kR(t){return{size:t.size,type:t.type}}function IR(t){return new Promise(e=>setTimeout(e,t))}class MR{async upload(e,n,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await NR(e,n,s)}async uploadToFileSearchStore(e,n,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await RR(e,n,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await kR(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class DR{create(e,n,s){return new UR(e,n,s)}}class UR{constructor(e,n,s){this.url=e,this.headers=n,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const t0="x-goog-api-key";class PR{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(t0)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(t0,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const OR="gl-node/";class LR{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new ut({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const s=CS(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new PR(this.apiKey);this.apiClient=new kC({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:OR+"web",uploader:new MR,downloader:new wR}),this.models=new KC(this.apiClient),this.live=new VC(this.apiClient,r,new DR),this.batches=new iT(this.apiClient),this.chats=new qT(this.models,this.apiClient),this.caches=new PT(this.apiClient),this.files=new QT(this.apiClient),this.operations=new QC(this.apiClient),this.authTokens=new fN(this.apiClient),this.tunings=new SR(this.apiClient),this.fileSearchStores=new bN(this.apiClient)}}function xl(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(n[s[r]]=t[s[r]]);return n}function qR(t,e,n,s){function r(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function f(y){try{p(s.next(y))}catch(b){u(b)}}function m(y){try{p(s.throw(y))}catch(b){u(b)}}function p(y){y.done?l(y.value):r(y.value).then(f,m)}p((s=s.apply(t,e||[])).next())})}const BR=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class tf extends Error{constructor(e,n="FunctionsError",s){super(e),this.name=n,this.context=s}}class GR extends tf{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class n0 extends tf{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class i0 extends tf{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Ad;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Ad||(Ad={}));class zR{constructor(e,{headers:n={},customFetch:s,region:r=Ad.Any}={}){this.url=e,this.headers=n,this.region=r,this.fetch=BR(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return qR(this,arguments,void 0,function*(n,s={}){var r;let l,u;try{const{headers:f,method:m,body:p,signal:y,timeout:b}=s;let x={},{region:w}=s;w||(w=this.region);const E=new URL(`${this.url}/${n}`);w&&w!=="any"&&(x["x-region"]=w,E.searchParams.set("forceFunctionRegion",w));let A;p&&(f&&!Object.prototype.hasOwnProperty.call(f,"Content-Type")||!f)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(x["Content-Type"]="application/octet-stream",A=p):typeof p=="string"?(x["Content-Type"]="text/plain",A=p):typeof FormData<"u"&&p instanceof FormData?A=p:(x["Content-Type"]="application/json",A=JSON.stringify(p)):p&&typeof p!="string"&&!(typeof Blob<"u"&&p instanceof Blob)&&!(p instanceof ArrayBuffer)&&!(typeof FormData<"u"&&p instanceof FormData)?A=JSON.stringify(p):A=p;let C=y;b&&(u=new AbortController,l=setTimeout(()=>u.abort(),b),y?(C=u.signal,y.addEventListener("abort",()=>u.abort())):C=u.signal);const I=yield this.fetch(E.toString(),{method:m||"POST",headers:Object.assign(Object.assign(Object.assign({},x),this.headers),f),body:A,signal:C}).catch(N=>{throw new GR(N)}),O=I.headers.get("x-relay-error");if(O&&O==="true")throw new n0(I);if(!I.ok)throw new i0(I);let D=((r=I.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),P;return D==="application/json"?P=yield I.json():D==="application/octet-stream"||D==="application/pdf"?P=yield I.blob():D==="text/event-stream"?P=I:D==="multipart/form-data"?P=yield I.formData():P=yield I.text(),{data:P,error:null,response:I}}catch(f){return{data:null,error:f,response:f instanceof i0||f instanceof n0?f.context:void 0}}finally{l&&clearTimeout(l)}})}}var lt={},Ms={},Ds={},Us={},Ps={},Os={},HR=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ws=HR();const VR=Ws.fetch,Ov=Ws.fetch.bind(Ws),Lv=Ws.Headers,jR=Ws.Request,$R=Ws.Response,FR=Object.freeze(Object.defineProperty({__proto__:null,Headers:Lv,Request:jR,Response:$R,default:Ov,fetch:VR},Symbol.toStringTag,{value:"Module"})),JR=kx(FR);var Ja={},s0;function qv(){if(s0)return Ja;s0=1,Object.defineProperty(Ja,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Ja.default=t,Ja}var o0;function Bv(){if(o0)return Os;o0=1;var t=Os&&Os.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Os,"__esModule",{value:!0});const e=t(JR),n=t(qv());class s{constructor(l){var u,f;this.shouldThrowOnError=!1,this.method=l.method,this.url=l.url,this.headers=new Headers(l.headers),this.schema=l.schema,this.body=l.body,this.shouldThrowOnError=(u=l.shouldThrowOnError)!==null&&u!==void 0?u:!1,this.signal=l.signal,this.isMaybeSingle=(f=l.isMaybeSingle)!==null&&f!==void 0?f:!1,l.fetch?this.fetch=l.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(l,u){return this.headers=new Headers(this.headers),this.headers.set(l,u),this}then(l,u){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const f=this.fetch;let m=f(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async p=>{var y,b,x,w;let E=null,A=null,C=null,I=p.status,O=p.statusText;if(p.ok){if(this.method!=="HEAD"){const H=await p.text();H===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((y=this.headers.get("Accept"))===null||y===void 0)&&y.includes("application/vnd.pgrst.plan+text"))?A=H:A=JSON.parse(H))}const P=(b=this.headers.get("Prefer"))===null||b===void 0?void 0:b.match(/count=(exact|planned|estimated)/),N=(x=p.headers.get("content-range"))===null||x===void 0?void 0:x.split("/");P&&N&&N.length>1&&(C=parseInt(N[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(A)&&(A.length>1?(E={code:"PGRST116",details:`Results contain ${A.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},A=null,C=null,I=406,O="Not Acceptable"):A.length===1?A=A[0]:A=null)}else{const P=await p.text();try{E=JSON.parse(P),Array.isArray(E)&&p.status===404&&(A=[],E=null,I=200,O="OK")}catch{p.status===404&&P===""?(I=204,O="No Content"):E={message:P}}if(E&&this.isMaybeSingle&&(!((w=E==null?void 0:E.details)===null||w===void 0)&&w.includes("0 rows"))&&(E=null,I=200,O="OK"),E&&this.shouldThrowOnError)throw new n.default(E)}return{error:E,data:A,count:C,status:I,statusText:O}});return this.shouldThrowOnError||(m=m.catch(p=>{var y,b,x;return{error:{message:`${(y=p==null?void 0:p.name)!==null&&y!==void 0?y:"FetchError"}: ${p==null?void 0:p.message}`,details:`${(b=p==null?void 0:p.stack)!==null&&b!==void 0?b:""}`,hint:"",code:`${(x=p==null?void 0:p.code)!==null&&x!==void 0?x:""}`},data:null,count:null,status:0,statusText:""}})),m.then(l,u)}returns(){return this}overrideTypes(){return this}}return Os.default=s,Os}var r0;function Gv(){if(r0)return Ps;r0=1;var t=Ps&&Ps.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Ps,"__esModule",{value:!0});const e=t(Bv());class n extends e.default{select(r){let l=!1;const u=(r??"*").split("").map(f=>/\s/.test(f)&&!l?"":(f==='"'&&(l=!l),f)).join("");return this.url.searchParams.set("select",u),this.headers.append("Prefer","return=representation"),this}order(r,{ascending:l=!0,nullsFirst:u,foreignTable:f,referencedTable:m=f}={}){const p=m?`${m}.order`:"order",y=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${y?`${y},`:""}${r}.${l?"asc":"desc"}${u===void 0?"":u?".nullsfirst":".nullslast"}`),this}limit(r,{foreignTable:l,referencedTable:u=l}={}){const f=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(f,`${r}`),this}range(r,l,{foreignTable:u,referencedTable:f=u}={}){const m=typeof f>"u"?"offset":`${f}.offset`,p=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(m,`${r}`),this.url.searchParams.set(p,`${l-r+1}`),this}abortSignal(r){return this.signal=r,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:r=!1,verbose:l=!1,settings:u=!1,buffers:f=!1,wal:m=!1,format:p="text"}={}){var y;const b=[r?"analyze":null,l?"verbose":null,u?"settings":null,f?"buffers":null,m?"wal":null].filter(Boolean).join("|"),x=(y=this.headers.get("Accept"))!==null&&y!==void 0?y:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${p}; for="${x}"; options=${b};`),p==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(r){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${r}`),this}}return Ps.default=n,Ps}var a0;function nf(){if(a0)return Us;a0=1;var t=Us&&Us.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Us,"__esModule",{value:!0});const e=t(Gv());class n extends e.default{eq(r,l){return this.url.searchParams.append(r,`eq.${l}`),this}neq(r,l){return this.url.searchParams.append(r,`neq.${l}`),this}gt(r,l){return this.url.searchParams.append(r,`gt.${l}`),this}gte(r,l){return this.url.searchParams.append(r,`gte.${l}`),this}lt(r,l){return this.url.searchParams.append(r,`lt.${l}`),this}lte(r,l){return this.url.searchParams.append(r,`lte.${l}`),this}like(r,l){return this.url.searchParams.append(r,`like.${l}`),this}likeAllOf(r,l){return this.url.searchParams.append(r,`like(all).{${l.join(",")}}`),this}likeAnyOf(r,l){return this.url.searchParams.append(r,`like(any).{${l.join(",")}}`),this}ilike(r,l){return this.url.searchParams.append(r,`ilike.${l}`),this}ilikeAllOf(r,l){return this.url.searchParams.append(r,`ilike(all).{${l.join(",")}}`),this}ilikeAnyOf(r,l){return this.url.searchParams.append(r,`ilike(any).{${l.join(",")}}`),this}is(r,l){return this.url.searchParams.append(r,`is.${l}`),this}in(r,l){const u=Array.from(new Set(l)).map(f=>typeof f=="string"&&new RegExp("[,()]").test(f)?`"${f}"`:`${f}`).join(",");return this.url.searchParams.append(r,`in.(${u})`),this}contains(r,l){return typeof l=="string"?this.url.searchParams.append(r,`cs.${l}`):Array.isArray(l)?this.url.searchParams.append(r,`cs.{${l.join(",")}}`):this.url.searchParams.append(r,`cs.${JSON.stringify(l)}`),this}containedBy(r,l){return typeof l=="string"?this.url.searchParams.append(r,`cd.${l}`):Array.isArray(l)?this.url.searchParams.append(r,`cd.{${l.join(",")}}`):this.url.searchParams.append(r,`cd.${JSON.stringify(l)}`),this}rangeGt(r,l){return this.url.searchParams.append(r,`sr.${l}`),this}rangeGte(r,l){return this.url.searchParams.append(r,`nxl.${l}`),this}rangeLt(r,l){return this.url.searchParams.append(r,`sl.${l}`),this}rangeLte(r,l){return this.url.searchParams.append(r,`nxr.${l}`),this}rangeAdjacent(r,l){return this.url.searchParams.append(r,`adj.${l}`),this}overlaps(r,l){return typeof l=="string"?this.url.searchParams.append(r,`ov.${l}`):this.url.searchParams.append(r,`ov.{${l.join(",")}}`),this}textSearch(r,l,{config:u,type:f}={}){let m="";f==="plain"?m="pl":f==="phrase"?m="ph":f==="websearch"&&(m="w");const p=u===void 0?"":`(${u})`;return this.url.searchParams.append(r,`${m}fts${p}.${l}`),this}match(r){return Object.entries(r).forEach(([l,u])=>{this.url.searchParams.append(l,`eq.${u}`)}),this}not(r,l,u){return this.url.searchParams.append(r,`not.${l}.${u}`),this}or(r,{foreignTable:l,referencedTable:u=l}={}){const f=u?`${u}.or`:"or";return this.url.searchParams.append(f,`(${r})`),this}filter(r,l,u){return this.url.searchParams.append(r,`${l}.${u}`),this}}return Us.default=n,Us}var l0;function zv(){if(l0)return Ds;l0=1;var t=Ds&&Ds.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Ds,"__esModule",{value:!0});const e=t(nf());class n{constructor(r,{headers:l={},schema:u,fetch:f}){this.url=r,this.headers=new Headers(l),this.schema=u,this.fetch=f}select(r,{head:l=!1,count:u}={}){const f=l?"HEAD":"GET";let m=!1;const p=(r??"*").split("").map(y=>/\s/.test(y)&&!m?"":(y==='"'&&(m=!m),y)).join("");return this.url.searchParams.set("select",p),u&&this.headers.append("Prefer",`count=${u}`),new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(r,{count:l,defaultToNull:u=!0}={}){var f;const m="POST";if(l&&this.headers.append("Prefer",`count=${l}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(r)){const p=r.reduce((y,b)=>y.concat(Object.keys(b)),[]);if(p.length>0){const y=[...new Set(p)].map(b=>`"${b}"`);this.url.searchParams.set("columns",y.join(","))}}return new e.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}upsert(r,{onConflict:l,ignoreDuplicates:u=!1,count:f,defaultToNull:m=!0}={}){var p;const y="POST";if(this.headers.append("Prefer",`resolution=${u?"ignore":"merge"}-duplicates`),l!==void 0&&this.url.searchParams.set("on_conflict",l),f&&this.headers.append("Prefer",`count=${f}`),m||this.headers.append("Prefer","missing=default"),Array.isArray(r)){const b=r.reduce((x,w)=>x.concat(Object.keys(w)),[]);if(b.length>0){const x=[...new Set(b)].map(w=>`"${w}"`);this.url.searchParams.set("columns",x.join(","))}}return new e.default({method:y,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}update(r,{count:l}={}){var u;const f="PATCH";return l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}delete({count:r}={}){var l;const u="DELETE";return r&&this.headers.append("Prefer",`count=${r}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}}return Ds.default=n,Ds}var u0;function YR(){if(u0)return Ms;u0=1;var t=Ms&&Ms.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ms,"__esModule",{value:!0});const e=t(zv()),n=t(nf());class s{constructor(l,{headers:u={},schema:f,fetch:m}={}){this.url=l,this.headers=new Headers(u),this.schemaName=f,this.fetch=m}from(l){const u=new URL(`${this.url}/${l}`);return new e.default(u,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new s(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,u={},{head:f=!1,get:m=!1,count:p}={}){var y;let b;const x=new URL(`${this.url}/rpc/${l}`);let w;f||m?(b=f?"HEAD":"GET",Object.entries(u).filter(([A,C])=>C!==void 0).map(([A,C])=>[A,Array.isArray(C)?`{${C.join(",")}}`:`${C}`]).forEach(([A,C])=>{x.searchParams.append(A,C)})):(b="POST",w=u);const E=new Headers(this.headers);return p&&E.set("Prefer",`count=${p}`),new n.default({method:b,url:x,headers:E,schema:this.schemaName,body:w,fetch:(y=this.fetch)!==null&&y!==void 0?y:fetch})}}return Ms.default=s,Ms}var c0;function KR(){if(c0)return lt;c0=1;var t=lt&&lt.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(lt,"__esModule",{value:!0}),lt.PostgrestError=lt.PostgrestBuilder=lt.PostgrestTransformBuilder=lt.PostgrestFilterBuilder=lt.PostgrestQueryBuilder=lt.PostgrestClient=void 0;const e=t(YR());lt.PostgrestClient=e.default;const n=t(zv());lt.PostgrestQueryBuilder=n.default;const s=t(nf());lt.PostgrestFilterBuilder=s.default;const r=t(Gv());lt.PostgrestTransformBuilder=r.default;const l=t(Bv());lt.PostgrestBuilder=l.default;const u=t(qv());return lt.PostgrestError=u.default,lt.default={PostgrestClient:e.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:r.default,PostgrestBuilder:l.default,PostgrestError:u.default},lt}var QR=KR();const XR=Od(QR),{PostgrestClient:WR,PostgrestQueryBuilder:K1,PostgrestFilterBuilder:Q1,PostgrestTransformBuilder:X1,PostgrestBuilder:W1,PostgrestError:Z1}=XR;class ZR{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const s=n.versions;if(s&&s.node){const r=s.node,l=parseInt(r.replace(/^v/,"").split(".")[0]);return l>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${l} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${l} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const s=this.getWebSocketConstructor();return new s(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const ek="2.93.3",tk=`realtime-js/${ek}`,nk="1.0.0",Hv="2.0.0",d0=Hv,Cd=1e4,ik=1e3,sk=100;var mi;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(mi||(mi={}));var ot;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(ot||(ot={}));var cn;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(cn||(cn={}));var Nd;(function(t){t.websocket="websocket"})(Nd||(Nd={}));var zi;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(zi||(zi={}));class ok{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let s=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,s;const r=(s=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&s!==void 0?s:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,r)}_encodeJsonUserBroadcastPush(e){var n,s;const r=(s=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&s!==void 0?s:{},u=new TextEncoder().encode(JSON.stringify(r)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,u)}_encodeUserBroadcastPush(e,n,s){var r,l;const u=e.topic,f=(r=e.ref)!==null&&r!==void 0?r:"",m=(l=e.join_ref)!==null&&l!==void 0?l:"",p=e.payload.event,y=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},b=Object.keys(y).length===0?"":JSON.stringify(y);if(m.length>255)throw new Error(`joinRef length ${m.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`ref length ${f.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`topic length ${u.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`userEvent length ${p.length} exceeds maximum of 255`);if(b.length>255)throw new Error(`metadata length ${b.length} exceeds maximum of 255`);const x=this.USER_BROADCAST_PUSH_META_LENGTH+m.length+f.length+u.length+p.length+b.length,w=new ArrayBuffer(this.HEADER_LENGTH+x);let E=new DataView(w),A=0;E.setUint8(A++,this.KINDS.userBroadcastPush),E.setUint8(A++,m.length),E.setUint8(A++,f.length),E.setUint8(A++,u.length),E.setUint8(A++,p.length),E.setUint8(A++,b.length),E.setUint8(A++,n),Array.from(m,I=>E.setUint8(A++,I.charCodeAt(0))),Array.from(f,I=>E.setUint8(A++,I.charCodeAt(0))),Array.from(u,I=>E.setUint8(A++,I.charCodeAt(0))),Array.from(p,I=>E.setUint8(A++,I.charCodeAt(0))),Array.from(b,I=>E.setUint8(A++,I.charCodeAt(0)));var C=new Uint8Array(w.byteLength+s.byteLength);return C.set(new Uint8Array(w),0),C.set(new Uint8Array(s),w.byteLength),C.buffer}decode(e,n){if(this._isArrayBuffer(e)){let s=this._binaryDecode(e);return n(s)}if(typeof e=="string"){const s=JSON.parse(e),[r,l,u,f,m]=s;return n({join_ref:r,ref:l,topic:u,event:f,payload:m})}return n({})}_binaryDecode(e){const n=new DataView(e),s=n.getUint8(0),r=new TextDecoder;switch(s){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,r)}}_decodeUserBroadcast(e,n,s){const r=n.getUint8(1),l=n.getUint8(2),u=n.getUint8(3),f=n.getUint8(4);let m=this.HEADER_LENGTH+4;const p=s.decode(e.slice(m,m+r));m=m+r;const y=s.decode(e.slice(m,m+l));m=m+l;const b=s.decode(e.slice(m,m+u));m=m+u;const x=e.slice(m,e.byteLength),w=f===this.JSON_ENCODING?JSON.parse(s.decode(x)):x,E={type:this.BROADCAST_EVENT,event:y,payload:w};return u>0&&(E.meta=JSON.parse(b)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST_EVENT,payload:E}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([s])=>n.includes(s)))}}class Vv{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var He;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(He||(He={}));const f0=(t,e,n={})=>{var s;const r=(s=n.skipTypes)!==null&&s!==void 0?s:[];return e?Object.keys(e).reduce((l,u)=>(l[u]=rk(u,t,e,r),l),{}):{}},rk=(t,e,n,s)=>{const r=e.find(f=>f.name===t),l=r==null?void 0:r.type,u=n[t];return l&&!s.includes(l)?jv(l,u):Rd(u)},jv=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return ck(e,n)}switch(t){case He.bool:return ak(e);case He.float4:case He.float8:case He.int2:case He.int4:case He.int8:case He.numeric:case He.oid:return lk(e);case He.json:case He.jsonb:return uk(e);case He.timestamp:return dk(e);case He.abstime:case He.date:case He.daterange:case He.int4range:case He.int8range:case He.money:case He.reltime:case He.text:case He.time:case He.timestamptz:case He.timetz:case He.tsrange:case He.tstzrange:return Rd(e);default:return Rd(e)}},Rd=t=>t,ak=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},lk=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},uk=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},ck=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,s=t[n];if(t[0]==="{"&&s==="}"){let l;const u=t.slice(1,n);try{l=JSON.parse("["+u+"]")}catch{l=u?u.split(","):[]}return l.map(f=>jv(e,f))}return t},dk=t=>typeof t=="string"?t.replace(" ","T"):t,$v=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Zc{constructor(e,n,s={},r=Cd){this.channel=e,this.event=n,this.payload=s,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var s;return this._hasReceived(e)&&n((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var h0;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(h0||(h0={}));class ar{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},r=>{const{onJoin:l,onLeave:u,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ar.syncState(this.state,r,l,u),this.pendingDiffs.forEach(m=>{this.state=ar.syncDiff(this.state,m,l,u)}),this.pendingDiffs=[],f()}),this.channel._on(s.diff,{},r=>{const{onJoin:l,onLeave:u,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=ar.syncDiff(this.state,r,l,u),f())}),this.onJoin((r,l,u)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:l,newPresences:u})}),this.onLeave((r,l,u)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:l,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,s,r){const l=this.cloneDeep(e),u=this.transformState(n),f={},m={};return this.map(l,(p,y)=>{u[p]||(m[p]=y)}),this.map(u,(p,y)=>{const b=l[p];if(b){const x=y.map(C=>C.presence_ref),w=b.map(C=>C.presence_ref),E=y.filter(C=>w.indexOf(C.presence_ref)<0),A=b.filter(C=>x.indexOf(C.presence_ref)<0);E.length>0&&(f[p]=E),A.length>0&&(m[p]=A)}else f[p]=y}),this.syncDiff(l,{joins:f,leaves:m},s,r)}static syncDiff(e,n,s,r){const{joins:l,leaves:u}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return s||(s=()=>{}),r||(r=()=>{}),this.map(l,(f,m)=>{var p;const y=(p=e[f])!==null&&p!==void 0?p:[];if(e[f]=this.cloneDeep(m),y.length>0){const b=e[f].map(w=>w.presence_ref),x=y.filter(w=>b.indexOf(w.presence_ref)<0);e[f].unshift(...x)}s(f,y,m)}),this.map(u,(f,m)=>{let p=e[f];if(!p)return;const y=m.map(b=>b.presence_ref);p=p.filter(b=>y.indexOf(b.presence_ref)<0),e[f]=p,r(f,p,m),p.length===0&&delete e[f]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(s=>n(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,s)=>{const r=e[s];return"metas"in r?n[s]=r.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):n[s]=r,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var p0;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(p0||(p0={}));var lr;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(lr||(lr={}));var Bn;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Bn||(Bn={}));class Ys{constructor(e,n={config:{}},s){var r,l;if(this.topic=e,this.params=n,this.socket=s,this.bindings={},this.state=ot.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Zc(this,cn.join,this.params,this.timeout),this.rejoinTimer=new Vv(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ot.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ot.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=ot.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ot.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=ot.errored,this.rejoinTimer.scheduleTimeout())}),this._on(cn.reply,{},(u,f)=>{this._trigger(this._replyEventName(f),u)}),this.presence=new ar(this),this.broadcastEndpointURL=$v(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(r=this.params.config)===null||r===void 0?void 0:r.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var s,r,l;if(this.socket.isConnected()||this.socket.connect(),this.state==ot.closed){const{config:{broadcast:u,presence:f,private:m}}=this.params,p=(r=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(w=>w.filter))!==null&&r!==void 0?r:[],y=!!this.bindings[lr.PRESENCE]&&this.bindings[lr.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,b={},x={broadcast:u,presence:Object.assign(Object.assign({},f),{enabled:y}),postgres_changes:p,private:m};this.socket.accessTokenValue&&(b.access_token=this.socket.accessTokenValue),this._onError(w=>e==null?void 0:e(Bn.CHANNEL_ERROR,w)),this._onClose(()=>e==null?void 0:e(Bn.CLOSED)),this.updateJoinPayload(Object.assign({config:x},b)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:w})=>{var E;if(this.socket._isManualToken()||this.socket.setAuth(),w===void 0){e==null||e(Bn.SUBSCRIBED);return}else{const A=this.bindings.postgres_changes,C=(E=A==null?void 0:A.length)!==null&&E!==void 0?E:0,I=[];for(let O=0;O<C;O++){const D=A[O],{filter:{event:P,schema:N,table:H,filter:V}}=D,Z=w&&w[O];if(Z&&Z.event===P&&Ys.isFilterValueEqual(Z.schema,N)&&Ys.isFilterValueEqual(Z.table,H)&&Ys.isFilterValueEqual(Z.filter,V))I.push(Object.assign(Object.assign({},D),{id:Z.id}));else{this.unsubscribe(),this.state=ot.errored,e==null||e(Bn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=I,e&&e(Bn.SUBSCRIBED);return}}).receive("error",w=>{this.state=ot.errored,e==null||e(Bn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(w).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Bn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,s){return this.state===ot.joined&&e===lr.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,s)}async httpSend(e,n,s={}){var r;if(n==null)return Promise.reject("Payload is required for httpSend()");const l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const u={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},f=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(r=s.timeout)!==null&&r!==void 0?r:this.timeout);if(f.status===202)return{success:!0};let m=f.statusText;try{const p=await f.json();m=p.error||p.message||m}catch{}return Promise.reject(new Error(m))}async send(e,n={}){var s,r;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:u}=e,f={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(f.Authorization=`Bearer ${this.socket.accessTokenValue}`);const m={method:"POST",headers:f,body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:u,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);return await((r=p.body)===null||r===void 0?void 0:r.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var u,f,m;const p=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((m=(f=(u=this.params)===null||u===void 0?void 0:u.config)===null||f===void 0?void 0:f.broadcast)===null||m===void 0)&&m.ack)&&l("ok"),p.receive("ok",()=>l("ok")),p.receive("error",()=>l("error")),p.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ot.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(cn.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(r=>{s=new Zc(this,cn.leave,{},e),s.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ot.closed,this.bindings={}}async _fetchWithTimeout(e,n,s){const r=new AbortController,l=setTimeout(()=>r.abort(),s),u=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:r.signal}));return clearTimeout(l),u}_push(e,n,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new Zc(this,e,n,s);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>sk){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,s){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,s){var r,l;const u=e.toLocaleLowerCase(),{close:f,error:m,leave:p,join:y}=cn;if(s&&[f,m,p,y].indexOf(u)>=0&&s!==this._joinRef())return;let x=this._onMessage(u,n,s);if(n&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(w=>{var E,A,C;return((E=w.filter)===null||E===void 0?void 0:E.event)==="*"||((C=(A=w.filter)===null||A===void 0?void 0:A.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===u}).map(w=>w.callback(x,s)):(l=this.bindings[u])===null||l===void 0||l.filter(w=>{var E,A,C,I,O,D;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in w){const P=w.id,N=(E=w.filter)===null||E===void 0?void 0:E.event;return P&&((A=n.ids)===null||A===void 0?void 0:A.includes(P))&&(N==="*"||(N==null?void 0:N.toLocaleLowerCase())===((C=n.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))}else{const P=(O=(I=w==null?void 0:w.filter)===null||I===void 0?void 0:I.event)===null||O===void 0?void 0:O.toLocaleLowerCase();return P==="*"||P===((D=n==null?void 0:n.event)===null||D===void 0?void 0:D.toLocaleLowerCase())}else return w.type.toLocaleLowerCase()===u}).map(w=>{if(typeof x=="object"&&"ids"in x){const E=x.data,{schema:A,table:C,commit_timestamp:I,type:O,errors:D}=E;x=Object.assign(Object.assign({},{schema:A,table:C,commit_timestamp:I,eventType:O,new:{},old:{},errors:D}),this._getPayloadRecords(E))}w.callback(x,s)})}_isClosed(){return this.state===ot.closed}_isJoined(){return this.state===ot.joined}_isJoining(){return this.state===ot.joining}_isLeaving(){return this.state===ot.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,s){const r=e.toLocaleLowerCase(),l={type:r,filter:n,callback:s};return this.bindings[r]?this.bindings[r].push(l):this.bindings[r]=[l],this}_off(e,n){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(r=>{var l;return!(((l=r.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===s&&Ys.isEqual(r.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const s in e)if(e[s]!==n[s])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(cn.close,{},e)}_onError(e){this._on(cn.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ot.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=f0(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=f0(e.columns,e.old_record)),n}}const ed=()=>{},Ya={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},fk=[1e3,2e3,5e3,1e4],hk=1e4,pk=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class mk{constructor(e,n){var s;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Cd,this.transport=null,this.heartbeatIntervalMs=Ya.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ed,this.ref=0,this.reconnectTimer=null,this.vsn=d0,this.logger=ed,this.conn=null,this.sendBuffer=[],this.serializer=new ok,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=r=>r?(...l)=>r(...l):(...l)=>fetch(...l),!(!((s=n==null?void 0:n.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Nd.websocket}`,this.httpEndpoint=$v(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=ZR.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,s){this.logger(e,n,s)}connectionState(){switch(this.conn&&this.conn.readyState){case mi.connecting:return zi.Connecting;case mi.open:return zi.Open;case mi.closing:return zi.Closing;default:return zi.Closed}}isConnected(){return this.connectionState()===zi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const s=`realtime:${e}`,r=this.getChannels().find(l=>l.topic===s);if(r)return r;{const l=new Ys(`realtime:${e}`,n,this);return this.channels.push(l),l}}push(e){const{topic:n,event:s,payload:r,ref:l}=e,u=()=>{this.encode(e,f=>{var m;(m=this.conn)===null||m===void 0||m.send(f)})};this.log("push",`${n} ${s} (${l})`,r),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(ik,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Ya.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const p=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",p)}catch(y){this.log("error","error in heartbeat callback",y)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:s,event:r,payload:l,ref:u}=n,f=u?`(${u})`:"",m=l.status||"";this.log("receive",`${m} ${s} ${r} ${f}`.trim(),l),this.channels.filter(p=>p._isMember(s)).forEach(p=>p._trigger(r,l,u)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===mi.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===mi.open||this.conn.readyState===mi.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e);try{this.heartbeatCallback("error")}catch(n){this.log("error","error in heartbeat callback",n)}}_triggerChanError(){this.channels.forEach(e=>e._trigger(cn.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const s=e.match(/\?/)?"&":"?",r=new URLSearchParams(n);return`${e}${s}${r}`}_workerObjectUrl(e){let n;if(e)n=e;else{const s=new Blob([pk],{type:"application/javascript"});n=URL.createObjectURL(s)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,s=!1;if(e)n=e,s=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(r){this.log("error","Error fetching access token from callback",r),n=this.accessTokenValue}else n=this.accessTokenValue;s?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const l={access_token:n,version:tk};n&&r.updateJoinPayload(l),r.joinedOnce&&r._isJoined()&&r._push(cn.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(n)}catch(r){this.log("error",`error in ${e} callback`,r)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new Vv(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ya.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,s,r,l,u,f,m,p,y,b,x,w;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(s=e==null?void 0:e.timeout)!==null&&s!==void 0?s:Cd,this.heartbeatIntervalMs=(r=e==null?void 0:e.heartbeatIntervalMs)!==null&&r!==void 0?r:Ya.HEARTBEAT_INTERVAL,this.worker=(l=e==null?void 0:e.worker)!==null&&l!==void 0?l:!1,this.accessToken=(u=e==null?void 0:e.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(f=e==null?void 0:e.heartbeatCallback)!==null&&f!==void 0?f:ed,this.vsn=(m=e==null?void 0:e.vsn)!==null&&m!==void 0?m:d0,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=e==null?void 0:e.reconnectAfterMs)!==null&&p!==void 0?p:(E=>fk[E-1]||hk),this.vsn){case nk:this.encode=(y=e==null?void 0:e.encode)!==null&&y!==void 0?y:((E,A)=>A(JSON.stringify(E))),this.decode=(b=e==null?void 0:e.decode)!==null&&b!==void 0?b:((E,A)=>A(JSON.parse(E)));break;case Hv:this.encode=(x=e==null?void 0:e.encode)!==null&&x!==void 0?x:this.serializer.encode.bind(this.serializer),this.decode=(w=e==null?void 0:e.decode)!==null&&w!==void 0?w:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var fr=class extends Error{constructor(t,e){var n;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((n=e.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function gk(t,e,n){const s=new URL(e,t);if(n)for(const[r,l]of Object.entries(n))l!==void 0&&s.searchParams.set(r,l);return s.toString()}async function yk(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function vk(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:s,query:r,body:l,headers:u}){const f=gk(t.baseUrl,s,r),m=await yk(t.auth),p=await e(f,{method:n,headers:{...l?{"Content-Type":"application/json"}:{},...m,...u},body:l?JSON.stringify(l):void 0}),y=await p.text(),b=(p.headers.get("content-type")||"").includes("application/json"),x=b&&y?JSON.parse(y):y;if(!p.ok){const w=b?x:void 0,E=w==null?void 0:w.error;throw new fr((E==null?void 0:E.message)??`Request failed with status ${p.status}`,{status:p.status,icebergType:E==null?void 0:E.type,icebergCode:E==null?void 0:E.code,details:w})}return{status:p.status,headers:p.headers,data:x}}}}function Ka(t){return t.join("")}var _k=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:Ka(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(s=>({namespace:s}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ka(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ka(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ka(t.namespace)}`}),!0}catch(e){if(e instanceof fr&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof fr&&n.status===409)return;throw n}}};function Ls(t){return t.join("")}var bk=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ls(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ls(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ls(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ls(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ls(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ls(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof fr&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof fr&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},xk=class{constructor(t){var s;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=vk({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(s=t.accessDelegation)==null?void 0:s.join(","),this.namespaceOps=new _k(this.client,e),this.tableOps=new bk(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},Sl=class extends Error{constructor(t,e="storage",n,s){super(t),this.__isStorageError=!0,this.namespace=e,this.name=e==="vectors"?"StorageVectorsError":"StorageError",this.status=n,this.statusCode=s}};function wl(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var Qa=class extends Sl{constructor(t,e,n,s="storage"){super(t,s,e,n),this.name=s==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Fv=class extends Sl{constructor(t,e,n="storage"){super(t,n),this.name=n==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=e}};const Sk=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),wk=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},kd=t=>{if(Array.isArray(t))return t.map(n=>kd(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,s])=>{const r=n.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[r]=kd(s)}),e},Tk=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function hr(t){"@babel/helpers - typeof";return hr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hr(t)}function Ek(t,e){if(hr(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(hr(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ak(t){var e=Ek(t,"string");return hr(e)=="symbol"?e:e+""}function Ck(t,e,n){return(e=Ak(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function m0(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function de(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?m0(Object(n),!0).forEach(function(s){Ck(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m0(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}const g0=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},Nk=async(t,e,n,s)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const r=t,l=r.status||500;if(typeof r.json=="function")r.json().then(u=>{const f=(u==null?void 0:u.statusCode)||(u==null?void 0:u.code)||l+"";e(new Qa(g0(u),l,f,s))}).catch(()=>{if(s==="vectors"){const u=l+"";e(new Qa(r.statusText||`HTTP ${l} error`,l,u,s))}else{const u=l+"";e(new Qa(r.statusText||`HTTP ${l} error`,l,u,s))}});else{const u=l+"";e(new Qa(r.statusText||`HTTP ${l} error`,l,u,s))}}else e(new Fv(g0(t),t,s))},Rk=(t,e,n,s)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||t==="HEAD"||!s?de(de({},r),n):(wk(s)?(r.headers=de({"Content-Type":"application/json"},e==null?void 0:e.headers),r.body=JSON.stringify(s)):r.body=s,e!=null&&e.duplex&&(r.duplex=e.duplex),de(de({},r),n))};async function nr(t,e,n,s,r,l,u){return new Promise((f,m)=>{t(n,Rk(e,s,r,l)).then(p=>{if(!p.ok)throw p;if(s!=null&&s.noResolveJson)return p;if(u==="vectors"){const y=p.headers.get("content-type");if(p.headers.get("content-length")==="0"||p.status===204)return{};if(!y||!y.includes("application/json"))return{}}return p.json()}).then(p=>f(p)).catch(p=>Nk(p,m,s,u))})}function Jv(t="storage"){return{get:async(e,n,s,r)=>nr(e,"GET",n,s,r,void 0,t),post:async(e,n,s,r,l)=>nr(e,"POST",n,r,l,s,t),put:async(e,n,s,r,l)=>nr(e,"PUT",n,r,l,s,t),head:async(e,n,s,r)=>nr(e,"HEAD",n,de(de({},s),{},{noResolveJson:!0}),r,void 0,t),remove:async(e,n,s,r,l)=>nr(e,"DELETE",n,r,l,s,t)}}const kk=Jv("storage"),{get:pr,post:un,put:Id,head:Ik,remove:sf}=kk,$t=Jv("vectors");var no=class{constructor(t,e={},n,s="storage"){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.fetch=Sk(n),this.namespace=s}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(t){var e=this;try{return{data:await t(),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(wl(n))return{data:null,error:n};throw n}}},Mk=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(wl(e))return{data:null,error:e};throw e}}};let Yv;Yv=Symbol.toStringTag;var Dk=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[Yv]="BlobDownloadBuilder",this.promise=null}asStream(){return new Mk(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(wl(e))return{data:null,error:e};throw e}}};const Uk={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},y0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Pk=class extends no{constructor(t,e={},n,s){super(t,e,s,"storage"),this.bucketId=n}async uploadOrUpdate(t,e,n,s){var r=this;return r.handleOperation(async()=>{let l;const u=de(de({},y0),s);let f=de(de({},r.headers),t==="POST"&&{"x-upsert":String(u.upsert)});const m=u.metadata;typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),m&&l.append("metadata",r.encodeMetadata(m)),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.has("cacheControl")||l.append("cacheControl",u.cacheControl),m&&!l.has("metadata")&&l.append("metadata",r.encodeMetadata(m))):(l=n,f["cache-control"]=`max-age=${u.cacheControl}`,f["content-type"]=u.contentType,m&&(f["x-metadata"]=r.toBase64(r.encodeMetadata(m))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!u.duplex&&(u.duplex="half")),s!=null&&s.headers&&(f=de(de({},f),s.headers));const p=r._removeEmptyFolders(e),y=r._getFinalPath(p),b=await(t=="PUT"?Id:un)(r.fetch,`${r.url}/object/${y}`,l,de({headers:f},u!=null&&u.duplex?{duplex:u.duplex}:{}));return{path:p,id:b.Id,fullPath:b.Key}})}async upload(t,e,n){return this.uploadOrUpdate("POST",t,e,n)}async uploadToSignedUrl(t,e,n,s){var r=this;const l=r._removeEmptyFolders(t),u=r._getFinalPath(l),f=new URL(r.url+`/object/upload/sign/${u}`);return f.searchParams.set("token",e),r.handleOperation(async()=>{let m;const p=de({upsert:y0.upsert},s),y=de(de({},r.headers),{"x-upsert":String(p.upsert)});return typeof Blob<"u"&&n instanceof Blob?(m=new FormData,m.append("cacheControl",p.cacheControl),m.append("",n)):typeof FormData<"u"&&n instanceof FormData?(m=n,m.append("cacheControl",p.cacheControl)):(m=n,y["cache-control"]=`max-age=${p.cacheControl}`,y["content-type"]=p.contentType),{path:l,fullPath:(await Id(r.fetch,f.toString(),m,{headers:y})).Key}})}async createSignedUploadUrl(t,e){var n=this;return n.handleOperation(async()=>{let s=n._getFinalPath(t);const r=de({},n.headers);e!=null&&e.upsert&&(r["x-upsert"]="true");const l=await un(n.fetch,`${n.url}/object/upload/sign/${s}`,{},{headers:r}),u=new URL(n.url+l.url),f=u.searchParams.get("token");if(!f)throw new Sl("No token returned by API");return{signedUrl:u.toString(),path:t,token:f}})}async update(t,e,n){return this.uploadOrUpdate("PUT",t,e,n)}async move(t,e,n){var s=this;return s.handleOperation(async()=>await un(s.fetch,`${s.url}/object/move`,{bucketId:s.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:s.headers}))}async copy(t,e,n){var s=this;return s.handleOperation(async()=>({path:(await un(s.fetch,`${s.url}/object/copy`,{bucketId:s.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:s.headers})).Key}))}async createSignedUrl(t,e,n){var s=this;return s.handleOperation(async()=>{let r=s._getFinalPath(t),l=await un(s.fetch,`${s.url}/object/sign/${r}`,de({expiresIn:e},n!=null&&n.transform?{transform:n.transform}:{}),{headers:s.headers});const u=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{signedUrl:encodeURI(`${s.url}${l.signedURL}${u}`)}})}async createSignedUrls(t,e,n){var s=this;return s.handleOperation(async()=>{const r=await un(s.fetch,`${s.url}/object/sign/${s.bucketId}`,{expiresIn:e,paths:t},{headers:s.headers}),l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return r.map(u=>de(de({},u),{},{signedUrl:u.signedURL?encodeURI(`${s.url}${u.signedURL}${l}`):null}))})}download(t,e){const n=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),r=s?`?${s}`:"",l=this._getFinalPath(t),u=()=>pr(this.fetch,`${this.url}/${n}/${l}${r}`,{headers:this.headers,noResolveJson:!0});return new Dk(u,this.shouldThrowOnError)}async info(t){var e=this;const n=e._getFinalPath(t);return e.handleOperation(async()=>kd(await pr(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})))}async exists(t){var e=this;const n=e._getFinalPath(t);try{return await Ik(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(wl(s)&&s instanceof Fv){const r=s.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:s}}throw s}}getPublicUrl(t,e){const n=this._getFinalPath(t),s=[],r=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";r!==""&&s.push(r);const l=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",u=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});u!==""&&s.push(u);let f=s.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${f}`)}}}async remove(t){var e=this;return e.handleOperation(async()=>await sf(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}))}async list(t,e,n){var s=this;return s.handleOperation(async()=>{const r=de(de(de({},Uk),e),{},{prefix:t||""});return await un(s.fetch,`${s.url}/object/list/${s.bucketId}`,r,{headers:s.headers},n)})}async listV2(t,e){var n=this;return n.handleOperation(async()=>{const s=de({},t);return await un(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,s,{headers:n.headers},e)})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const Ok="2.93.3",_r={"X-Client-Info":`storage-js/${Ok}`};var Lk=class extends no{constructor(t,e={},n,s){const r=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(r.hostname)&&!r.hostname.includes("storage.supabase.")&&(r.hostname=r.hostname.replace("supabase.","storage.supabase."));const l=r.href.replace(/\/$/,""),u=de(de({},_r),e);super(l,u,n,"storage")}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const n=e.listBucketOptionsToQueryString(t);return await pr(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers})})}async getBucket(t){var e=this;return e.handleOperation(async()=>await pr(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}))}async createBucket(t,e={public:!1}){var n=this;return n.handleOperation(async()=>await un(n.fetch,`${n.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}))}async updateBucket(t,e){var n=this;return n.handleOperation(async()=>await Id(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}))}async emptyBucket(t){var e=this;return e.handleOperation(async()=>await un(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await sf(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},qk=class extends no{constructor(t,e={},n){const s=t.replace(/\/$/,""),r=de(de({},_r),e);super(s,r,n,"storage")}async createBucket(t){var e=this;return e.handleOperation(async()=>await un(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}))}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const s=n.toString(),r=s?`${e.url}/bucket?${s}`:`${e.url}/bucket`;return await pr(e.fetch,r,{headers:e.headers})})}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await sf(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}from(t){var e=this;if(!Tk(t))throw new Sl("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new xk({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),s=this.shouldThrowOnError;return new Proxy(n,{get(r,l){const u=r[l];return typeof u!="function"?u:async(...f)=>{try{return{data:await u.apply(r,f),error:null}}catch(m){if(s)throw m;return{data:null,error:m}}}}})}},Bk=class extends no{constructor(t,e={},n){const s=t.replace(/\/$/,""),r=de(de({},_r),{},{"Content-Type":"application/json"},e);super(s,r,n,"vectors")}async createIndex(t){var e=this;return e.handleOperation(async()=>await $t.post(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{})}async getIndex(t,e){var n=this;return n.handleOperation(async()=>await $t.post(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}))}async listIndexes(t){var e=this;return e.handleOperation(async()=>await $t.post(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}))}async deleteIndex(t,e){var n=this;return n.handleOperation(async()=>await $t.post(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers})||{})}},Gk=class extends no{constructor(t,e={},n){const s=t.replace(/\/$/,""),r=de(de({},_r),{},{"Content-Type":"application/json"},e);super(s,r,n,"vectors")}async putVectors(t){var e=this;if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return e.handleOperation(async()=>await $t.post(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{})}async getVectors(t){var e=this;return e.handleOperation(async()=>await $t.post(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}))}async listVectors(t){var e=this;if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return e.handleOperation(async()=>await $t.post(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}))}async queryVectors(t){var e=this;return e.handleOperation(async()=>await $t.post(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}))}async deleteVectors(t){var e=this;if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return e.handleOperation(async()=>await $t.post(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{})}},zk=class extends no{constructor(t,e={},n){const s=t.replace(/\/$/,""),r=de(de({},_r),{},{"Content-Type":"application/json"},e);super(s,r,n,"vectors")}async createBucket(t){var e=this;return e.handleOperation(async()=>await $t.post(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}async getBucket(t){var e=this;return e.handleOperation(async()=>await $t.post(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}))}async listBuckets(t={}){var e=this;return e.handleOperation(async()=>await $t.post(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await $t.post(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}},Hk=class extends zk{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new Vk(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,n=this;return e().call(n,t)}async getBucket(t){var e=()=>super.getBucket,n=this;return e().call(n,t)}async listBuckets(t={}){var e=()=>super.listBuckets,n=this;return e().call(n,t)}async deleteBucket(t){var e=()=>super.deleteBucket,n=this;return e().call(n,t)}},Vk=class extends Bk{constructor(t,e,n,s){super(t,e,s),this.vectorBucketName=n}async createIndex(t){var e=()=>super.createIndex,n=this;return e().call(n,de(de({},t),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,n=this;return e().call(n,de(de({},t),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,t)}index(t){return new jk(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},jk=class extends Gk{constructor(t,e,n,s,r){super(t,e,r),this.vectorBucketName=n,this.indexName=s}async putVectors(t){var e=()=>super.putVectors,n=this;return e().call(n,de(de({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(t){var e=()=>super.getVectors,n=this;return e().call(n,de(de({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,n=this;return e().call(n,de(de({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,n=this;return e().call(n,de(de({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,n=this;return e().call(n,de(de({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},$k=class extends Lk{constructor(t,e={},n,s){super(t,e,n,s)}from(t){return new Pk(this.url,this.headers,t,this.fetch)}get vectors(){return new Hk(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new qk(this.url+"/iceberg",this.headers,this.fetch)}};const Fk="2.39.3";let sr="";typeof Deno<"u"?sr="deno":typeof document<"u"?sr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?sr="react-native":sr="node";const Jk={"X-Client-Info":`supabase-js-${sr}/${Fk}`};var Yk=function(t,e,n,s){function r(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function f(y){try{p(s.next(y))}catch(b){u(b)}}function m(y){try{p(s.throw(y))}catch(b){u(b)}}function p(y){y.done?l(y.value):r(y.value).then(f,m)}p((s=s.apply(t,e||[])).next())})};const Kk=t=>{let e;return t?e=t:typeof fetch>"u"?e=Ov:e=fetch,(...n)=>e(...n)},Qk=()=>typeof Headers>"u"?Lv:Headers,Xk=(t,e,n)=>{const s=Kk(n),r=Qk();return(l,u)=>Yk(void 0,void 0,void 0,function*(){var f;const m=(f=yield e())!==null&&f!==void 0?f:t;let p=new r(u==null?void 0:u.headers);return p.has("apikey")||p.set("apikey",t),p.has("Authorization")||p.set("Authorization",`Bearer ${m}`),s(l,Object.assign(Object.assign({},u),{headers:p}))})};function Wk(t){return t.replace(/\/$/,"")}function Zk(t,e){const{db:n,auth:s,realtime:r,global:l}=t,{db:u,auth:f,realtime:m,global:p}=e;return{db:Object.assign(Object.assign({},u),n),auth:Object.assign(Object.assign({},f),s),realtime:Object.assign(Object.assign({},m),r),global:Object.assign(Object.assign({},p),l)}}const Kv="2.93.3",js=30*1e3,Md=3,td=Md*js,eI="http://localhost:9999",tI="supabase.auth.token",nI={"X-Client-Info":`gotrue-js/${Kv}`},Dd="X-Supabase-Api-Version",Qv={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},iI=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,sI=600*1e3;class mr extends Error{constructor(e,n,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=s}}function oe(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class oI extends mr{constructor(e,n,s){super(e,n,s),this.name="AuthApiError",this.status=n,this.code=s}}function rI(t){return oe(t)&&t.name==="AuthApiError"}class Hi extends mr{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Vn extends mr{constructor(e,n,s,r){super(e,s,r),this.name=n,this.status=s}}class Vt extends Vn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function nd(t){return oe(t)&&t.name==="AuthSessionMissingError"}class qs extends Vn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Xa extends Vn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Wa extends Vn{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function aI(t){return oe(t)&&t.name==="AuthImplicitGrantRedirectError"}class v0 extends Vn{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class lI extends Vn{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Ud extends Vn{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function id(t){return oe(t)&&t.name==="AuthRetryableFetchError"}class _0 extends Vn{constructor(e,n,s){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=s}}class Pd extends Vn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const cl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),b0=` 	
\r=`.split(""),uI=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<b0.length;e+=1)t[b0[e].charCodeAt(0)]=-2;for(let e=0;e<cl.length;e+=1)t[cl[e].charCodeAt(0)]=e;return t})();function x0(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;n(cl[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;n(cl[s]),e.queuedBits-=6}}function Xv(t,e,n){const s=uI[t];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function S0(t){const e=[],n=u=>{e.push(String.fromCodePoint(u))},s={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},l=u=>{fI(u,s,n)};for(let u=0;u<t.length;u+=1)Xv(t.charCodeAt(u),r,l);return e.join("")}function cI(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function dI(t,e){for(let n=0;n<t.length;n+=1){let s=t.charCodeAt(n);if(s>55295&&s<=56319){const r=(s-55296)*1024&65535;s=(t.charCodeAt(n+1)-56320&65535|r)+65536,n+=1}cI(s,e)}}function fI(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let s=1;s<6;s+=1)if((t>>7-s&1)===0){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Xs(t){const e=[],n={queue:0,queuedBits:0},s=r=>{e.push(r)};for(let r=0;r<t.length;r+=1)Xv(t.charCodeAt(r),n,s);return new Uint8Array(e)}function hI(t){const e=[];return dI(t,n=>e.push(n)),new Uint8Array(e)}function Vi(t){const e=[],n={queue:0,queuedBits:0},s=r=>{e.push(r)};return t.forEach(r=>x0(r,n,s)),x0(null,n,s),e.join("")}function pI(t){return Math.round(Date.now()/1e3)+t}function mI(){return Symbol("auth-callback")}const gt=()=>typeof window<"u"&&typeof document<"u",Li={tested:!1,writable:!1},Wv=()=>{if(!gt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Li.tested)return Li.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Li.tested=!0,Li.writable=!0}catch{Li.tested=!0,Li.writable=!1}return Li.writable};function gI(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((r,l)=>{e[l]=r})}catch{}return n.searchParams.forEach((s,r)=>{e[r]=s}),e}const Zv=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),yI=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",$s=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},qi=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},mt=async(t,e)=>{await t.removeItem(e)};class Tl{constructor(){this.promise=new Tl.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Tl.promiseConstructor=Promise;function Za(t){const e=t.split(".");if(e.length!==3)throw new Pd("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!iI.test(e[s]))throw new Pd("JWT not in base64url format");return{header:JSON.parse(S0(e[0])),payload:JSON.parse(S0(e[1])),signature:Xs(e[2]),raw:{header:e[0],payload:e[1]}}}async function vI(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function _I(t,e){return new Promise((s,r)=>{(async()=>{for(let l=0;l<1/0;l++)try{const u=await t(l);if(!e(l,null,u)){s(u);return}}catch(u){if(!e(l,u)){r(u);return}}})()})}function bI(t){return("0"+t.toString(16)).substr(-2)}function xI(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=n.length;let r="";for(let l=0;l<56;l++)r+=n.charAt(Math.floor(Math.random()*s));return r}return crypto.getRandomValues(e),Array.from(e,bI).join("")}async function SI(t){const n=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",n),r=new Uint8Array(s);return Array.from(r).map(l=>String.fromCharCode(l)).join("")}async function wI(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await SI(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Bs(t,e,n=!1){const s=xI();let r=s;n&&(r+="/PASSWORD_RECOVERY"),await $s(t,`${e}-code-verifier`,r);const l=await wI(s);return[l,s===l?"plain":"s256"]}const TI=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function EI(t){const e=t.headers.get(Dd);if(!e||!e.match(TI))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function AI(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function CI(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const NI=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Gs(t){if(!NI.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function sd(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const s=n.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function RI(t,e){return new Proxy(t,{get:(n,s,r)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const l=s.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,s,r)}return!e.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,s,r)}})}function w0(t){return JSON.parse(JSON.stringify(t))}const Gi=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),kI=[502,503,504];async function T0(t){var e;if(!yI(t))throw new Ud(Gi(t),0);if(kI.includes(t.status))throw new Ud(Gi(t),t.status);let n;try{n=await t.json()}catch(l){throw new Hi(Gi(l),l)}let s;const r=EI(t);if(r&&r.getTime()>=Qv["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?s=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(s=n.error_code),s){if(s==="weak_password")throw new _0(Gi(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new Vt}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((l,u)=>l&&typeof u=="string",!0))throw new _0(Gi(n),t.status,n.weak_password.reasons);throw new oI(Gi(n),t.status||500,s)}const II=(t,e,n,s)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(s),Object.assign(Object.assign({},r),n))};async function ue(t,e,n,s){var r;const l=Object.assign({},s==null?void 0:s.headers);l[Dd]||(l[Dd]=Qv["2024-01-01"].name),s!=null&&s.jwt&&(l.Authorization=`Bearer ${s.jwt}`);const u=(r=s==null?void 0:s.query)!==null&&r!==void 0?r:{};s!=null&&s.redirectTo&&(u.redirect_to=s.redirectTo);const f=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",m=await MI(t,e,n+f,{headers:l,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(m):{data:Object.assign({},m),error:null}}async function MI(t,e,n,s,r,l){const u=II(e,s,r,l);let f;try{f=await t(n,Object.assign({},u))}catch(m){throw console.error(m),new Ud(Gi(m),0)}if(f.ok||await T0(f),s!=null&&s.noResolveJson)return f;try{return await f.json()}catch(m){await T0(m)}}function ln(t){var e;let n=null;PI(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=pI(t.expires_in)));const s=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:s},error:null}}function E0(t){const e=ln(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,s)=>n&&typeof s=="string",!0)&&(e.data.weak_password=t.weak_password),e}function gi(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function DI(t){return{data:t,error:null}}function UI(t){const{action_link:e,email_otp:n,hashed_token:s,redirect_to:r,verification_type:l}=t,u=xl(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:e,email_otp:n,hashed_token:s,redirect_to:r,verification_type:l},m=Object.assign({},u);return{data:{properties:f,user:m},error:null}}function A0(t){return t}function PI(t){return t.access_token&&t.refresh_token&&t.expires_in}const od=["global","local","others"];class OI{constructor({url:e="",headers:n={},fetch:s}){this.url=e,this.headers=n,this.fetch=Zv(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=od[0]){if(od.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${od.join(", ")}`);try{return await ue(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(oe(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,n={}){try{return await ue(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:gi})}catch(s){if(oe(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:n}=e,s=xl(e,["options"]),r=Object.assign(Object.assign({},s),n);return"newEmail"in s&&(r.new_email=s==null?void 0:s.newEmail,delete r.newEmail),await ue(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:UI,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(oe(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await ue(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:gi})}catch(n){if(oe(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,s,r,l,u,f,m;try{const p={nextPage:null,lastPage:0,total:0},y=await ue(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:"",per_page:(l=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&l!==void 0?l:""},xform:A0});if(y.error)throw y.error;const b=await y.json(),x=(u=y.headers.get("x-total-count"))!==null&&u!==void 0?u:0,w=(m=(f=y.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&m!==void 0?m:[];return w.length>0&&(w.forEach(E=>{const A=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(E.split(";")[1].split("=")[1]);p[`${C}Page`]=A}),p.total=parseInt(x)),{data:Object.assign(Object.assign({},b),p),error:null}}catch(p){if(oe(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){Gs(e);try{return await ue(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:gi})}catch(n){if(oe(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Gs(e);try{return await ue(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:gi})}catch(s){if(oe(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,n=!1){Gs(e);try{return await ue(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:gi})}catch(s){if(oe(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){Gs(e.userId);try{const{data:n,error:s}=await ue(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:n,error:s}}catch(n){if(oe(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Gs(e.userId),Gs(e.id);try{return{data:await ue(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(oe(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,s,r,l,u,f,m;try{const p={nextPage:null,lastPage:0,total:0},y=await ue(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:"",per_page:(l=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&l!==void 0?l:""},xform:A0});if(y.error)throw y.error;const b=await y.json(),x=(u=y.headers.get("x-total-count"))!==null&&u!==void 0?u:0,w=(m=(f=y.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&m!==void 0?m:[];return w.length>0&&(w.forEach(E=>{const A=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(E.split(";")[1].split("=")[1]);p[`${C}Page`]=A}),p.total=parseInt(x)),{data:Object.assign(Object.assign({},b),p),error:null}}catch(p){if(oe(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(e){try{return await ue(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(oe(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await ue(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(oe(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await ue(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(oe(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(e){try{return await ue(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(oe(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await ue(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(oe(n))return{data:null,error:n};throw n}}}function C0(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const zs={debug:!!(globalThis&&Wv()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class e_ extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class LI extends e_{}async function qI(t,e,n){zs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),zs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async r=>{if(r){zs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,r.name);try{return await n()}finally{zs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,r.name)}}else{if(e===0)throw zs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new LI(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(zs.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function BI(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function t_(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function GI(t){return parseInt(t,16)}function zI(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,s=>s.toString(16).padStart(2,"0")).join("")}function HI(t){var e;const{chainId:n,domain:s,expirationTime:r,issuedAt:l=new Date,nonce:u,notBefore:f,requestId:m,resources:p,scheme:y,uri:b,version:x}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!b)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(x!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${x}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const w=t_(t.address),E=y?`${y}://${s}`:s,A=t.statement?`${t.statement}
`:"",C=`${E} wants you to sign in with your Ethereum account:
${w}

${A}`;let I=`URI: ${b}
Version: ${x}
Chain ID: ${n}${u?`
Nonce: ${u}`:""}
Issued At: ${l.toISOString()}`;if(r&&(I+=`
Expiration Time: ${r.toISOString()}`),f&&(I+=`
Not Before: ${f.toISOString()}`),m&&(I+=`
Request ID: ${m}`),p){let O=`
Resources:`;for(const D of p){if(!D||typeof D!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${D}`);O+=`
- ${D}`}I+=O}return`${C}
${I}`}class it extends Error{constructor({message:e,code:n,cause:s,name:r}){var l;super(e,{cause:s}),this.__isWebAuthnError=!0,this.name=(l=r??(s instanceof Error?s.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=n}}class dl extends it{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function VI({error:t,options:e}){var n,s,r;const{publicKey:l}=e;if(!l)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new it({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=l.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new it({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((s=l.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new it({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((r=l.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new it({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new it({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new it({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return l.pubKeyCredParams.filter(f=>f.type==="public-key").length===0?new it({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new it({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const u=window.location.hostname;if(n_(u)){if(l.rp.id!==u)return new it({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new it({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new it({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new it({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new it({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function jI({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new it({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new it({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const s=window.location.hostname;if(n_(s)){if(n.rpId!==s)return new it({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new it({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new it({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new it({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class $I{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const FI=new $I;function JI(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:s}=t,r=xl(t,["challenge","user","excludeCredentials"]),l=Xs(e).buffer,u=Object.assign(Object.assign({},n),{id:Xs(n.id).buffer}),f=Object.assign(Object.assign({},r),{challenge:l,user:u});if(s&&s.length>0){f.excludeCredentials=new Array(s.length);for(let m=0;m<s.length;m++){const p=s[m];f.excludeCredentials[m]=Object.assign(Object.assign({},p),{id:Xs(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return f}function YI(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,s=xl(t,["challenge","allowCredentials"]),r=Xs(e).buffer,l=Object.assign(Object.assign({},s),{challenge:r});if(n&&n.length>0){l.allowCredentials=new Array(n.length);for(let u=0;u<n.length;u++){const f=n[u];l.allowCredentials[u]=Object.assign(Object.assign({},f),{id:Xs(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return l}function KI(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:Vi(new Uint8Array(t.response.attestationObject)),clientDataJSON:Vi(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function QI(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,s=t.getClientExtensionResults(),r=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Vi(new Uint8Array(r.authenticatorData)),clientDataJSON:Vi(new Uint8Array(r.clientDataJSON)),signature:Vi(new Uint8Array(r.signature)),userHandle:r.userHandle?Vi(new Uint8Array(r.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function n_(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function N0(){var t,e;return!!(gt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function XI(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new dl("Browser returned unexpected credential type",e)}:{data:null,error:new dl("Empty credential response",e)}}catch(e){return{data:null,error:VI({error:e,options:t})}}}async function WI(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new dl("Browser returned unexpected credential type",e)}:{data:null,error:new dl("Empty credential response",e)}}catch(e){return{data:null,error:jI({error:e,options:t})}}}const ZI={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},e1={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function fl(...t){const e=r=>r!==null&&typeof r=="object"&&!Array.isArray(r),n=r=>r instanceof ArrayBuffer||ArrayBuffer.isView(r),s={};for(const r of t)if(r)for(const l in r){const u=r[l];if(u!==void 0)if(Array.isArray(u))s[l]=u;else if(n(u))s[l]=u;else if(e(u)){const f=s[l];e(f)?s[l]=fl(f,u):s[l]=fl(u)}else s[l]=u}return s}function t1(t,e){return fl(ZI,t,e||{})}function n1(t,e){return fl(e1,t,e||{})}class i1{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:s,signal:r},l){var u;try{const{data:f,error:m}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!f)return{data:null,error:m};const p=r??FI.createNewAbortSignal();if(f.webauthn.type==="create"){const{user:y}=f.webauthn.credential_options.publicKey;if(!y.name){const b=s;if(b)y.name=`${y.id}:${b}`;else{const w=(await this.client.getUser()).data.user,E=((u=w==null?void 0:w.user_metadata)===null||u===void 0?void 0:u.name)||(w==null?void 0:w.email)||(w==null?void 0:w.id)||"User";y.name=`${y.id}:${E}`}}y.displayName||(y.displayName=y.name)}switch(f.webauthn.type){case"create":{const y=t1(f.webauthn.credential_options.publicKey,l==null?void 0:l.create),{data:b,error:x}=await XI({publicKey:y,signal:p});return b?{data:{factorId:e,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:b}},error:null}:{data:null,error:x}}case"request":{const y=n1(f.webauthn.credential_options.publicKey,l==null?void 0:l.request),{data:b,error:x}=await WI(Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:y,signal:p}));return b?{data:{factorId:e,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:b}},error:null}:{data:null,error:x}}}}catch(f){return oe(f)?{data:null,error:f}:{data:null,error:new Hi("Unexpected error in challenge",f)}}}async _verify({challengeId:e,factorId:n,webauthn:s}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:s})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:r}={}},l){if(!n)return{data:null,error:new mr("rpId is required for WebAuthn authentication")};try{if(!N0())return{data:null,error:new Hi("Browser does not support WebAuthn",null)};const{data:u,error:f}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:s},signal:r},{request:l});if(!u)return{data:null,error:f};const{webauthn:m}=u;return this._verify({factorId:e,challengeId:u.challengeId,webauthn:{type:m.type,rpId:n,rpOrigins:s,credential_response:m.credential_response}})}catch(u){return oe(u)?{data:null,error:u}:{data:null,error:new Hi("Unexpected error in authenticate",u)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:r}={}},l){if(!n)return{data:null,error:new mr("rpId is required for WebAuthn registration")};try{if(!N0())return{data:null,error:new Hi("Browser does not support WebAuthn",null)};const{data:u,error:f}=await this._enroll({friendlyName:e});if(!u)return await this.client.mfa.listFactors().then(y=>{var b;return(b=y.data)===null||b===void 0?void 0:b.all.find(x=>x.factor_type==="webauthn"&&x.friendly_name===e&&x.status!=="unverified")}).then(y=>y?this.client.mfa.unenroll({factorId:y==null?void 0:y.id}):void 0),{data:null,error:f};const{data:m,error:p}=await this._challenge({factorId:u.id,friendlyName:u.friendly_name,webauthn:{rpId:n,rpOrigins:s},signal:r},{create:l});return m?this._verify({factorId:u.id,challengeId:m.challengeId,webauthn:{rpId:n,rpOrigins:s,type:m.webauthn.type,credential_response:m.webauthn.credential_response}}):{data:null,error:p}}catch(u){return oe(u)?{data:null,error:u}:{data:null,error:new Hi("Unexpected error in register",u)}}}}BI();const s1={url:eI,storageKey:tI,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:nI,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function R0(t,e,n){return await n()}const Hs={};class gr{get jwks(){var e,n;return(n=(e=Hs[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Hs[this.storageKey]=Object.assign(Object.assign({},Hs[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Hs[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Hs[this.storageKey]=Object.assign(Object.assign({},Hs[this.storageKey]),{cachedAt:e})}constructor(e){var n,s,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},s1),e);if(this.storageKey=l.storageKey,this.instanceID=(n=gr.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,gr.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&gt()){const u=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(u),this.logDebugMessages&&console.trace(u)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new OI({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=Zv(l.fetch),this.lock=l.lock||R0,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,this.lockAcquireTimeout=l.lockAcquireTimeout,l.lock?this.lock=l.lock:this.persistSession&&gt()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=qI:this.lock=R0,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new i1(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:Wv()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=C0(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=C0(this.memoryStorage)),gt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u);try{await this._notifyAllSubscribers(u.data.event,u.data.session,!1)}catch(f){this._debug("#broadcastChannel","error",f)}})}this.initialize().catch(u=>{this._debug("#initialize()","error",u)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Kv}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},s="none";if(gt()&&(n=gI(window.location.href),this._isImplicitGrantCallback(n)?s="implicit":await this._isPKCECallback(n)&&(s="pkce")),gt()&&this.detectSessionInUrl&&s!=="none"){const{data:r,error:l}=await this._getSessionFromURL(n,s);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),aI(l)){const m=(e=l.details)===null||e===void 0?void 0:e.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:l}}return{error:l}}const{session:u,redirectType:f}=r;return this._debug("#_initialize()","detected session in URL",u,"redirect type",f),await this._saveSession(u),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return oe(n)?this._returnResult({error:n}):this._returnResult({error:new Hi("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,s,r;try{const l=await ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:ln}),{data:u,error:f}=l;if(f||!u)return this._returnResult({data:{user:null,session:null},error:f});const m=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(l){if(oe(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(e){var n,s,r;try{let l;if("email"in e){const{email:y,password:b,options:x}=e;let w=null,E=null;this.flowType==="pkce"&&([w,E]=await Bs(this.storage,this.storageKey)),l=await ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x==null?void 0:x.emailRedirectTo,body:{email:y,password:b,data:(n=x==null?void 0:x.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken},code_challenge:w,code_challenge_method:E},xform:ln})}else if("phone"in e){const{phone:y,password:b,options:x}=e;l=await ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:b,data:(s=x==null?void 0:x.data)!==null&&s!==void 0?s:{},channel:(r=x==null?void 0:x.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken}},xform:ln})}else throw new Xa("You must provide either an email or phone number and a password");const{data:u,error:f}=l;if(f||!u)return await mt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:f});const m=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(l){if(await mt(this.storage,`${this.storageKey}-code-verifier`),oe(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(e){try{let n;if("email"in e){const{email:l,password:u,options:f}=e;n=await ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:u,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:E0})}else if("phone"in e){const{phone:l,password:u,options:f}=e;n=await ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:u,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:E0})}else throw new Xa("You must provide either an email or phone number and a password");const{data:s,error:r}=n;if(r)return this._returnResult({data:{user:null,session:null},error:r});if(!s||!s.session||!s.user){const l=new qs;return this._returnResult({data:{user:null,session:null},error:l})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:r})}catch(n){if(oe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,s,r,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,s,r,l,u,f,m,p,y,b,x;let w,E;if("message"in e)w=e.message,E=e.signature;else{const{chain:A,wallet:C,statement:I,options:O}=e;let D;if(gt())if(typeof C=="object")D=C;else{const Y=window;if("ethereum"in Y&&typeof Y.ethereum=="object"&&"request"in Y.ethereum&&typeof Y.ethereum.request=="function")D=Y.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!(O!=null&&O.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");D=C}const P=new URL((n=O==null?void 0:O.url)!==null&&n!==void 0?n:window.location.href),N=await D.request({method:"eth_requestAccounts"}).then(Y=>Y).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!N||N.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const H=t_(N[0]);let V=(s=O==null?void 0:O.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!V){const Y=await D.request({method:"eth_chainId"});V=GI(Y)}const Z={domain:P.host,address:H,statement:I,uri:P.href,version:"1",chainId:V,nonce:(r=O==null?void 0:O.signInWithEthereum)===null||r===void 0?void 0:r.nonce,issuedAt:(u=(l=O==null?void 0:O.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(f=O==null?void 0:O.signInWithEthereum)===null||f===void 0?void 0:f.expirationTime,notBefore:(m=O==null?void 0:O.signInWithEthereum)===null||m===void 0?void 0:m.notBefore,requestId:(p=O==null?void 0:O.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(y=O==null?void 0:O.signInWithEthereum)===null||y===void 0?void 0:y.resources};w=HI(Z),E=await D.request({method:"personal_sign",params:[zI(w),H]})}try{const{data:A,error:C}=await ue(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:w,signature:E},!((b=e.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(x=e.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:ln});if(C)throw C;if(!A||!A.session||!A.user){const I=new qs;return this._returnResult({data:{user:null,session:null},error:I})}return A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),this._returnResult({data:Object.assign({},A),error:C})}catch(A){if(oe(A))return this._returnResult({data:{user:null,session:null},error:A});throw A}}async signInWithSolana(e){var n,s,r,l,u,f,m,p,y,b,x,w;let E,A;if("message"in e)E=e.message,A=e.signature;else{const{chain:C,wallet:I,statement:O,options:D}=e;let P;if(gt())if(typeof I=="object")P=I;else{const H=window;if("solana"in H&&typeof H.solana=="object"&&("signIn"in H.solana&&typeof H.solana.signIn=="function"||"signMessage"in H.solana&&typeof H.solana.signMessage=="function"))P=H.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof I!="object"||!(D!=null&&D.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");P=I}const N=new URL((n=D==null?void 0:D.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in P&&P.signIn){const H=await P.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},D==null?void 0:D.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),O?{statement:O}:null));let V;if(Array.isArray(H)&&H[0]&&typeof H[0]=="object")V=H[0];else if(H&&typeof H=="object"&&"signedMessage"in H&&"signature"in H)V=H;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in V&&"signature"in V&&(typeof V.signedMessage=="string"||V.signedMessage instanceof Uint8Array)&&V.signature instanceof Uint8Array)E=typeof V.signedMessage=="string"?V.signedMessage:new TextDecoder().decode(V.signedMessage),A=V.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in P)||typeof P.signMessage!="function"||!("publicKey"in P)||typeof P!="object"||!P.publicKey||!("toBase58"in P.publicKey)||typeof P.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");E=[`${N.host} wants you to sign in with your Solana account:`,P.publicKey.toBase58(),...O?["",O,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${(r=(s=D==null?void 0:D.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&r!==void 0?r:new Date().toISOString()}`,...!((l=D==null?void 0:D.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${D.signInWithSolana.notBefore}`]:[],...!((u=D==null?void 0:D.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${D.signInWithSolana.expirationTime}`]:[],...!((f=D==null?void 0:D.signInWithSolana)===null||f===void 0)&&f.chainId?[`Chain ID: ${D.signInWithSolana.chainId}`]:[],...!((m=D==null?void 0:D.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${D.signInWithSolana.nonce}`]:[],...!((p=D==null?void 0:D.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${D.signInWithSolana.requestId}`]:[],...!((b=(y=D==null?void 0:D.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||b===void 0)&&b.length?["Resources",...D.signInWithSolana.resources.map(V=>`- ${V}`)]:[]].join(`
`);const H=await P.signMessage(new TextEncoder().encode(E),"utf8");if(!H||!(H instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");A=H}}try{const{data:C,error:I}=await ue(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:E,signature:Vi(A)},!((x=e.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(w=e.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:ln});if(I)throw I;if(!C||!C.session||!C.user){const O=new qs;return this._returnResult({data:{user:null,session:null},error:O})}return C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),this._returnResult({data:Object.assign({},C),error:I})}catch(C){if(oe(C))return this._returnResult({data:{user:null,session:null},error:C});throw C}}async _exchangeCodeForSession(e){const n=await qi(this.storage,`${this.storageKey}-code-verifier`),[s,r]=(n??"").split("/");try{if(!s&&this.flowType==="pkce")throw new lI;const{data:l,error:u}=await ue(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:ln});if(await mt(this.storage,`${this.storageKey}-code-verifier`),u)throw u;if(!l||!l.session||!l.user){const f=new qs;return this._returnResult({data:{user:null,session:null,redirectType:null},error:f})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:r??null}),error:u})}catch(l){if(await mt(this.storage,`${this.storageKey}-code-verifier`),oe(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(e){try{const{options:n,provider:s,token:r,access_token:l,nonce:u}=e,f=await ue(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:r,access_token:l,nonce:u,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:ln}),{data:m,error:p}=f;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!m||!m.session||!m.user){const y=new qs;return this._returnResult({data:{user:null,session:null},error:y})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:m,error:p})}catch(n){if(oe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,s,r,l,u;try{if("email"in e){const{email:f,options:m}=e;let p=null,y=null;this.flowType==="pkce"&&([p,y]=await Bs(this.storage,this.storageKey));const{error:b}=await ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},create_user:(s=m==null?void 0:m.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:p,code_challenge_method:y},redirectTo:m==null?void 0:m.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:b})}if("phone"in e){const{phone:f,options:m}=e,{data:p,error:y}=await ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},create_user:(l=m==null?void 0:m.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},channel:(u=m==null?void 0:m.channel)!==null&&u!==void 0?u:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:y})}throw new Xa("You must provide either an email or phone number.")}catch(f){if(await mt(this.storage,`${this.storageKey}-code-verifier`),oe(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async verifyOtp(e){var n,s;try{let r,l;"options"in e&&(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo,l=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:u,error:f}=await ue(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:r,xform:ln});if(f)throw f;if(!u)throw new Error("An error occurred on token verification.");const m=u.session,p=u.user;return m!=null&&m.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(r){if(oe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithSSO(e){var n,s,r,l,u;try{let f=null,m=null;this.flowType==="pkce"&&([f,m]=await Bs(this.storage,this.storageKey));const p=await ue(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&s!==void 0?s:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:f,code_challenge_method:m}),headers:this.headers,xform:DI});return!((l=p.data)===null||l===void 0)&&l.url&&gt()&&!(!((u=e.options)===null||u===void 0)&&u.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(f){if(await mt(this.storage,`${this.storageKey}-code-verifier`),oe(f))return this._returnResult({data:null,error:f});throw f}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:s}=e;if(s)throw s;if(!n)throw new Vt;const{error:r}=await ue(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:r})})}catch(e){if(oe(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:s,type:r,options:l}=e,{error:u}=await ue(this.fetch,"POST",n,{headers:this.headers,body:{email:s,type:r,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:u})}else if("phone"in e){const{phone:s,type:r,options:l}=e,{data:u,error:f}=await ue(this.fetch,"POST",n,{headers:this.headers,body:{phone:s,type:r,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:f})}throw new Xa("You must provide either an email or phone number and a type")}catch(n){if(oe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await s,await n()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=n();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await qi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<td:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const u=await qi(this.userStorage,this.storageKey+"-user");u!=null&&u.user?e.user=u.user:e.user=sd()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const u={value:this.suppressGetSessionWarning};e.user=RI(e.user,u),u.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:r,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:r},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:gi}):await this._useSession(async n=>{var s,r,l;const{data:u,error:f}=n;if(f)throw f;return!(!((s=u.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Vt}:await ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(r=u.session)===null||r===void 0?void 0:r.access_token)!==null&&l!==void 0?l:void 0,xform:gi})})}catch(n){if(oe(n))return nd(n)&&(await this._removeSession(),await mt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async s=>{const{data:r,error:l}=s;if(l)throw l;if(!r.session)throw new Vt;const u=r.session;let f=null,m=null;this.flowType==="pkce"&&e.email!=null&&([f,m]=await Bs(this.storage,this.storageKey));const{data:p,error:y}=await ue(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:f,code_challenge_method:m}),jwt:u.access_token,xform:gi});if(y)throw y;return u.user=p.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),this._returnResult({data:{user:u.user},error:null})})}catch(s){if(await mt(this.storage,`${this.storageKey}-code-verifier`),oe(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Vt;const n=Date.now()/1e3;let s=n,r=!0,l=null;const{payload:u}=Za(e.access_token);if(u.exp&&(s=u.exp,r=s<=n),r){const{data:f,error:m}=await this._callRefreshToken(e.refresh_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!f)return{data:{user:null,session:null},error:null};l=f}else{const{data:f,error:m}=await this._getUser(e.access_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});l={access_token:e.access_token,refresh_token:e.refresh_token,user:f.user,token_type:"bearer",expires_in:s-n,expires_at:s},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(n){if(oe(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var s;if(!e){const{data:u,error:f}=n;if(f)throw f;e=(s=u.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new Vt;const{data:r,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):r?this._returnResult({data:{user:r.user,session:r},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(oe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!gt())throw new Wa("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Wa(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new v0("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Wa("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new v0("No code detected.");const{data:O,error:D}=await this._exchangeCodeForSession(e.code);if(D)throw D;const P=new URL(window.location.href);return P.searchParams.delete("code"),window.history.replaceState(window.history.state,"",P.toString()),{data:{session:O.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:r,access_token:l,refresh_token:u,expires_in:f,expires_at:m,token_type:p}=e;if(!l||!f||!u||!p)throw new Wa("No session defined in URL");const y=Math.round(Date.now()/1e3),b=parseInt(f);let x=y+b;m&&(x=parseInt(m));const w=x-y;w*1e3<=js&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${w}s, should have been closer to ${b}s`);const E=x-b;y-E>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",E,x,y):y-E<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",E,x,y);const{data:A,error:C}=await this._getUser(l);if(C)throw C;const I={provider_token:s,provider_refresh_token:r,access_token:l,expires_in:b,expires_at:x,refresh_token:u,token_type:p,user:A.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:I,redirectType:e.type},error:null})}catch(s){if(oe(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await qi(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var s;const{data:r,error:l}=n;if(l&&!nd(l))return this._returnResult({error:l});const u=(s=r.session)===null||s===void 0?void 0:s.access_token;if(u){const{error:f}=await this.admin.signOut(u,e);if(f&&!(rI(f)&&(f.status===404||f.status===401||f.status===403)||nd(f)))return this._returnResult({error:f})}return e!=="others"&&(await this._removeSession(),await mt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=mI(),s={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,s),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async n=>{var s,r;try{const{data:{session:l},error:u}=n;if(u)throw u;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,n={}){let s=null,r=null;this.flowType==="pkce"&&([s,r]=await Bs(this.storage,this.storageKey,!0));try{return await ue(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:r,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(l){if(await mt(this.storage,`${this.storageKey}-code-verifier`),oe(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var e;try{const{data:n,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:s,error:r}=await this._useSession(async l=>{var u,f,m,p,y;const{data:b,error:x}=l;if(x)throw x;const w=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(u=e.options)===null||u===void 0?void 0:u.redirectTo,scopes:(f=e.options)===null||f===void 0?void 0:f.scopes,queryParams:(m=e.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await ue(this.fetch,"GET",w,{headers:this.headers,jwt:(y=(p=b.session)===null||p===void 0?void 0:p.access_token)!==null&&y!==void 0?y:void 0})});if(r)throw r;return gt()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),this._returnResult({data:{provider:e.provider,url:s==null?void 0:s.url},error:null})}catch(s){if(oe(s))return this._returnResult({data:{provider:e.provider,url:null},error:s});throw s}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var s;try{const{error:r,data:{session:l}}=n;if(r)throw r;const{options:u,provider:f,token:m,access_token:p,nonce:y}=e,b=await ue(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=l==null?void 0:l.access_token)!==null&&s!==void 0?s:void 0,body:{provider:f,id_token:m,access_token:p,nonce:y,link_identity:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:ln}),{data:x,error:w}=b;return w?this._returnResult({data:{user:null,session:null},error:w}):!x||!x.session||!x.user?this._returnResult({data:{user:null,session:null},error:new qs}):(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("USER_UPDATED",x.session)),this._returnResult({data:x,error:w}))}catch(r){if(await mt(this.storage,`${this.storageKey}-code-verifier`),oe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var s,r;const{data:l,error:u}=n;if(u)throw u;return await ue(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&r!==void 0?r:void 0})})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const s=Date.now();return await _I(async r=>(r>0&&await vI(200*Math.pow(2,r-1)),this._debug(n,"refreshing attempt",r),await ue(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ln})),(r,l)=>{const u=200*Math.pow(2,r);return l&&id(l)&&Date.now()+u-s<js})}catch(s){if(this._debug(n,"error",s),oe(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",s),gt()&&!n.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,n;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const r=await qi(this.storage,this.storageKey);if(r&&this.userStorage){let u=await qi(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:r.user},await $s(this.userStorage,this.storageKey+"-user",u)),r.user=(e=u==null?void 0:u.user)!==null&&e!==void 0?e:sd()}else if(r&&!r.user&&!r.user){const u=await qi(this.storage,this.storageKey+"-user");u&&(u!=null&&u.user)?(r.user=u.user,await mt(this.storage,this.storageKey+"-user"),await $s(this.storage,this.storageKey,r)):r.user=sd()}if(this._debug(s,"session from storage",r),!this._isValidSession(r)){this._debug(s,"session is not valid"),r!==null&&await this._removeSession();return}const l=((n=r.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<td;if(this._debug(s,`session has${l?"":" not"} expired with margin of ${td}s`),l){if(this.autoRefreshToken&&r.refresh_token){const{error:u}=await this._callRefreshToken(r.refresh_token);u&&(console.error(u),id(u)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(r.user&&r.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:f}=await this._getUser(r.access_token);!f&&(u!=null&&u.user)?(r.user=u.user,await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(s,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(s,"error",r),console.error(r);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var n,s;if(!e)throw new Vt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new Tl;const{data:l,error:u}=await this._refreshAccessToken(e);if(u)throw u;if(!l.session)throw new Vt;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const f={data:l.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(l){if(this._debug(r,"error",l),oe(l)){const u={data:null,error:l};return id(l)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(u),u}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(l),l}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,n,s=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",n,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:n});const l=[],u=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(e,n)}catch(m){l.push(m)}});if(await Promise.all(u),l.length>0){for(let f=0;f<l.length;f+=1)console.error(l[f]);throw l[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await mt(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),s=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&n.user&&await $s(this.userStorage,this.storageKey+"-user",{user:n.user});const r=Object.assign({},n);delete r.user;const l=w0(r);await $s(this.storage,this.storageKey,l)}else{const r=w0(n);await $s(this.storage,this.storageKey,r)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await mt(this.storage,this.storageKey),await mt(this.storage,this.storageKey+"-code-verifier"),await mt(this.storage,this.storageKey+"-user"),this.userStorage&&await mt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&gt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),js);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:s}}=n;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((s.expires_at*1e3-e)/js);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${js}ms, refresh threshold is ${Md} ticks`),r<=Md&&await this._callRefreshToken(s.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof e_)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!gt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(e){this._debug("#visibilityChangedCallback","error",e)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,s){const r=[`provider=${encodeURIComponent(n)}`];if(s!=null&&s.redirectTo&&r.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&r.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[l,u]=await Bs(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(u)}`});r.push(f.toString())}if(s!=null&&s.queryParams){const l=new URLSearchParams(s.queryParams);r.push(l.toString())}return s!=null&&s.skipBrowserRedirect&&r.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var s;const{data:r,error:l}=n;return l?this._returnResult({data:null,error:l}):await ue(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token})})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var s,r;const{data:l,error:u}=n;if(u)return this._returnResult({data:null,error:u});const f=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:m,error:p}=await ue(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(s=l==null?void 0:l.session)===null||s===void 0?void 0:s.access_token});return p?this._returnResult({data:null,error:p}):(e.factorType==="totp"&&m.type==="totp"&&(!((r=m==null?void 0:m.totp)===null||r===void 0)&&r.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),this._returnResult({data:m,error:null}))})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var s;const{data:r,error:l}=n;if(l)return this._returnResult({data:null,error:l});const u=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?KI(e.webauthn.credential_response):QI(e.webauthn.credential_response)})}:{code:e.code}),{data:f,error:m}=await ue(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:u,headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token});return m?this._returnResult({data:null,error:m}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+f.expires_in},f)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",f),this._returnResult({data:f,error:m}))})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var s;const{data:r,error:l}=n;if(l)return this._returnResult({data:null,error:l});const u=await ue(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token});if(u.error)return u;const{data:f}=u;if(f.type!=="webauthn")return{data:f,error:null};switch(f.webauthn.type){case"create":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:JI(f.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:YI(f.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:s}=await this._challenge({factorId:e.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:s}=await this.getUser();if(s)return{data:null,error:s};const r={all:[],phone:[],totp:[],webauthn:[]};for(const l of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])r.all.push(l),l.status==="verified"&&r[l.factor_type].push(l);return{data:r,error:null}}async _getAuthenticatorAssuranceLevel(e){var n,s,r,l;if(e)try{const{payload:w}=Za(e);let E=null;w.aal&&(E=w.aal);let A=E;const{data:{user:C},error:I}=await this.getUser(e);if(I)return this._returnResult({data:null,error:I});((s=(n=C==null?void 0:C.factors)===null||n===void 0?void 0:n.filter(P=>P.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(A="aal2");const D=w.amr||[];return{data:{currentLevel:E,nextLevel:A,currentAuthenticationMethods:D},error:null}}catch(w){if(oe(w))return this._returnResult({data:null,error:w});throw w}const{data:{session:u},error:f}=await this.getSession();if(f)return this._returnResult({data:null,error:f});if(!u)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:m}=Za(u.access_token);let p=null;m.aal&&(p=m.aal);let y=p;((l=(r=u.user.factors)===null||r===void 0?void 0:r.filter(w=>w.status==="verified"))!==null&&l!==void 0?l:[]).length>0&&(y="aal2");const x=m.amr||[];return{data:{currentLevel:p,nextLevel:y,currentAuthenticationMethods:x},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:s},error:r}=n;return r?this._returnResult({data:null,error:r}):s?await ue(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:s.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new Vt})})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async s=>{const{data:{session:r},error:l}=s;if(l)return this._returnResult({data:null,error:l});if(!r)return this._returnResult({data:null,error:new Vt});const u=await ue(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"approve"},xform:f=>({data:f,error:null})});return u.data&&u.data.redirect_url&&gt()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(u.data.redirect_url),u})}catch(s){if(oe(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(e,n){try{return await this._useSession(async s=>{const{data:{session:r},error:l}=s;if(l)return this._returnResult({data:null,error:l});if(!r)return this._returnResult({data:null,error:new Vt});const u=await ue(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"deny"},xform:f=>({data:f,error:null})});return u.data&&u.data.redirect_url&&gt()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(u.data.redirect_url),u})}catch(s){if(oe(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:s}=e;return s?this._returnResult({data:null,error:s}):n?await ue(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:r=>({data:r,error:null})}):this._returnResult({data:null,error:new Vt})})}catch(e){if(oe(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:s},error:r}=n;return r?this._returnResult({data:null,error:r}):s?(await ue(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Vt})})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let s=n.keys.find(f=>f.kid===e);if(s)return s;const r=Date.now();if(s=this.jwks.keys.find(f=>f.kid===e),s&&this.jwks_cached_at+sI>r)return s;const{data:l,error:u}=await ue(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=r,s=l.keys.find(f=>f.kid===e),!s)?null:s}async getClaims(e,n={}){try{let s=e;if(!s){const{data:w,error:E}=await this.getSession();if(E||!w.session)return this._returnResult({data:null,error:E});s=w.session.access_token}const{header:r,payload:l,signature:u,raw:{header:f,payload:m}}=Za(s);n!=null&&n.allowExpired||AI(l.exp);const p=!r.alg||r.alg.startsWith("HS")||!r.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(r.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!p){const{error:w}=await this.getUser(s);if(w)throw w;return{data:{claims:l,header:r,signature:u},error:null}}const y=CI(r.alg),b=await crypto.subtle.importKey("jwk",p,y,!0,["verify"]);if(!await crypto.subtle.verify(y,b,u,hI(`${f}.${m}`)))throw new Pd("Invalid JWT signature");return{data:{claims:l,header:r,signature:u},error:null}}catch(s){if(oe(s))return this._returnResult({data:null,error:s});throw s}}}gr.nextInstanceID={};class o1 extends gr{constructor(e){super(e)}}var r1=function(t,e,n,s){function r(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function f(y){try{p(s.next(y))}catch(b){u(b)}}function m(y){try{p(s.throw(y))}catch(b){u(b)}}function p(y){y.done?l(y.value):r(y.value).then(f,m)}p((s=s.apply(t,e||[])).next())})};const a1={headers:Jk},l1={schema:"public"},u1={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},c1={};class d1{constructor(e,n,s){var r,l,u,f,m,p,y,b;if(this.supabaseUrl=e,this.supabaseKey=n,this.from=C=>this.rest.from(C),this.schema=C=>this.rest.schema(C),this.rpc=(C,I={},O)=>this.rest.rpc(C,I,O),!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const x=Wk(e);this.realtimeUrl=`${x}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${x}/auth/v1`,this.storageUrl=`${x}/storage/v1`,this.functionsUrl=`${x}/functions/v1`;const w=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,E={db:l1,realtime:c1,auth:Object.assign(Object.assign({},u1),{storageKey:w}),global:a1},A=Zk(s??{},E);this.storageKey=(l=(r=A.auth)===null||r===void 0?void 0:r.storageKey)!==null&&l!==void 0?l:"",this.headers=(f=(u=A.global)===null||u===void 0?void 0:u.headers)!==null&&f!==void 0?f:{},this.auth=this._initSupabaseAuthClient((m=A.auth)!==null&&m!==void 0?m:{},this.headers,(p=A.global)===null||p===void 0?void 0:p.fetch),this.fetch=Xk(n,this._getAccessToken.bind(this),(y=A.global)===null||y===void 0?void 0:y.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},A.realtime)),this.rest=new WR(`${x}/rest/v1`,{headers:this.headers,schema:(b=A.db)===null||b===void 0?void 0:b.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new zR(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new $k(this.storageUrl,this.headers,this.fetch)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return r1(this,void 0,void 0,function*(){const{data:s}=yield this.auth.getSession();return(n=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:s,storage:r,storageKey:l,flowType:u,debug:f},m,p){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new o1({url:this.authUrl,headers:Object.assign(Object.assign({},y),m),storageKey:l,autoRefreshToken:e,persistSession:n,detectSessionInUrl:s,storage:r,flowType:u,debug:f,fetch:p})}_initRealtimeClient(e){return new mk(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,s)=>{this._handleTokenChanged(n,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,n,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?(this.realtime.setAuth(s??null),this.changedAccessToken=s):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const f1=(t,e,n)=>new d1(t,e,n),h1="https://vjpollxwktdfuifhqvyi.supabase.co",p1="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZqcG9sbHh3a3RkZnVpZmhxdnlpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk4MjkyMzAsImV4cCI6MjA4NTQwNTIzMH0.MN6q02lfhVuG6RPVFK826XW7-f30am5lXhZDvWDlKv4",Ht=f1(h1,p1),It={async getProfile(t){const{data:e,error:n}=await Ht.from("user_details").select("userid, name, email, password, premium, masterypoints, daysstreak, paymentid, emoji").eq("userid",t.trim().toUpperCase()).maybeSingle();return n&&console.error("[Supabase] Profile Fetch Error:",n),e},async updateProfile(t,e){const n=t.trim().toUpperCase(),{data:s,error:r}=await Ht.from("user_details").update(e).eq("userid",n);return{data:s,error:r}},async checkUser(t){return await Ht.from("user_details").select("userid").eq("email",t.trim().toLowerCase()).maybeSingle()},async checkMasterId(t){return await Ht.from("user_details").select("userid").eq("userid",t.trim().toUpperCase()).maybeSingle()},async findUserByIdentifier(t){const e=t.trim(),n=e.toUpperCase().replace(/^OMNI-/,"");return e.includes("@")?await Ht.from("user_details").select("*").eq("email",e.toLowerCase()).maybeSingle():await Ht.from("user_details").select("*").eq("userid",n).maybeSingle()},async createProfile(t){return await Ht.from("user_details").insert([{userid:t.userid.toUpperCase(),name:t.name,email:t.email.toLowerCase(),password:t.password,masterypoints:0,daysstreak:0,premium:!1,emoji:t.emoji||"",paymentid:""}])},async logChat(t,e,n){const s=t.trim().toUpperCase(),{error:r}=await Ht.from("chat_logs").upsert({userid:s,content:e,showmasterypath:n.isPublicPaths??!1,publicid:n.isPublicProfile??!0,public_masterypath:n.isPublicPaths??!1},{onConflict:"userid"});return{error:r}},async getLatestSyncedState(t){const{data:e}=await Ht.from("chat_logs").select("content").eq("userid",t.trim().toUpperCase()).maybeSingle();return(e==null?void 0:e.content)||null},async findGlobalRoadmap(t){var e;try{const{data:n}=await Ht.from("chat_logs").select("content").not("content","is",null).limit(50);if(!n)return null;const s=t.toLowerCase().trim();for(const r of n){const l=(e=r.content)==null?void 0:e.subjects;if(Array.isArray(l)){const u=l.find(f=>{var m,p,y;return((m=f.subject)==null?void 0:m.toLowerCase())===s||((y=(p=f.roadmap)==null?void 0:p.subject)==null?void 0:y.toLowerCase())===s});if(u!=null&&u.roadmap)return u.roadmap}}return null}catch{return null}},async fetchNotice(t){const{data:e}=await Ht.from("chat_logs").select("notice, warning, updates").eq("userid",t.trim().toUpperCase()).maybeSingle();return e||null},async fetchLeaderboard(){const{data:t,error:e}=await Ht.from("user_details").select("userid, name, masterypoints, premium, emoji").order("masterypoints",{ascending:!1}).limit(50);if(e)return[];const n=t.map(r=>r.userid),{data:s}=await Ht.from("chat_logs").select("userid, publicid, showmasterypath, content").in("userid",n);return t.map(r=>{var m,p,y;const l=s==null?void 0:s.find(b=>b.userid===r.userid),u=(l==null?void 0:l.showmasterypath)??!1;let f=[];return u&&((m=l==null?void 0:l.content)!=null&&m.subjects)&&(f=l.content.subjects.map(b=>{var E,A,C;const x=((A=(E=b.roadmap)==null?void 0:E.steps)==null?void 0:A.reduce((I,O)=>{var D;return I+(((D=O.topics)==null?void 0:D.length)||0)},0))||1,w=((C=b.completedTopics)==null?void 0:C.length)||0;return{subject:b.subject,progress:Math.round(w/x*100)}})),{masterId:`OMNI-${r.userid}`,name:r.name,emoji:r.emoji,totalMasteryPoints:r.masterypoints||0,isPublicProfile:(l==null?void 0:l.publicid)??!0,isPublicPaths:u,isPremium:r.premium,publicSubjects:f,photoUrl:r.emoji?`https://ui-avatars.com/api/?name=${encodeURIComponent(r.emoji)}&background=indigo&color=fff&size=128&font-size=0.6`:`https://ui-avatars.com/api/?name=${encodeURIComponent(r.name)}&background=random&size=128`,subjectsCount:((y=(p=l==null?void 0:l.content)==null?void 0:p.subjects)==null?void 0:y.length)||0}})}};var m1={};const ur={PRO:"gemini-3-pro-preview",FLASH:"gemini-3-flash-preview",TTS:"gemini-2.5-flash-preview-tts",GROQ_DEFAULT:"llama-3.3-70b-versatile"},of=()=>new LR({apiKey:""}),El=async(t,e=!1,n)=>{const s=m1.GROQ_API_KEY;if(s)try{const u=await fetch("https://api.groq.com/openai/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({model:ur.GROQ_DEFAULT,messages:[{role:"user",content:t}],response_format:e?{type:"json_object"}:void 0,temperature:.7})});if(!u.ok)throw new Error("Groq failed");return(await u.json()).choices[0].message.content}catch{console.warn("[Turbo Engine] Groq unavailable, falling back to Gemini...")}return(await of().models.generateContent({model:e?ur.PRO:ur.FLASH,contents:t,config:e?{responseMimeType:"application/json",responseSchema:n}:void 0})).text},rd={},ad={},ld="omnimaster_news_cache",g1=async(t,e="English")=>{const n=await It.findGlobalRoadmap(t);if(n)return n;const s=`Architect a 6-module learning roadmap for "${t}" in ${e}. Provide a module description and 4 sub-topics each. Return valid JSON.`,r={type:Re.OBJECT,properties:{subject:{type:Re.STRING},goal:{type:Re.STRING},steps:{type:Re.ARRAY,items:{type:Re.OBJECT,properties:{id:{type:Re.STRING},title:{type:Re.STRING},description:{type:Re.STRING},topics:{type:Re.ARRAY,items:{type:Re.STRING}}},required:["id","title","description","topics"]}}},required:["subject","goal","steps"]},l=await El(s,!0,r);return JSON.parse(l||"{}")},y1=async(t,e,n="English")=>{const s=`${e}-${t}-${n}`;if(rd[s])return rd[s];const r=`Explain "${t}" within the context of "${e}" in ${n}. Use rich Markdown. Include 3 core points and 2 practical examples. Return JSON with fields: title, content, keyPoints (array), examples (array).`,l={type:Re.OBJECT,properties:{title:{type:Re.STRING},content:{type:Re.STRING},keyPoints:{type:Re.ARRAY,items:{type:Re.STRING}},examples:{type:Re.ARRAY,items:{type:Re.STRING}}},required:["title","content","keyPoints","examples"]},u=await El(r,!0,l),f=JSON.parse(u||"{}");return rd[s]=f,f},v1=async(t,e,n="English")=>{const s=`${e}-${t}-${n}`;if(ad[s])return ad[s];const r=`Create 5 challenging multiple-choice questions for "${t}" in ${n}. Include clear explanations. Return JSON array of objects with fields: question, options (4 strings), correctAnswerIndex (0-3), explanation.`,l={type:Re.ARRAY,items:{type:Re.OBJECT,properties:{question:{type:Re.STRING},options:{type:Re.ARRAY,items:{type:Re.STRING}},correctAnswerIndex:{type:Re.INTEGER},explanation:{type:Re.STRING}},required:["question","options","correctAnswerIndex","explanation"]}},u=await El(r,!0,l),f=JSON.parse(u||"[]");return ad[s]=f,f},_1=async(t="Discovery",e="English")=>{var s,r,l;const n=localStorage.getItem(ld);if(n)try{const u=JSON.parse(n),f=new Date(u.timestamp),m=new Date;if(f.toDateString()===m.toDateString()&&u.category===t&&u.language===e)return u.news}catch{localStorage.removeItem(ld)}try{const f=await of().models.generateContent({model:ur.FLASH,contents:`Global latest news in ${t} for ${e}. 5 stories. Return ONLY JSON.`,config:{tools:[{googleSearch:{}}],responseMimeType:"application/json"}}),m=(l=(r=(s=f.candidates)==null?void 0:s[0])==null?void 0:r.groundingMetadata)==null?void 0:l.groundingChunks,y=JSON.parse(f.text||"[]").map((b,x)=>{var w,E;return{...b,id:b.id||`news-${x}-${Date.now()}`,timestamp:Date.now(),url:((E=(w=m==null?void 0:m[x])==null?void 0:w.web)==null?void 0:E.uri)||b.url||"#"}});return localStorage.setItem(ld,JSON.stringify({timestamp:Date.now(),category:t,language:e,news:y})),y}catch{return[]}},b1=async(t,e="Kore")=>{var n,s,r,l,u,f;try{return((f=(u=(l=(r=(s=(n=(await of().models.generateContent({model:ur.TTS,contents:[{parts:[{text:`Say clearly: ${t}`}]}],config:{responseModalities:[cr.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}}}})).candidates)==null?void 0:n[0])==null?void 0:s.content)==null?void 0:r.parts)==null?void 0:l[0])==null?void 0:u.inlineData)==null?void 0:f.data)||""}catch{return""}},x1=async(t,e,n,s,r)=>{const l=`Persona: ${t}. Name: ${e}. Context: ${s}. Message: ${r}. Lang: ${n}. Response in 1 sentence.`;return await El(l)||"I'm with you."},xt={AUTH:"omnimaster_auth",SETTINGS:"omnimaster_settings",SUBJECTS_PREFIX:"omnimaster_subjects_",USAGE:"omnimaster_usage",CHAT_PREFIX:"omnimaster_chat_history_"},S1={dailyTopicsCount:0,lastTopicReset:Date.now(),adUnlockedSubjects:!1,adUnlockedTopicsToday:!1,dailyRewardClaimed:!1,streak:0,dailySubjectLessons:{}},Fe={saveUser:t=>{localStorage.setItem(xt.AUTH,JSON.stringify(t))},getUser:()=>{const t=localStorage.getItem(xt.AUTH);return t?JSON.parse(t):null},clearAuth:()=>{localStorage.removeItem(xt.AUTH)},saveSettings:t=>{localStorage.setItem(xt.SETTINGS,JSON.stringify(t))},getSettings:()=>{const t=localStorage.getItem(xt.SETTINGS);return t?JSON.parse(t):null},getUsage:()=>{const t=localStorage.getItem(xt.USAGE);let e=t?JSON.parse(t):{...S1};e.dailySubjectLessons||(e.dailySubjectLessons={});const n=new Date(e.lastTopicReset),s=new Date,r=new Date(n.getFullYear(),n.getMonth(),n.getDate()).getTime(),l=new Date(s.getFullYear(),s.getMonth(),s.getDate()).getTime(),u=1440*60*1e3;if(l>r){const f={...e,dailyTopicsCount:0,lastTopicReset:Date.now(),adUnlockedTopicsToday:!1,dailyRewardClaimed:!1,dailySubjectLessons:{},streak:l-r>u?0:e.streak};return localStorage.setItem(xt.USAGE,JSON.stringify(f)),f}return e},saveUsage:t=>{localStorage.setItem(xt.USAGE,JSON.stringify(t))},incrementUsage:t=>{var s;const e=Fe.getUsage(),n={...e,dailyTopicsCount:(e.dailyTopicsCount||0)+1,dailySubjectLessons:{...e.dailySubjectLessons,[t]:(((s=e.dailySubjectLessons)==null?void 0:s[t])||0)+1}};return Fe.saveUsage(n),n},saveSubjects:(t,e)=>{localStorage.setItem(`${xt.SUBJECTS_PREFIX}${t}`,JSON.stringify(e))},getSubjects:t=>{const e=localStorage.getItem(`${xt.SUBJECTS_PREFIX}${t}`);return e?JSON.parse(e):[]},saveChatHistory:(t,e)=>{const n=e.slice(-50);localStorage.setItem(`${xt.CHAT_PREFIX}${t}`,JSON.stringify(n))},getChatHistory:t=>{const e=localStorage.getItem(`${xt.CHAT_PREFIX}${t}`);return e?JSON.parse(e):[]},syncToCloud:async(t,e)=>{try{if(!t||!e)return!1;const n=e.subjects||[],s=e.settings||{},r=e.usage||{},l=Fe.calculateMasteryPoints(n);await It.updateProfile(t,{masterypoints:l,daysstreak:r.streak||0,premium:s.isPremium||!1,name:s.userName||"Learner"});const u={subjects:n,settings:s,usage:r,syncedAt:Date.now()},{error:f}=await It.logChat(t,u,s);return!f}catch(n){return console.error("[CloudSync] Sync Error:",n),!1}},recoverFromCloud:async t=>{try{const e=await It.getLatestSyncedState(t);return e&&e.subjects?(localStorage.setItem(`${xt.SUBJECTS_PREFIX}${t}`,JSON.stringify(e.subjects)),e.settings&&localStorage.setItem(xt.SETTINGS,JSON.stringify(e.settings)),e.usage&&localStorage.setItem(xt.USAGE,JSON.stringify(e.usage)),e):null}catch{return null}},calculateMasteryPoints:t=>!t||!Array.isArray(t)?0:t.reduce((e,n)=>{var s;return e+(((s=n.completedTopics)==null?void 0:s.length)||0)},0)},k0={English:{"nav.dashboard":"Dashboard","nav.roadmaps":"Roadmaps","nav.about":"About","nav.settings":"Settings","home.welcome":"Welcome back","home.quote":'"The beautiful thing about learning is that no one can take it away from you."',"home.activePaths":"Active Paths","home.mastered":"Mastered","home.knowledge":"Knowledge","home.mastery":"Mastery","home.next":"What shall we master next?","home.placeholder":"E.g. Quantum Physics, Spanish, Excel...","home.go":"Go","home.recent":"Recent Paths","home.viewAll":"View All","about.title":"The world's most comprehensive learning platform","about.features":"Features","about.safetyTitle":"Data Safety is Priority #1","about.safetyDesc":"OmniMaster AI is built for privacy. Your data is stored locally in your browser.","settings.title":"Settings","settings.language":"Preferred Language","settings.voice":"Omni's Voice","settings.persona":"Companion Persona","settings.export":"Export Journey","settings.import":"Import Journey","settings.signout":"Sign Out","settings.delete":"Delete Everything","quiz.check":"Check Answer","quiz.next":"Next Question","quiz.finish":"Finish","quiz.completed":"Quiz Completed!","sidebar.milestones":"Milestones Reached","sidebar.mastered":"topics mastered","roadmap.verify":"Verify Mastery (Quiz)","roadmap.select":"Select a target topic","persona.Teacher":"Teacher","persona.Friend":"Best Friend","persona.Brother":"Big Brother","persona.Sister":"Big Sister","persona.Girlfriend":"Girlfriend","persona.Boyfriend":"Boyfriend"},Hindi:{"nav.dashboard":"","nav.roadmaps":"","nav.about":"","nav.settings":"","home.welcome":"   ","home.quote":'"            "',"home.activePaths":" ","home.mastered":" ","home.knowledge":"","home.mastery":"","home.next":"   ?","home.placeholder":":  , , ...","home.go":" ","home.recent":"  ","home.viewAll":" ","about.title":"     ","about.features":"","about.safetyTitle":"   #1 ","about.safetyDesc":"OmniMaster AI             ","settings.title":"","settings.language":" ","settings.voice":"  ","settings.persona":"  ","settings.export":"  ","settings.import":"  ","settings.signout":" ","settings.delete":"   ","quiz.check":" ","quiz.next":" ","quiz.finish":"","quiz.completed":"  !","sidebar.milestones":"  ","sidebar.mastered":"  ","roadmap.verify":"    ()","roadmap.select":"  ","persona.Teacher":"","persona.Friend":" ","persona.Brother":" ","persona.Sister":" ","persona.Girlfriend":"","persona.Boyfriend":""},Spanish:{"nav.dashboard":"Tablero","nav.roadmaps":"Rutas","nav.about":"Acerca de","nav.settings":"Configuracin","home.welcome":"Bienvenido de nuevo","home.quote":'"Lo hermoso del aprendizaje es que nadie te lo puede quitar."',"home.activePaths":"Rutas Activas","home.mastered":"Dominado","home.knowledge":"Conocimiento","home.mastery":"Maestra","home.next":"Qu dominaremos a continuacin?","home.placeholder":"Ej. Fsica Cuntica, Espaol, Excel...","home.go":"Ir","home.recent":"Rutas Recientes","home.viewAll":"Ver Todo","about.title":"La plataforma de aprendizaje ms completa del mundo","about.features":"Caractersticas","about.safetyTitle":"La seguridad de los datos es la prioridad n. 1","about.safetyDesc":"OmniMaster AI est diseado para la privacidad. Sus datos se almacenan localmente.","settings.title":"Configuracin","settings.language":"Idioma Preferido","settings.voice":"Voz de Omni","settings.persona":"Persona del Compaero","settings.export":"Exportar Viaje","settings.import":"Importar Viaje","settings.signout":"Cerrar Sesin","settings.delete":"Eliminar Todo","quiz.check":"Verificar Respuesta","quiz.next":"Siguiente Pregunta","quiz.finish":"Terminar","quiz.completed":"Cuestionario Completado!","sidebar.milestones":"Hitos Alcanzados","sidebar.mastered":"temas dominados","roadmap.verify":"Verificar Maestra (Cuestionario)","roadmap.select":"Seleccione un tema objetivo","persona.Teacher":"Profesor","persona.Friend":"Mejor Amigo","persona.Brother":"Hermano Mayor","persona.Sister":"Hermana Mayor","persona.Girlfriend":"Novia","persona.Boyfriend":"Novio"},French:{"nav.dashboard":"Tableau de bord","nav.roadmaps":"Feuilles de route","nav.about":" propos","nav.settings":"Paramtres","home.welcome":"Bon retour","home.quote":`"La plus belle chose  propos de l'apprentissage est que personne ne peut vous l'enlever."`,"home.activePaths":"Parcours Actifs","home.mastered":"Matris","home.knowledge":"Connaissance","home.mastery":"Matrise","home.next":"Que allons-nous matriser ensuite ?","home.placeholder":"Ex: Physique Quantique, Espagnol, Excel...","home.go":"Aller","home.recent":"Parcours Rcents","home.viewAll":"Voir Tout","about.title":"La plateforme d'apprentissage la plus complte au monde","about.features":"Fonctionnalits","about.safetyTitle":"La scurit des donnes est la priorit n1","about.safetyDesc":"OmniMaster AI est conu pour la confidentialit. Vos donnes sont stockes localement.","settings.title":"Paramtres","settings.language":"Langue Prfre","settings.voice":"Voix d'Omni","settings.persona":"Persona du Compagnon","settings.export":"Exporter le Parcours","settings.import":"Importer le Parcours","settings.signout":"Dconnexion","settings.delete":"Tout Supprimer","quiz.check":"Vrifier la Rponse","quiz.next":"Question Suivante","quiz.finish":"Terminer","quiz.completed":"Quiz Termin !","sidebar.milestones":"Jalons Atteints","sidebar.mastered":"sujets matriss","roadmap.verify":"Vrifier la Matrise (Quiz)","roadmap.select":"Slectionnez un sujet cible","persona.Teacher":"Professeur","persona.Friend":"Meilleur Ami","persona.Brother":"Grand Frre","persona.Sister":"Grande Sur","persona.Girlfriend":"Petite Amie","persona.Boyfriend":"Petit Ami"},Arabic:{"nav.dashboard":" ","nav.roadmaps":" ","nav.about":"","nav.settings":"","home.welcome":" ","home.quote":'"           ."',"home.activePaths":" ","home.mastered":"","home.knowledge":"","home.mastery":"","home.next":"   ","home.placeholder":":    ...","home.go":"","home.recent":" ","home.viewAll":" ","about.title":"     ","about.features":"","about.safetyTitle":"     1","about.safetyDesc":"  OmniMaster AI .    .","settings.title":"","settings.language":" ","settings.voice":" ","settings.persona":" ","settings.export":" ","settings.import":" ","settings.signout":" ","settings.delete":"  ","quiz.check":"  ","quiz.next":" ","quiz.finish":"","quiz.completed":" !","sidebar.milestones":"    ","sidebar.mastered":" ","roadmap.verify":"   ()","roadmap.select":"  ","persona.Teacher":"","persona.Friend":" ","persona.Brother":" ","persona.Sister":" ","persona.Girlfriend":"","persona.Boyfriend":""},German:{"nav.dashboard":"Dashboard","nav.roadmaps":"Roadmaps","nav.about":"ber","nav.settings":"Einstellungen","home.welcome":"Willkommen zurck","home.quote":'"Das Schne am Lernen ist, dass es einem niemand wegnehmen kann."',"home.activePaths":"Aktive Pfade","home.mastered":"Gelernt","home.knowledge":"Wissen","home.mastery":"Meisterschaft","home.next":"Was wollen wir als Nchstes meistern?","home.placeholder":"Z.B. Quantenphysik, Spanisch, Excel...","home.go":"Los","home.recent":"Aktuelle Pfade","home.viewAll":"Alle anzeigen","about.title":"Die weltweit umfassendste Lernplattform","about.features":"Funktionen","about.safetyTitle":"Datensicherheit hat Prioritt Nr. 1","about.safetyDesc":"OmniMaster AI ist auf Datenschutz ausgelegt. Ihre Daten werden lokal gespeichert.","settings.title":"Einstellungen","settings.language":"Bevorzugte Sprache","settings.voice":"Omnis Stimme","settings.persona":"Begleiter-Persona","settings.export":"Reise exportieren","settings.import":"Reise importieren","settings.signout":"Abmelden","settings.delete":"Alles lschen","quiz.check":"Antwort prfen","quiz.next":"Nchste Frage","quiz.finish":"Beenden","quiz.completed":"Quiz abgeschlossen!","sidebar.milestones":"Meilensteine erreicht","sidebar.mastered":"Themen gemeistert","roadmap.verify":"Meisterschaft prfen (Quiz)","roadmap.select":"Whlen Sie ein Zielthema","persona.Teacher":"Lehrer","persona.Friend":"Bester Freund","persona.Brother":"Groer Bruder","persona.Sister":"Groe Schwester","persona.Girlfriend":"Freundin","persona.Boyfriend":"Freund"},Chinese:{"nav.dashboard":"","nav.roadmaps":"","nav.about":"","nav.settings":"","home.welcome":"","home.quote":"","home.activePaths":"","home.mastered":"","home.knowledge":"","home.mastery":"","home.next":"","home.placeholder":"Excel...","home.go":"","home.recent":"","home.viewAll":"","about.title":"","about.features":"","about.safetyTitle":"","about.safetyDesc":"OmniMaster AI ","settings.title":"","settings.language":"","settings.voice":"Omni ","settings.persona":"","settings.export":"","settings.import":"","settings.signout":"","settings.delete":"","quiz.check":"","quiz.next":"","quiz.finish":"","quiz.completed":"","sidebar.milestones":"","sidebar.mastered":"","roadmap.verify":"","roadmap.select":"","persona.Teacher":"","persona.Friend":"","persona.Brother":"","persona.Sister":"","persona.Girlfriend":"","persona.Boyfriend":""},Japanese:{"nav.dashboard":"","nav.roadmaps":"","nav.about":"","nav.settings":"","home.welcome":"","home.quote":"","home.activePaths":"","home.mastered":"","home.knowledge":"","home.mastery":"","home.next":"","home.placeholder":"Excel...","home.go":"","home.recent":"","home.viewAll":"","about.title":"","about.features":"","about.safetyTitle":"","about.safetyDesc":"OmniMaster AI","settings.title":"","settings.language":"","settings.voice":"Omni","settings.persona":"","settings.export":"","settings.import":"","settings.signout":"","settings.delete":"","quiz.check":"","quiz.next":"","quiz.finish":"","quiz.completed":"","sidebar.milestones":"","sidebar.mastered":"","roadmap.verify":"","roadmap.select":"","persona.Teacher":"","persona.Friend":"","persona.Brother":"","persona.Sister":"","persona.Girlfriend":"","persona.Boyfriend":""},Portuguese:{"nav.dashboard":"Painel","nav.roadmaps":"Roteiros","nav.about":"Sobre","nav.settings":"Configuraes","home.welcome":"Bem-vindo de volta","home.quote":'"A coisa mais bonita sobre o aprendizado  que ningum pode tir-lo de voc."',"home.activePaths":"Caminhos Ativos","home.mastered":"Dominado","home.knowledge":"Conhecimento","home.mastery":"Maestria","home.next":"O que vamos dominar a seguir?","home.placeholder":"Ex: Fsica Quntica, Espanhol, Excel...","home.go":"Ir","home.recent":"Caminhos Recentes","home.viewAll":"Ver Tudo","about.title":"A plataforma de aprendizado mais abrangente do mundo","about.features":"Funcionalidades","about.safetyTitle":"Segurana de dados  a prioridade n 1","about.safetyDesc":"OmniMaster AI foi construdo para privacidade.","settings.title":"Configuraes","settings.language":"Idioma Preferido","settings.voice":"Voz do Omni","settings.persona":"Persona do Companheiro","settings.export":"Exportar Jornada","settings.import":"Importar Jornada","settings.signout":"Sair","settings.delete":"Excluir Tudo","quiz.check":"Verificar Resposta","quiz.next":"Prxima Pergunta","quiz.finish":"Finalizar","quiz.completed":"Questionrio Concludo!","sidebar.milestones":"Marcos Alcanados","sidebar.mastered":"tpicos dominados","roadmap.verify":"Verificar Maestria (Quiz)","roadmap.select":"Selecione um tpico alvo","persona.Teacher":"Professor","persona.Friend":"Melhor Amigo","persona.Brother":"Irmo Mais Velho","persona.Sister":"Irm Mais Velha","persona.Girlfriend":"Namorada","persona.Boyfriend":"Namorado"},Russian:{"nav.dashboard":"","nav.roadmaps":" ","nav.about":" ","nav.settings":"","home.welcome":" ","home.quote":'"   ,        ."',"home.activePaths":" ","home.mastered":"","home.knowledge":"","home.mastery":"","home.next":"   ?","home.placeholder":".,  , , Excel...","home.go":"","home.recent":" ","home.viewAll":" ","about.title":"      ","about.features":"","about.safetyTitle":"    1","about.safetyDesc":"OmniMaster AI   .","settings.title":"","settings.language":" ","settings.voice":" Omni","settings.persona":" ","settings.export":" ","settings.import":" ","settings.signout":"","settings.delete":" ","quiz.check":" ","quiz.next":" ","quiz.finish":"","quiz.completed":" !","sidebar.milestones":" ","sidebar.mastered":" ","roadmap.verify":"  ()","roadmap.select":"  ","persona.Teacher":"","persona.Friend":" ","persona.Brother":" ","persona.Sister":" ","persona.Girlfriend":"","persona.Boyfriend":""}},br=t=>({t:n=>{var r,l;return((r=k0[t||"English"])==null?void 0:r[n])||((l=k0.English)==null?void 0:l[n])||n}}),I0=({roadmap:t,selectedStepId:e,selectedTopic:n,completedTopics:s,onSelectTopic:r,onClose:l,language:u})=>_.jsxs("div",{className:"w-full h-full flex flex-col bg-white",children:[_.jsxs("div",{className:"p-5 border-b border-slate-100 flex items-center justify-between",children:[_.jsxs("div",{children:[_.jsx("h2",{className:"text-lg font-black text-indigo-600 truncate max-w-[200px] leading-tight",children:t.subject}),_.jsx("p",{className:"text-[9px] text-slate-400 uppercase tracking-[0.2em] font-black",children:"Subject Path"})]}),l&&_.jsx("button",{onClick:l,className:"w-10 h-10 bg-slate-50 text-slate-400 rounded-xl flex items-center justify-center hover:bg-slate-100",children:_.jsx("i",{className:"fas fa-times"})})]}),_.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-8 no-scrollbar",children:t.steps.map((f,m)=>_.jsxs("div",{className:"space-y-4",children:[_.jsxs("h3",{className:"text-[10px] font-black text-slate-400 flex items-center uppercase tracking-[0.15em]",children:[_.jsx("span",{className:"w-6 h-6 rounded-lg bg-indigo-50 text-indigo-600 flex items-center justify-center text-[10px] mr-3 flex-shrink-0 font-black",children:m+1}),_.jsx("span",{className:"truncate",children:f.title})]}),_.jsx("div",{className:"space-y-2",children:f.topics.map(p=>{const y=n===p,b=s.includes(p);return _.jsxs("button",{onClick:()=>r(f.id,p),className:`w-full text-left px-4 py-3 text-sm rounded-2xl transition-all flex items-center justify-between group relative overflow-hidden ${y?"bg-indigo-600 text-white shadow-xl shadow-indigo-100 font-bold":"text-slate-600 hover:bg-indigo-50/50 hover:text-indigo-600 border border-transparent hover:border-indigo-100"}`,children:[_.jsx("span",{className:"truncate pr-2 relative z-10",children:p}),b&&_.jsx("i",{className:`fas fa-check-circle text-[10px] relative z-10 ${y?"text-white":"text-green-500"}`})]},p)})})]},f.id))}),_.jsxs("div",{className:"p-6 bg-slate-50 border-t border-slate-100",children:[_.jsxs("div",{className:"flex items-center justify-between mb-2",children:[_.jsx("span",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Current Mastery"}),_.jsxs("span",{className:"text-[10px] font-black text-indigo-600",children:[Math.round(s.length/t.steps.reduce((f,m)=>f+m.topics.length,0)*100),"%"]})]}),_.jsx("div",{className:"h-1.5 w-full bg-slate-200 rounded-full overflow-hidden",children:_.jsx("div",{className:"h-full bg-indigo-600 rounded-full",style:{width:`${s.length/t.steps.reduce((f,m)=>f+m.topics.length,0)*100}%`}})})]})]}),w1=({appState:t})=>{var he;const[e,n]=W.useState(!1),[s,r]=W.useState([]),[l,u]=W.useState(""),[f,m]=W.useState(!1),[p,y]=W.useState(!1),[b,x]=W.useState(!1),[w,E]=W.useState("idle"),A=W.useRef(null),C=W.useRef(null),I=W.useRef(null),O=((he=t.authUser)==null?void 0:he.id)||"guest",D=t.userSettings.userName||"Learner",P=t.userSettings.language||"English",N=t.userSettings.companionPersona||"Friend",H=t.userSettings.aiVoice||"female";W.useEffect(()=>{const ae=Fe.getChatHistory(O);r(ae)},[O]),W.useEffect(()=>{s.length>0&&Fe.saveChatHistory(O,s)},[s,O]);const V=()=>H==="male"?N==="Brother"||N==="Boyfriend"?"Fenrir":"Charon":N==="Sister"||N==="Girlfriend"?"Zephyr":"Kore",Z={Teacher:'You are "Omni," a wise teacher. 1 sentence max per response.',Friend:'You are "Omni," a high-energy best friend. Use emojis. 1 sentence max.',Brother:'You are "Omni," a playful big brother. 1 sentence max.',Sister:'You are "Omni," a caring big sister. 1 sentence max.',Girlfriend:'You are "Omni," a sweet girlfriend. 1 sentence max.',Boyfriend:'You are "Omni," a supportive boyfriend. 1 sentence max.'};W.useEffect(()=>{const ae=window.SpeechRecognition||window.webkitSpeechRecognition;if(ae){const ce=new ae;ce.continuous=!1,ce.onstart=()=>{y(!0),E("listening")},ce.onresult=Ae=>{fe(Ae.results[0][0].transcript)},ce.onend=()=>{y(!1),E("idle")},C.current=ce}},[P]),W.useEffect(()=>{var ae;(ae=A.current)==null||ae.scrollIntoView({behavior:"smooth"})},[s,f]);const Y=ae=>{const ce=atob(ae),Ae=new Uint8Array(ce.length);for(let z=0;z<ce.length;z++)Ae[z]=ce.charCodeAt(z);return Ae},ee=async ae=>{if(!(!ae||!b))try{I.current||(I.current=new(window.AudioContext||window.webkitAudioContext)({sampleRate:24e3})),I.current.state==="suspended"&&await I.current.resume();const ce=Y(ae),Ae=new Int16Array(ce.buffer),z=I.current.createBuffer(1,Ae.length,24e3),K=z.getChannelData(0);for(let _e=0;_e<Ae.length;_e++)K[_e]=Ae[_e]/32768;const ne=I.current.createBufferSource();ne.buffer=z,ne.connect(I.current.destination),E("speaking"),ne.onended=()=>E("idle"),ne.start()}catch(ce){console.error("Audio playback error",ce)}},fe=async ae=>{const ce=ae||l;if(ce.trim()){r(Ae=>[...Ae,{role:"user",text:ce}]),u(""),m(!0),E("thinking");try{const Ae=await x1(Z[N],D,P,"Mastery context",ce);r(K=>[...K,{role:"model",text:Ae}]);const z=await b1(Ae,V());z&&await ee(z)}catch{E("idle")}finally{m(!1)}}};return _.jsxs("div",{className:"fixed bottom-24 right-4 md:bottom-6 md:right-6 z-[80]",children:[!e&&_.jsx("button",{onClick:()=>n(!0),className:"bg-white p-1 rounded-full shadow-2xl active:scale-95 transition-all",children:_.jsx("div",{className:`relative w-14 h-14 md:w-16 md:h-16 flex items-center justify-center bg-indigo-600 rounded-2xl border-2 border-white/20 shadow-lg ${w==="thinking"?"animate-bounce":""}`,children:_.jsx("i",{className:"fas fa-brain text-white text-2xl"})})}),e&&_.jsxs("div",{className:"fixed inset-x-4 bottom-24 md:absolute md:inset-auto md:right-0 md:bottom-0 w-auto md:w-96 h-[65vh] md:h-[550px] bg-white rounded-t-[32px] md:rounded-[40px] shadow-2xl flex flex-col overflow-hidden border border-slate-100 animate-in slide-in-from-bottom-10",children:[_.jsxs("div",{className:"p-4 md:p-5 flex items-center justify-between text-white bg-indigo-600",children:[_.jsxs("div",{className:"flex items-center space-x-3",children:[_.jsx("div",{className:"w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center",children:_.jsx("i",{className:"fas fa-robot text-xs"})}),_.jsxs("span",{className:"font-black text-xs",children:["Omni (",N,")"]})]}),_.jsxs("div",{className:"flex items-center space-x-2",children:[_.jsx("button",{onClick:()=>x(!b),className:`w-8 h-8 rounded-lg flex items-center justify-center transition-colors ${b?"bg-white/20":"bg-red-500 shadow-md"}`,children:_.jsx("i",{className:`fas ${b?"fa-volume-up":"fa-volume-mute"}`})}),_.jsx("button",{onClick:()=>n(!1),className:"p-2 bg-white/10 rounded-lg",children:_.jsx("i",{className:"fas fa-times"})})]})]}),_.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-slate-50 no-scrollbar",children:[s.length===0&&_.jsx("div",{className:"text-center py-10 opacity-30",children:_.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest",children:"Start a session with your AI buddy"})}),s.map((ae,ce)=>_.jsx("div",{className:`flex ${ae.role==="user"?"justify-end":"justify-start"}`,children:_.jsx("div",{className:`max-w-[85%] p-3 rounded-2xl text-xs md:text-sm ${ae.role==="user"?"bg-indigo-600 text-white":"bg-white border border-slate-200 text-slate-800 shadow-sm"}`,children:ae.text})},ce)),f&&_.jsx("div",{className:"text-[10px] text-indigo-400 font-black uppercase animate-pulse",children:"thinking..."}),_.jsx("div",{ref:A})]}),_.jsx("div",{className:"p-3 md:p-4 bg-white border-t border-slate-100",children:_.jsxs("div",{className:"flex items-center space-x-2",children:[_.jsx("button",{onClick:()=>{var ae,ce;return p?(ae=C.current)==null?void 0:ae.stop():(ce=C.current)==null?void 0:ce.start()},className:`w-12 h-12 rounded-xl flex items-center justify-center transition-all ${p?"bg-red-500 text-white animate-pulse":"bg-slate-100 text-slate-400"}`,children:_.jsx("i",{className:`fas ${p?"fa-stop":"fa-microphone"}`})}),_.jsx("input",{type:"text",value:l,onChange:ae=>u(ae.target.value),onKeyPress:ae=>ae.key==="Enter"&&fe(),placeholder:"Talk to Omni...",className:"flex-1 bg-slate-100 rounded-xl px-4 py-3 text-sm outline-none"}),_.jsx("button",{onClick:()=>fe(),className:"w-12 h-12 bg-indigo-600 text-white rounded-xl flex items-center justify-center shadow-lg",children:_.jsx("i",{className:"fas fa-paper-plane text-xs"})})]})})]})]})},T1={display:{slot:"5068979219",format:"auto",responsive:"true",style:{display:"block",minWidth:"250px",minHeight:"100px"}},fluid:{slot:"7691079606",format:"fluid",layoutKey:"-fb+5w+4e-db+86",style:{display:"block",minWidth:"250px"}},article:{slot:"1819805828",format:"fluid",layout:"in-article",style:{display:"block",textAlign:"center",minWidth:"250px"}}},bn=({type:t="display",isPremium:e=!1,className:n=""})=>{const s=W.useRef(null),r=W.useRef(null),l=W.useRef(!1),[u,f]=W.useState(!1),m=T1[t];return W.useEffect(()=>{if(e||l.current)return;const p=new IntersectionObserver(y=>{const[b]=y;if(b.isIntersecting&&s.current&&s.current.offsetWidth>=250)try{r.current&&!r.current.getAttribute("data-adsbygoogle-status")&&((window.adsbygoogle||[]).push({}),l.current=!0,f(!0),p.disconnect())}catch(w){console.error("AdSense Push Failure:",w)}},{threshold:.1});return s.current&&p.observe(s.current),()=>p.disconnect()},[e,t]),e?null:_.jsx("div",{className:`w-full flex flex-col items-center justify-center my-6 overflow-hidden ${n}`,ref:s,style:{minWidth:"250px",minHeight:"100px"},children:_.jsxs("div",{className:"w-full max-w-4xl bg-slate-50 border border-slate-200 rounded-3xl overflow-hidden relative shadow-sm min-h-[100px] flex items-center justify-center",children:[_.jsx("div",{className:"absolute top-1 left-2 text-[8px] font-black text-slate-300 uppercase tracking-widest z-0",children:"Sponsor Content"}),_.jsx("ins",{className:"adsbygoogle",ref:r,style:m.style,"data-ad-client":"ca-pub-6150753757369593","data-ad-slot":m.slot,"data-ad-format":m.format,...t==="fluid"?{"data-ad-layout-key":m.layoutKey}:{},...t==="article"?{"data-ad-layout":m.layout}:{},"data-full-width-responsive":t==="display"?"true":void 0}),!u&&_.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none -z-10 opacity-30",children:_.jsxs("div",{className:"text-center",children:[_.jsx("i",{className:"fas fa-certificate text-slate-200 text-xl mb-1"}),_.jsx("p",{className:"text-[8px] font-black text-slate-300 uppercase tracking-widest",children:"Awaiting Ad Container..."})]})})]})})},E1=({questions:t,onComplete:e,language:n,isPremium:s})=>{const{t:r}=br(n),[l,u]=W.useState(0),[f,m]=W.useState(null),[p,y]=W.useState(!1),[b,x]=W.useState(0),[w,E]=W.useState(!1),A=t[l],C=D=>{p||m(D)},I=()=>{f!==null&&(y(!0),f===A.correctAnswerIndex&&x(b+1))},O=()=>{l<t.length-1?(u(l+1),m(null),y(!1)):E(!0)};return w?_.jsxs("div",{className:"p-8 text-center bg-white rounded-2xl shadow-xl border border-slate-100",children:[_.jsxs("div",{className:"w-20 h-20 bg-indigo-100 text-indigo-600 rounded-full flex items-center justify-center mx-auto mb-4 text-3xl font-bold",children:[b,"/",t.length]}),_.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:r("quiz.completed")}),_.jsx("p",{className:"text-slate-600 mb-6",children:b===t.length?"Perfect! You've mastered this topic.":b>t.length/2?"Good job! Keep reviewing to bridge the gaps.":"Review the topic again to improve your understanding."}),_.jsx(bn,{isPremium:s,type:"fluid",className:"mb-6"}),_.jsx("button",{onClick:e,className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition-colors",children:"Back to Lesson"})]}):_.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6 border border-slate-100",children:[_.jsxs("div",{className:"flex justify-between items-center mb-6",children:[_.jsxs("span",{className:"text-xs font-bold text-indigo-600 bg-indigo-50 px-3 py-1 rounded-full uppercase",children:["Question ",l+1," of ",t.length]}),_.jsx("div",{className:"h-2 w-32 bg-slate-100 rounded-full overflow-hidden",children:_.jsx("div",{className:"h-full bg-indigo-600 transition-all duration-300",style:{width:`${(l+1)/t.length*100}%`}})})]}),_.jsx("h3",{className:"text-xl font-semibold text-slate-800 mb-6 leading-relaxed",children:A.question}),_.jsx("div",{className:"space-y-3 mb-8",children:A.options.map((D,P)=>{let N="w-full text-left p-4 rounded-xl border-2 transition-all ";return p?P===A.correctAnswerIndex?N+="border-green-500 bg-green-50 text-green-700":f===P?N+="border-red-500 bg-red-50 text-red-700":N+="border-slate-100 text-slate-400":N+=f===P?"border-indigo-600 bg-indigo-50 text-indigo-700 shadow-sm":"border-slate-100 hover:border-indigo-300 text-slate-700",_.jsx("button",{onClick:()=>C(P),className:N,children:_.jsxs("div",{className:"flex items-center",children:[_.jsx("span",{className:"w-8 h-8 rounded-full border-2 border-current flex items-center justify-center mr-4 text-xs font-bold uppercase",children:String.fromCharCode(65+P)}),D]})},P)})}),p&&_.jsxs("div",{className:"mb-8 p-4 bg-slate-50 rounded-xl border-l-4 border-indigo-500",children:[_.jsx("p",{className:"text-sm font-semibold text-indigo-600 mb-1",children:"Explanation:"}),_.jsx("p",{className:"text-sm text-slate-700",children:A.explanation})]}),_.jsx("div",{className:"flex justify-end pb-10",children:p?_.jsxs("button",{onClick:O,className:"px-8 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition-all flex items-center",children:[l===t.length-1?r("quiz.finish"):r("quiz.next"),_.jsx("i",{className:"fas fa-arrow-right ml-2"})]}):_.jsx("button",{onClick:I,disabled:f===null,className:"px-8 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 disabled:opacity-50 transition-all",children:r("quiz.check")})}),_.jsx("div",{className:"h-12 md:hidden"})]})},A1=({subjects:t,onSelectSubject:e,onDeleteSubject:n,onAddNew:s,activeSubjectId:r,language:l,isPremium:u})=>{const{t:f}=br(l),m=p=>{const y=p.roadmap.steps.reduce((b,x)=>b+x.topics.length,0);return y===0?0:Math.round(p.completedTopics.length/y*100)};return _.jsx("div",{className:"flex-1 overflow-y-auto p-6 lg:p-12",children:_.jsxs("div",{className:"max-w-6xl mx-auto",children:[_.jsxs("header",{className:"mb-8 flex flex-col md:flex-row md:items-center justify-between gap-6",children:[_.jsxs("div",{children:[_.jsx("h2",{className:"text-3xl font-extrabold text-slate-900 mb-2",children:f("nav.roadmaps")}),_.jsx("p",{className:"text-slate-500",children:"Track your progress across all your mastery journeys."})]}),_.jsxs("button",{onClick:s,className:"flex items-center justify-center space-x-2 px-6 py-3 bg-indigo-600 text-white font-bold rounded-2xl hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-100 transform hover:scale-105 active:scale-95",children:[_.jsx("i",{className:"fas fa-plus"}),_.jsx("span",{children:"New Subject"})]})]}),_.jsx(bn,{isPremium:u,type:"fluid",className:"mb-10"}),_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[_.jsxs("div",{onClick:s,className:"group border-2 border-dashed border-slate-200 rounded-2xl p-6 flex flex-col items-center justify-center text-center cursor-pointer hover:border-indigo-400 hover:bg-indigo-50/30 transition-all min-h-[250px]",children:[_.jsx("div",{className:"w-16 h-16 bg-slate-50 text-slate-400 rounded-full flex items-center justify-center mb-4 group-hover:bg-indigo-100 group-hover:text-indigo-600 transition-all",children:_.jsx("i",{className:"fas fa-plus text-2xl"})}),_.jsx("h3",{className:"text-lg font-bold text-slate-700 group-hover:text-indigo-600",children:"Start New Mastery"}),_.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Use AI to generate a new roadmap"})]}),t.map(p=>{const y=m(p),b=p.id===r;return _.jsxs("div",{onClick:()=>e(p.id),className:`group relative bg-white p-6 rounded-2xl shadow-sm border transition-all cursor-pointer hover:shadow-xl hover:-translate-y-1 ${b?"border-indigo-600 ring-2 ring-indigo-600/10":"border-slate-100"}`,children:[_.jsxs("div",{className:"flex justify-between items-start mb-6",children:[_.jsx("div",{className:"w-12 h-12 bg-indigo-50 text-indigo-600 rounded-xl flex items-center justify-center text-xl font-bold",children:p.subject.charAt(0).toUpperCase()}),_.jsxs("div",{className:"flex items-center space-x-2",children:[y===100&&_.jsx("span",{className:"bg-green-100 text-green-700 text-[10px] font-bold px-2 py-1 rounded-full uppercase tracking-wider",children:f("home.mastered")}),_.jsx("button",{onClick:x=>{x.stopPropagation(),n(p.id)},className:"w-8 h-8 bg-slate-50 text-slate-300 hover:text-red-600 hover:bg-red-50 rounded-lg flex items-center justify-center transition-all group/del",title:"Delete Roadmap",children:_.jsx("i",{className:"fas fa-trash-alt text-xs group-hover/del:scale-110 transition-transform"})})]})]}),_.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-1 group-hover:text-indigo-600 transition-colors truncate",children:p.subject}),_.jsxs("p",{className:"text-xs text-slate-400 mb-6 uppercase tracking-wider font-semibold",children:[p.roadmap.steps.length," Modules  ",p.roadmap.steps.reduce((x,w)=>x+w.topics.length,0)," Topics"]}),_.jsxs("div",{className:"space-y-2",children:[_.jsxs("div",{className:"flex justify-between text-xs font-bold",children:[_.jsx("span",{className:"text-slate-500",children:"Progress"}),_.jsxs("span",{className:"text-indigo-600",children:[y,"%"]})]}),_.jsx("div",{className:"h-2 w-full bg-slate-100 rounded-full overflow-hidden",children:_.jsx("div",{className:`h-full transition-all duration-500 ${y===100?"bg-green-500":"bg-indigo-600"}`,style:{width:`${y}%`}})})]}),_.jsxs("div",{className:"mt-6 flex items-center text-xs text-slate-400 font-medium",children:[_.jsx("i",{className:"far fa-calendar-alt mr-2"}),"Started ",new Date(p.createdAt).toLocaleDateString()]}),b&&_.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-indigo-600 text-white rounded-full flex items-center justify-center shadow-lg animate-bounce",children:_.jsx("i",{className:"fas fa-play text-[10px]"})})]},p.id)})]}),t.length===0&&_.jsx("div",{className:"text-center py-10",children:_.jsx("p",{className:"text-slate-400 italic",children:"No existing roadmaps. Start your first journey above!"})})]})})},C1=[{mode:"Teacher",icon:"",color:"bg-blue-500"},{mode:"Friend",icon:"",color:"bg-indigo-500"},{mode:"Brother",icon:"",color:"bg-emerald-500"},{mode:"Sister",icon:"",color:"bg-pink-500"},{mode:"Girlfriend",icon:"",color:"bg-rose-500"},{mode:"Boyfriend",icon:"",color:"bg-sky-500"}],N1=({settings:t,authUser:e,onUpdateSettings:n,onLogout:s,onBack:r,onManualSync:l})=>{br(t.language);const[u,f]=W.useState(!1),m=y=>{n({...t,[y]:!t[y]})},p=async()=>{f(!0),await l(),f(!1)};return _.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-12 bg-slate-50 relative no-scrollbar",children:_.jsxs("div",{className:"max-w-2xl mx-auto pb-40",children:[_.jsxs("header",{className:"mb-8",children:[_.jsxs("button",{onClick:r,className:"mb-6 flex items-center text-slate-500 font-bold hover:text-indigo-600 transition-colors",children:[_.jsx("i",{className:"fas fa-arrow-left mr-2"})," Back"]}),_.jsx("h2",{className:"text-2xl md:text-3xl font-black text-slate-900",children:"Mastery Tools"})]}),_.jsxs("div",{className:"space-y-6",children:[_.jsxs("section",{className:"bg-white p-6 rounded-[32px] border border-slate-100 shadow-sm",children:[_.jsx("h3",{className:"text-sm font-black text-slate-400 uppercase tracking-widest mb-4",children:"Companion Persona"}),_.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:C1.map(y=>_.jsxs("button",{onClick:()=>n({...t,companionPersona:y.mode}),className:`p-4 rounded-2xl border-2 transition-all flex flex-col items-center ${t.companionPersona===y.mode?"border-indigo-600 bg-indigo-50 shadow-md":"border-slate-50 bg-slate-50 opacity-60"}`,children:[_.jsx("span",{className:"text-2xl mb-1",children:y.icon}),_.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:y.mode})]},y.mode))})]}),_.jsxs("section",{className:"bg-white p-6 rounded-[32px] border border-slate-100 shadow-sm",children:[_.jsx("h3",{className:"text-sm font-black text-slate-400 uppercase tracking-widest mb-4",children:"Omni's Voice"}),_.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[_.jsxs("button",{onClick:()=>n({...t,aiVoice:"female"}),className:`p-5 rounded-2xl border-2 transition-all flex items-center justify-center space-x-3 ${t.aiVoice==="female"?"border-indigo-600 bg-indigo-50 text-indigo-700 shadow-md":"border-slate-50 bg-slate-50 text-slate-400"}`,children:[_.jsx("i",{className:"fas fa-venus text-lg"}),_.jsx("span",{className:"font-black uppercase text-xs tracking-widest",children:"Female"})]}),_.jsxs("button",{onClick:()=>n({...t,aiVoice:"male"}),className:`p-5 rounded-2xl border-2 transition-all flex items-center justify-center space-x-3 ${t.aiVoice==="male"?"border-indigo-600 bg-indigo-50 text-indigo-700 shadow-md":"border-slate-50 bg-slate-50 text-slate-400"}`,children:[_.jsx("i",{className:"fas fa-mars text-lg"}),_.jsx("span",{className:"font-black uppercase text-xs tracking-widest",children:"Male"})]})]})]}),_.jsxs("section",{className:"bg-white p-6 rounded-[32px] border border-slate-100 shadow-sm space-y-4",children:[_.jsx("h3",{className:"text-sm font-black text-slate-400 uppercase tracking-widest mb-2",children:"Privacy & Social"}),_.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-2xl",children:[_.jsxs("div",{children:[_.jsx("p",{className:"text-sm font-black text-slate-800",children:"Public Profile"}),_.jsx("p",{className:"text-[10px] text-slate-400 font-bold",children:"Appear on global leaderboard"})]}),_.jsx("button",{onClick:()=>m("isPublicProfile"),className:`w-12 h-6 rounded-full transition-colors relative ${t.isPublicProfile?"bg-indigo-600":"bg-slate-300"}`,children:_.jsx("div",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-all ${t.isPublicProfile?"left-7":"left-1"}`})})]})]}),_.jsxs("section",{className:"bg-white p-6 rounded-[32px] border border-slate-100 shadow-sm space-y-4",children:[_.jsx("h3",{className:"text-sm font-black text-slate-400 uppercase tracking-widest mb-2",children:"Account"}),_.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-2xl",children:[_.jsxs("div",{className:"flex items-center space-x-3",children:[_.jsx("div",{className:"w-10 h-10 bg-indigo-100 text-indigo-600 rounded-xl flex items-center justify-center font-black",children:e==null?void 0:e.name.charAt(0)}),_.jsxs("div",{children:[_.jsx("p",{className:"text-sm font-black text-slate-800",children:e==null?void 0:e.name}),_.jsx("p",{className:"text-[10px] text-slate-400 font-mono",children:e==null?void 0:e.masterId})]})]}),_.jsx("button",{onClick:p,disabled:u,className:"bg-white p-2 rounded-lg shadow-sm border border-slate-100 text-indigo-600 hover:scale-105 transition-transform active:scale-95",children:_.jsx("i",{className:`fas fa-sync-alt ${u?"animate-spin":""}`})})]}),_.jsxs("button",{onClick:s,className:"w-full py-4 bg-slate-100 text-slate-600 font-black rounded-2xl text-xs flex items-center justify-center space-x-2 hover:bg-red-50 hover:text-red-600 transition-all",children:[_.jsx("i",{className:"fas fa-sign-out-alt"}),_.jsx("span",{children:"Sign Out"})]})]}),_.jsx(bn,{isPremium:t.isPremium,type:"fluid"})]})]})})},hl=({className:t="",size:e="md"})=>{const n=W.useId().replace(/:/g,"x"),s=`omniGrad-${n}`,r={sm:"w-6 h-6",md:"w-10 h-10",lg:"w-16 h-16",xl:"w-24 h-24"};return _.jsx("div",{className:`relative flex items-center justify-center ${r[e]} ${t} pointer-events-none select-none`,children:_.jsxs("svg",{viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full drop-shadow-xl overflow-visible",children:[_.jsxs("defs",{children:[_.jsxs("linearGradient",{id:s,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[_.jsx("stop",{offset:"0%",style:{stopColor:"#818cf8",stopOpacity:1}}),_.jsx("stop",{offset:"100%",style:{stopColor:"#4f46e5",stopOpacity:1}})]}),_.jsxs("filter",{id:`glow-${n}`,x:"-20%",y:"-20%",width:"140%",height:"140%",children:[_.jsx("feGaussianBlur",{stdDeviation:"3",result:"blur"}),_.jsx("feComposite",{in:"SourceGraphic",in2:"blur",operator:"over"})]})]}),_.jsx("circle",{cx:"50",cy:"50",r:"46",fill:`url(#${s})`,stroke:"white",strokeWidth:"2",filter:`url(#glow-${n})`}),_.jsx("path",{d:"M35 45 Q50 25 65 45 Q50 65 35 45 Z",fill:"none",stroke:"white",strokeWidth:"6",strokeLinecap:"round",className:"animate-pulse"}),_.jsx("circle",{cx:"50",cy:"45",r:"6",fill:"white"}),_.jsx("path",{d:"M40 70 Q50 60 60 70",fill:"none",stroke:"white",strokeWidth:"4",strokeLinecap:"round"})]})})},R1=({onLogin:t})=>{const[e,n]=W.useState("landing"),[s,r]=W.useState(""),[l,u]=W.useState(""),[f,m]=W.useState(""),[p,y]=W.useState(""),[b,x]=W.useState(""),[w,E]=W.useState(!1),[A,C]=W.useState(null),I=()=>{E(!0),setTimeout(()=>{t({id:"guest_user",internalId:"GUEST-TEMP",masterId:"OMNI-GUEST",name:"Guest Learner",email:"",provider:"guest",isGuest:!0,photoUrl:"https://ui-avatars.com/api/?name=Guest&background=slate&color=fff&size=128"}),E(!1)},800)},O=async()=>{if(!s.trim()||!p.trim()||!f.trim()||!b.trim()){C("All fields are required.");return}const P=b.trim().toUpperCase();E(!0),C(null);try{const{data:N}=await It.checkUser(f);if(N){C("Account already exists."),E(!1);return}const{data:H}=await It.checkMasterId(P);if(H){C("Master ID taken."),E(!1);return}const{error:V}=await It.createProfile({userid:P,name:s,email:f,password:p});if(V)throw new Error(V.message);t({id:P,internalId:P,masterId:`OMNI-${P}`,name:s,email:f,provider:"email",photoUrl:`https://ui-avatars.com/api/?name=${encodeURIComponent(s)}&background=random&size=128`,isGuest:!1})}catch(N){C(N.message||"Failed to create profile.")}finally{E(!1)}},D=async()=>{if(!l.trim()||!p.trim()){C("Please fill all fields.");return}E(!0),C(null);try{const{data:P}=await It.findUserByIdentifier(l.trim());P&&P.password===p?t({id:P.userid,internalId:P.userid,masterId:`OMNI-${P.userid.toUpperCase()}`,name:P.name,email:P.email,provider:"email",photoUrl:`https://ui-avatars.com/api/?name=${encodeURIComponent(P.name)}&background=random&size=128`,isGuest:!1}):C("Invalid credentials.")}catch{C("Authentication error.")}finally{E(!1)}};return _.jsx("div",{className:"min-h-screen flex items-center justify-center p-6 bg-slate-50 relative overflow-hidden",children:_.jsx("div",{className:"max-w-md w-full glass-morphism p-10 rounded-[48px] shadow-2xl border border-white/50 relative z-10 animate-in fade-in zoom-in-95 duration-500",children:e==="landing"?_.jsxs("div",{className:"text-center",children:[_.jsx(hl,{size:"xl",className:"mx-auto mb-8 transform -rotate-6"}),_.jsxs("h1",{className:"text-3xl font-black text-slate-900 mb-6",children:["OmniMaster ",_.jsx("span",{className:"text-indigo-600",children:"AI"})]}),_.jsxs("div",{className:"space-y-4",children:[_.jsxs("button",{onClick:()=>n("auth"),className:"w-full bg-white border border-slate-200 p-4 rounded-2xl flex items-center justify-center space-x-4 hover:border-indigo-500 transition-all shadow-sm group",children:[_.jsx("i",{className:"fab fa-google text-2xl text-red-500"}),_.jsx("span",{className:"font-bold text-slate-700",children:"Continue with Google"})]}),_.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[_.jsxs("button",{onClick:()=>n("auth"),className:"bg-indigo-600 p-4 rounded-2xl flex items-center justify-center space-x-2 text-white font-bold",children:[_.jsx("i",{className:"fas fa-sign-in-alt"}),_.jsx("span",{children:"Login"})]}),_.jsxs("button",{onClick:()=>n("signup"),className:"bg-white border-2 border-indigo-600 p-4 rounded-2xl flex items-center justify-center space-x-2 text-indigo-600 font-bold",children:[_.jsx("i",{className:"fas fa-user-plus"}),_.jsx("span",{children:"Sign Up"})]})]}),_.jsxs("button",{onClick:I,className:"text-slate-400 hover:text-indigo-600 font-bold text-xs py-2",children:["Continue as Guest ",_.jsx("i",{className:"fas fa-arrow-right ml-1"})]})]})]}):e==="auth"?_.jsxs("div",{className:"animate-in slide-in-from-right-4 duration-300",children:[_.jsxs("button",{onClick:()=>n("landing"),className:"mb-6 text-slate-400 font-bold text-sm",children:[_.jsx("i",{className:"fas fa-arrow-left mr-2"})," Back"]}),_.jsx("h2",{className:"text-2xl font-black text-slate-900 mb-6",children:"Welcome Back"}),A&&_.jsx("div",{className:"mb-4 p-3 bg-red-50 text-red-600 text-xs font-bold rounded-xl",children:A}),_.jsxs("div",{className:"space-y-4",children:[_.jsx("input",{type:"text",value:l,onChange:P=>u(P.target.value),placeholder:"Email or Master ID",className:"w-full px-5 py-4 bg-white border rounded-2xl outline-none font-bold"}),_.jsx("input",{type:"password",value:p,onChange:P=>y(P.target.value),placeholder:"Password",className:"w-full px-5 py-4 bg-white border rounded-2xl outline-none font-bold"}),_.jsx("button",{disabled:w,onClick:D,className:"w-full bg-indigo-600 text-white p-5 rounded-2xl font-black shadow-xl disabled:opacity-50",children:w?"Authenticating...":"Login"})]})]}):_.jsxs("div",{className:"animate-in slide-in-from-right-4 duration-300",children:[_.jsxs("button",{onClick:()=>n("landing"),className:"mb-6 text-slate-400 font-bold text-sm",children:[_.jsx("i",{className:"fas fa-arrow-left mr-2"})," Back"]}),_.jsx("h2",{className:"text-2xl font-black text-slate-900 mb-6",children:"Create Account"}),A&&_.jsx("div",{className:"mb-4 p-3 bg-red-50 text-red-600 text-xs font-bold rounded-xl",children:A}),_.jsxs("div",{className:"space-y-4",children:[_.jsx("input",{type:"text",value:s,onChange:P=>r(P.target.value),placeholder:"Full Name",className:"w-full px-5 py-4 bg-white border rounded-2xl font-bold"}),_.jsx("input",{type:"email",value:f,onChange:P=>m(P.target.value),placeholder:"Email",className:"w-full px-5 py-4 bg-white border rounded-2xl"}),_.jsx("input",{type:"password",value:p,onChange:P=>y(P.target.value),placeholder:"Password",className:"w-full px-5 py-4 bg-white border rounded-2xl font-bold"}),_.jsxs("div",{className:"relative",children:[_.jsx("span",{className:"absolute left-5 top-4 text-slate-400 font-black text-sm",children:"OMNI-"}),_.jsx("input",{type:"text",value:b,onChange:P=>x(P.target.value.toUpperCase()),placeholder:"UNIQUE_ID",className:"w-full pl-[68px] pr-5 py-4 bg-white border rounded-2xl font-black uppercase",maxLength:10})]}),_.jsx("button",{disabled:w,onClick:O,className:"w-full bg-indigo-600 text-white p-5 rounded-2xl font-black shadow-xl disabled:opacity-50",children:w?"Creating...":"Join OmniMaster"})]})]})})})},k1=["","","","","","","","","",""],I1=["","","","","","","","","","","","","","","","","","","","","",""],M1=(t,e)=>t>=500?"A legendary mind that has transcended the ordinary. Every subject is a new universe conquered.":t>=200?"Mastery is not a destination, but a continuous ascent. This path is carved with pure discipline.":e>=10?"Versatility is the hallmark of a true polymath. Breadth of knowledge is your greatest power.":t>=50?"Consistency is the architect of genius. Each topic mastered is a stone in your monument of wisdom.":t>=10?"The flame of curiosity is lit. With every quiz, you forge a sharper version of yourself.":"The journey of a thousand subjects begins with a single module. Stay hungry, stay curious.",D1=({user:t,subjects:e,streak:n,masteryPoints:s,isPremium:r,onUpdateProfile:l,language:u,onGoToSettings:f})=>{const m=W.useRef(null),[p,y]=W.useState(t.name),[b,x]=W.useState(t.photoUrl||""),[w,E]=W.useState(t.emoji||""),[A,C]=W.useState(!1),[I,O]=W.useState(!1),[D,P]=W.useState("idle");W.useEffect(()=>{y(t.name),x(t.photoUrl||""),E(t.emoji||"")},[t]);const N=Y=>{var fe;const ee=(fe=Y.target.files)==null?void 0:fe[0];if(ee){const he=new FileReader;he.onloadend=()=>{x(he.result),E(""),C(!1)},he.readAsDataURL(ee)}},H=Y=>{const ee=`https://ui-avatars.com/api/?name=${encodeURIComponent(Y)}&background=indigo&color=fff&size=128&font-size=0.6`;x(ee),E(Y),C(!1)},V=async()=>{if(p.trim()){O(!0),P("idle");try{await l(p,b,w),P("success"),setTimeout(()=>P("idle"),3e3)}catch{P("error")}finally{O(!1)}}},Z=`https://ui-avatars.com/api/?name=${encodeURIComponent(p||"U")}&background=indigo&color=fff&size=128`;return _.jsxs("div",{className:"flex-1 overflow-y-auto bg-slate-50 p-4 md:p-12 no-scrollbar",children:[A&&_.jsxs("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4",children:[_.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm",onClick:()=>C(!1)}),_.jsxs("div",{className:"relative w-full max-w-sm bg-white rounded-[40px] shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200 flex flex-col max-h-[80vh]",children:[_.jsxs("div",{className:"p-6 border-b border-slate-100 flex items-center justify-between bg-indigo-600 text-white",children:[_.jsx("h4",{className:"font-black uppercase tracking-widest text-[10px]",children:"Sticker Selection"}),_.jsx("button",{onClick:()=>C(!1),className:"p-2",children:_.jsx("i",{className:"fas fa-times"})})]}),_.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6 no-scrollbar",children:[_.jsxs("div",{children:[_.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-4",children:"Standard"}),_.jsx("div",{className:"grid grid-cols-4 gap-3",children:k1.map(Y=>_.jsx("button",{onClick:()=>H(Y),className:`text-3xl aspect-square rounded-2xl flex items-center justify-center transition-all ${w===Y?"bg-indigo-100 ring-2 ring-indigo-600":"bg-slate-50"}`,children:Y},Y))})]}),_.jsxs("div",{className:r?"":"opacity-40 grayscale pointer-events-none",children:[_.jsxs("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-4 flex items-center",children:["Premium Tier ",!r&&_.jsx("i",{className:"fas fa-lock ml-2 text-amber-500"})]}),_.jsx("div",{className:"grid grid-cols-4 gap-3",children:I1.map(Y=>_.jsx("button",{onClick:()=>H(Y),className:`text-3xl aspect-square rounded-2xl flex items-center justify-center transition-all ${w===Y?"bg-indigo-100 ring-2 ring-indigo-600":"bg-slate-50"}`,children:Y},Y))})]})]}),_.jsxs("div",{className:"p-6 bg-slate-50 border-t border-slate-100",children:[_.jsxs("button",{onClick:()=>{var Y;return(Y=m.current)==null?void 0:Y.click()},className:"w-full py-3 bg-white border border-slate-200 text-slate-600 font-bold rounded-2xl text-xs flex items-center justify-center space-x-2",children:[_.jsx("i",{className:"fas fa-upload"}),_.jsx("span",{children:"Upload Photo"})]}),_.jsx("input",{type:"file",ref:m,onChange:N,className:"hidden",accept:"image/*"})]})]})]}),_.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 md:space-y-10 pb-32",children:[_.jsxs("div",{className:"bg-white p-6 md:p-10 rounded-[32px] md:rounded-[48px] shadow-sm border border-slate-100 flex flex-col md:flex-row items-center gap-6 md:gap-10 relative",children:[_.jsx("button",{onClick:f,className:"absolute top-6 right-6 w-10 h-10 bg-slate-50 text-slate-400 rounded-xl flex items-center justify-center hover:bg-indigo-50 hover:text-indigo-600 transition-all",title:"App Settings",children:_.jsx("i",{className:"fas fa-cog"})}),_.jsxs("div",{className:"relative",children:[_.jsx("div",{className:"w-24 h-24 md:w-40 md:h-40 rounded-[30px] md:rounded-[40px] overflow-hidden border-4 border-indigo-50 shadow-xl bg-indigo-50 flex items-center justify-center",children:w&&!b.startsWith("data:image")?_.jsx("div",{className:"text-4xl md:text-8xl",children:w}):_.jsx("img",{src:b||Z,className:"w-full h-full object-cover",alt:"Profile"})}),_.jsx("button",{onClick:()=>C(!0),className:"absolute -bottom-2 -right-2 w-10 h-10 bg-indigo-600 text-white rounded-xl flex items-center justify-center shadow-lg border-4 border-white",children:_.jsx("i",{className:"fas fa-pen text-xs"})})]}),_.jsxs("div",{className:"flex-1 w-full text-center md:text-left space-y-4",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsx("p",{className:"text-[10px] font-black text-indigo-500 uppercase tracking-widest",children:"Display Name"}),_.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[_.jsx("input",{type:"text",value:p,onChange:Y=>y(Y.target.value),className:"bg-slate-50 border-2 border-slate-100 px-4 py-3 rounded-xl text-lg font-black text-slate-900 w-full md:max-w-xs focus:border-indigo-600 outline-none"}),_.jsx("button",{onClick:V,disabled:I,className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-black text-xs shadow-lg flex items-center justify-center space-x-2",children:I?_.jsx("i",{className:"fas fa-spinner fa-spin"}):_.jsx("span",{children:"Save Changes"})})]})]}),_.jsxs("div",{className:"flex items-center justify-center md:justify-start space-x-2",children:[_.jsx("p",{className:"text-indigo-600 font-black font-mono tracking-tighter text-sm uppercase",children:t.masterId}),r&&_.jsx("span",{className:"bg-blue-500 text-white text-[8px] px-2 py-0.5 rounded-full font-black uppercase tracking-tighter",children:"Verified"})]})]})]}),_.jsxs("div",{className:"bg-indigo-900 p-8 rounded-[32px] md:rounded-[40px] text-white text-center relative overflow-hidden",children:[_.jsx("p",{className:"text-[9px] font-black uppercase tracking-[0.3em] opacity-40 mb-3",children:"Mastery Mantra"}),_.jsxs("p",{className:"text-base md:text-xl font-bold italic leading-relaxed px-4",children:['"',M1(s,e.length),'"']})]}),_.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[_.jsxs("div",{className:"bg-white p-6 rounded-[32px] shadow-sm border border-slate-100",children:[_.jsx("h4",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 mb-1",children:"Subjects"}),_.jsx("p",{className:"text-3xl font-black text-slate-900",children:e.length})]}),_.jsxs("div",{className:"bg-white p-6 rounded-[32px] shadow-sm border border-slate-100",children:[_.jsx("h4",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 mb-1",children:"Mastery Pts"}),_.jsx("p",{className:"text-3xl font-black text-indigo-600",children:s})]}),_.jsxs("div",{className:"bg-white p-6 rounded-[32px] shadow-sm border border-slate-100",children:[_.jsx("h4",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 mb-1",children:"Streak"}),_.jsx("p",{className:"text-3xl font-black text-orange-500",children:n})]})]})]})]})},U1=({currentUser:t,subjects:e,onLoginRequired:n,onSelectUser:s,isPremium:r})=>{const[l,u]=W.useState([]),[f,m]=W.useState(!1),[p,y]=W.useState(null),b=t.isGuest,x=async()=>{m(!0),y(null);try{const w=await It.fetchLeaderboard(),E=e.reduce((I,O)=>I+O.completedTopics.length,0),A=await It.getProfile(t.id),C={masterId:t.masterId,name:t.name,photoUrl:t.photoUrl,totalMasteryPoints:E,subjectsCount:e.length,isCurrentUser:!0,isPublicProfile:!0,isPremium:(A==null?void 0:A.premium)===!0};if(w&&w.length>0){const O=[...w.filter(D=>D.masterId!==t.masterId),C].sort((D,P)=>P.totalMasteryPoints-D.totalMasteryPoints);u(O)}else u([C])}catch(w){console.error("Leaderboard loading failed:",w),y("Unable to reach the mastery ranks. Check connection.")}finally{m(!1)}};return W.useEffect(()=>{b||x()},[b]),_.jsxs("div",{className:"flex-1 flex flex-col bg-slate-50 relative overflow-hidden h-full",children:[_.jsx("div",{className:"bg-white border-b border-slate-200 px-6 shrink-0 z-20 py-5",children:_.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between",children:[_.jsx("h2",{className:"text-xl font-black text-slate-900 uppercase tracking-widest",children:"Global Hall of Fame"}),_.jsx("button",{onClick:x,disabled:f,className:"w-10 h-10 bg-slate-50 text-slate-400 rounded-xl flex items-center justify-center hover:bg-indigo-50 hover:text-indigo-600 transition-all active:scale-95",children:_.jsx("i",{className:`fas fa-sync-alt ${f?"animate-spin":""}`})})]})}),_.jsxs("div",{className:"flex-1 overflow-y-auto p-6 lg:p-12 relative no-scrollbar",children:[b&&_.jsx("div",{className:"absolute inset-0 z-[30] backdrop-blur-md bg-white/30 flex items-center justify-center p-6 text-center",children:_.jsxs("div",{className:"max-w-md bg-white p-12 rounded-[48px] shadow-2xl border border-slate-100 animate-in zoom-in-95 duration-500",children:[_.jsx("div",{className:"w-20 h-20 bg-indigo-100 text-indigo-600 rounded-full flex items-center justify-center mx-auto mb-6 text-3xl",children:_.jsx("i",{className:"fas fa-trophy"})}),_.jsx("h3",{className:"text-2xl font-black text-slate-900 mb-4",children:"Mastery Ranking Locked"}),_.jsx("p",{className:"text-slate-500 mb-8 font-medium",children:"Connect with the global community of learners to track your rank and compete with the world's most disciplined minds."}),_.jsx("button",{onClick:n,className:"w-full py-4 bg-indigo-600 text-white rounded-2xl font-black shadow-lg hover:bg-indigo-700 transition-all active:scale-95",children:"Sign In Now"})]})}),_.jsx("div",{className:`max-w-4xl mx-auto h-full flex flex-col ${b?"opacity-20 pointer-events-none":""}`,children:_.jsxs("div",{className:"animate-in fade-in duration-500 space-y-8 pb-20",children:[p&&_.jsxs("div",{className:"p-4 bg-red-50 border border-red-100 text-red-600 rounded-2xl font-bold text-sm text-center",children:[_.jsx("i",{className:"fas fa-exclamation-triangle mr-2"})," ",p]}),_.jsx(bn,{isPremium:r,type:"fluid"}),_.jsx("div",{className:"bg-white rounded-[48px] shadow-sm border border-slate-100 overflow-hidden",children:_.jsx("div",{className:"overflow-x-auto",children:_.jsxs("table",{className:"w-full text-left",children:[_.jsx("thead",{className:"bg-slate-50",children:_.jsxs("tr",{children:[_.jsx("th",{className:"px-8 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Rank"}),_.jsx("th",{className:"px-8 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Master Learner"}),_.jsx("th",{className:"px-8 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest text-right",children:"Mastery Pts"})]})}),_.jsx("tbody",{children:l.map((w,E)=>{const A=w.isPublicProfile!==!1||w.isCurrentUser,C=A?w.name:"Private Master",I=A?w.photoUrl:"https://ui-avatars.com/api/?name=?&background=slate&color=fff&size=128";return _.jsxs("tr",{onClick:()=>s(w),className:`border-b border-slate-50 hover:bg-slate-50 transition-colors cursor-pointer group ${w.isCurrentUser?"bg-indigo-50/50":""}`,children:[_.jsx("td",{className:"px-8 py-6",children:_.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full",children:E===0?_.jsx("i",{className:"fas fa-award text-2xl text-yellow-500"}):E===1?_.jsx("i",{className:"fas fa-award text-2xl text-slate-400"}):E===2?_.jsx("i",{className:"fas fa-award text-2xl text-amber-700"}):_.jsx("span",{className:"font-black text-slate-300",children:E+1})})}),_.jsx("td",{className:"px-8 py-6",children:_.jsxs("div",{className:"flex items-center space-x-4",children:[_.jsx("img",{src:I,className:`w-12 h-12 rounded-2xl border border-slate-100 shadow-sm ${A?"":"grayscale opacity-50"}`,alt:"p"}),_.jsxs("div",{children:[_.jsxs("div",{className:"flex items-center space-x-1.5",children:[_.jsxs("p",{className:`font-black text-sm group-hover:text-indigo-600 transition-colors ${w.isCurrentUser?"text-indigo-600":"text-slate-800"}`,children:[C," ",w.isCurrentUser&&"(You)"]}),w.isPremium&&_.jsx("div",{className:"bg-blue-500 text-white text-[8px] w-3.5 h-3.5 rounded-full flex items-center justify-center shadow-sm",title:"Verified Premium User",children:_.jsx("i",{className:"fas fa-check"})})]}),_.jsx("p",{className:"text-[9px] font-mono text-slate-400 font-bold uppercase tracking-tighter",children:w.masterId})]})]})}),_.jsx("td",{className:"px-8 py-6 text-right font-black text-indigo-600 text-lg",children:w.totalMasteryPoints})]},w.masterId)})})]})})})]})})]})]})},P1=(t,e)=>t>=500?"A legendary mind that has transcended the ordinary. Every subject is a new universe conquered.":t>=200?"Mastery is not a destination, but a continuous ascent. This path is carved with pure discipline.":e>=10?"Versatility is the hallmark of a true polymath. Breadth of knowledge is your greatest power.":t>=50?"Consistency is the architect of genius. Each topic mastered is a stone in your monument of wisdom.":t>=10?"The flame of curiosity is lit. With every quiz, you forge a sharper version of yourself.":"The journey of a thousand subjects begins with a single module. Stay hungry, stay curious.",O1=({currentUser:t,profileUser:e,onBack:n,isPremium:s})=>{const r=e.masterId===t.masterId,l=e.isPublicProfile!==!1||r;(e.isPublicPaths===!0||r)&&e.publicSubjects&&e.publicSubjects.length>0;const u=l?e.name:"Hidden Identity",f=l?e.photoUrl:"https://ui-avatars.com/api/?name=?&background=slate&color=fff&size=128";return _.jsx("div",{className:"flex-1 overflow-y-auto bg-slate-50 p-6 md:p-12 lg:p-16 no-scrollbar",children:_.jsxs("div",{className:"max-w-4xl mx-auto space-y-10 pb-20 animate-in fade-in slide-in-from-bottom-8 duration-500",children:[_.jsxs("button",{onClick:n,className:"flex items-center text-slate-500 font-bold hover:text-indigo-600 transition-colors",children:[_.jsx("i",{className:"fas fa-arrow-left mr-2"})," Back to Leaderboard"]}),_.jsxs("div",{className:"bg-white p-10 rounded-[48px] shadow-sm border border-slate-100 flex flex-col md:flex-row items-center gap-10",children:[_.jsxs("div",{className:"relative",children:[_.jsx("div",{className:`w-32 h-32 md:w-40 md:h-40 rounded-[40px] overflow-hidden border-4 border-indigo-50 shadow-xl ${l?"":"grayscale opacity-50"}`,children:_.jsx("img",{src:f||`https://ui-avatars.com/api/?name=${encodeURIComponent(u)}&background=indigo&color=fff&size=128`,className:"w-full h-full object-cover",alt:"Profile"})}),l&&_.jsx("div",{className:"absolute -bottom-2 -right-2 w-10 h-10 bg-green-500 text-white rounded-xl flex items-center justify-center shadow-lg border-2 border-white",children:_.jsx("i",{className:"fas fa-check text-xs"})})]}),_.jsxs("div",{className:"flex-1 text-center md:text-left space-y-2",children:[_.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[_.jsx("h2",{className:"text-4xl font-black text-slate-900",children:u}),!l&&_.jsx("span",{className:"px-3 py-1 bg-slate-100 text-slate-400 rounded-lg text-[10px] font-black uppercase tracking-widest self-center md:self-auto",children:"Anonymous"})]}),_.jsx("p",{className:"text-indigo-600 font-bold font-mono tracking-tight text-sm uppercase",children:e.masterId}),_.jsx("div",{className:"pt-2 flex flex-wrap justify-center md:justify-start gap-4",children:_.jsxs("div",{className:"px-5 py-2 bg-indigo-600 text-white rounded-2xl flex items-center space-x-2 shadow-lg shadow-indigo-100",children:[_.jsx("i",{className:"fas fa-star"}),_.jsxs("span",{className:"text-sm font-black",children:[e.totalMasteryPoints," Mastery Points"]})]})})]})]}),_.jsx(bn,{isPremium:s,type:"fluid"}),_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[_.jsxs("div",{className:"bg-white p-8 rounded-[40px] shadow-sm border border-slate-100",children:[_.jsxs("h3",{className:"text-xl font-black text-slate-900 mb-6 flex items-center",children:[_.jsx("i",{className:"fas fa-medal mr-3 text-amber-500"})," Rank Insights"]}),_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-50 rounded-2xl",children:[_.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase",children:"Global Standing"}),_.jsx("span",{className:"font-black text-indigo-600",children:"Master Learner"})]}),_.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-50 rounded-2xl",children:[_.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase",children:"Subjects Mastery"}),_.jsx("span",{className:"font-black text-indigo-600",children:e.subjectsCount||0})]})]})]}),_.jsxs("div",{className:"bg-indigo-900 p-8 rounded-[40px] text-white flex flex-col justify-center text-center shadow-xl shadow-indigo-100",children:[_.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.3em] opacity-50 mb-4",children:"Mastery Philosophy"}),_.jsxs("p",{className:"text-xl font-bold italic leading-relaxed",children:['"',P1(e.totalMasteryPoints,e.subjectsCount),'"']})]})]}),_.jsx("div",{className:"bg-white p-10 rounded-[48px] shadow-sm border border-slate-100 text-center py-12 overflow-hidden relative",children:e.isPublicPaths===!0||r?e.publicSubjects&&e.publicSubjects.length>0?_.jsxs("div",{className:"max-w-3xl mx-auto",children:[_.jsxs("div",{className:"flex items-center justify-center space-x-3 mb-8",children:[_.jsx("i",{className:"fas fa-route text-3xl text-indigo-600"}),_.jsx("h4",{className:"text-2xl font-black text-slate-800",children:"Public Mastery Path"})]}),_.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6 text-left",children:e.publicSubjects.map((m,p)=>_.jsxs("div",{className:"bg-slate-50 p-6 rounded-3xl border border-slate-100 space-y-3",children:[_.jsxs("div",{className:"flex justify-between items-start",children:[_.jsx("p",{className:"text-sm font-black text-slate-800 truncate pr-2",children:m.subject}),_.jsxs("span",{className:"text-xs font-black text-indigo-600",children:[m.progress,"%"]})]}),_.jsx("div",{className:"h-2 w-full bg-slate-200 rounded-full overflow-hidden",children:_.jsx("div",{className:"h-full bg-indigo-600 rounded-full transition-all duration-1000",style:{width:`${m.progress}%`}})})]},p))})]}):_.jsxs("div",{className:"py-12",children:[_.jsx("div",{className:"w-20 h-20 bg-slate-50 text-slate-300 rounded-full flex items-center justify-center mx-auto mb-6",children:_.jsx("i",{className:"fas fa-map text-3xl"})}),_.jsx("h4",{className:"text-lg font-black text-slate-800",children:"No Roadmaps Found"}),_.jsx("p",{className:"text-sm font-medium text-slate-400",children:"This learner hasn't shared any mastery journeys yet."})]}):_.jsxs("div",{className:"animate-in fade-in duration-700",children:[_.jsx("div",{className:"w-24 h-24 bg-slate-50 text-slate-300 rounded-full flex items-center justify-center mx-auto mb-6",children:_.jsx("i",{className:"fas fa-eye-slash text-4xl"})}),_.jsx("h4",{className:"text-2xl font-black text-slate-800 mb-2",children:"Mastery Path is Private"}),_.jsx("p",{className:"text-sm font-medium text-slate-400 max-w-sm mx-auto",children:"This learner prefers to travel their road to genius in silence."})]})})]})})},L1=({streak:t,onClaim:e})=>{const[n,s]=W.useState(!1),r=()=>{s(!0),setTimeout(()=>{e()},1500)};return _.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center bg-slate-900/95 backdrop-blur-xl p-6",children:_.jsxs("div",{className:"max-w-md w-full bg-white rounded-[48px] overflow-hidden shadow-2xl animate-in zoom-in-95 duration-500",children:[_.jsxs("div",{className:"relative h-48 bg-indigo-600 flex items-center justify-center overflow-hidden",children:[_.jsxs("div",{className:"absolute inset-0 opacity-20",children:[_.jsx("div",{className:"absolute top-0 left-0 w-24 h-24 bg-white rounded-full -translate-x-12 -translate-y-12"}),_.jsx("div",{className:"absolute bottom-0 right-0 w-32 h-32 bg-white rounded-full translate-x-16 translate-y-16"})]}),_.jsxs("div",{className:"relative z-10 text-center text-white",children:[_.jsx("div",{className:"w-20 h-20 bg-white/20 backdrop-blur-md rounded-3xl flex items-center justify-center mx-auto mb-4 border border-white/30 transform -rotate-6",children:_.jsx("i",{className:"fas fa-gift text-4xl"})}),_.jsx("h3",{className:"text-2xl font-black",children:"Daily Mastery Bonus"})]})]}),_.jsxs("div",{className:"p-10 text-center",children:[_.jsxs("div",{className:"mb-8",children:[_.jsx("p",{className:"text-slate-400 font-black uppercase tracking-[0.2em] text-[10px] mb-2",children:"Current Streak"}),_.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[_.jsx("span",{className:"text-5xl font-black text-slate-900",children:t+1}),_.jsx("span",{className:"text-2xl text-orange-500",children:_.jsx("i",{className:"fas fa-fire"})})]}),_.jsx("p",{className:"text-slate-500 font-medium mt-2",children:"You're on fire! Keep the momentum going."})]}),_.jsxs("div",{className:"bg-slate-50 p-6 rounded-3xl border border-slate-100 mb-10",children:[_.jsx("h4",{className:"text-sm font-black text-slate-800 mb-4 uppercase tracking-widest",children:"Today's Rewards"}),_.jsxs("div",{className:"space-y-3",children:[_.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-2xl shadow-sm border border-slate-100",children:[_.jsxs("div",{className:"flex items-center space-x-3",children:[_.jsx("div",{className:"w-8 h-8 bg-indigo-100 text-indigo-600 rounded-lg flex items-center justify-center text-xs",children:_.jsx("i",{className:"fas fa-plus"})}),_.jsx("span",{className:"text-sm font-bold text-slate-700",children:"1 Bonus Free Topic"})]}),_.jsx("span",{className:"text-[10px] font-black text-indigo-600 uppercase",children:"Unlocked"})]}),_.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-2xl shadow-sm border border-slate-100",children:[_.jsxs("div",{className:"flex items-center space-x-3",children:[_.jsx("div",{className:"w-8 h-8 bg-amber-100 text-amber-600 rounded-lg flex items-center justify-center text-xs",children:_.jsx("i",{className:"fas fa-star"})}),_.jsx("span",{className:"text-sm font-bold text-slate-700",children:"10 Mastery Points"})]}),_.jsx("span",{className:"text-[10px] font-black text-amber-600 uppercase",children:"Earned"})]})]})]}),_.jsx("button",{disabled:n,onClick:r,className:"w-full py-5 bg-indigo-600 text-white font-black rounded-3xl shadow-xl hover:bg-indigo-700 transition-all active:scale-95 disabled:opacity-50 flex items-center justify-center space-x-3",children:n?_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),_.jsx("span",{children:"Securing Rewards..."})]}):_.jsxs(_.Fragment,{children:[_.jsx("i",{className:"fas fa-check-circle"}),_.jsx("span",{children:"Claim Rewards"})]})})]})]})})},q1=({userId:t,plan:e,onClose:n,onSuccess:s})=>{const[r,l]=W.useState(""),[u,f]=W.useState(!1),[m,p]=W.useState(null),[y,b]=W.useState("pay"),x="hindustanenterprises5054@oksbi",w=async()=>{const A=r.trim();if(A.length<10){p("Transaction ID must be at least 10 characters long.");return}f(!0),p(null);try{const{error:C}=await It.updateProfile(t,{paymentid:A,premium:!0});if(C)throw C;b("success")}catch(C){console.error("Payment Submission Error:",C),p("Failed to process transaction. Please check your connection or ID.")}finally{f(!1)}},E=()=>{navigator.clipboard.writeText(x),alert("UPI ID copied to clipboard!")};return e?_.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center bg-slate-900/90 backdrop-blur-md p-4",children:_.jsxs("div",{className:"max-w-md w-full bg-white rounded-[40px] shadow-2xl overflow-hidden animate-in zoom-in-95 duration-300",children:[_.jsxs("div",{className:"p-8 bg-indigo-600 text-white flex justify-between items-center",children:[_.jsxs("div",{children:[_.jsx("h3",{className:"text-2xl font-black",children:"Pay to Admin"}),_.jsxs("p",{className:"text-indigo-100 text-sm opacity-80",children:[e.name,"  ",e.price]})]}),y!=="success"&&_.jsx("button",{onClick:n,className:"w-10 h-10 bg-white/10 rounded-full flex items-center justify-center hover:bg-white/20 transition-all",children:_.jsx("i",{className:"fas fa-times"})})]}),_.jsx("div",{className:"p-8",children:y==="pay"?_.jsxs("div",{className:"space-y-6",children:[_.jsxs("div",{className:"bg-slate-50 p-6 rounded-3xl border border-slate-100 text-center",children:[_.jsx("p",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2",children:"Scan or Pay via UPI"}),_.jsxs("div",{className:"bg-white p-4 inline-block rounded-2xl border border-slate-200 mb-4 cursor-pointer hover:bg-slate-50 transition-colors",onClick:E,children:[_.jsx("p",{className:"text-lg font-black text-indigo-600 break-all",children:x}),_.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase mt-1",children:"Click to copy UPI ID"})]}),_.jsxs("p",{className:"text-sm text-slate-600 font-medium",children:["Please pay the exact amount of ",_.jsx("span",{className:"text-indigo-600 font-black",children:e.price})," to the ID above."]})]}),_.jsxs("div",{className:"space-y-4",children:[_.jsxs("label",{className:"block",children:[_.jsx("span",{className:"text-xs font-black text-slate-400 uppercase tracking-widest block mb-2",children:"Transaction ID / Ref No."}),_.jsx("input",{type:"text",value:r,onChange:A=>{l(A.target.value),m&&p(null)},placeholder:"Enter 10+ character ID",className:`w-full px-5 py-4 bg-slate-50 border rounded-2xl outline-none font-bold transition-all ${m?"border-red-500":"border-slate-200 focus:ring-4 focus:ring-indigo-500/5 focus:border-indigo-600"}`})]}),m&&_.jsxs("div",{className:"p-3 bg-red-50 text-red-600 text-[10px] font-black rounded-xl animate-shake",children:[_.jsx("i",{className:"fas fa-exclamation-circle mr-2"})," ",m]}),_.jsx("button",{disabled:u||r.trim().length<10,onClick:w,className:"w-full py-5 bg-indigo-600 text-white font-black rounded-3xl shadow-xl shadow-indigo-100 hover:bg-indigo-700 transition-all active:scale-95 disabled:opacity-50 flex items-center justify-center space-x-2",children:u?_.jsxs(_.Fragment,{children:[_.jsx("i",{className:"fas fa-spinner fa-spin"}),_.jsx("span",{children:"Verifying..."})]}):_.jsx("span",{children:"Submit & Unlock Mastery"})})]}),_.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase text-center leading-relaxed",children:"Note: Access is granted immediately upon submission. Admin will verify the transaction ID manually. Providing a false ID will result in account suspension."})]}):_.jsxs("div",{className:"py-10 text-center animate-in zoom-in-95 duration-500",children:[_.jsx("div",{className:"w-24 h-24 bg-green-500 text-white rounded-full flex items-center justify-center text-4xl mx-auto mb-8 shadow-xl shadow-green-100 animate-bounce",children:_.jsx("i",{className:"fas fa-check"})}),_.jsx("h4",{className:"text-3xl font-black text-slate-800 mb-2",children:"Mastery Unlocked!"}),_.jsx("p",{className:"text-slate-500 font-medium mb-10 leading-relaxed",children:"Thank you for supporting OmniMaster AI. Your transaction ID has been logged for verification."}),_.jsx("button",{onClick:()=>s(e.id),className:"w-full py-5 bg-green-500 text-white font-black rounded-3xl shadow-xl hover:bg-green-600 transition-all active:scale-95",children:"Enter Mastery Chamber"})]})}),_.jsx("div",{className:"p-6 bg-slate-50 border-t border-slate-100 text-center",children:_.jsx("div",{className:"text-[9px] font-black text-slate-300 uppercase tracking-[0.2em]",children:"Direct Admin Payment  100% Secure Flow"})})]})}):null},B1=[{name:"Discovery",icon:""},{name:"Technology",icon:""},{name:"Science",icon:""},{name:"Health",icon:""},{name:"Politics",icon:""},{name:"International",icon:""},{name:"Business",icon:""},{name:"Entertainment",icon:""}],G1=({news:t,isLoading:e,onRefresh:n,selectedCategory:s,language:r,isPremium:l})=>{const u={technology:"bg-blue-100 text-blue-600",science:"bg-emerald-100 text-emerald-600",ai:"bg-purple-100 text-purple-600",education:"bg-amber-100 text-amber-600",space:"bg-indigo-100 text-indigo-600",health:"bg-rose-100 text-rose-600",politics:"bg-red-100 text-red-600",international:"bg-sky-100 text-sky-600",business:"bg-green-100 text-green-600"},f=m=>{const p=m.toLowerCase(),y=Object.keys(u).find(b=>p.includes(b));return y?u[y]:"bg-slate-100 text-slate-600"};return _.jsx("div",{className:"flex-1 overflow-y-auto bg-slate-50 p-6 md:p-12 lg:p-16",children:_.jsxs("div",{className:"max-w-4xl mx-auto space-y-10 pb-20",children:[_.jsxs("header",{className:"flex flex-col md:flex-row md:items-end justify-between gap-6",children:[_.jsxs("div",{children:[_.jsx("h2",{className:"text-4xl font-black text-slate-900 mb-2",children:"Daily Mastery Feed"}),_.jsx("p",{className:"text-slate-500 font-medium",children:"Real-time global news curated for the lifelong learner."})]}),_.jsxs("button",{onClick:()=>n(s),disabled:e,className:"flex items-center space-x-2 px-6 py-3 bg-white border border-slate-200 text-indigo-600 font-black rounded-2xl hover:bg-indigo-50 transition-all shadow-sm active:scale-95 disabled:opacity-50",children:[_.jsx("i",{className:`fas fa-sync-alt ${e?"animate-spin":""}`}),_.jsx("span",{children:"Refresh"})]})]}),_.jsx("div",{className:"flex items-center space-x-2 overflow-x-auto no-scrollbar pb-4 -mx-2 px-2",children:B1.map(m=>_.jsxs("button",{onClick:()=>n(m.name),disabled:e,className:`flex items-center space-x-2 px-5 py-2.5 rounded-2xl font-black text-xs whitespace-nowrap transition-all border-2 ${s===m.name?"bg-indigo-600 border-indigo-600 text-white shadow-lg shadow-indigo-100":"bg-white border-slate-100 text-slate-500 hover:border-indigo-200 hover:text-indigo-600"}`,children:[_.jsx("span",{children:m.icon}),_.jsx("span",{children:m.name})]},m.name))}),_.jsx(bn,{isPremium:l,type:"fluid"}),e?_.jsx("div",{className:"space-y-6",children:[1,2,3].map(m=>_.jsxs("div",{className:"bg-white p-8 rounded-[40px] border border-slate-100 animate-pulse space-y-4",children:[_.jsx("div",{className:"h-4 w-24 bg-slate-100 rounded-full"}),_.jsx("div",{className:"h-8 w-3/4 bg-slate-50 rounded-xl"}),_.jsx("div",{className:"h-4 w-full bg-slate-50 rounded-xl"}),_.jsx("div",{className:"h-4 w-1/2 bg-slate-50 rounded-xl"})]},m))}):t.length===0?_.jsxs("div",{className:"text-center py-20 bg-white rounded-[48px] border border-slate-100",children:[_.jsx("div",{className:"w-20 h-20 bg-slate-50 text-slate-300 rounded-full flex items-center justify-center mx-auto mb-6",children:_.jsx("i",{className:"fas fa-newspaper text-3xl"})}),_.jsxs("h3",{className:"text-2xl font-black text-slate-800 mb-2",children:["No ",s," news found"]}),_.jsx("p",{className:"text-slate-500 mb-8",children:"Try refreshing the feed to scan for global updates."}),_.jsx("button",{onClick:()=>n(s),className:"px-8 py-4 bg-indigo-600 text-white font-black rounded-2xl",children:"Try Again"})]}):_.jsx("div",{className:"space-y-6",children:t.map((m,p)=>_.jsxs("div",{className:"bg-white p-8 rounded-[40px] shadow-sm border border-slate-100 hover:shadow-xl hover:-translate-y-1 transition-all group animate-in slide-in-from-bottom-8 duration-500",style:{animationDelay:`${p*100}ms`},children:[_.jsxs("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-4 mb-6",children:[_.jsxs("div",{className:"flex flex-wrap gap-2",children:[_.jsx("span",{className:`px-3 py-1 rounded-lg text-[10px] font-black uppercase tracking-widest ${f(m.category)}`,children:m.category}),_.jsx("span",{className:"px-3 py-1 rounded-lg text-[10px] font-black uppercase tracking-widest bg-slate-50 text-slate-400",children:m.source})]}),_.jsx("span",{className:"text-[10px] text-slate-300 font-bold uppercase",children:new Date(m.timestamp).toLocaleDateString()})]}),_.jsx("h3",{className:"text-2xl font-black text-slate-800 mb-4 group-hover:text-indigo-600 transition-colors",children:m.title}),_.jsx("p",{className:"text-slate-600 leading-relaxed font-medium mb-8",children:m.summary}),_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsxs("a",{href:m.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-2 text-indigo-600 font-black text-sm hover:underline",children:[_.jsx("span",{children:"Read Full Article"}),_.jsx("i",{className:"fas fa-external-link-alt text-xs"})]}),_.jsxs("div",{className:"flex -space-x-2",children:[_.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-white bg-indigo-50 flex items-center justify-center text-indigo-600 text-[10px] font-black",children:_.jsx("i",{className:"fas fa-brain"})}),_.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-white bg-amber-50 flex items-center justify-center text-amber-600 text-[10px] font-black",children:_.jsx("i",{className:"fas fa-search"})})]})]})]},m.id))})]})})},z1=({notice:t,onDismiss:e,onRefresh:n})=>{const[s,r]=W.useState(!1),[l,u]=W.useState("warning"),f=async()=>{r(!0),await n(),r(!1)},m=!!(t!=null&&t.notice),p=!!(t!=null&&t.warning),y=!!(t!=null&&t.updates);if(M0.useEffect(()=>{p?u("warning"):y?u("updates"):m&&u("notice")},[p,y,m]),!m&&!p&&!y)return _.jsx("div",{className:"mb-12 flex justify-end",children:_.jsxs("button",{onClick:f,disabled:s,className:"flex items-center space-x-2 px-4 py-2 bg-white border border-slate-200 text-slate-400 hover:text-indigo-600 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all shadow-sm active:scale-95",children:[_.jsx("i",{className:`fas fa-sync-alt ${s?"animate-spin":""}`}),_.jsx("span",{children:"Check for Updates"})]})});const x=(()=>{switch(l){case"warning":return{bg:"bg-red-600",text:"text-red-700",lightBg:"bg-red-50",border:"border-red-100",icon:"fa-exclamation-triangle",label:"Urgent Alert"};case"updates":return{bg:"bg-blue-600",text:"text-blue-700",lightBg:"bg-blue-50",border:"border-blue-100",icon:"fa-microchip",label:"System Log"};default:return{bg:"bg-indigo-600",text:"text-indigo-700",lightBg:"bg-indigo-50",border:"border-indigo-100",icon:"fa-bullhorn",label:"Announcement"}}})(),w=t?t[l]:null;return _.jsx("div",{className:"bg-white rounded-[40px] border border-slate-100 shadow-xl shadow-slate-200/50 overflow-hidden animate-in slide-in-from-top-6 duration-500 mb-12",children:_.jsxs("div",{className:"flex flex-col md:flex-row min-h-[220px]",children:[_.jsxs("div",{className:`md:w-1/4 ${x.bg} p-8 text-white flex flex-col justify-center items-center text-center relative overflow-hidden transition-colors duration-500`,children:[_.jsx("div",{className:"absolute top-0 left-0 w-32 h-32 bg-white/10 rounded-full blur-3xl -ml-16 -mt-16"}),_.jsxs("div",{className:"relative z-10",children:[_.jsx("div",{className:"w-16 h-16 bg-white/20 backdrop-blur-md rounded-2xl flex items-center justify-center mx-auto mb-4 border border-white/30",children:_.jsx("i",{className:`fas ${x.icon} text-2xl ${l==="warning"?"animate-pulse":""}`})}),_.jsx("h3",{className:"text-xl font-black uppercase tracking-widest leading-tight",children:l}),_.jsx("div",{className:"mt-4 inline-block px-3 py-1 bg-white/20 backdrop-blur text-white text-[9px] font-black rounded-full uppercase tracking-tighter border border-white/20",children:x.label})]})]}),_.jsxs("div",{className:"flex-1 p-8 md:p-10 flex flex-col relative bg-white",children:[_.jsxs("div",{className:"absolute top-4 right-4 flex items-center space-x-2",children:[_.jsx("button",{onClick:f,disabled:s,className:"text-slate-300 hover:text-indigo-600 transition-colors p-2 rounded-lg hover:bg-slate-50",children:_.jsx("i",{className:`fas fa-sync-alt ${s?"animate-spin":""}`})}),_.jsx("button",{onClick:e,className:"text-slate-300 hover:text-red-500 transition-colors p-2 rounded-lg hover:bg-slate-50",children:_.jsx("i",{className:"fas fa-times"})})]}),_.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[m&&_.jsx("button",{onClick:()=>u("notice"),className:`px-3 py-1.5 rounded-xl text-[9px] font-black uppercase tracking-widest transition-all ${l==="notice"?"bg-indigo-600 text-white shadow-lg":"bg-slate-100 text-slate-400 hover:bg-slate-200"}`,children:"Notices"}),p&&_.jsx("button",{onClick:()=>u("warning"),className:`px-3 py-1.5 rounded-xl text-[9px] font-black uppercase tracking-widest transition-all ${l==="warning"?"bg-red-600 text-white shadow-lg":"bg-slate-100 text-slate-400 hover:bg-slate-200"}`,children:"Warnings"}),y&&_.jsx("button",{onClick:()=>u("updates"),className:`px-3 py-1.5 rounded-xl text-[9px] font-black uppercase tracking-widest transition-all ${l==="updates"?"bg-blue-600 text-white shadow-lg":"bg-slate-100 text-slate-400 hover:bg-slate-200"}`,children:"Updates"})]}),_.jsx("div",{className:"flex-1 flex flex-col justify-center",children:w?_.jsxs("div",{className:"space-y-4 animate-in fade-in duration-300",children:[_.jsx("p",{className:`text-lg md:text-xl font-bold leading-relaxed ${l==="warning"?"text-slate-900":"text-slate-700"}`,children:w}),_.jsxs("div",{className:"flex items-center space-x-3 text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:[_.jsx("i",{className:"far fa-clock text-indigo-400"}),_.jsx("span",{children:"Cloud Feed Active"})]})]}):_.jsx("div",{className:"text-slate-300 italic text-sm",children:"No details for this category."})})]})]})})},H1=({onGoToSettings:t,language:e,isPremium:n})=>{const{t:s}=br(e);return _.jsx("div",{className:"p-6 md:p-12 lg:p-20 bg-slate-50 min-h-full no-scrollbar overflow-y-auto",children:_.jsxs("div",{className:"max-w-4xl mx-auto space-y-16 pb-20 animate-in fade-in slide-in-from-bottom-8 duration-700",children:[_.jsxs("div",{className:"text-center",children:[_.jsx(hl,{size:"xl",className:"mx-auto mb-8 transform -rotate-6 hover:rotate-0 transition-transform duration-500"}),_.jsxs("h1",{className:"text-5xl font-black text-slate-900 mb-4 tracking-tight",children:["OmniMaster ",_.jsx("span",{className:"text-indigo-600",children:"AI"})]}),_.jsx("p",{className:"text-xl text-slate-500 font-medium max-w-2xl mx-auto",children:s("about.title")})]}),_.jsx(bn,{isPremium:n,type:"fluid"}),_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[_.jsxs("div",{className:"bg-white p-8 rounded-[40px] shadow-sm border border-slate-100 hover:shadow-xl transition-all group",children:[_.jsx("div",{className:"w-14 h-14 bg-indigo-50 text-indigo-600 rounded-2xl flex items-center justify-center text-2xl mb-6 group-hover:scale-110 transition-transform",children:_.jsx("i",{className:"fas fa-route"})}),_.jsx("h3",{className:"text-2xl font-black text-slate-800 mb-3",children:"AI Roadmaps"}),_.jsx("p",{className:"text-slate-500 leading-relaxed font-medium",children:"Simply name a subject and Omni architects a logical, step-by-step roadmap from beginner to advanced mastery."})]}),_.jsxs("div",{className:"bg-white p-8 rounded-[40px] shadow-sm border border-slate-100 hover:shadow-xl transition-all group",children:[_.jsx("div",{className:"w-14 h-14 bg-emerald-50 text-emerald-600 rounded-2xl flex items-center justify-center text-2xl mb-6 group-hover:scale-110 transition-transform",children:_.jsx("i",{className:"fas fa-book-open"})}),_.jsx("h3",{className:"text-2xl font-black text-slate-800 mb-3",children:"Deep-Dive Lessons"}),_.jsx("p",{className:"text-slate-500 leading-relaxed font-medium",children:"Every topic is explained in rich detail with core pillars, practical insights, and real-world examples generated instantly."})]}),_.jsxs("div",{className:"bg-white p-8 rounded-[40px] shadow-sm border border-slate-100 hover:shadow-xl transition-all group",children:[_.jsx("div",{className:"w-14 h-14 bg-amber-50 text-amber-600 rounded-2xl flex items-center justify-center text-2xl mb-6 group-hover:scale-110 transition-transform",children:_.jsx("i",{className:"fas fa-tasks"})}),_.jsx("h3",{className:"text-2xl font-black text-slate-800 mb-3",children:"Mastery Quizzes"}),_.jsx("p",{className:"text-slate-500 leading-relaxed font-medium",children:"Test your knowledge after every lesson with AI-generated challenging quizzes that ensure you've truly understood the material."})]}),_.jsxs("div",{className:"bg-white p-8 rounded-[40px] shadow-sm border border-slate-100 hover:shadow-xl transition-all group",children:[_.jsx("div",{className:"w-14 h-14 bg-indigo-600 text-white rounded-2xl flex items-center justify-center text-2xl mb-6 group-hover:scale-110 transition-transform",children:_.jsx("i",{className:"fas fa-robot"})}),_.jsx("h3",{className:"text-2xl font-black text-slate-800 mb-3",children:"Omni: AI Bestie"}),_.jsx("p",{className:"text-slate-500 leading-relaxed font-medium",children:"An interactive, proactive buddy who watches your progress, encourages you, and answers any questions via voice or chat."})]})]}),_.jsxs("div",{className:"bg-white p-10 rounded-[40px] shadow-sm border border-slate-100 flex flex-col md:flex-row items-center justify-between gap-8",children:[_.jsxs("div",{className:"flex items-center space-x-6",children:[_.jsx("div",{className:"w-20 h-20 bg-slate-100 rounded-full flex items-center justify-center text-slate-400 text-3xl",children:_.jsx("i",{className:"fas fa-user-tie"})}),_.jsxs("div",{children:[_.jsx("p",{className:"text-xs font-black text-indigo-600 uppercase tracking-widest mb-1",children:"Developer Credits"}),_.jsx("h4",{className:"text-2xl font-black text-slate-800",children:"Sahil Singh"}),_.jsx("p",{className:"text-slate-500 font-medium",children:"Innovation driven by AI & Education."})]})]}),_.jsxs("div",{className:"flex flex-col items-center md:items-end space-y-4",children:[_.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Query & Contact"}),_.jsxs("div",{className:"flex flex-col gap-2 w-full md:w-auto",children:[_.jsxs("a",{href:"https://www.instagram.com/sah.si_?igsh=YmloN3FrZDg0dDQ4",target:"_blank",rel:"noopener noreferrer",className:"bg-indigo-50 px-6 py-3 rounded-2xl text-indigo-600 font-black text-sm hover:bg-indigo-100 transition-all flex items-center justify-center md:justify-start space-x-3",children:[_.jsx("i",{className:"fab fa-instagram text-lg"}),_.jsx("span",{children:"Instagram @sah.si_"})]}),_.jsxs("a",{href:"mailto:shahils.sahsi@gmail.com",className:"bg-slate-50 px-6 py-3 rounded-2xl text-slate-600 font-black text-sm hover:bg-slate-100 transition-all flex items-center justify-center md:justify-start space-x-3",children:[_.jsx("i",{className:"far fa-envelope text-lg"}),_.jsx("span",{children:"shahils.sahsi@gmail.com"})]})]})]})]})]})})},V1=({onBack:t,language:e,isPremium:n})=>_.jsx("div",{className:"flex-1 overflow-y-auto p-6 lg:p-12 bg-slate-50 no-scrollbar",children:_.jsxs("div",{className:"max-w-3xl mx-auto pb-20",children:[_.jsxs("header",{className:"mb-12",children:[_.jsxs("button",{onClick:t,className:"mb-6 flex items-center text-slate-500 hover:text-indigo-600 font-semibold transition-colors",children:[_.jsx("i",{className:"fas fa-arrow-left mr-2"})," Back"]}),_.jsx("h2",{className:"text-4xl font-black text-slate-900 mb-2 tracking-tight",children:"Blackened Database Policy"}),_.jsx("p",{className:"text-slate-500 font-medium",children:"Understanding your Data Sovereignty in OmniMaster AI."})]}),_.jsx(bn,{isPremium:n,type:"fluid",className:"mb-10"}),_.jsxs("div",{className:"space-y-10",children:[_.jsxs("section",{className:"bg-white p-8 rounded-[40px] shadow-sm border border-slate-100",children:[_.jsx("div",{className:"w-12 h-12 bg-slate-900 text-white rounded-2xl flex items-center justify-center mb-6",children:_.jsx("i",{className:"fas fa-database"})}),_.jsx("h3",{className:"text-2xl font-black text-slate-800 mb-4",children:'1. What is a "Blackened" Database?'}),_.jsxs("p",{className:"text-slate-600 leading-relaxed mb-4",children:["At OmniMaster AI, we employ a ",_.jsx("strong",{children:"Zero-Visibility Architecture"}),'. We call this our "Blackened Database" policy because your data is invisible (Black) to everyone except you.']}),_.jsxs("ul",{className:"space-y-3 text-slate-600",children:[_.jsxs("li",{className:"flex items-start",children:[_.jsx("i",{className:"fas fa-check text-indigo-500 mt-1.5 mr-3 text-xs"}),_.jsxs("span",{children:[_.jsx("strong",{children:"No Cloud Storage:"})," Your roadmaps, quiz results, and chat history are never sent to our servers."]})]}),_.jsxs("li",{className:"flex items-start",children:[_.jsx("i",{className:"fas fa-check text-indigo-500 mt-1.5 mr-3 text-xs"}),_.jsxs("span",{children:[_.jsx("strong",{children:"Local Encryption:"})," Data is stored in your browser's ",_.jsx("code",{children:"localStorage"}),", inaccessible to other websites."]})]}),_.jsxs("li",{className:"flex items-start",children:[_.jsx("i",{className:"fas fa-check text-indigo-500 mt-1.5 mr-3 text-xs"}),_.jsxs("span",{children:[_.jsx("strong",{children:"Opaque Processing:"}),' Gemini AI processes your requests, but the resulting "Mastery Database" is built and housed strictly on your device.']})]})]})]}),_.jsxs("section",{className:"bg-white p-8 rounded-[40px] shadow-sm border border-slate-100",children:[_.jsx("div",{className:"w-12 h-12 bg-red-600 text-white rounded-2xl flex items-center justify-center mb-6",children:_.jsx("i",{className:"fas fa-fire"})}),_.jsx("h3",{className:"text-2xl font-black text-slate-800 mb-4",children:"2. The Incineration Protocol"}),_.jsxs("p",{className:"text-slate-600 leading-relaxed mb-4",children:["You possess the absolute right to incinerate your data. When you select ",_.jsx("strong",{children:'"Delete Everything"'})," in your settings, the following occurs:"]}),_.jsxs("div",{className:"bg-slate-50 p-6 rounded-3xl border border-slate-200 font-mono text-sm text-slate-700",children:["[SYSTEM] Triggering Blackened_Wipe_Sequence...",_.jsx("br",{}),"[STATUS] LocalStorage Keys Identified: 4",_.jsx("br",{}),"[ACTION] Scrubbing omnimaster_auth... DONE",_.jsx("br",{}),"[ACTION] Scrubbing omnimaster_subjects... DONE",_.jsx("br",{}),"[ACTION] Scrubbing omnimaster_usage... DONE",_.jsx("br",{}),"[RESULT] 0 bytes remaining. Digital footprint neutralized."]})]}),_.jsxs("section",{className:"bg-white p-8 rounded-[40px] shadow-sm border border-slate-100",children:[_.jsx("div",{className:"w-12 h-12 bg-indigo-600 text-white rounded-2xl flex items-center justify-center mb-6",children:_.jsx("i",{className:"fas fa-file-export"})}),_.jsx("h3",{className:"text-2xl font-black text-slate-800 mb-4",children:"3. Data Portability"}),_.jsx("p",{className:"text-slate-600 leading-relaxed mb-4",children:"Because your database is blackened (local), it is also fragile. If you switch devices or clear your browser cache manually, your progress will be lost."}),_.jsxs("p",{className:"text-slate-600 leading-relaxed",children:["We provide a ",_.jsx("strong",{children:"JSON Export"}),' tool. This allows you to take your "Blackened Database" and move it to another device, maintaining your data sovereignty without ever needing a cloud middleman.']})]}),_.jsxs("section",{className:"bg-slate-900 p-10 rounded-[48px] text-white",children:[_.jsxs("h3",{className:"text-2xl font-black mb-6 flex items-center",children:[_.jsx("i",{className:"fas fa-user-shield mr-4 text-indigo-400"}),"Summary of Rights"]}),_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[_.jsxs("div",{children:[_.jsx("h4",{className:"font-bold text-indigo-400 mb-2",children:"You Own:"}),_.jsx("p",{className:"text-sm opacity-80",children:"Every module, every topic, and every word of your roadmap."})]}),_.jsxs("div",{children:[_.jsx("h4",{className:"font-bold text-indigo-400 mb-2",children:"We See:"}),_.jsx("p",{className:"text-sm opacity-80",children:"Absolutely nothing. Your learning journey is your own."})]})]})]})]})]})});var j1={};const $1=[{name:"Quantum Physics",icon:"fa-atom",color:"bg-purple-600"},{name:"Public Speaking",icon:"fa-microphone",color:"bg-rose-600"},{name:"Python Coding",icon:"fa-code",color:"bg-blue-600"},{name:"World History",icon:"fa-landmark",color:"bg-amber-600"},{name:"Graphic Design",icon:"fa-palette",color:"bg-pink-600"},{name:"Marketing",icon:"fa-bullhorn",color:"bg-emerald-600"}],F1=()=>{const[t,e]=W.useState({authUser:Fe.getUser(),currentSubjectId:null,savedSubjects:[],selectedStepId:null,selectedTopic:null,topicDetail:null,quiz:null,isLoading:!1,isNewsLoading:!1,loadingMessage:null,error:null,userSettings:Fe.getSettings()||{userName:"Learner",aiVoice:"female",language:"English",companionPersona:"Friend",isPremium:!1,isPublicProfile:!0,isPublicPaths:!1},currentQuote:null,usage:Fe.getUsage(),dailyNews:[],notice:null});br(t.userSettings.language);const[n,s]=W.useState("home"),[r,l]=W.useState(!1),[u,f]=W.useState(null),[m,p]=W.useState(!1),[y,b]=W.useState(!!j1.GROQ_API_KEY),x=W.useRef(t);W.useEffect(()=>{x.current=t},[t]);const w=W.useCallback(async()=>{const N=Fe.getUser();if(!N)return;let H=Fe.getSubjects(N.id),V=Fe.getSettings()||t.userSettings,Z=Fe.getUsage(),Y=null;if(!N.isGuest){const ee=await Fe.recoverFromCloud(N.id);ee&&(H=ee.subjects||H,V=ee.settings||V,Z=ee.usage||Z);const fe=await It.getProfile(N.id);if(fe){const he=fe.premium===!0;V={...V,isPremium:he,userName:fe.name||V.userName},N.emoji=fe.emoji||N.emoji,Fe.saveUser(N),Fe.saveSettings(V)}Y=await It.fetchNotice(N.id)}e(ee=>({...ee,authUser:N,savedSubjects:H,userSettings:V,usage:Z,notice:Y}))},[]);W.useEffect(()=>{w()},[w]);const E=W.useCallback(async()=>{!t.authUser||t.authUser.isGuest||await Fe.syncToCloud(t.authUser.id,{subjects:x.current.savedSubjects,settings:x.current.userSettings,usage:x.current.usage})},[t.authUser]);W.useEffect(()=>{const N=setTimeout(E,4e3);return()=>clearTimeout(N)},[t.savedSubjects,t.userSettings,t.usage,E]);const A=N=>{var Z,Y;const V=((Z=N==null?void 0:N.message)==null?void 0:Z.toLowerCase().includes("quota"))||((Y=N==null?void 0:N.message)==null?void 0:Y.includes("429"))||(N==null?void 0:N.status)===429?"AI Quota Exceeded. Please wait 60 seconds.":"Teacher is not responding. Check your connection.";e(ee=>({...ee,isLoading:!1,error:V}))},C=W.useCallback(async(N="Discovery")=>{if(!t.isNewsLoading){e(H=>({...H,isNewsLoading:!0}));try{const H=await _1(N,t.userSettings.language);e(V=>({...V,dailyNews:H,isNewsLoading:!1}))}catch(H){e(V=>({...V,isNewsLoading:!1})),A(H)}}},[t.userSettings.language,t.isNewsLoading]);W.useEffect(()=>{n==="news"&&t.dailyNews.length===0&&!t.isNewsLoading&&C("Discovery")},[n,t.dailyNews.length,t.isNewsLoading,C]);const I=async N=>{if(N.trim()){if(!t.userSettings.isPremium&&t.savedSubjects.length>=3){l(!0);return}e(H=>({...H,isLoading:!0,loadingMessage:"Omni is architecting your path...",error:null}));try{const H=await g1(N,t.userSettings.language),V={id:Math.random().toString(36).substr(2,9),subject:H.subject,roadmap:H,completedTopics:[],createdAt:Date.now()},Z=[V,...t.savedSubjects];e(Y=>({...Y,savedSubjects:Z,currentSubjectId:V.id,isLoading:!1})),Fe.saveSubjects(t.authUser.id,Z),s("roadmap")}catch(H){A(H)}}},O=async(N,H)=>{var Y;const V=t.currentSubjectId;if(!V)return;const Z=Fe.getUsage();if(!t.userSettings.isPremium){const ee=((Y=Z.dailySubjectLessons)==null?void 0:Y[V])||0,fe=Z.dailyTopicsCount||0;if(ee>=3){e(he=>({...he,error:"Subject Limit: 3 topics per subject."})),l(!0);return}if(fe>=9){e(he=>({...he,error:"Daily Limit: 9 topics per day."})),l(!0);return}}e(ee=>({...ee,isLoading:!0,loadingMessage:"Fetching deep insights...",selectedTopic:H,selectedStepId:N,error:null})),p(!1);try{const ee=t.savedSubjects.find(he=>he.id===V),fe=await y1(H,(ee==null?void 0:ee.subject)||"",t.userSettings.language);if(t.userSettings.isPremium)e(he=>({...he,topicDetail:fe,isLoading:!1}));else{const he=Fe.incrementUsage(V);e(ae=>({...ae,usage:he,topicDetail:fe,isLoading:!1}))}}catch(ee){A(ee)}};if(!t.authUser)return _.jsx(R1,{onLogin:N=>{Fe.saveUser(N),w()}});const D=t.savedSubjects.find(N=>N.id===t.currentSubjectId),P=Fe.calculateMasteryPoints(t.savedSubjects);return _.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col h-screen overflow-hidden font-inter selection:bg-indigo-100 selection:text-indigo-900",children:[r&&_.jsx(q1,{userId:t.authUser.id,plan:{id:"life",name:"Mastery Tier Lifetime",price:"99",duration:"Forever"},onClose:()=>l(!1),onSuccess:()=>w()}),t.usage.dailyRewardClaimed===!1&&_.jsx(L1,{streak:t.usage.streak,onClaim:()=>{const N={...t.usage,dailyRewardClaimed:!0,streak:t.usage.streak+1};Fe.saveUsage(N),e(H=>({...H,usage:N}))}}),_.jsxs("nav",{className:"h-16 bg-white border-b border-slate-200 px-4 md:px-6 flex items-center justify-between shrink-0 z-50 shadow-sm",children:[_.jsxs("div",{className:"flex items-center space-x-2 md:space-x-3 cursor-pointer group",onClick:()=>s("home"),children:[_.jsx(hl,{size:"sm"}),_.jsxs("span",{className:"font-black text-slate-800 text-sm md:text-base tracking-tight",children:["OmniMaster ",_.jsx("span",{className:"text-indigo-600",children:"AI"})]}),y&&_.jsxs("div",{className:"hidden sm:flex bg-amber-100 text-amber-700 px-2 py-0.5 rounded-full text-[8px] font-black uppercase tracking-tighter items-center space-x-1",children:[_.jsx("i",{className:"fas fa-bolt"}),_.jsx("span",{children:"Turbo"})]})]}),_.jsx("div",{className:"hidden md:flex items-center space-x-2",children:["subjects","news","leaderboard","settings"].map(N=>_.jsx("button",{onClick:()=>s(N),className:`text-[10px] font-black uppercase tracking-widest px-4 py-2 rounded-xl transition-all ${n===N?"bg-indigo-600 text-white shadow-lg":"text-slate-500 hover:bg-slate-100"}`,children:N==="subjects"?"My Roads":N==="news"?"Feed":N==="leaderboard"?"Ranks":"Settings"},N))}),_.jsxs("button",{onClick:()=>s("profile"),className:"w-8 h-8 md:w-10 md:h-10 rounded-xl border-2 border-indigo-50 overflow-hidden shadow-sm transition-transform active:scale-95 group relative",children:[_.jsx("img",{src:t.authUser.emoji?`https://ui-avatars.com/api/?name=${encodeURIComponent(t.authUser.emoji)}&background=indigo&color=fff`:t.authUser.photoUrl,className:"w-full h-full object-cover",alt:"Profile"}),t.userSettings.isPremium&&_.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-blue-500 border-2 border-white rounded-full"})]})]}),t.error&&_.jsxs("div",{className:"bg-red-600 text-white py-2 px-4 text-center text-[10px] font-black uppercase tracking-widest animate-in slide-in-from-top duration-300 z-[60]",children:[_.jsx("i",{className:"fas fa-exclamation-triangle mr-2"}),t.error,_.jsx("button",{onClick:()=>e(N=>({...N,error:null})),className:"ml-4 underline",children:"Dismiss"})]}),_.jsxs("main",{className:"flex-1 flex overflow-hidden relative",children:[n==="home"&&_.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-12 no-scrollbar scroll-smooth",children:_.jsxs("div",{className:"max-w-4xl mx-auto space-y-8 pb-32",children:[_.jsx(z1,{notice:t.notice,onDismiss:()=>e(N=>({...N,notice:null})),onRefresh:w}),_.jsxs("div",{className:"bg-indigo-600 p-8 md:p-16 rounded-[40px] shadow-2xl text-white relative overflow-hidden group",children:[_.jsx("div",{className:"absolute top-0 right-0 p-12 opacity-5 pointer-events-none group-hover:rotate-12 transition-transform duration-1000",children:_.jsx("i",{className:"fas fa-brain text-[120px]"})}),_.jsxs("h3",{className:"text-2xl md:text-4xl font-black mb-8 leading-tight relative z-10",children:["Architect your way",_.jsx("br",{}),"to total mastery"]}),_.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 relative z-10",children:[_.jsx("input",{type:"text",placeholder:"e.g. Arabic, Quantum Physics...",className:"flex-1 px-6 py-4 bg-white/10 border-2 border-white/20 rounded-2xl outline-none placeholder:text-white/30 font-bold focus:bg-white/20 transition-all",onKeyPress:N=>N.key==="Enter"&&I(N.target.value)}),_.jsx("button",{onClick:N=>I(N.target.previousSibling.value),className:"px-10 py-4 bg-white text-indigo-600 font-black rounded-2xl shadow-xl active:scale-90 transition-all",children:"Architect"})]})]}),_.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:$1.map((N,H)=>_.jsxs("button",{onClick:()=>I(N.name),className:"bg-white p-5 rounded-[32px] border border-slate-100 hover:shadow-xl transition-all flex items-center space-x-4 text-left animate-in fade-in slide-in-from-bottom-2 duration-500",style:{animationDelay:`${H*50}ms`},children:[_.jsx("div",{className:`w-10 h-10 ${N.color} text-white rounded-xl flex items-center justify-center shadow-md`,children:_.jsx("i",{className:`fas ${N.icon}`})}),_.jsx("span",{className:"font-black text-slate-700 text-xs truncate",children:N.name})]},N.name))}),_.jsxs("div",{className:"flex justify-center space-x-6 pt-4",children:[_.jsx("button",{onClick:()=>s("about"),className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-400 hover:text-indigo-600 transition-colors",children:"About Omni"}),_.jsx("button",{onClick:()=>s("policy"),className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-400 hover:text-indigo-600 transition-colors",children:"Database Policy"})]}),_.jsx(bn,{isPremium:t.userSettings.isPremium,type:"display"})]})}),n==="news"&&_.jsx(G1,{news:t.dailyNews,isLoading:t.isNewsLoading,onRefresh:C,selectedCategory:"Discovery",language:t.userSettings.language,isPremium:t.userSettings.isPremium}),n==="subjects"&&_.jsx(A1,{subjects:t.savedSubjects,onSelectSubject:N=>{e(H=>({...H,currentSubjectId:N,topicDetail:null,selectedTopic:null,error:null})),s("roadmap")},onDeleteSubject:N=>e(H=>({...H,savedSubjects:H.savedSubjects.filter(V=>V.id!==N)})),onAddNew:()=>s("home"),activeSubjectId:t.currentSubjectId,language:t.userSettings.language,isPremium:t.userSettings.isPremium}),n==="leaderboard"&&_.jsx(U1,{currentUser:t.authUser,subjects:t.savedSubjects,onLoginRequired:()=>s("home"),onSelectUser:N=>{f(N),s("publicProfile")},isPremium:t.userSettings.isPremium}),n==="profile"&&_.jsx(D1,{user:t.authUser,subjects:t.savedSubjects,streak:t.usage.streak,masteryPoints:P,isPremium:t.userSettings.isPremium,onUpdateProfile:async(N,H,V)=>{const Z={...t.authUser,name:N,photoUrl:H,emoji:V};Fe.saveUser(Z),w(),await It.updateProfile(Z.id,{name:N,emoji:V})},language:t.userSettings.language,onGoToSettings:()=>s("settings")}),n==="settings"&&_.jsx(N1,{settings:t.userSettings,authUser:t.authUser,onUpdateSettings:N=>e(H=>({...H,userSettings:N})),onLogout:()=>{Fe.clearAuth(),window.location.reload()},onDeleteAccount:()=>{},onBack:()=>s("home"),onDataRestored:()=>w(),onManualSync:async()=>(await E(),!0)}),n==="publicProfile"&&u&&_.jsx(O1,{currentUser:t.authUser,profileUser:u,onBack:()=>s("leaderboard"),isPremium:t.userSettings.isPremium}),n==="about"&&_.jsx(H1,{onGoToSettings:()=>s("settings"),language:t.userSettings.language,isPremium:t.userSettings.isPremium}),n==="policy"&&_.jsx(V1,{onBack:()=>s("home"),language:t.userSettings.language,isPremium:t.userSettings.isPremium}),n==="roadmap"&&D&&_.jsxs("div",{className:"flex flex-1 overflow-hidden relative",children:[_.jsxs("button",{onClick:()=>p(!0),className:"lg:hidden fixed bottom-28 left-6 z-[65] bg-white border border-slate-100 text-indigo-600 px-6 py-3 rounded-full shadow-2xl font-black text-[10px] uppercase tracking-widest flex items-center space-x-2 animate-in slide-in-from-left duration-500",children:[_.jsx("i",{className:"fas fa-list-ul"}),_.jsx("span",{children:"Module Map"})]}),m&&_.jsxs("div",{className:"fixed inset-0 z-[100] lg:hidden",children:[_.jsx("div",{className:"absolute inset-0 bg-slate-900/50 backdrop-blur-md",onClick:()=>p(!1)}),_.jsx("div",{className:"absolute inset-y-0 left-0 w-80 max-w-[85vw] bg-white shadow-2xl animate-in slide-in-from-left duration-300",children:_.jsx(I0,{roadmap:D.roadmap,selectedStepId:t.selectedStepId,selectedTopic:t.selectedTopic,onSelectTopic:O,completedTopics:D.completedTopics,language:t.userSettings.language,onClose:()=>p(!1)})})]}),_.jsx("div",{className:"w-80 border-r border-slate-200 hidden lg:block bg-white shrink-0 overflow-y-auto no-scrollbar",children:_.jsx(I0,{roadmap:D.roadmap,selectedStepId:t.selectedStepId,selectedTopic:t.selectedTopic,onSelectTopic:O,completedTopics:D.completedTopics,language:t.userSettings.language})}),_.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-12 bg-slate-50 no-scrollbar relative scroll-smooth",children:t.isLoading?_.jsxs("div",{className:"h-full flex flex-col items-center justify-center space-y-4",children:[_.jsx("div",{className:"w-12 h-12 border-4 border-indigo-100 border-t-indigo-600 rounded-full animate-spin"}),_.jsx("p",{className:"font-black text-indigo-600 text-[10px] uppercase tracking-[0.3em] animate-pulse",children:t.loadingMessage})]}):t.topicDetail?_.jsxs("div",{className:"max-w-3xl mx-auto space-y-8 pb-32 animate-in fade-in slide-in-from-bottom-6 duration-700",children:[_.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[_.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-indigo-400",children:"Lesson Depth"}),y&&_.jsx("span",{className:"text-[8px] bg-amber-500 text-white px-2 py-0.5 rounded-full font-black animate-pulse",children:"TURBO ENABLED"})]}),_.jsx("h2",{className:"text-3xl md:text-5xl font-black text-slate-900 leading-tight tracking-tight",children:t.topicDetail.title}),_.jsx("div",{className:"bg-white p-6 md:p-12 rounded-[40px] shadow-sm border border-slate-100 markdown-body leading-relaxed",children:_.jsx("div",{dangerouslySetInnerHTML:{__html:Pe.parse(t.topicDetail.content)}})}),_.jsx(bn,{isPremium:t.userSettings.isPremium,type:"article"}),_.jsx("button",{onClick:async()=>{e(N=>({...N,isLoading:!0,loadingMessage:"Curating Mastery Test..."}));try{const N=await v1(t.selectedTopic,D.subject,t.userSettings.language);e(H=>({...H,quiz:N,isLoading:!1})),s("quiz")}catch(N){A(N)}},className:"px-12 py-5 bg-indigo-600 text-white font-black rounded-[32px] shadow-xl hover:scale-105 active:scale-95 transition-all text-sm md:text-base",children:"Take Mastery Quiz"})]}):_.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-300 px-10 text-center",children:[_.jsx(hl,{size:"lg",className:"opacity-10 mb-6"}),_.jsx("p",{className:"font-black uppercase tracking-[0.2em] text-xs opacity-50",children:"Choose a topic from the Module Map to begin your expansion."})]})})]}),n==="quiz"&&t.quiz&&_.jsx("div",{className:"flex-1 p-4 md:p-12 bg-slate-100 overflow-y-auto no-scrollbar scroll-smooth",children:_.jsx("div",{className:"max-w-2xl mx-auto pb-40",children:_.jsx(E1,{questions:t.quiz,onComplete:()=>{const N=t.savedSubjects.map(H=>H.id===t.currentSubjectId?{...H,completedTopics:[...new Set([...H.completedTopics,t.selectedTopic])]}:H);e(H=>({...H,savedSubjects:N})),Fe.saveSubjects(t.authUser.id,N),s("roadmap")},language:t.userSettings.language,isPremium:t.userSettings.isPremium})})})]}),_.jsx("nav",{className:"md:hidden h-20 bg-white border-t border-slate-200 flex items-center justify-around z-[70] fixed bottom-0 inset-x-0 pb-safe shadow-inner px-2",children:[{id:"home",icon:"home",label:"Home"},{id:"subjects",icon:"route",label:"Roads"},{id:"news",icon:"newspaper",label:"Feed"},{id:"leaderboard",icon:"trophy",label:"Ranks"},{id:"settings",icon:"cog",label:"Settings"}].map(N=>_.jsxs("button",{onClick:()=>s(N.id),className:`flex flex-col items-center transition-all px-2 ${n===N.id?"text-indigo-600 scale-110":"text-slate-400"}`,children:[_.jsx("i",{className:`fas fa-${N.icon} text-lg mb-1`}),_.jsx("span",{className:"text-[8px] font-black uppercase tracking-widest leading-none",children:N.label})]},N.id))}),_.jsx(w1,{appState:t}),_.jsx("a",{href:"https://www.instagram.com/sah.si_?igsh=YmloN3FrZDg0dDQ4",target:"_blank",className:"fixed bottom-48 right-6 bg-white p-4 rounded-full shadow-2xl border border-slate-100 text-indigo-600 z-[60] transition-transform active:scale-90",title:"Admin Support",children:_.jsx("i",{className:"fab fa-instagram text-2xl"})})]})},i_=document.getElementById("root");if(!i_)throw new Error("Could not find root element to mount to");const J1=zx.createRoot(i_);J1.render(_.jsx(M0.StrictMode,{children:_.jsx(F1,{})}));
